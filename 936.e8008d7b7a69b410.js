"use strict";(self.webpackChunkCRM=self.webpackChunkCRM||[]).push([[936],{1740:(mt,ce,b)=>{b.d(ce,{S:()=>Te});var J=b(801),u=b(1223),F=b(5826),Y=b(554),Z=b(9808),o=b(9444);const ee=function(){return["/funil/new"]};function te(m,k){1&m&&(u.TgZ(0,"div",10),u._UZ(1,"img",11),u.TgZ(2,"p"),u._uU(3,"Adicionar novo funil"),u.qZA()()),2&m&&u.Q6J("routerLink",u.DdM(1,ee))}const ne=function(){return["/funil/all"]};function P(m,k){if(1&m&&(u.TgZ(0,"div",12),u._UZ(1,"fa-icon",7),u.TgZ(2,"p"),u._uU(3,"Mostrar todos os funis"),u.qZA()()),2&m){const v=u.oxw(2);u.Q6J("routerLink",u.DdM(2,ne)),u.xp6(1),u.Q6J("icon",v.allFunnels)}}function ye(m,k){if(1&m&&(u.TgZ(0,"nav",4)(1,"div",5)(2,"div",6),u._UZ(3,"fa-icon",7),u.qZA(),u.YNc(4,te,4,2,"div",8),u.YNc(5,P,4,3,"div",9),u.qZA()()),2&m){const v=u.oxw();u.xp6(2),u.Q6J("routerLink",v.routerBack),u.xp6(1),u.Q6J("icon",v.back),u.xp6(1),u.Q6J("ngIf","funil/new"!==v.routes),u.xp6(1),u.Q6J("ngIf","funil/all"!==v.routes)}}const xe=function(){return["/vendedor/new"]};function Pe(m,k){1&m&&(u.TgZ(0,"div",15),u._UZ(1,"img",11),u.TgZ(2,"p"),u._uU(3,"Adicionar novo Vendedor"),u.qZA()()),2&m&&u.Q6J("routerLink",u.DdM(1,xe))}function le(m,k){if(1&m&&(u.TgZ(0,"nav",13)(1,"div",5)(2,"div",6),u._UZ(3,"fa-icon",7),u.qZA(),u.YNc(4,Pe,4,2,"div",14),u.qZA()()),2&m){const v=u.oxw();u.xp6(2),u.Q6J("routerLink",v.routerBack),u.xp6(1),u.Q6J("icon",v.back),u.xp6(1),u.Q6J("ngIf","vendedor"==v.routes)}}const Oe=function(){return["/landingPage/new"]};function Me(m,k){if(1&m&&(u.TgZ(0,"nav",16)(1,"div",5)(2,"div",6),u._UZ(3,"fa-icon",7),u.qZA(),u.TgZ(4,"div",17),u._UZ(5,"img",11),u.TgZ(6,"p"),u._uU(7,"Adicionar nova Landing Page"),u.qZA()()()()),2&m){const v=u.oxw();u.xp6(2),u.Q6J("routerLink",v.routerBack),u.xp6(1),u.Q6J("icon",v.back),u.xp6(1),u.Q6J("routerLink",u.DdM(3,Oe))}}function we(m,k){if(1&m&&(u.TgZ(0,"nav",18)(1,"div",5)(2,"div",6),u._UZ(3,"fa-icon",7),u.qZA()()()),2&m){const v=u.oxw();u.xp6(2),u.Q6J("routerLink",v.routerBack),u.xp6(1),u.Q6J("icon",v.back)}}let Te=(()=>{class m{constructor(v,U){var re;this.route=v,this.headerService=U,this.routerBack="/home",this.hiddenButton="show",this.back=J.acZ,this.allFunnels=J.Mdf,this.addFunnel=J.KS0,this.routes=null===(re=v.snapshot.pathFromRoot[1].routeConfig)||void 0===re?void 0:re.path}ngOnInit(){}}return m.\u0275fac=function(v){return new(v||m)(u.Y36(F.gz),u.Y36(Y.r))},m.\u0275cmp=u.Xpm({type:m,selectors:[["app-navbar"]],inputs:{routerBack:"routerBack",hiddenButton:"hiddenButton"},decls:4,vars:4,consts:[["class","navbar",4,"ngIf"],["style","background-color: #3e96f5;","class","navbar",4,"ngIf"],["style","background-color: #9e77f5;;","class","navbar",4,"ngIf"],["style","background-color: #00e676;;","class","navbar",4,"ngIf"],[1,"navbar"],[1,"nav-content"],["id","back",1,"back",3,"routerLink"],[3,"icon"],["class","add","id","add",3,"routerLink",4,"ngIf"],["class","all","id","all",3,"routerLink",4,"ngIf"],["id","add",1,"add",3,"routerLink"],["src","assets/img/botao-adicionar.png","alt",""],["id","all",1,"all",3,"routerLink"],[1,"navbar",2,"background-color","#3e96f5"],["style","width: 260px","class","add","id","add",3,"routerLink",4,"ngIf"],["id","add",1,"add",2,"width","260px",3,"routerLink"],[1,"navbar",2,"background-color","#9e77f5"],["id","add",1,"add",2,"width","290px",3,"routerLink"],[1,"navbar",2,"background-color","#00e676"]],template:function(v,U){1&v&&(u.YNc(0,ye,6,4,"nav",0),u.YNc(1,le,5,3,"nav",1),u.YNc(2,Me,8,4,"nav",2),u.YNc(3,we,4,2,"nav",3)),2&v&&(u.Q6J("ngIf",null==U.routes?null:U.routes.includes("funil")),u.xp6(1),u.Q6J("ngIf",null==U.routes?null:U.routes.includes("vendedor")),u.xp6(1),u.Q6J("ngIf",null==U.routes?null:U.routes.includes("landingPage")),u.xp6(1),u.Q6J("ngIf",null==U.routes?null:U.routes.includes("cliente")))},directives:[Z.O5,F.rH,o.BN],styles:[".navbar[_ngcontent-%COMP%]{display:inline-flex;position:relative;justify-content:center;align-items:center;width:100%;padding:5px;background-color:#efab35;box-shadow:2px 3px 5px gray}.nav-content[_ngcontent-%COMP%]{max-width:1200px;display:flex;align-items:center;justify-content:left;width:68%}.nav-content[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:30px;color:#fff}.nav-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;color:#f3f3f3;font-weight:600}.nav-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}.nav-content[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-right:20px;width:50px;border:3px solid white;border-radius:5px}.nav-content[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;width:250px;border:3px solid white;border-radius:10px}.nav-content[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;align-items:center;width:220px;border:3px solid white;border-radius:10px;margin-right:20px}#back[_ngcontent-%COMP%]:hover, #add[_ngcontent-%COMP%]:hover, #all[_ngcontent-%COMP%]:hover{border:3px solid #cfcfcf;cursor:pointer}"]}),m})()},4936:(mt,ce,b)=>{b.r(ce),b.d(ce,{LandingPageModule:()=>Bn});var J=b(9808),u=b(9444),F=b(5826),Y=b(801),Z=b(534),o=b(1223),ee=b(4141),te=b(5700),ne=b(1740),P=b(2382);function ye(t,e){if(1&t&&(o.TgZ(0,"option",28),o._uU(1),o.qZA()),2&t){const n=e.$implicit;o.Q6J("value",n.nome),o.xp6(1),o.Oqu(n.nome)}}function xe(t,e){if(1&t&&(o.TgZ(0,"option",28),o._uU(1),o.qZA()),2&t){const n=e.$implicit;o.Q6J("value",n.nome),o.xp6(1),o.Oqu(n.nome)}}function Pe(t,e){if(1&t){const n=o.EpF();o.TgZ(0,"div",29)(1,"div",30),o._UZ(2,"fa-icon",31),o.TgZ(3,"p"),o._uU(4),o.qZA()(),o.TgZ(5,"div",32)(6,"fa-icon",33),o.NdJ("click",function(){const i=o.CHM(n).index;return o.oxw().editarCampos(i)}),o.qZA()()()}if(2&t){const n=e.$implicit,r=o.oxw();o.xp6(2),o.Q6J("icon",r.campo),o.xp6(2),o.AsE("Campo: ",n.campo," / Tipo: ",n.tipo,""),o.xp6(2),o.Q6J("icon",r.edit)}}let le=(()=>{class t{constructor(n,r,a,i){this.service=n,this.fireservice=r,this.router=a,this.activeRoute=i,this.landing={},this.backPage="/landingPage",this.Datalanding=[],this.produtos=[],this.add=Y.r8p,this.campo=Z.cw,this.delete=Z.I7,this.edit=Z.Xc,this.funis=[],this.id="",this.camposEdit={campo:"",tipo:""},this.campos={campo:"",tipo:"",tratado:""},this.arrayCampos=[]}ngOnInit(){this.id=this.activeRoute.snapshot.params.id,this.service.getLandingId(this.id).subscribe(n=>{this.Datalanding=n[0],console.log(this.Datalanding)}),this.service.getProdutos().subscribe(n=>{this.produtos=n,console.log(this.produtos)}),this.service.getFunil().subscribe(n=>{this.funis=n,console.log(this.produtos)})}editarCampos(n){this.camposEdit=this.Datalanding.campos[n]}addCampos(){let n=JSON.stringify(this.campos),r=JSON.parse(n),i=r.campo.replace(/ /g,"").toLowerCase();r.tratado=i,console.log(r),this.arrayCampos.push(r),this.landing.campos=this.arrayCampos}alterar(){console.log(this.Datalanding);try{this.service.editarlanding(this.id,this.Datalanding),alert("Landing Page altualizada com sucesso !"),this.router.navigate(["/landingPage"])}catch(n){console.log(n)}}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(ee.h),o.Y36(te.ST),o.Y36(F.F0),o.Y36(F.gz))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-editar-landing-page"]],decls:54,vars:12,consts:[[3,"routerBack"],[1,"content"],[1,"title"],[1,"form"],["for","name"],["type","text","id","name","name","nome",3,"ngModel","ngModelChange"],["for","link"],["type","text","id","link","name","link",3,"ngModel","ngModelChange"],[1,"form-select"],["for","funnel"],["name","funil","id","funnel",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","produto","id","produto",3,"ngModel","ngModelChange"],["for","title"],["type","text","id","title","name","title",3,"ngModel","ngModelChange"],[1,"campos"],["class","campos-content",4,"ngFor","ngForOf"],["for","campo"],["type","text","id","campo","name","campo",3,"ngModel","ngModelChange"],["for","tipo"],["name","tipo","id","tipo",3,"ngModel","ngModelChange"],["value","text"],["value","tel"],["value","email"],["for","button"],["type","text","id","button","name","button",3,"ngModel","ngModelChange"],[1,"add"],[3,"click"],[3,"value"],[1,"campos-content"],[1,"campo"],[3,"icon"],[1,"actions"],[3,"icon","click"]],template:function(n,r){1&n&&(o._UZ(0,"app-navbar",0),o.TgZ(1,"main")(2,"div",1)(3,"form")(4,"div",2)(5,"h2"),o._uU(6,"Criar Landing page"),o.qZA()(),o.TgZ(7,"div",3)(8,"label",4),o._uU(9,"Nome da Landing Page"),o.qZA(),o.TgZ(10,"input",5),o.NdJ("ngModelChange",function(i){return r.Datalanding.nome=i}),o.qZA()(),o.TgZ(11,"div",3)(12,"label",6),o._uU(13,"Link da pagina"),o.qZA(),o.TgZ(14,"input",7),o.NdJ("ngModelChange",function(i){return r.Datalanding.link=i}),o.qZA()(),o.TgZ(15,"div",8)(16,"label",9),o._uU(17,"Selecione o Funil"),o.qZA(),o.TgZ(18,"select",10),o.NdJ("ngModelChange",function(i){return r.Datalanding.funil=i}),o.YNc(19,ye,2,2,"option",11),o.qZA()(),o.TgZ(20,"div",8)(21,"label",9),o._uU(22,"Selecione o produto cadastrado: "),o.qZA(),o.TgZ(23,"select",12),o.NdJ("ngModelChange",function(i){return r.Datalanding.produto=i}),o.YNc(24,xe,2,2,"option",11),o.qZA()(),o.TgZ(25,"div",3)(26,"label",13),o._uU(27,"Titulo"),o.qZA(),o.TgZ(28,"input",14),o.NdJ("ngModelChange",function(i){return r.Datalanding.titulo=i}),o.qZA()(),o.TgZ(29,"h4",3),o._uU(30,"Selecione o campo que deseja alterar: "),o.qZA(),o.TgZ(31,"div",15),o.YNc(32,Pe,7,4,"div",16),o.qZA(),o.TgZ(33,"div",3)(34,"label",17),o._uU(35,"Reescreva o campo selecionado"),o.qZA(),o.TgZ(36,"input",18),o.NdJ("ngModelChange",function(i){return r.camposEdit.campo=i}),o.qZA()(),o.TgZ(37,"div",8)(38,"label",19),o._uU(39,"Alterar o tipo do campo"),o.qZA(),o.TgZ(40,"select",20),o.NdJ("ngModelChange",function(i){return r.camposEdit.tipo=i}),o.TgZ(41,"option",21),o._uU(42,"Texto"),o.qZA(),o.TgZ(43,"option",22),o._uU(44,"Telefone"),o.qZA(),o.TgZ(45,"option",23),o._uU(46,"Email"),o.qZA()()(),o.TgZ(47,"div",3)(48,"label",24),o._uU(49,"Titulo do bot\xe3o"),o.qZA(),o.TgZ(50,"input",25),o.NdJ("ngModelChange",function(i){return r.Datalanding.butao=i}),o.qZA()(),o.TgZ(51,"div",26)(52,"button",27),o.NdJ("click",function(){return r.alterar()}),o._uU(53,"Adicionar"),o.qZA()()()()()),2&n&&(o.Q6J("routerBack",r.backPage),o.xp6(10),o.Q6J("ngModel",r.Datalanding.nome),o.xp6(4),o.Q6J("ngModel",r.Datalanding.link),o.xp6(4),o.Q6J("ngModel",r.Datalanding.funil),o.xp6(1),o.Q6J("ngForOf",r.funis),o.xp6(4),o.Q6J("ngModel",r.Datalanding.produto),o.xp6(1),o.Q6J("ngForOf",r.produtos),o.xp6(4),o.Q6J("ngModel",r.Datalanding.titulo),o.xp6(4),o.Q6J("ngForOf",r.Datalanding.campos),o.xp6(4),o.Q6J("ngModel",r.camposEdit.campo),o.xp6(4),o.Q6J("ngModel",r.camposEdit.tipo),o.xp6(10),o.Q6J("ngModel",r.Datalanding.butao))},directives:[ne.S,P._Y,P.JL,P.F,P.Fj,P.JJ,P.On,P.EJ,J.sg,P.YN,P.Kr,u.BN],styles:["main[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0 auto}.content[_ngcontent-%COMP%]{margin-top:30px;width:70%;max-width:900px;display:flex;flex-direction:column;justify-content:center}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%;height:max-content;min-height:800px;margin-top:50px;background:#c7c7c7;box-shadow:2px 3px 4px gray;border-radius:15px;margin-bottom:20px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:8px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%;max-width:350px;height:27px;text-indent:10px;font-size:16px;border-radius:5px;border:none;margin-bottom:35px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:75%;max-width:200px;height:25px;text-indent:10px;font-weight:600;border-radius:5px;margin-bottom:35px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%]{margin-top:50px;display:flex;flex-direction:row;width:160px;height:30px;background:gray;color:#fff;border-radius:10px;margin-left:50px;margin-bottom:100px;text-align:center;justify-content:space-evenly;align-items:center;cursor:pointer;box-shadow:1px 2px 3px gray}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%]:hover{background:white;color:#000}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:40px;margin-bottom:80px;font-family:sans-serif}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{margin-left:50px;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:50px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;justify-content:center}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#9e77f5;color:#fff;height:30px;font-size:14px;width:100px;border:none;border-radius:10px;box-shadow:1px 2px 3px gray;cursor:pointer;margin-bottom:20px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#6c4caf;color:#000}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]{margin-top:25px;margin-left:25px;margin-bottom:30px;display:flex;flex-direction:column;justify-content:right;align-items:center;width:60%;padding:10px;height:200px;overflow:auto;background:#a8a8a8;border-radius:10px;box-shadow:2px 3px 4px gray}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]{background:white;padding:5px;box-shadow:2px 2px 3px #bdbdbdf3;display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:95%;margin-bottom:10px}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:20px;border:1px}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:30px;margin-right:15px}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;font-weight:600}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:60px;justify-content:space-between}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.content[_ngcontent-%COMP%]   #campo[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   #tipo[_ngcontent-%COMP%]{margin-bottom:10px}.content[_ngcontent-%COMP%]   #add[_ngcontent-%COMP%]{margin:0 0 50px 50px}"]}),t})();var Oe=b(554);const Me=function(t){return["/campanha",t]},we=function(t){return["/landingPage/edit",t]};function Te(t,e){if(1&t){const n=o.EpF();o.TgZ(0,"div",4)(1,"div",5),o._UZ(2,"fa-icon",6),o.TgZ(3,"p"),o._uU(4),o.qZA()(),o.TgZ(5,"div",7)(6,"div",7),o._UZ(7,"fa-icon",8)(8,"fa-icon",8),o.TgZ(9,"fa-icon",9),o.NdJ("click",function(){const i=o.CHM(n).$implicit;return o.oxw().excluir(i.id)}),o.qZA()()()()}if(2&t){const n=e.$implicit,r=o.oxw();o.xp6(2),o.Q6J("icon",r.userIcon),o.xp6(2),o.Oqu(n.nome),o.xp6(3),o.Q6J("icon",r.view)("routerLink",o.VKq(7,Me,n.link)),o.xp6(1),o.Q6J("icon",r.edit)("routerLink",o.VKq(9,we,n.id)),o.xp6(1),o.Q6J("icon",r.delete)}}let m=(()=>{class t{constructor(n,r,a){this.fireservice=n,this.service=r,this.headerService=a,this.landing={},this.userIcon=Y.m08,this.delete=Z.I7,this.edit=Z.Xc,this.view=Y.Mdf}ngOnInit(){this.headerService.onOffHeader(!0),this.service.getCampanha().subscribe(n=>{this.dados=n,console.log(this.dados)})}excluir(n){console.log(n),this.service.exluirLanding(n)}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(te.ST),o.Y36(ee.h),o.Y36(Oe.r))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-landing-page"]],decls:8,vars:1,consts:[[1,"content"],[1,"title"],[1,"landing"],["class","landing-content",4,"ngFor","ngForOf"],[1,"landing-content"],[1,"landing-name"],[1,"userIcon",3,"icon"],["id","actions"],[3,"icon","routerLink"],[3,"icon","click"]],template:function(n,r){1&n&&(o._UZ(0,"app-navbar"),o.TgZ(1,"main")(2,"div",0)(3,"div",1)(4,"p"),o._uU(5,"Lista de Landing Pages"),o.qZA()(),o.TgZ(6,"div",2),o.YNc(7,Te,10,11,"div",3),o.qZA()()()),2&n&&(o.xp6(7),o.Q6J("ngForOf",r.dados))},directives:[ne.S,J.sg,u.BN,F.rH],styles:["main[_ngcontent-%COMP%]{display:flex;margin:0 auto;justify-content:center}.content[_ngcontent-%COMP%]{width:69%;margin-top:70px}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;font-weight:500;padding-bottom:20px;border-bottom:1px solid gray;box-shadow:5px}.content[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]{margin-top:50px}.content[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .landing-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;background-color:#fff;padding:10px;margin-bottom:10px;box-shadow:3px 3px 5px gray}.content[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .landing-content[_ngcontent-%COMP%]   .userIcon[_ngcontent-%COMP%]{font-size:40px;margin-right:10px;color:#6e83b7}.content[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .landing-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}.content[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]   .landing-content[_ngcontent-%COMP%]   .landing-name[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}#actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:90px}#actions[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}#actions[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:20px;cursor:pointer;margin:0}"]}),t})();var k=b(5861),v=b(2916);function U(t,e){if(1&t&&(o.TgZ(0,"option",35),o._uU(1),o.qZA()),2&t){const n=e.$implicit;o.Q6J("value",n.id),o.xp6(1),o.Oqu(n.nome)}}function re(t,e){if(1&t&&(o.TgZ(0,"option",35),o._uU(1),o.qZA()),2&t){const n=e.$implicit;o.Q6J("value",n.categoria),o.xp6(1),o.Oqu(n.categoria)}}function vt(t,e){if(1&t){const n=o.EpF();o.TgZ(0,"div",36)(1,"div",37),o._UZ(2,"fa-icon",28),o.TgZ(3,"p"),o._uU(4),o.qZA()(),o.TgZ(5,"div",38)(6,"fa-icon",39),o.NdJ("click",function(){const i=o.CHM(n).$implicit;return o.oxw().deleteCampo(i)}),o.qZA()()()}if(2&t){const n=e.$implicit,r=o.oxw();o.xp6(2),o.Q6J("icon",r.campo),o.xp6(2),o.AsE("Campo: ",n.campo," / Tipo: ",n.tipo,""),o.xp6(2),o.Q6J("icon",r.delete)}}const bt=[{path:"",component:m},{path:"new",component:(()=>{class t{constructor(n,r,a,i){this.service=n,this.fireservice=r,this.router=a,this.storage=i,this.landing={},this.backPage="/landingPage",this.funis=[],this.produtos=[],this.add=Y.r8p,this.campo=Z.cw,this.delete=Z.I7,this.edit=Z.Xc,this.valoritem="",this.fileToUpload=null,this.campos={campo:"",tipo:"",tratado:""},this.produto={nome:"",valor:""},this.arrayCampos=[]}ngOnInit(){this.service.getFunil().subscribe(n=>{this.funis=n,console.log(this.funis)}),this.service.getProdutos().subscribe(n=>{this.produtos=n,console.log(this.funis)})}getImageBackground(n){this.fileToUpload=n,console.log(this.fileToUpload),this.path=n.target.files[0];const r=(new Date).getTime();this.refFile=`imagens/${r}${this.path.name}`;const a=new FileReader;a.onload=i=>this.imageSrc=a.result,a.readAsDataURL(this.path)}getLogo(n){const r=(new Date).getTime();this.fileToUpload=n,this.pathLogo=n.target.files[0],this.refFileLogo=`imagens/${r}${this.pathLogo.name}`;const a=new FileReader;a.onload=i=>this.logoSrc=a.result,a.readAsDataURL(this.pathLogo)}addCampos(){let n=JSON.stringify(this.campos),r=JSON.parse(n),i=r.campo.replace(/ /g,"").toLowerCase();r.tratado=i,console.log(r),this.arrayCampos.push(r),this.landing.campos=this.arrayCampos}deleteCampo(n){console.log(n);let r=this.arrayCampos.indexOf(n);r>-1&&this.arrayCampos.splice(r,1)}valor(n){console.log(n),this.service.getprodutovalor(n).subscribe(r=>{this.valorproduto=r})}addLanding(){var n=this;return(0,k.Z)(function*(){let r=n.fireservice.createId(),a="",i="";n.landing.campos||(n.landing.campos=["Sem dados"]),yield n.storage.upload(n.refFile,n.path).then(c=>{a=`https://firebasestorage.googleapis.com/v0/b/${c.ref.bucket}/o/imagens%2F${c.ref.name}?alt=media`}),yield n.storage.upload(n.refFileLogo,n.pathLogo).then(c=>{i=`https://firebasestorage.googleapis.com/v0/b/${c.ref.bucket}/o/imagens%2F${c.ref.name}?alt=media`}),console.log(n.funis.id);let s=[{id:r,nome:n.landing.nome,butao:n.landing.butao,campos:n.landing.campos,funil:n.landing.funil,link:n.landing.link,produto:n.landing.produto,titulo:n.landing.titulo,imagePath:a,logoPath:i}];console.log(s);try{n.service.addLanding(r,s[0]),alert("Landing Page cadastrada com sucesso !"),n.router.navigate(["/landingPage"])}catch(c){console.log(c)}})()}}return t.\u0275fac=function(n){return new(n||t)(o.Y36(ee.h),o.Y36(te.ST),o.Y36(F.F0),o.Y36(v.Q1))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-nova-landing-page"]],decls:66,vars:15,consts:[[3,"routerBack"],[1,"content"],[1,"title"],[1,"form"],["for","name"],["type","text","id","name","name","nome",3,"ngModel","ngModelChange"],["for","link"],["type","text","id","link","name","link",3,"ngModel","ngModelChange"],[1,"form-select"],["for","funnel"],["name","funil","id","funnel",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","produto","id","produto",3,"ngModel","ngModelChange"],["for","title"],["type","text","id","title","name","title",3,"ngModel","ngModelChange"],["for","background"],["type","file","name","background","id","background",3,"change"],["width","50px","height","50px",3,"src"],["for","logo"],["type","file","name","logo","id","logo",3,"change"],["for","campo"],["type","text","id","campo","name","campo",3,"ngModel","ngModelChange"],["for","tipo"],["name","tipo","id","tipo",3,"ngModel","ngModelChange"],["value","text"],["value","tel"],["value","email"],["id","add",1,"add-input",3,"click"],[3,"icon"],[1,"campos"],["class","campos-content",4,"ngFor","ngForOf"],["for","button"],["type","text","id","button","name","button",3,"ngModel","ngModelChange"],[1,"add"],[3,"click"],[3,"value"],[1,"campos-content"],[1,"campo"],[1,"actions"],[3,"icon","click"]],template:function(n,r){1&n&&(o._UZ(0,"app-navbar",0),o.TgZ(1,"main")(2,"div",1)(3,"form")(4,"div",2)(5,"h2"),o._uU(6,"Criar Landing page"),o.qZA()(),o.TgZ(7,"div",3)(8,"label",4),o._uU(9,"Nome da Landing Page"),o.qZA(),o.TgZ(10,"input",5),o.NdJ("ngModelChange",function(i){return r.landing.nome=i}),o.qZA()(),o.TgZ(11,"div",3)(12,"label",6),o._uU(13,"Link da pagina"),o.qZA(),o.TgZ(14,"input",7),o.NdJ("ngModelChange",function(i){return r.landing.link=i}),o.qZA()(),o.TgZ(15,"div",8)(16,"label",9),o._uU(17,"Selecione o Funil"),o.qZA(),o.TgZ(18,"select",10),o.NdJ("ngModelChange",function(i){return r.landing.funil=i}),o.YNc(19,U,2,2,"option",11),o.qZA()(),o.TgZ(20,"div",8)(21,"label",9),o._uU(22,"Selecione o produto cadastrado: "),o.qZA(),o.TgZ(23,"select",12),o.NdJ("ngModelChange",function(i){return r.landing.produto=i}),o.YNc(24,re,2,2,"option",11),o.qZA()(),o.TgZ(25,"div",3)(26,"label",13),o._uU(27,"Titulo"),o.qZA(),o.TgZ(28,"input",14),o.NdJ("ngModelChange",function(i){return r.landing.titulo=i}),o.qZA()(),o.TgZ(29,"div",3)(30,"label",15),o._uU(31,"Selecione o plano de fundo"),o.qZA(),o.TgZ(32,"input",16),o.NdJ("change",function(i){return r.getImageBackground(i)}),o.qZA(),o._UZ(33,"img",17),o.qZA(),o.TgZ(34,"div",3)(35,"label",18),o._uU(36,"Logo"),o.qZA(),o.TgZ(37,"input",19),o.NdJ("change",function(i){return r.getLogo(i)}),o.qZA(),o._UZ(38,"img",17),o.qZA(),o.TgZ(39,"div",3)(40,"label",20),o._uU(41,"Adicionar campos na Landing Page"),o.qZA(),o.TgZ(42,"input",21),o.NdJ("ngModelChange",function(i){return r.campos.campo=i}),o.qZA()(),o.TgZ(43,"div",8)(44,"label",22),o._uU(45,"Tipo do campo"),o.qZA(),o.TgZ(46,"select",23),o.NdJ("ngModelChange",function(i){return r.campos.tipo=i}),o.TgZ(47,"option",24),o._uU(48,"Texto"),o.qZA(),o.TgZ(49,"option",25),o._uU(50,"Telefone"),o.qZA(),o.TgZ(51,"option",26),o._uU(52,"Email"),o.qZA()()(),o.TgZ(53,"button",27),o.NdJ("click",function(){return r.addCampos()}),o._UZ(54,"fa-icon",28),o.TgZ(55,"p"),o._uU(56,"Adicionar campo"),o.qZA()(),o.TgZ(57,"div",29),o.YNc(58,vt,7,4,"div",30),o.qZA(),o.TgZ(59,"div",3)(60,"label",31),o._uU(61,"Titulo do bot\xe3o"),o.qZA(),o.TgZ(62,"input",32),o.NdJ("ngModelChange",function(i){return r.landing.butao=i}),o.qZA()(),o.TgZ(63,"div",33)(64,"button",34),o.NdJ("click",function(){return r.addLanding()}),o._uU(65,"Adicionar"),o.qZA()()()()()),2&n&&(o.Q6J("routerBack",r.backPage),o.xp6(10),o.Q6J("ngModel",r.landing.nome),o.xp6(4),o.Q6J("ngModel",r.landing.link),o.xp6(4),o.Q6J("ngModel",r.landing.funil),o.xp6(1),o.Q6J("ngForOf",r.funis),o.xp6(4),o.Q6J("ngModel",r.landing.produto),o.xp6(1),o.Q6J("ngForOf",r.produtos),o.xp6(4),o.Q6J("ngModel",r.landing.titulo),o.xp6(5),o.Q6J("src",r.imageSrc,o.LSH),o.xp6(5),o.Q6J("src",r.logoSrc,o.LSH),o.xp6(4),o.Q6J("ngModel",r.campos.campo),o.xp6(4),o.Q6J("ngModel",r.campos.tipo),o.xp6(8),o.Q6J("icon",r.add),o.xp6(4),o.Q6J("ngForOf",r.arrayCampos),o.xp6(4),o.Q6J("ngModel",r.landing.butao))},directives:[ne.S,P._Y,P.JL,P.F,P.Fj,P.JJ,P.On,P.EJ,J.sg,P.YN,P.Kr,u.BN],styles:["main[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:0 auto}.content[_ngcontent-%COMP%]{margin-top:30px;width:70%;max-width:900px;display:flex;flex-direction:column;justify-content:center}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;width:80%;height:max-content;min-height:800px;margin-top:50px;background:#c7c7c7;box-shadow:2px 3px 4px gray;border-radius:15px;margin-bottom:20px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;font-weight:600;margin-bottom:8px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%;max-width:350px;height:27px;text-indent:10px;font-size:16px;border-radius:5px;border:none;margin-bottom:35px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:75%;max-width:200px;height:25px;text-indent:10px;font-weight:600;border-radius:5px;margin-bottom:35px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%]{margin-top:50px;display:flex;flex-direction:row;width:160px;height:30px;background:gray;color:#fff;border-radius:10px;margin-left:50px;margin-bottom:100px;text-align:center;justify-content:space-evenly;align-items:center;cursor:pointer;box-shadow:1px 2px 3px gray}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add-input[_ngcontent-%COMP%]:hover{background:white;color:#000}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:40px;margin-bottom:80px;font-family:sans-serif}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{margin-left:50px;display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:50px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{display:flex;justify-content:center}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#9e77f5;color:#fff;height:30px;font-size:14px;width:100px;border:none;border-radius:10px;box-shadow:1px 2px 3px gray;cursor:pointer;margin-bottom:20px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#6c4caf;color:#000}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]{margin-top:25px;margin-left:25px;margin-bottom:30px;display:flex;flex-direction:column;justify-content:right;align-items:center;width:60%;padding:10px;height:200px;overflow:auto;background:#a8a8a8;border-radius:10px;box-shadow:2px 3px 4px gray}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]{background:white;padding:5px;box-shadow:2px 2px 3px #bdbdbdf3;display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:95%;margin-bottom:10px}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:20px;border:1px}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:30px;margin-right:15px}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .campo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:17px;font-weight:600}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:60px;justify-content:space-between}.content[_ngcontent-%COMP%]   .campos[_ngcontent-%COMP%]   .campos-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:20px;cursor:pointer}.content[_ngcontent-%COMP%]   #campo[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   #tipo[_ngcontent-%COMP%]{margin-bottom:10px}.content[_ngcontent-%COMP%]   #add[_ngcontent-%COMP%]{margin:0 0 50px 50px}"]}),t})()},{path:"edit",component:le},{path:"edit/:id",component:le}];let Ct=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[F.Bz.forChild(bt)],F.Bz]}),t})();var yt=b(4546),Re=b(9278);function Je(t,e,n,r){return new(n||(n=Promise))(function(i,s){function c(p){try{d(r.next(p))}catch(h){s(h)}}function l(p){try{d(r.throw(p))}catch(h){s(h)}}function d(p){p.done?i(p.value):function a(i){return i instanceof n?i:new n(function(s){s(i)})}(p.value).then(c,l)}d((r=r.apply(t,e||[])).next())})}function ze(t,e){var r,a,i,s,n={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(d){return function(p){return function l(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=2&d[0]?a.return:d[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,d[1])).done)return i;switch(a=0,i&&(d=[2&d[0],i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,a=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(!(i=(i=n.trys).length>0&&i[i.length-1])&&(6===d[0]||2===d[0])){n=0;continue}if(3===d[0]&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(6===d[0]&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(p){d=[6,p],a=0}finally{r=i=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,p])}}}function He(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,c=i.length;s<c;s++,a++)r[a]=i[s];return r}var Pt=b(6355),Ge="firebasestorage.googleapis.com",T=function(){function t(e,n){this.code_=Xe(e),this.message_="Firebase Storage: "+n,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(e){return Xe(e)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.serverResponse_?this.message_+"\n"+this.serverResponse_:this.message_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!1,configurable:!0}),t}();function Xe(t){return"storage/"+t}function Ae(){return new T("unknown","An unknown error occurred, please check the error payload for server response.")}function Ye(){return new T("canceled","User canceled the upload/download.")}function Ve(){return new T("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Lt(){return new T("no-download-url","The given file does not have any download URLs.")}function Ke(t,e,n){return new T("invalid-argument","Invalid argument in `"+e+"` at index "+t+": "+n)}function We(){return new T("app-deleted","The Firebase app was deleted.")}function oe(t,e){return new T("invalid-format","String does not match format '"+t+"': "+e)}function de(t){throw new T("internal-error","Internal error: "+t)}var M={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function Dt(t){switch(t){case M.RAW:case M.BASE64:case M.BASE64URL:case M.DATA_URL:return;default:throw"Expected one of the event types: ["+M.RAW+", "+M.BASE64+", "+M.BASE64URL+", "+M.DATA_URL+"]."}}var Se=function t(e,n){this.data=e,this.contentType=n||null};function $e(t,e){switch(t){case M.RAW:return new Se(et(e));case M.BASE64:case M.BASE64URL:return new Se(tt(t,e));case M.DATA_URL:return new Se(function Ft(t){var e=new nt(t);return e.base64?tt(M.BASE64,e.rest):function qt(t){var e;try{e=decodeURIComponent(t)}catch(n){throw oe(M.DATA_URL,"Malformed data URL.")}return et(e)}(e.rest)}(e),function jt(t){return new nt(t).contentType}(e))}throw Ae()}function et(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,s=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&s)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function tt(t,e){switch(t){case M.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw oe(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case M.BASE64URL:var i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw oe(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var c;try{c=atob(e)}catch(p){throw oe(t,"Invalid character found")}for(var l=new Uint8Array(c.length),d=0;d<c.length;d++)l[d]=c.charCodeAt(d);return l}var nt=function t(e){this.base64=!1,this.contentType=null;var n=e.match(/^data:([^,]+)?,/);if(null===n)throw oe(M.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function Bt(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)},Ue={STATE_CHANGED:"state_changed"},E={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ne(t){switch(t){case"running":case"pausing":case"canceling":return E.RUNNING;case"paused":return E.PAUSED;case"success":return E.SUCCESS;case"canceled":return E.CANCELED;default:return E.ERROR}}function D(t){return null!=t}function z(t){return void 0!==t}function rt(t){return"function"==typeof t}function ae(t){return"object"==typeof t}function Jt(t){return ae(t)&&null!==t}function V(t){return"string"==typeof t||t instanceof String}function Qt(t){return ot(t)&&Number.isInteger(t)}function ot(t){return"number"==typeof t||t instanceof Number}function at(t){return pe()&&t instanceof Blob}function pe(){return"undefined"!=typeof Blob}var Q=(()=>{return(t=Q||(Q={}))[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",Q;var t})(),Ht=function(){function t(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Q.NO_ERROR,this.sendPromise_=new Promise(function(n){e.xhr_.addEventListener("abort",function(){e.errorCode_=Q.ABORT,n(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=Q.NETWORK_ERROR,n(e)}),e.xhr_.addEventListener("load",function(){n(e)})})}return t.prototype.send=function(e,n,r,a){if(this.sent_)throw de("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),D(a))for(var i in a)a.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,a[i].toString());return D(r)?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw de("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw de("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw de("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},t.prototype.addUploadProgressListener=function(e){D(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},t.prototype.removeUploadProgressListener=function(e){D(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},t}(),Gt=function(){function t(){}return t.prototype.createXhrIo=function(){return new Ht},t}();function Xt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Yt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Xt();if(void 0!==n){for(var r=new n,a=0;a<t.length;a++)r.append(t[a]);return r.getBlob()}if(pe())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var ke=function(){function t(e,n){var r=0,a="";at(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(at(this.data_)){var a=function Vt(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===a?null:new t(a)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(pe()){var r=e.map(function(l){return l instanceof t?l.data_:l});return new t(Yt.apply(null,r))}var a=e.map(function(l){return V(l)?$e(M.RAW,l).data:l.data_}),i=0;a.forEach(function(l){i+=l.byteLength});var s=new Uint8Array(i),c=0;return a.forEach(function(l){for(var d=0;d<l.length;d++)s[c++]=l[d]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),L=function(){function t(e,n){this.bucket=e,this.path_=n}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw function Nt(t){return new T("invalid-default-bucket","Invalid default bucket '"+t+"'.")}(e)},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",s=new RegExp("^gs://"+r+"(/(.*))?$","i");function l(B){B.path_=decodeURIComponent(B.path)}for(var p=Ge.replace(/[.]/g,"\\."),R=[{regex:s,indices:{bucket:1,path:3},postModify:function a(B){"/"===B.path.charAt(B.path.length-1)&&(B.path_=B.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+p+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:l},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:l}],S=0;S<R.length;S++){var I=R[S],G=I.regex.exec(e);if(G){var se=G[I.indices.path];se||(se=""),n=new t(G[I.indices.bucket],se),I.postModify(n);break}}if(null==n)throw function Ut(t){return new T("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Le(t){var e;try{e=JSON.parse(t)}catch(n){return null}return function zt(t){return ae(t)&&!Array.isArray(t)}(e)?e:null}function Wt(t,e){var n=e.split("/").filter(function(r){return r.length>0}).join("/");return 0===t.length?n:t+"/"+n}function it(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function H(t){return"https://"+Ge+"/v0"+t}function st(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function $t(t,e){return e}var A=function t(e,n,r,a){this.server=e,this.local=n||e,this.writable=!!r,this.xform=a||$t},fe=null;function ct(t,e,n){var r=Le(e);return null===r?null:function rn(t,e,n){for(var r={type:"file"},a=n.length,i=0;i<a;i++){var s=n[i];r[s.local]=s.xform(r,e[s.server])}return function nn(t,e){Object.defineProperty(t,"ref",{get:function n(){var i=new L(t.bucket,t.fullPath);return e.makeStorageReference(i)}})}(r,t),r}(t,r,n)}function Ie(t,e){for(var n={},r=e.length,a=0;a<r;a++){var i=e[a];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}function an(t){if(!ae(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!ae(n))throw"Expected object for 'customMetadata' mapping."}else if(Jt(n))throw"Mapping for '"+e+"' cannot be an object."}}var ge="maxResults",Ze="pageToken",lt="prefixes";function un(t){if(!ae(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===ge){if(!Qt(t[ge])||t[ge]<=0)throw"Expected maxResults to be a positive number.";if(t[ge]>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if(e!==Ze)throw"Unknown option: "+e;if(t[Ze]&&!V(t[Ze]))throw"Expected pageToken to be string."}}var j=function t(e,n,r,a){this.url=e,this.method=n,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function q(t){if(!t)throw Ae()}function he(t,e){return function n(r,a){var i=ct(t,a,e);return q(null!==i),i}}function K(t){return function e(n,r){var a;return a=401===n.getStatus()?function Et(){return new T("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Rt(t){return new T("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(t.bucket):403===n.getStatus()?function At(t){return new T("unauthorized","User does not have permission to access '"+t+"'.")}(t.path):r,a.setServerResponseProp(r.serverResponseProp()),a}}function _e(t){var e=K(t);return function n(r,a){var i=e(r,a);return 404===r.getStatus()&&(i=function Tt(t){return new T("object-not-found","Object '"+t+"' does not exist.")}(t.path)),i.setServerResponseProp(a.serverResponseProp()),i}}function dt(t,e,n){var a=H(e.fullServerUrl()),s=t.maxOperationRetryTime,c=new j(a,"GET",he(t,n),s);return c.errorHandler=_e(e),c}function fn(t,e,n,r,a){var i={};i.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),a&&(i.maxResults=a);var c=H(e.bucketOnlyServerUrl()),d=t.maxOperationRetryTime,p=new j(c,"GET",function dn(t,e){return function n(r,a){var i=function ln(t,e,n){var r=Le(n);return null===r?null:function cn(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[lt])for(var a=0,i=n[lt];a<i.length;a++){var c=i[a].replace(/\/$/,""),l=t.makeStorageReference(new L(e,c));r.prefixes.push(l)}if(n.items)for(var d=0,p=n.items;d<p.length;d++)l=t.makeStorageReference(new L(e,p[d].name)),r.items.push(l);return r}(t,e,r)}(t,e,a);return q(null!==i),i}}(t,e.bucket),d);return p.urlParams=i,p.errorHandler=K(e),p}function gn(t,e,n){var a=H(e.fullServerUrl()),s=t.maxOperationRetryTime,c=new j(a,"GET",function pn(t,e){return function n(r,a){var i=ct(t,a,e);return q(null!==i),function on(t,e){var n=Le(e);if(null===n||!V(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var a=encodeURIComponent;return r.split(",").map(function(c){var d=t.fullPath;return H("/b/"+a(t.bucket)+"/o/"+a(d))+st({alt:"media",token:c})})[0]}(i,a)}}(t,n),s);return c.errorHandler=_e(e),c}function hn(t,e,n,r){var i=H(e.fullServerUrl()),c=Ie(n,r),d=t.maxOperationRetryTime,p=new j(i,"PATCH",he(t,r),d);return p.headers={"Content-Type":"application/json; charset=utf-8"},p.body=c,p.errorHandler=_e(e),p}function _n(t,e){var r=H(e.fullServerUrl()),c=new j(r,"DELETE",function s(l,d){},t.maxOperationRetryTime);return c.successCodes=[200,204],c.errorHandler=_e(e),c}function pt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function mn(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var me=function t(e,n,r,a){this.current=e,this.total=n,this.finalized=!!r,this.metadata=a||null};function De(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(a){q(!1)}return q(!!n&&-1!==(e||["active"]).indexOf(n)),n}var xn=function t(e,n,r){if(rt(e)||D(n)||D(r))this.next=e,this.error=n||null,this.complete=r||null;else{var i=e;this.next=i.next||null,this.error=i.error||null,this.complete=i.complete||null}},Pn=function t(e,n,r,a,i,s){this.bytesTransferred=e,this.totalBytes=n,this.state=r,this.metadata=a,this.task=i,this.ref=s};function w(t,e,n){for(var r=e.length,a=e.length,i=0;i<e.length;i++)if(e[i].optional){r=i;break}if(!(r<=n.length&&n.length<=a))throw function It(t,e,n,r){var a,i;return t===e?(a=t,i=1===t?"argument":"arguments"):(a="between "+t+" and "+e,i="arguments"),new T("invalid-argument-count","Invalid argument count in `"+n+"`: Expected "+a+" "+i+", received "+r+".")}(r,a,t,n.length);for(i=0;i<n.length;i++)try{e[i].validator(n[i])}catch(l){throw l instanceof Error?Ke(i,t,l.message):Ke(i,t,l)}}var X=function t(e,n){var r=this;this.validator=function(a){r.optional&&!z(a)||e(a)},this.optional=!!n};function W(t,e){function n(a){if(!V(a))throw"Expected string."}var r;return r=t?function On(t,e){return function(n){t(n),e(n)}}(n,t):n,new X(r,e)}function Mn(){return new X(function t(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||pe()&&e instanceof Blob))throw"Expected Blob or File."})}function qe(t){return new X(an,t)}function wn(t){return new X(un,t)}function gt(){return new X(function t(e){if(!(ot(e)&&e>=0))throw"Expected a number 0 or greater."})}function Fe(t,e){return new X(function n(r){if(!(null===r||D(r)&&r instanceof Object))throw"Expected an Object.";null!=t&&t(r)},e)}function ie(t){return new X(function e(n){if(null!==n&&!rt(n))throw"Expected a Function."},t)}function $(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var ht=function(){function t(e,n,r,a,i,s){var c=this;void 0===s&&(s=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.service_=n,this.location_=r,this.blob_=i,this.metadata_=s,this.mappings_=a,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(l){c.request_=null,c.chunkMultiplier_=1,l.codeEquals("canceled")?(c.needToFetchStatus_=!0,c.completeTransitions_()):(c.error_=l,c.transition_("error"))},this.metadataErrorHandler_=function(l){c.request_=null,l.codeEquals("canceled")?c.completeTransitions_():(c.error_=l,c.transition_("error"))},this.promise_=new Promise(function(l,d){c.resolve_=l,c.reject_=d,c.start_()}),this.promise_.then(null,function(){})}return t.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(r){return e.updateProgress_(n+r)}},t.prototype.shouldDoResumable_=function(e){return e.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(e){var n=this;this.service_.getAuthToken().then(function(r){switch(n.state_){case"running":e(r);break;case"canceling":n.transition_("canceled");break;case"pausing":n.transition_("paused")}})},t.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(n){var r=function bn(t,e,n,r,a){var i=e.bucketOnlyServerUrl(),s=pt(e,r,a),c={name:s.fullPath},l=H(i),p={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=Ie(s,n),_=new j(l,"POST",function y(x){var C;De(x);try{C=x.getResponseHeader("X-Goog-Upload-URL")}catch(N){q(!1)}return q(V(C)),C},t.maxUploadRetryTime);return _.urlParams=c,_.headers=p,_.body=h,_.errorHandler=K(e),_}(e.service_,e.location_,e.mappings_,e.blob_,e.metadata_),a=e.service_.makeRequest(r,n);e.request_=a,a.getPromise().then(function(i){e.request_=null,e.uploadUrl_=i,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},t.prototype.fetchStatus_=function(){var e=this,n=this.uploadUrl_;this.resolveToken_(function(r){var a=function Cn(t,e,n,r){var l=new j(n,"POST",function i(d){var p=De(d,["active","final"]),h=null;try{h=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch(y){q(!1)}h||q(!1);var g=Number(h);return q(!isNaN(g)),new me(g,r.size(),"final"===p)},t.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=K(e),l}(e.service_,e.location_,n,e.blob_),i=e.service_.makeRequest(a,r);e.request_=i,i.getPromise().then(function(s){s=s,e.request_=null,e.updateProgress_(s.current),e.needToFetchStatus_=!1,s.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},t.prototype.continueUpload_=function(){var e=this,n=262144*this.chunkMultiplier_,r=new me(this.transferred_,this.blob_.size()),a=this.uploadUrl_;this.resolveToken_(function(i){var s;try{s=function yn(t,e,n,r,a,i,s,c){var l=new me(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw function kt(){return new T("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();var d=l.total-l.current,p=d;a>0&&(p=Math.min(p,a));var h=l.current,_={"X-Goog-Upload-Command":p===d?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},x=r.slice(h,h+p);if(null===x)throw Ve();var S=new j(n,"POST",function C(I,G){var je,Ce=De(I,["active","final"]),se=l.current+p,B=r.size();return je="final"===Ce?he(e,i)(I,G):null,new me(se,B,"final"===Ce,je)},e.maxUploadRetryTime);return S.headers=_,S.body=x.uploadData(),S.progressCallback=c||null,S.errorHandler=K(t),S}(e.location_,e.service_,a,e.blob_,n,e.mappings_,r,e.makeProgressCallback_())}catch(l){return e.error_=l,void e.transition_("error")}var c=e.service_.makeRequest(s,i);e.request_=c,c.getPromise().then(function(l){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(l.current),l.finalized?(e.metadata_=l.metadata,e.transition_("success")):e.completeTransitions_()},e.errorHandler_)})},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(n){var r=dt(e.service_,e.location_,e.mappings_),a=e.service_.makeRequest(r,n);e.request_=a,a.getPromise().then(function(i){e.request_=null,e.metadata_=i,e.transition_("success")},e.metadataErrorHandler_)})},t.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(n){var r=function vn(t,e,n,r,a){var i=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},l=function c(){for(var S="",I=0;I<2;I++)S+=Math.random().toString().slice(2);return S}();s["Content-Type"]="multipart/related; boundary="+l;var d=pt(e,r,a),p=Ie(d,n),y=ke.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+p+"\r\n--"+l+"\r\nContent-Type: "+d.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===y)throw Ve();var _={name:d.fullPath},x=H(i),N=t.maxUploadRetryTime,R=new j(x,"POST",he(t,n),N);return R.urlParams=_,R.headers=s,R.body=y.uploadData(),R.errorHandler=K(e),R}(e.service_,e.location_,e.mappings_,e.blob_,e.metadata_),a=e.service_.makeRequest(r,n);e.request_=a,a.getPromise().then(function(i){e.request_=null,e.metadata_=i,e.updateProgress_(e.blob_.size()),e.transition_("success")},e.errorHandler_)})},t.prototype.updateProgress_=function(e){var n=this.transferred_;this.transferred_=e,this.transferred_!==n&&this.notifyObservers_()},t.prototype.transition_=function(e){if(this.state_!==e)switch(e){case"canceling":case"pausing":this.state_=e,null!==this.request_&&this.request_.cancel();break;case"running":var n="paused"===this.state_;this.state_=e,n&&(this.notifyObservers_(),this.start_());break;case"paused":case"error":case"success":this.state_=e,this.notifyObservers_();break;case"canceled":this.error_=Ye(),this.state_=e,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var e=Ne(this.state_);return new Pn(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),t.prototype.on=function(e,n,r,a){function i(){if(e!==Ue.STATE_CHANGED)throw"Expected one of the event types: ["+Ue.STATE_CHANGED+"]."}var s="Expected a function or an Object with one of `next`, `error`, `complete` properties.",c=ie(!0).validator,l=Fe(null,!0).validator;function d(C){try{return void c(C)}catch(R){}try{if(l(C),!(z(C.next)||z(C.error)||z(C.complete)))throw"";return}catch(R){throw s}}var p=[W(i),Fe(d,!0),ie(!0),ie(!0)];w("on",p,arguments);var h=this;function g(C){return function N(R,S,I){null!==C&&w("on",C,arguments);var G=new xn(R,S,a);return h.addObserver_(G),function(){h.removeObserver_(G)}}}function y(C){if(null===C)throw s;d(C)}var _=[Fe(y),ie(!0),ie(!0)],x=!(z(n)||z(r)||z(a));return x?g(_):g(null)(n,r,a)},t.prototype.then=function(e,n){return this.promise_.then(e,n)},t.prototype.catch=function(e){return this.then(null,e)},t.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},t.prototype.removeObserver_=function(e){var n=this.observers_.indexOf(e);-1!==n&&this.observers_.splice(n,1)},t.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(r){e.notifyObserver_(r)})},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(Ne(this.state_)){case E.SUCCESS:$(this.resolve_.bind(null,this.snapshot))();break;case E.CANCELED:case E.ERROR:$(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(e){switch(Ne(this.state_)){case E.RUNNING:case E.PAUSED:e.next&&$(e.next.bind(e,this.snapshot))();break;case E.SUCCESS:e.complete&&$(e.complete.bind(e))();break;default:e.error&&$(e.error.bind(e,this.error_))()}},t.prototype.resume=function(){w("resume",[],arguments);var e="paused"===this.state_||"pausing"===this.state_;return e&&this.transition_("running"),e},t.prototype.pause=function(){w("pause",[],arguments);var e="running"===this.state_;return e&&this.transition_("pausing"),e},t.prototype.cancel=function(){w("cancel",[],arguments);var e="running"===this.state_||"pausing"===this.state_;return e&&this.transition_("canceling"),e},t}(),ve=function(){function t(e,n){this.service=e,this.location=n instanceof L?n:L.makeFromUrl(n)}return t.prototype.toString=function(){return w("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function tn(){if(fe)return fe;var t=[];t.push(new A("bucket")),t.push(new A("generation")),t.push(new A("metageneration")),t.push(new A("name","fullPath",!0));var n=new A("name");n.xform=function e(i,s){return function en(t){return!V(t)||t.length<2?t:it(t)}(s)},t.push(n);var a=new A("size");return a.xform=function r(i,s){return D(s)?Number(s):s},t.push(a),t.push(new A("timeCreated")),t.push(new A("updated")),t.push(new A("md5Hash",null,!0)),t.push(new A("cacheControl",null,!0)),t.push(new A("contentDisposition",null,!0)),t.push(new A("contentEncoding",null,!0)),t.push(new A("contentLanguage",null,!0)),t.push(new A("contentType",null,!0)),t.push(new A("metadata","customMetadata",!0)),fe=t}()},t.prototype.child=function(e){w("child",[W()],arguments);var n=Wt(this.location.path,e),r=new L(this.location.bucket,n);return this.newRef(this.service,r)},Object.defineProperty(t.prototype,"parent",{get:function(){var e=function Kt(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===e)return null;var n=new L(this.location.bucket,e);return this.newRef(this.service,n)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var e=new L(this.location.bucket,"");return this.newRef(this.service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return it(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),t.prototype.put=function(e,n){return void 0===n&&(n=null),w("put",[Mn(),qe(!0)],arguments),this.throwIfRoot_("put"),new ht(this,this.service,this.location,this.mappings(),new ke(e),n)},t.prototype.putString=function(e,n,r){void 0===n&&(n=M.RAW),w("putString",[W(),W(Dt,!0),qe(!0)],arguments),this.throwIfRoot_("putString");var a=$e(n,e),i=Object.assign({},r);return!D(i.contentType)&&D(a.contentType)&&(i.contentType=a.contentType),new ht(this,this.service,this.location,this.mappings(),new ke(a.data,!0),i)},t.prototype.delete=function(){var e=this;return w("delete",[],arguments),this.throwIfRoot_("delete"),this.service.getAuthToken().then(function(n){var r=_n(e.service,e.location);return e.service.makeRequest(r,n).getPromise()})},t.prototype.listAll=function(){w("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},t.prototype.listAllHelper=function(e,n){return Je(this,void 0,void 0,function(){var a,i,s;return ze(this,function(c){switch(c.label){case 0:return[4,this.list({pageToken:n})];case 1:return a=c.sent(),(i=e.prefixes).push.apply(i,a.prefixes),(s=e.items).push.apply(s,a.items),null==a.nextPageToken?[3,3]:[4,this.listAllHelper(e,a.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})},t.prototype.list=function(e){w("list",[wn(!0)],arguments);var n=this;return this.service.getAuthToken().then(function(r){var a=e||{},i=fn(n.service,n.location,"/",a.pageToken,a.maxResults);return n.service.makeRequest(i,r).getPromise()})},t.prototype.getMetadata=function(){var e=this;return w("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then(function(n){var r=dt(e.service,e.location,e.mappings());return e.service.makeRequest(r,n).getPromise()})},t.prototype.updateMetadata=function(e){var n=this;return w("updateMetadata",[qe()],arguments),this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then(function(r){var a=hn(n.service,n.location,e,n.mappings());return n.service.makeRequest(a,r).getPromise()})},t.prototype.getDownloadURL=function(){var e=this;return w("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then(function(n){var r=gn(e.service,e.location,e.mappings());return e.service.makeRequest(r,n).getPromise().then(function(a){if(null===a)throw Lt();return a})})},t.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function Zt(t){return new T("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},t}(),Tn=function(){function t(e){this.promise_=Promise.reject(e)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){},t}(),An=function(){function t(e,n,r,a,i,s,c,l,d,p,h){var g=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=n,this.headers_=r,this.body_=a,this.successCodes_=i.slice(),this.additionalRetryCodes_=s.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=p,this.timeout_=d,this.pool_=h,this.promise_=new Promise(function(y,_){g.resolve_=y,g.reject_=_,g.start_()})}return t.prototype.start_=function(){var e=this;function r(a,i){var s=e.resolve_,c=e.reject_,l=i.xhr;if(i.wasSuccessCode)try{var d=e.callback_(l,l.getResponseText());z(d)?s(d):s()}catch(h){c(h)}else if(null!==l)(p=Ae()).setServerResponseProp(l.getResponseText()),c(e.errorCallback_?e.errorCallback_(l,p):p);else if(i.canceled)c(p=e.appDelete_?We():Ye());else{var p;c(p=function St(){return new T("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())}}this.canceled_?r(0,new be(!1,null,!0)):this.backoffId_=function Rn(t,e,n){var r=1,a=null,i=!1,s=0;function c(){return 2===s}var l=!1;function d(){for(var _=[],x=0;x<arguments.length;x++)_[x]=arguments[x];l||(l=!0,e.apply(null,_))}function p(_){a=setTimeout(function(){a=null,t(h,c())},_)}function h(_){for(var x=[],C=1;C<arguments.length;C++)x[C-1]=arguments[C];if(!l){if(_)return void d.call.apply(d,He([null,_],x));var R;if(c()||i)return void d.call.apply(d,He([null,_],x));r<64&&(r*=2),1===s?(s=2,R=0):R=1e3*(r+Math.random()),p(R)}}var g=!1;function y(_){g||(g=!0,!l&&(null!==a?(_||(s=2),clearTimeout(a),p(0)):_||(s=1)))}return p(0),setTimeout(function(){i=!0,y(!0)},n),y}(function n(a,i){if(i)a(!1,new be(!1,null,!0));else{var s=e.pool_.createXhrIo();e.pendingXhr_=s,null!==e.progressCallback_&&s.addUploadProgressListener(c),s.send(e.url_,e.method_,e.body_,e.headers_).then(function(l){null!==e.progressCallback_&&l.removeUploadProgressListener(c),e.pendingXhr_=null;var d=(l=l).getErrorCode()===Q.NO_ERROR,p=l.getStatus();if(d&&!e.isRetryStatusCode_(p)){var g=-1!==e.successCodes_.indexOf(p);a(!0,new be(g,l))}else{var h=l.getErrorCode()===Q.ABORT;a(!1,new be(!1,null,h))}})}function c(l){null!==e.progressCallback_&&e.progressCallback_(l.loaded,l.lengthComputable?l.total:-1)}},r,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function En(t){t(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(e){var n=e>=500&&e<600,a=-1!==[408,429].indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return n||a||i},t}(),be=function t(e,n,r){this.wasSuccessCode=e,this.xhr=n,this.canceled=!!r};var _t=function(){function t(e,n,r,a){var i;this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,this.authProvider_=n,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requests_=new Set,this.pool_=r,this.bucket_=null!=a?L.makeFromBucketSpec(a):t.extractBucket_(null===(i=this.app_)||void 0===i?void 0:i.options),this.internals_=new Ln(this)}return t.extractBucket_=function(e){var n=null==e?void 0:e.storageBucket;return null==n?null:L.makeFromBucketSpec(n)},t.prototype.getAuthToken=function(){return Je(this,void 0,void 0,function(){var e,n;return ze(this,function(r){switch(r.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(n=r.sent()))return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach(function(e){return e.cancel()}),this.requests_.clear()},t.prototype.makeStorageReference=function(e){return new ve(this,e)},t.prototype.makeRequest=function(e,n){var r=this;if(this.deleted_)return new Tn(We());var a=function kn(t,e,n,r){var a=st(t.urlParams),i=t.url+a,s=Object.assign({},t.headers);return function Nn(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function Sn(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function Un(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==Re.default?Re.default.SDK_VERSION:"AppManager")}(s),new An(i,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(e,this.appId_,n,this.pool_);return this.requests_.add(a),a.getPromise().then(function(){return r.requests_.delete(a)},function(){return r.requests_.delete(a)}),a},t.prototype.ref=function(e){function n(a){if("string"!=typeof a)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(a))throw"Expected child path but got a URL, use refFromURL instead."}if(w("ref",[W(n,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var r=new ve(this,this.bucket_);return null!=e?r.child(e):r},t.prototype.refFromURL=function(e){function n(r){if("string"!=typeof r)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(r))throw"Expected full URL but got a child path, use ref instead.";try{L.makeFromUrl(r)}catch(a){throw"Expected valid full URL but got an invalid one."}}return w("refFromURL",[W(n,!1)],arguments),new ve(this,e)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(e){w("setMaxUploadRetryTime",[gt()],arguments),this.maxUploadRetryTime_=e},Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),t.prototype.setMaxOperationRetryTime=function(e){w("setMaxOperationRetryTime",[gt()],arguments),this.maxOperationRetryTime_=e},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),t}(),Ln=function(){function t(e){this.service_=e}return t.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},t}();function qn(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new _t(n,r,new Gt,e)}!function Fn(t){var e={TaskState:E,TaskEvent:Ue,StringFormat:M,Storage:_t,Reference:ve};t.INTERNAL.registerComponent(new Pt.Component("storage",qn,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.3.43")}(Re.default);let jn=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({providers:[v.Q1]}),t})(),Bn=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[J.ez,u.uH,Ct,P.u5,yt.O,jn]]}),t})()}}]);