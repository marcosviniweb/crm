"use strict";var fp=Object.defineProperty,dp=Object.defineProperties,pp=Object.getOwnPropertyDescriptors,Ff=Object.getOwnPropertySymbols,mp=Object.prototype.hasOwnProperty,gp=Object.prototype.propertyIsEnumerable,Uf=(jt,We,B)=>We in jt?fp(jt,We,{enumerable:!0,configurable:!0,writable:!0,value:B}):jt[We]=B,Bf=(jt,We)=>{for(var B in We||(We={}))mp.call(We,B)&&Uf(jt,B,We[B]);if(Ff)for(var B of Ff(We))gp.call(We,B)&&Uf(jt,B,We[B]);return jt},jf=(jt,We)=>dp(jt,pp(We));(self.webpackChunkCRM=self.webpackChunkCRM||[]).push([[179],{440:(jt,We,B)=>{B.d(We,{nm:()=>R1});var y=B(5813);B(5e3),B(5867);var ft=B(5861),nt=B(9681),qe=B(4859),et=B(2090),_t=B(1877);const le=new Map,ot={activated:!1,tokenObservers:[]},me={initialized:!1,enabled:!1};function Pe(He){return le.get(He)||ot}function Ue(He,Ie){le.set(He,Ie)}function Ze(){return me}class sn{constructor(Ie,Ye,wt,Lt,Ut){if(this.operation=Ie,this.retryPolicy=Ye,this.getWaitDuration=wt,this.lowerBound=Lt,this.upperBound=Ut,this.pending=null,this.nextErrorWaitInterval=Lt,Lt>Ut)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ie){var Ye=this;return(0,ft.Z)(function*(){Ye.stop();try{Ye.pending=new et.BH,yield function hn(He){return new Promise(Ie=>{setTimeout(Ie,He)})}(Ye.getNextRun(Ie)),Ye.pending.resolve(),yield Ye.pending.promise,Ye.pending=new et.BH,yield Ye.operation(),Ye.pending.resolve(),yield Ye.pending.promise,Ye.process(!0).catch(()=>{})}catch(wt){Ye.retryPolicy(wt)?Ye.process(!1).catch(()=>{}):Ye.stop()}})()}getNextRun(Ie){if(Ie)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Ye=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Ye}}}const an=new et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function vn(He){if(!Pe(He).activated)throw an.create("use-before-activation",{appName:He.name})}function A1(He,Ie){return p1.apply(this,arguments)}function p1(){return(p1=(0,ft.Z)(function*({url:He,body:Ie},Ye){var wt,Lt;const Ut={"Content-Type":"application/json"},h1=Ye.getImmediate({optional:!0});if(h1){const xr=yield h1.getHeartbeatsHeader();xr&&(Ut["X-Firebase-Client"]=xr)}const nr={method:"POST",body:JSON.stringify(Ie),headers:Ut};let l1,rr;try{l1=yield fetch(He,nr)}catch(xr){throw an.create("fetch-network-error",{originalErrorMessage:null===(wt=xr)||void 0===wt?void 0:wt.message})}if(200!==l1.status)throw an.create("fetch-status-error",{httpStatus:l1.status});try{rr=yield l1.json()}catch(xr){throw an.create("fetch-parse-error",{originalErrorMessage:null===(Lt=xr)||void 0===Lt?void 0:Lt.message})}const Fr=rr.ttl.match(/^([\d.]+)(s)$/);if(!Fr||!Fr[2]||isNaN(Number(Fr[1])))throw an.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${rr.ttl}`});const Vr=1e3*Number(Fr[1]),$r=Date.now();return{token:rr.token,expireTimeMillis:$r+Vr,issuedAtTimeMillis:$r}})).apply(this,arguments)}function r1(He,Ie){const{projectId:Ye,appId:wt,apiKey:Lt}=He.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Ye}/apps/${wt}:exchangeDebugToken?key=${Lt}`,body:{debug_token:Ie}}}const zn="firebase-app-check-store";let ie=null;function gr(){return ie||(ie=new Promise((He,Ie)=>{var Ye;try{const wt=indexedDB.open("firebase-app-check-database",1);wt.onsuccess=Lt=>{He(Lt.target.result)},wt.onerror=Lt=>{var Ut;Ie(an.create("storage-open",{originalErrorMessage:null===(Ut=Lt.target.error)||void 0===Ut?void 0:Ut.message}))},wt.onupgradeneeded=Lt=>{0===Lt.oldVersion&&Lt.target.result.createObjectStore(zn,{keyPath:"compositeKey"})}}catch(wt){Ie(an.create("storage-open",{originalErrorMessage:null===(Ye=wt)||void 0===Ye?void 0:Ye.message}))}}),ie)}function Gt(){return(Gt=(0,ft.Z)(function*(He,Ie){const wt=(yield gr()).transaction(zn,"readwrite"),Ut=wt.objectStore(zn).put({compositeKey:He,value:Ie});return new Promise((h1,nr)=>{Ut.onsuccess=l1=>{h1()},wt.onerror=l1=>{var rr;nr(an.create("storage-set",{originalErrorMessage:null===(rr=l1.target.error)||void 0===rr?void 0:rr.message}))}})})).apply(this,arguments)}const x1=new _t.Yd("@firebase/app-check");function D1(He,Ie){return(0,et.hl)()?function B1(He,Ie){return function Kn(He,Ie){return Gt.apply(this,arguments)}(function j1(He){return`${He.options.appId}-${He.name}`}(He),Ie)}(He,Ie).catch(Ye=>{x1.warn(`Failed to write token to IndexedDB. Error: ${Ye}`)}):Promise.resolve()}function Ne(){return Ze().enabled}function be(){return pt.apply(this,arguments)}function pt(){return(pt=(0,ft.Z)(function*(){const He=Ze();if(He.enabled&&He.token)return He.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ke={error:"UNKNOWN_ERROR"};function rt(He){return et.US.encodeString(JSON.stringify(He),!1)}function Ft(He){return tn.apply(this,arguments)}function tn(){return(tn=(0,ft.Z)(function*(He,Ie=!1){const Ye=He.app;vn(Ye);const wt=Pe(Ye);let Ut,Lt=wt.token;if(!Lt){const l1=yield wt.cachedTokenPromise;l1&&Ir(l1)&&(Lt=l1)}if(!Ie&&Lt&&Ir(Lt))return{token:Lt.token};let nr,h1=!1;if(Ne()){wt.exchangeTokenPromise||(wt.exchangeTokenPromise=A1(r1(Ye,yield be()),He.heartbeatServiceProvider).then(rr=>(wt.exchangeTokenPromise=void 0,rr)),h1=!0);const l1=yield wt.exchangeTokenPromise;return yield D1(Ye,l1),Ue(Ye,Object.assign(Object.assign({},wt),{token:l1})),{token:l1.token}}try{wt.exchangeTokenPromise||(wt.exchangeTokenPromise=wt.provider.getToken().then(l1=>(wt.exchangeTokenPromise=void 0,l1)),h1=!0),Lt=yield wt.exchangeTokenPromise}catch(l1){"appCheck/throttled"===l1.code?x1.warn(l1.message):x1.error(l1),Ut=l1}return Lt?(nr={token:Lt.token},Ue(Ye,Object.assign(Object.assign({},wt),{token:Lt})),yield D1(Ye,Lt)):nr=$e(Ut),h1&&G1(Ye,nr),nr})).apply(this,arguments)}function Zn(He,Ie){const Ye=Pe(He),wt=Ye.tokenObservers.filter(Lt=>Lt.next!==Ie);0===wt.length&&Ye.tokenRefresher&&Ye.tokenRefresher.isRunning()&&Ye.tokenRefresher.stop(),Ue(He,Object.assign(Object.assign({},Ye),{tokenObservers:wt}))}function Jt(He){const{app:Ie}=He,Ye=Pe(Ie);let wt=Ye.tokenRefresher;wt||(wt=function Jn(He){const{app:Ie}=He;return new sn((0,ft.Z)(function*(){let wt;if(wt=Pe(Ie).token?yield Ft(He,!0):yield Ft(He),wt.error)throw wt.error}),()=>!0,()=>{const Ye=Pe(Ie);if(Ye.token){let wt=Ye.token.issuedAtTimeMillis+.5*(Ye.token.expireTimeMillis-Ye.token.issuedAtTimeMillis)+3e5;return wt=Math.min(wt,Ye.token.expireTimeMillis-3e5),Math.max(0,wt-Date.now())}return 0},3e4,96e4)}(He),Ue(Ie,Object.assign(Object.assign({},Ye),{tokenRefresher:wt}))),!wt.isRunning()&&Ye.isTokenAutoRefreshEnabled&&wt.start()}function G1(He,Ie){const Ye=Pe(He).tokenObservers;for(const wt of Ye)try{"EXTERNAL"===wt.type&&null!=Ie.error?wt.error(Ie.error):wt.next(Ie)}catch(Lt){}}function Ir(He){return He.expireTimeMillis-Date.now()>0}function $e(He){return{token:rt(ke),error:He}}class xe{constructor(Ie,Ye){this.app=Ie,this.heartbeatServiceProvider=Ye}_delete(){const{tokenObservers:Ie}=Pe(this.app);for(const Ye of Ie)Zn(this.app,Ye.next);return Promise.resolve()}}const ur="app-check-internal";!function M1(){(0,nt._registerComponent)(new qe.wA("app-check",He=>function se(He,Ie){return new xe(He,Ie)}(He.getProvider("app").getImmediate(),He.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((He,Ie,Ye)=>{He.getProvider(ur).initialize()})),(0,nt._registerComponent)(new qe.wA(ur,He=>function Re(He){return{getToken:Ie=>Ft(He,Ie),addTokenListener:Ie=>function cn(He,Ie,Ye,wt){const{app:Lt}=He,Ut=Pe(Lt),h1={next:Ye,error:wt,type:Ie};if(Ue(Lt,Object.assign(Object.assign({},Ut),{tokenObservers:[...Ut.tokenObservers,h1]})),Ut.token&&Ir(Ut.token)){const nr=Ut.token;Promise.resolve().then(()=>{Ye({token:nr.token}),Jt(He)}).catch(()=>{})}Ut.cachedTokenPromise.then(()=>Jt(He))}(He,"INTERNAL",Ie),removeTokenListener:Ie=>Zn(He.app,Ie)}}(He.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,nt.registerVersion)("@firebase/app-check","0.5.9")}();class R1{constructor(){return(0,y.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(jt,We,B)=>{B.d(We,{zQ:()=>Ke,ww:()=>Et,rT:()=>me,f7:()=>Ue,L6:()=>le,_Q:()=>ot,lh:()=>Pe,Qv:()=>_t,nw:()=>Ze});var y=B(5e3),D=B(7579),te=B(9646),Le=B(8306),De=B(8996),Ae=B(6451),ue=B(6063);class ve extends D.x{constructor(Yt=1/0,Qt=1/0,it=ue.l){super(),this._bufferSize=Yt,this._windowTime=Qt,this._timestampProvider=it,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Qt===1/0,this._bufferSize=Math.max(1,Yt),this._windowTime=Math.max(1,Qt)}next(Yt){const{isStopped:Qt,_buffer:it,_infiniteTimeWindow:sn,_timestampProvider:hn,_windowTime:fn}=this;Qt||(it.push(Yt),!sn&&it.push(hn.now()+fn)),this._trimBuffer(),super.next(Yt)}_subscribe(Yt){this._throwIfClosed(),this._trimBuffer();const Qt=this._innerSubscribe(Yt),{_infiniteTimeWindow:it,_buffer:sn}=this,hn=sn.slice();for(let fn=0;fn<hn.length&&!Yt.closed;fn+=it?1:2)Yt.next(hn[fn]);return this._checkFinalizedStatuses(Yt),Qt}_trimBuffer(){const{_bufferSize:Yt,_timestampProvider:Qt,_buffer:it,_infiniteTimeWindow:sn}=this,hn=(sn?1:2)*Yt;if(Yt<1/0&&hn<it.length&&it.splice(0,it.length-hn),!sn){const fn=Qt.now();let an=0;for(let Rn=1;Rn<it.length&&it[Rn]<=fn;Rn+=2)an=Rn;an&&it.splice(0,an+1)}}}var ze=B(3099);function _e(Vt,Yt,Qt){let it,sn=!1;return Vt&&"object"==typeof Vt?({bufferSize:it=1/0,windowTime:Yt=1/0,refCount:sn=!1,scheduler:Qt}=Vt):it=null!=Vt?Vt:1/0,(0,ze.B)({connector:()=>new ve(it,Yt,Qt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:sn})}var pe=B(3900),je=B(576);function Nt(Vt,Yt){return(0,je.m)(Yt)?(0,pe.w)(()=>Vt,Yt):(0,pe.w)(()=>Vt)}var ht=B(5363),vt=B(4004),zt=B(590),tt=B(9468),dt=B(9300),Oe=B(5813),kt=B(2011),ft=B(9808),nt=B(440),qe=B(127);const _t=new y.OlP("angularfire2.auth.use-emulator"),le=new y.OlP("angularfire2.auth.settings"),ot=new y.OlP("angularfire2.auth.tenant-id"),me=new y.OlP("angularfire2.auth.langugage-code"),Pe=new y.OlP("angularfire2.auth.use-device-language"),Ue=new y.OlP("angularfire.auth.persistence"),Ze=(Vt,Yt,Qt,it,sn,hn,fn,an)=>(0,kt.cc)(`${Vt.name}.auth`,"AngularFireAuth",Vt.name,()=>{const Rn=Yt.runOutsideAngular(()=>Vt.auth());if(Qt&&Rn.useEmulator(...Qt),it&&(Rn.tenantId=it),Rn.languageCode=sn,hn&&Rn.useDeviceLanguage(),fn)for(const[vn,Mn]of Object.entries(fn))Rn.settings[vn]=Mn;return an&&Rn.setPersistence(an),Rn},[Qt,it,sn,hn,fn,an]);let Ke=(()=>{class Vt{constructor(Qt,it,sn,hn,fn,an,Rn,vn,Mn,I1,c1,A1){const p1=new D.x,U1=(0,te.of)(void 0).pipe((0,ht.Q)(fn.outsideAngular),(0,pe.w)(()=>hn.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,9916)))),(0,vt.U)(()=>(0,kt.on)(Qt,hn,it)),(0,vt.U)(n1=>Ze(n1,hn,an,vn,Mn,I1,Rn,c1)),_e({bufferSize:1,refCount:!1}));if((0,ft.PM)(sn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,te.of)(null);else{U1.pipe((0,zt.P)()).subscribe();const r1=U1.pipe((0,pe.w)(zn=>zn.getRedirectResult().then(xn=>xn,()=>null)),Oe.iC,_e({bufferSize:1,refCount:!1})),Wn=U1.pipe((0,pe.w)(zn=>new Le.y(xn=>({unsubscribe:hn.runOutsideAngular(()=>zn.onAuthStateChanged(ie=>xn.next(ie),ie=>xn.error(ie),()=>xn.complete()))})))),dn=U1.pipe((0,pe.w)(zn=>new Le.y(xn=>({unsubscribe:hn.runOutsideAngular(()=>zn.onIdTokenChanged(ie=>xn.next(ie),ie=>xn.error(ie),()=>xn.complete()))}))));this.authState=r1.pipe(Nt(Wn),(0,tt.R)(fn.outsideAngular),(0,ht.Q)(fn.insideAngular)),this.user=r1.pipe(Nt(dn),(0,tt.R)(fn.outsideAngular),(0,ht.Q)(fn.insideAngular)),this.idToken=this.user.pipe((0,pe.w)(zn=>zn?(0,De.D)(zn.getIdToken()):(0,te.of)(null))),this.idTokenResult=this.user.pipe((0,pe.w)(zn=>zn?(0,De.D)(zn.getIdTokenResult()):(0,te.of)(null))),this.credential=(0,Ae.T)(r1,p1,this.authState.pipe((0,dt.h)(zn=>!zn))).pipe((0,vt.U)(zn=>(null==zn?void 0:zn.user)?zn:null),(0,tt.R)(fn.outsideAngular),(0,ht.Q)(fn.insideAngular))}return(0,kt.pX)(this,U1,hn,{spy:{apply:(n1,r1,Wn)=>{(n1.startsWith("signIn")||n1.startsWith("createUser"))&&Wn.then(dn=>p1.next(dn))}}})}}return Vt.\u0275fac=function(Qt){return new(Qt||Vt)(y.LFG(kt.Dh),y.LFG(kt.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Oe.HU),y.LFG(_t,8),y.LFG(le,8),y.LFG(ot,8),y.LFG(me,8),y.LFG(Pe,8),y.LFG(Ue,8),y.LFG(nt.nm,8))},Vt.\u0275prov=y.Yz7({token:Vt,factory:Vt.\u0275fac,providedIn:"any"}),Vt})(),Et=(()=>{class Vt{constructor(){qe.Z.registerVersion("angularfire",Oe.q4.full,"auth-compat")}}return Vt.\u0275fac=function(Qt){return new(Qt||Vt)},Vt.\u0275mod=y.oAB({type:Vt}),Vt.\u0275inj=y.cJS({providers:[Ke]}),Vt})()},7407:(jt,We,B)=>{B.d(We,{ST:()=>ah,yb:()=>ch});var y=B(5e3),D=B(4986),te=B(8306),Le=B(8996),De=B(9646),Ae=B(5813),ue=B(4482),ve=B(5403);function ze(){return(0,ue.e)((i,e)=>{let t,s=!1;i.subscribe((0,ve.x)(e,u=>{const m=t;t=u,s&&e.next([m,u]),s=!0}))})}var le,_e=B(8675),pe=B(4004),je=B(5026),Nt=B(1884),ht=B(9300),vt=B(2011),zt=B(9808),dt=(B(9916),B(3942)),Oe=B(5861),kt=B(9681),ft=B(4859),nt=B(1877),qe=B(2090),et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_t={},ot=ot||{},me=et||self;function Pe(){}function Ue(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ze(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Et="closure_uid_"+(1e9*Math.random()>>>0),Vt=0;function Yt(i,e,t){return i.call.apply(i.bind,arguments)}function Qt(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,s),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function it(i,e,t){return(it=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yt:Qt).apply(null,arguments)}function sn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function hn(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(s,u,m){for(var _=Array(arguments.length-2),S=2;S<arguments.length;S++)_[S-2]=arguments[S];return e.prototype[u].apply(s,_)}}function fn(){this.s=this.s,this.o=this.o}var Rn={};fn.prototype.s=!1,fn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Ke(i){return Object.prototype.hasOwnProperty.call(i,Et)&&i[Et]||(i[Et]=++Vt)}(this);delete Rn[i]}},fn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},Mn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const s=i.length,u="string"==typeof i?i.split(""):i;for(let m=0;m<s;m++)m in u&&e.call(t,u[m],m,i)};function c1(i){return Array.prototype.concat.apply([],arguments)}function A1(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function p1(i){return/^[\s\xa0]*$/.test(i)}var Wn,U1=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function n1(i,e){return-1!=i.indexOf(e)}function r1(i,e){return i<e?-1:i>e?1:0}e:{var dn=me.navigator;if(dn){var zn=dn.userAgent;if(zn){Wn=zn;break e}}Wn=""}function xn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function ie(i){const e={};for(const t in i)e[t]=i[t];return e}var gr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vr(i,e){let t,s;for(let u=1;u<arguments.length;u++){for(t in s=arguments[u],s)i[t]=s[t];for(let m=0;m<gr.length;m++)t=gr[m],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function B1(i){return B1[" "](i),i}B1[" "]=Pe;var kn,i,N1=n1(Wn,"Opera"),Kn=n1(Wn,"Trident")||n1(Wn,"MSIE"),Gt=n1(Wn,"Edge"),nn=Gt||Kn,Wt=n1(Wn,"Gecko")&&!(n1(Wn.toLowerCase(),"webkit")&&!n1(Wn,"Edge"))&&!(n1(Wn,"Trident")||n1(Wn,"MSIE"))&&!n1(Wn,"Edge"),j1=n1(Wn.toLowerCase(),"webkit")&&!n1(Wn,"Edge");function x1(){var i=me.document;return i?i.documentMode:void 0}e:{var Er="",D1=(i=Wn,Wt?/rv:([^\);]+)(\)|;)/.exec(i):Gt?/Edge\/([\d\.]+)/.exec(i):Kn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):j1?/WebKit\/(\S+)/.exec(i):N1?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(D1&&(Er=D1?D1[1]:""),Kn){var i1=x1();if(null!=i1&&i1>parseFloat(Er)){kn=String(i1);break e}}kn=Er}var Ce={};var Me=me.document&&Kn&&(x1()||parseInt(kn,10))||void 0,ke=function(){if(!me.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{me.addEventListener("test",Pe,e),me.removeEventListener("test",Pe,e)}catch(t){}return i}();function rt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Ft(i,e){if(rt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Wt){e:{try{B1(e.nodeName);var u=!0;break e}catch(m){}u=!1}u||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:tn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ft.Z.h.call(this)}}rt.prototype.h=function(){this.defaultPrevented=!0},hn(Ft,rt);var tn={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),Zn=0;function Jt(i,e,t,s,u){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=u,this.key=++Zn,this.ca=this.fa=!1}function Jn(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function G1(i){this.src=i,this.g={},this.h=0}function Ir(i,e){var t=e.type;if(t in i.g){var m,s=i.g[t],u=vn(s,e);(m=0<=u)&&Array.prototype.splice.call(s,u,1),m&&(Jn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function $e(i,e,t,s){for(var u=0;u<i.length;++u){var m=i[u];if(!m.ca&&m.listener==e&&m.capture==!!t&&m.ia==s)return u}return-1}G1.prototype.add=function(i,e,t,s,u){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var _=$e(i,e,s,u);return-1<_?(e=i[_],t||(e.fa=!1)):((e=new Jt(e,this.src,m,!!s,u)).fa=t,i.push(e)),e};var xe="closure_lm_"+(1e6*Math.random()|0),se={};function Re(i,e,t,s,u){if(s&&s.once)return yn(i,e,t,s,u);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Re(i,e[m],t,s,u);return null}return t=yr(t),i&&i[cn]?i.N(e,t,Ze(s)?!!s.capture:!!s,u):yt(i,e,t,!1,s,u)}function yt(i,e,t,s,u,m){if(!e)throw Error("Invalid event type");var _=Ze(u)?!!u.capture:!!u,S=$1(i);if(S||(i[xe]=S=new G1(i)),(t=S.add(e,t,s,_,m)).proxy)return t;if(s=function on(){var e=lr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)ke||(u=_),void 0===u&&(u=!1),i.addEventListener(e.toString(),s,u);else if(i.attachEvent)i.attachEvent(ar(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function yn(i,e,t,s,u){if(Array.isArray(e)){for(var m=0;m<e.length;m++)yn(i,e[m],t,s,u);return null}return t=yr(t),i&&i[cn]?i.O(e,t,Ze(s)?!!s.capture:!!s,u):yt(i,e,t,!0,s,u)}function _1(i,e,t,s,u){if(Array.isArray(e))for(var m=0;m<e.length;m++)_1(i,e[m],t,s,u);else s=Ze(s)?!!s.capture:!!s,t=yr(t),i&&i[cn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=$e(m=i.g[e],t,s,u))&&(Jn(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=$1(i))&&(e=i.g[e.toString()],i=-1,e&&(i=$e(e,t,s,u)),(t=-1<i?e[i]:null)&&O1(t))}function O1(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[cn])Ir(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(ar(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=$1(e))?(Ir(t,i),0==t.h&&(t.src=null,e[xe]=null)):Jn(i)}}}function ar(i){return i in se?se[i]:se[i]="on"+i}function lr(i,e){if(i.ca)i=!0;else{e=new Ft(e,this);var t=i.listener,s=i.ia||i.src;i.fa&&O1(i),i=t.call(s,e)}return i}function $1(i){return(i=i[xe])instanceof G1?i:null}var k1="__closure_events_fn_"+(1e9*Math.random()>>>0);function yr(i){return"function"==typeof i?i:(i[k1]||(i[k1]=function(e){return i.handleEvent(e)}),i[k1])}function Yn(){fn.call(this),this.i=new G1(this),this.P=this,this.I=null}function Tt(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new rt(e,i);else if(e instanceof rt)e.target=e.target||i;else{var u=e;vr(e=new rt(s,i),u)}if(u=!0,t)for(var m=t.length-1;0<=m;m--){var _=e.g=t[m];u=Zt(_,s,!0,e)&&u}if(u=Zt(_=e.g=i,s,!0,e)&&u,u=Zt(_,s,!1,e)&&u,t)for(m=0;m<t.length;m++)u=Zt(_=e.g=t[m],s,!1,e)&&u}function Zt(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,m=0;m<e.length;++m){var _=e[m];if(_&&!_.ca&&_.capture==t){var S=_.listener,j=_.ia||_.src;_.fa&&Ir(i.i,_),u=!1!==S.call(j,s)&&u}}return u&&!s.defaultPrevented}hn(Yn,fn),Yn.prototype[cn]=!0,Yn.prototype.removeEventListener=function(i,e,t,s){_1(this,i,e,t,s)},Yn.prototype.M=function(){if(Yn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)Jn(t[s]);delete i.g[e],i.h--}}this.I=null},Yn.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Yn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Fn=me.JSON.stringify;function W1(){var i=ei;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var z1,V1=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Pr,i=>i.reset());class Pr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function m1(i){me.setTimeout(()=>{throw i},0)}function Ar(i,e){z1||function In(){var i=me.Promise.resolve(void 0);z1=function(){i.then(ti)}}(),Or||(z1(),Or=!0),ei.add(i,e)}var Or=!1,ei=new class Lr{constructor(){this.h=this.g=null}add(e,t){const s=V1.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function ti(){for(var i;i=W1();){try{i.h.call(i.g)}catch(t){m1(t)}var e=V1;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Or=!1}function ur(i,e){Yn.call(this),this.h=i||1,this.g=e||me,this.j=it(this.kb,this),this.l=Date.now()}function M1(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function J1(i,e,t){if("function"==typeof i)t&&(i=it(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=it(i.handleEvent,i)}return 2147483647<Number(e)?-1:me.setTimeout(i,e||0)}function X1(i){i.g=J1(()=>{i.g=null,i.i&&(i.i=!1,X1(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}hn(ur,Yn),(le=ur.prototype).da=!1,le.S=null,le.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Tt(this,"tick"),this.da&&(M1(this),this.start()))}},le.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},le.M=function(){ur.Z.M.call(this),M1(this),delete this.g};class R1 extends fn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:X1(this)}M(){super.M(),this.g&&(me.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function s1(i){fn.call(this),this.h=i,this.g={}}hn(s1,fn);var Yr=[];function _r(i,e,t,s){Array.isArray(t)||(t&&(Yr[0]=t.toString()),t=Yr);for(var u=0;u<t.length;u++){var m=Re(e,t[u],s||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function er(i){xn(i.g,function(e,t){this.g.hasOwnProperty(t)&&O1(e)},i),i.g={}}function Nr(){this.g=!0}function hr(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ei(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var u=s[1];if(Array.isArray(u)&&!(1>u.length)){var m=u[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var _=1;_<u.length;_++)u[_]=""}}}return Fn(t)}catch(S){return e}}(i,t)+(s?" "+s:"")})}s1.prototype.M=function(){s1.Z.M.call(this),er(this)},s1.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nr.prototype.Aa=function(){this.g=!1},Nr.prototype.info=function(){};var ni={},C2=null;function Z1(){return C2=C2||new Yn}function Qr(i){rt.call(this,ni.Ma,i)}function pi(i){const e=Z1();Tt(e,new Qr(e,i))}function He(i,e){rt.call(this,ni.STAT_EVENT,i),this.stat=e}function Ie(i){const e=Z1();Tt(e,new He(e,i))}function Ye(i,e){rt.call(this,ni.Na,i),this.size=e}function wt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return me.setTimeout(function(){i()},e)}ni.Ma="serverreachability",hn(Qr,rt),ni.STAT_EVENT="statevent",hn(He,rt),ni.Na="timingevent",hn(Ye,rt);var Lt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ut={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function h1(){}function l1(){}h1.prototype.h=null;var $r,rr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Fr(){rt.call(this,"d")}function Vr(){rt.call(this,"c")}function xr(){}function mi(i,e,t,s){this.l=i,this.j=e,this.m=t,this.X=s||1,this.V=new s1(this),this.P=o2,this.W=new ur(i=nn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new s2}function s2(){this.i=null,this.g="",this.h=!1}hn(Fr,rt),hn(Vr,rt),hn(xr,h1),xr.prototype.g=function(){return new XMLHttpRequest},xr.prototype.i=function(){return{}},$r=new xr;var o2=45e3,tr={},ri={};function ii(i,e,t){i.K=1,i.v=st(f1(e)),i.s=t,i.U=!0,qi(i,null)}function qi(i,e){i.F=Date.now(),K1(i),i.A=f1(i.v);var t=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),M2(t.h,"t",s),i.C=0,t=i.l.H,i.h=new s2,i.g=co(i.l,t?e:null,!i.s),0<i.O&&(i.L=new R1(it(i.Ia,i,i.g),i.O)),_r(i.V,i.g,"readystatechange",i.gb),e=i.H?ie(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),pi(1),function bi(i,e,t,s,u,m){i.info(function(){if(i.g)if(m)for(var _="",S=m.split("&"),j=0;j<S.length;j++){var q=S[j].split("=");if(1<q.length){var ce=q[0];q=q[1];var Te=ce.split("_");_=2<=Te.length&&"type"==Te[1]?_+(ce+"=")+q+"&":_+(ce+"=redacted&")}}else _=null;else _=m;return"XMLHTTP REQ ("+s+") [attempt "+u+"]: "+e+"\n"+t+"\n"+_})}(i.j,i.u,i.A,i.m,i.X,i.s)}function w2(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Ii(i,e,t){let u,s=!0;for(;!i.I&&i.C<t.length;){if(u=os(i,t),u==ri){4==e&&(i.o=4,Ie(14),s=!1),hr(i.j,i.m,null,"[Incomplete Response]");break}if(u==tr){i.o=4,Ie(15),hr(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}hr(i.j,i.m,u,null),si(i,u)}w2(i)&&u!=ri&&u!=tr&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Ie(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),b2(e),e.L=!0,Ie(11))):(hr(i.j,i.m,t,"[Invalid Chunked Response]"),ir(i),Ki(i))}function os(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?ri:(t=Number(e.substring(t,s)),isNaN(t)?tr:(s+=1)+t>e.length?ri:(e=e.substr(s,t),i.C=s+t,e))}function K1(i){i.Y=Date.now()+i.P,Ai(i,i.P)}function Ai(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=wt(it(i.eb,i),e)}function Dr(i){i.B&&(me.clearTimeout(i.B),i.B=null)}function Ki(i){0==i.l.G||i.I||Eo(i.l,i)}function ir(i){Dr(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,M1(i.W),er(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function si(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||C1(t.i,i)))if(t.I=i.N,!i.J&&C1(t.i,i)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(q){s=null}if(Array.isArray(s)&&3==s.length){var u=s;if(0==u[0])e:if(t.u)t.ta=u[1],0<t.ta-t.U&&37500>u[2]&&t.N&&0==t.A&&!t.v&&(t.v=wt(it(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;v1(t),cr(t)}l2(t),Ie(18)}if(1>=Dt(t.i)&&t.ka){try{t.ka()}catch(q){}t.ka=void 0}}else Di(t,11)}else if((i.J||t.g==i)&&v1(t),!p1(e))for(u=t.Ca.g.parse(e),e=0;e<u.length;e++){let q=u[e];if(t.U=q[0],q=q[1],2==t.G)if("c"==q[0]){t.J=q[1],t.la=q[2];const ce=q[3];null!=ce&&(t.ma=ce,t.h.info("VER="+t.ma));const Te=q[4];null!=Te&&(t.za=Te,t.h.info("SVER="+t.za));const ct=q[5];null!=ct&&"number"==typeof ct&&0<ct&&(t.K=s=1.5*ct,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const At=i.g;if(At){const Rt=At.g?At.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rt){var m=s.i;!m.g&&(n1(Rt,"spdy")||n1(Rt,"quic")||n1(Rt,"h2"))&&(m.j=m.l,m.g=new Set,m.h&&(Bn(m,m.h),m.h=null))}if(s.D){const wn=At.g?At.g.getResponseHeader("X-HTTP-Session-Id"):null;wn&&(s.sa=wn,ye(s.F,s.D,wn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var _=i;if((s=t).oa=z2(s,s.H?s.la:null,s.W),_.J){ai(s.i,_);var S=_,j=s.K;j&&S.setTimeout(j),S.B&&(Dr(S),K1(S)),s.g=_}else ao(s);0<t.l.length&&xi(t)}else"stop"!=q[0]&&"close"!=q[0]||Di(t,7);else 3==t.G&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?Di(t,7):kr(t):"noop"!=q[0]&&t.j&&t.j.wa(q),t.A=0)}pi(4)}catch(q){}}function a2(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ue(i)||"string"==typeof i)Mn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Ue(i)||"string"==typeof i){t=[];for(var s=i.length,u=0;u<s;u++)t.push(u)}else for(u in t=[],s=0,i)t[s++]=u;s=function Cr(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ue(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),u=s.length;for(var m=0;m<u;m++)e.call(void 0,s[m],t&&t[m],i)}}function Gn(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof Gn)for(t=i.T(),s=0;s<t.length;s++)this.set(t[s],i.get(t[s]));else for(s in i)this.set(s,i[s])}function qn(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var s=i.g[e];bn(i.h,s)&&(i.g[t++]=s),e++}i.g.length=t}if(i.i!=i.g.length){var u={};for(t=e=0;e<i.g.length;)bn(u,s=i.g[e])||(i.g[t++]=s,u[s]=1),e++;i.g.length=t}}function bn(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(le=mi.prototype).setTimeout=function(i){this.P=i},le.gb=function(i){i=i.target;const e=this.L;e&&3==g1(i)?e.l():this.Ia(i)},le.Ia=function(i){try{if(i==this.g)e:{const ce=g1(this.g);var e=this.g.Da();const Te=this.g.ba();if(!(3>ce)&&(3!=ce||nn||this.g&&(this.h.h||this.g.ga()||Ur(this.g)))){this.I||4!=ce||7==e||pi(8==e||0>=Te?3:2),Dr(this);var t=this.g.ba();this.N=t;t:if(w2(this)){var s=Ur(this.g);i="";var u=s.length,m=4==g1(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ir(this),Ki(this);var _="";break t}this.h.i=new me.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:m&&e==u-1});s.splice(0,u),this.h.g+=i,this.C=0,_=this.h.g}else _=this.g.ga();if(this.i=200==t,function r2(i,e,t,s,u,m,_){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+u+"]: "+e+"\n"+t+"\n"+m+" "+_})}(this.j,this.u,this.A,this.m,this.X,ce,t),this.i){if(this.$&&!this.J){t:{if(this.g){var S,j=this.g;if((S=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p1(S)){var q=S;break t}}q=null}if(!(t=q)){this.i=!1,this.o=3,Ie(12),ir(this),Ki(this);break e}hr(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,si(this,t)}this.U?(Ii(this,ce,_),nn&&this.i&&3==ce&&(_r(this.V,this.W,"tick",this.fb),this.W.start())):(hr(this.j,this.m,_,null),si(this,_)),4==ce&&ir(this),this.i&&!this.I&&(4==ce?Eo(this.l,this):(this.i=!1,K1(this)))}else 400==t&&0<_.indexOf("Unknown SID")?(this.o=3,Ie(12)):(this.o=0,Ie(13)),ir(this),Ki(this)}}}catch(ce){}},le.fb=function(){if(this.g){var i=g1(this.g),e=this.g.ga();this.C<e.length&&(Dr(this),Ii(this,i,e),this.i&&4!=i&&K1(this))}},le.cancel=function(){this.I=!0,ir(this)},le.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Gr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(pi(3),Ie(17)),ir(this),this.o=2,Ki(this)):Ai(this,this.Y-i)},(le=Gn.prototype).R=function(){qn(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},le.T=function(){return qn(this),this.g.concat()},le.get=function(i,e){return bn(this.h,i)?this.h[i]:e},le.set=function(i,e){bn(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},le.forEach=function(i,e){for(var t=this.T(),s=0;s<t.length;s++){var u=t[s],m=this.get(u);i.call(e,m,u,this)}};var wr=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Li(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Li){this.g=void 0!==e?e:i.g,k(this,i.j),this.s=i.s,Y(this,i.i),R(this,i.m),this.l=i.l,e=i.h;var t=new Sr;t.i=e.i,e.g&&(t.g=new Gn(e.g),t.h=e.h),K(this,t),this.o=i.o}else i&&(t=String(i).match(wr))?(this.g=!!e,k(this,t[1]||"",!0),this.s=En(t[2]||""),Y(this,t[3]||"",!0),R(this,t[4]),this.l=En(t[5]||"",!0),K(this,t[6]||"",!0),this.o=En(t[7]||"")):(this.g=!!e,this.h=new Sr(null,this.g))}function f1(i){return new Li(i)}function k(i,e,t){i.j=t?En(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Y(i,e,t){i.i=t?En(e,!0):e}function R(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function K(i,e,t){e instanceof Sr?(i.h=e,function U(i,e){e&&!i.j&&(gn(i),i.i=null,i.g.forEach(function(t,s){var u=s.toLowerCase();s!=u&&(gi(this,s),M2(this,u,t))},i)),i.j=e}(i.h,i.g)):(t||(e=u1(e,L1)),i.h=new Sr(e,i.g))}function ye(i,e,t){i.h.set(e,t)}function st(i){return ye(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function En(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function u1(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Ln),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ln(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Li.prototype.toString=function(){var i=[],e=this.j;e&&i.push(u1(e,$n,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(u1(e,$n,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(u1(t,"/"==t.charAt(0)?S1:b1,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",u1(t,oi)),i.join("")};var $n=/[#\/\?@]/g,b1=/[#\?:]/g,S1=/[#\?]/g,L1=/[#\?@]/g,oi=/#/g;function Sr(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function gn(i){i.g||(i.g=new Gn,i.h=0,i.i&&function Xn(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),u=null;if(0<=s){var m=i[t].substring(0,s);u=i[t].substring(s+1)}else m=i[t];e(m,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function gi(i,e){gn(i),e=Fi(i,e),bn(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,bn((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&qn(i)))}function G2(i,e){return gn(i),e=Fi(i,e),bn(i.g.h,e)}function M2(i,e,t){gi(i,e),0<t.length&&(i.i=null,i.g.set(Fi(i,e),A1(t)),i.h+=t.length)}function Fi(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function V(i){this.l=i||re,i=me.PerformanceNavigationTiming?0<(i=me.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(me.g&&me.g.Ea&&me.g.Ea()&&me.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(le=Sr.prototype).add=function(i,e){gn(this),this.i=null,i=Fi(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},le.forEach=function(i,e){gn(this),this.g.forEach(function(t,s){Mn(t,function(u){i.call(e,u,s,this)},this)},this)},le.T=function(){gn(this);for(var i=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var u=i[s],m=0;m<u.length;m++)t.push(e[s]);return t},le.R=function(i){gn(this);var e=[];if("string"==typeof i)G2(this,i)&&(e=c1(e,this.g.get(Fi(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=c1(e,i[t])}return e},le.set=function(i,e){return gn(this),this.i=null,G2(this,i=Fi(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},le.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},le.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],u=encodeURIComponent(String(s));s=this.R(s);for(var m=0;m<s.length;m++){var _=u;""!==s[m]&&(_+="="+encodeURIComponent(String(s[m]))),i.push(_)}}return this.i=i.join("&")};var re=10;function Ee(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Dt(i){return i.h?1:i.g?i.g.size:0}function C1(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Bn(i,e){i.g?i.g.add(e):i.h=e}function ai(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function sr(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return A1(i.i)}function Wr(){}function Ui(){this.g=new Wr}function as(i,e,t){const s=t||"";try{a2(i,function(u,m){let _=u;Ze(u)&&(_=Fn(u)),e.push(s+m+"="+encodeURIComponent(_))})}catch(u){throw e.push(s+"type="+encodeURIComponent("_badmap")),u}}function ps(i,e,t,s,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(s)}catch(m){}}function Us(i){this.l=i.$b||null,this.j=i.ib||!1}function c2(i,e){Yn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Rr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}V.prototype.cancel=function(){if(this.i=sr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Wr.prototype.stringify=function(i){return me.JSON.stringify(i,void 0)},Wr.prototype.parse=function(i){return me.JSON.parse(i,void 0)},hn(Us,h1),Us.prototype.g=function(){return new c2(this.l,this.j)},Us.prototype.i=function(i){return function(){return i}}({}),hn(c2,Yn);var Rr=0;function Bi(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function $2(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Yi(i)}function Yi(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(le=c2.prototype).open=function(i,e){if(this.readyState!=Rr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Yi(this)},le.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||me).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},le.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$2(this)),this.readyState=Rr},le.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Yi(this)),this.g&&(this.readyState=3,Yi(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==me.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bi(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},le.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?$2(this):Yi(this),3==this.readyState&&Bi(this)}},le.Ua=function(i){this.g&&(this.response=this.responseText=i,$2(this))},le.Ta=function(i){this.g&&(this.response=i,$2(this))},le.ha=function(){this.g&&$2(this)},le.setRequestHeader=function(i,e){this.v.append(i,e)},le.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},le.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(c2.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var G=me.JSON.parse;function ee(i){Yn.call(this),this.headers=new Gn,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=oe,this.K=this.L=!1}hn(ee,Yn);var oe="",de=/^https?$/i,Be=["POST","PUT"];function Mt(i){return"content-type"==i.toLowerCase()}function Ct(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,$t(i),Bt(i)}function $t(i){i.D||(i.D=!0,Tt(i,"complete"),Tt(i,"error"))}function On(i){if(i.h&&void 0!==ot&&(!i.C[1]||4!=g1(i)||2!=i.ba()))if(i.v&&4==g1(i))J1(i.Fa,0,i);else if(Tt(i,"readystatechange"),4==g1(i)){i.h=!1;try{const S=i.ba();e:switch(S){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===S){var u=String(i.H).match(wr)[1]||null;if(!u&&me.self&&me.self.location){var m=me.self.location.protocol;u=m.substr(0,m.length-1)}s=!de.test(u?u.toLowerCase():"")}t=s}if(t)Tt(i,"complete"),Tt(i,"success");else{i.m=6;try{var _=2<g1(i)?i.g.statusText:""}catch(j){_=""}i.j=_+" ["+i.ba()+"]",$t(i)}}finally{Bt(i)}}}function Bt(i,e){if(i.g){e1(i);const t=i.g,s=i.C[0]?Pe:null;i.g=null,i.C=null,e||Tt(i,"ready");try{t.onreadystatechange=s}catch(u){}}}function e1(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(me.clearTimeout(i.A),i.A=null)}function g1(i){return i.g?i.g.readyState:0}function Ur(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case oe:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Zr(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function d1(i){let e="";return xn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ye(i,e,t))}function fr(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function vi(i){this.za=0,this.l=[],this.h=new Nr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fr("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fr("baseRetryDelayMs",5e3,i),this.$a=fr("retryDelaySeedMs",1e4,i),this.Ya=fr("forwardChannelMaxRetries",2,i),this.ra=fr("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new V(i&&i.concurrentRequestLimit),this.Ca=new Ui,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function kr(i){if(ci(i),3==i.G){var e=i.V++,t=f1(i.F);ye(t,"SID",i.J),ye(t,"RID",e),ye(t,"TYPE","terminate"),W2(i,t),(e=new mi(i,i.h,e,void 0)).K=2,e.v=st(f1(t)),t=!1,me.navigator&&me.navigator.sendBeacon&&(t=me.navigator.sendBeacon(e.v.toString(),"")),!t&&me.Image&&((new Image).src=e.v,t=!0),t||(e.g=co(e.l,null),e.g.ea(e.v)),e.F=Date.now(),K1(e)}q2(i)}function cr(i){i.g&&(b2(i),i.g.cancel(),i.g=null)}function ci(i){cr(i),i.u&&(me.clearTimeout(i.u),i.u=null),v1(i),i.i.cancel(),i.m&&("number"==typeof i.m&&me.clearTimeout(i.m),i.m=null)}function or(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&xi(i)}function xi(i){Ee(i.i)||i.m||(i.m=!0,Ar(i.Ha,i),i.C=0)}function Go(i,e){var t;t=e?e.m:i.V++;const s=f1(i.F);ye(s,"SID",i.J),ye(s,"RID",t),ye(s,"AID",i.U),W2(i,s),i.o&&i.s&&Zr(s,i.o,i.s),t=new mi(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=N2(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Bn(i.i,t),ii(t,s,e)}function W2(i,e){i.j&&a2({},function(t,s){ye(e,s,t)})}function N2(i,e,t){t=Math.min(i.l.length,t);var s=i.j?it(i.j.Oa,i.j,i):null;e:{var u=i.l;let m=-1;for(;;){const _=["count="+t];-1==m?0<t?(m=u[0].h,_.push("ofs="+m)):m=0:_.push("ofs="+m);let S=!0;for(let j=0;j<t;j++){let q=u[j].h;const ce=u[j].g;if(q-=m,0>q)m=Math.max(0,u[j].h-100),S=!1;else try{as(ce,_,"req"+q+"_")}catch(Te){s&&s(ce)}}if(S){s=_.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,s}function ao(i){i.g||i.u||(i.Y=1,Ar(i.Ga,i),i.A=0)}function l2(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=wt(it(i.Ga,i),Bs(i,i.A)),i.A++,0))}function b2(i){null!=i.B&&(me.clearTimeout(i.B),i.B=null)}function Z2(i){i.g=new mi(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=f1(i.oa);ye(e,"RID","rpc"),ye(e,"SID",i.J),ye(e,"CI",i.N?"0":"1"),ye(e,"AID",i.U),W2(i,e),ye(e,"TYPE","xmlhttp"),i.o&&i.s&&Zr(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=st(f1(e)),t.s=null,t.U=!0,qi(t,i)}function v1(i){null!=i.v&&(me.clearTimeout(i.v),i.v=null)}function Eo(i,e){var t=null;if(i.g==e){v1(i),b2(i),i.g=null;var s=2}else{if(!C1(i.i,e))return;t=e.D,ai(i.i,e),s=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;Tt(s=Z1(),new Ye(s,t,e,u)),xi(i)}else ao(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==s&&function bo(i,e){return!(Dt(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=wt(it(i.Ha,i,e),Bs(i,i.C)),i.C++,0)))}(i,e)||2==s&&l2(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),u){case 1:Di(i,5);break;case 4:Di(i,10);break;case 3:Di(i,6);break;default:Di(i,2)}}function Bs(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Di(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var s=it(i.jb,i);t||(t=new Li("//www.google.com/images/cleardot.gif"),me.location&&"http"==me.location.protocol||k(t,"https"),st(t)),function Mo(i,e){const t=new Nr;if(me.Image){const s=new Image;s.onload=sn(ps,t,s,"TestLoadImage: loaded",!0,e),s.onerror=sn(ps,t,s,"TestLoadImage: error",!1,e),s.onabort=sn(ps,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=sn(ps,t,s,"TestLoadImage: timeout",!1,e),me.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Ie(2);i.G=0,i.j&&i.j.va(e),q2(i),ci(i)}function q2(i){i.G=0,i.I=-1,i.j&&((0!=sr(i.i).length||0!=i.l.length)&&(i.i.i.length=0,A1(i.l),i.l.length=0),i.j.ua())}function z2(i,e,t){let s=function bt(i){return i instanceof Li?f1(i):new Li(i,void 0)}(t);if(""!=s.i)e&&Y(s,e+"."+s.i),R(s,s.m);else{const u=me.location;s=function Kt(i,e,t,s){var u=new Li(null,void 0);return i&&k(u,i),e&&Y(u,e),t&&R(u,t),s&&(u.l=s),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,t)}return i.aa&&xn(i.aa,function(u,m){ye(s,m,u)}),t=i.sa,(e=i.D)&&t&&ye(s,e,t),ye(s,"VER",i.ma),W2(i,s),s}function co(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ee(t&&i.Ba&&!i.qa?new Us({ib:!0}):i.qa)).L=i.H,e}function L2(){}function K2(){if(Kn&&!(10<=Number(Me)))throw Error("Environmental error: no available transport.")}function u2(i,e){Yn.call(this),this.g=new vi(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!p1(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!p1(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new li(this)}function js(i){Fr.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function $o(){Vr.call(this),this.status=1}function li(i){this.g=i}(le=ee.prototype).ea=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$r.g(),this.C=function nr(i){return i.h||(i.h=i.i())}(this.u?this.u:$r),this.g.onreadystatechange=it(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void Ct(this,m)}i=t||"";const u=new Gn(this.headers);s&&a2(s,function(m,_){u.set(_,m)}),s=function I1(i){e:{var e=Mt;const t=i.length,s="string"==typeof i?i.split(""):i;for(let u=0;u<t;u++)if(u in s&&e.call(void 0,s[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),t=me.FormData&&i instanceof me.FormData,!(0<=vn(Be,e))||s||t||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(m,_){this.g.setRequestHeader(_,m)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{e1(this),0<this.B&&((this.K=function ut(i){return Kn&&function Ne(){return function Xt(i){var e=Ce;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=U1(String(kn)).split("."),t=U1("9").split("."),s=Math.max(e.length,t.length);for(let _=0;0==i&&_<s;_++){var u=e[_]||"",m=t[_]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==u[0].length&&0==m[0].length)break;i=r1(0==u[1].length?0:parseInt(u[1],10),0==m[1].length?0:parseInt(m[1],10))||r1(0==u[2].length,0==m[2].length)||r1(u[2],m[2]),u=u[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=it(this.pa,this)):this.A=J1(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){Ct(this,m)}},le.pa=function(){void 0!==ot&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tt(this,"timeout"),this.abort(8))},le.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Tt(this,"complete"),Tt(this,"abort"),Bt(this))},le.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bt(this,!0)),ee.Z.M.call(this)},le.Fa=function(){this.s||(this.F||this.v||this.l?On(this):this.cb())},le.cb=function(){On(this)},le.ba=function(){try{return 2<g1(this)?this.g.status:-1}catch(i){return-1}},le.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},le.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),G(e)}},le.Da=function(){return this.m},le.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(le=vi.prototype).ma=8,le.G=1,le.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},le.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new mi(this,this.h,i,void 0);let m=this.s;if(this.P&&(m?(m=ie(m),vr(m,this.P)):m=this.P),null===this.o&&(u.H=m),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=N2(this,u,e),ye(t=f1(this.F),"RID",i),ye(t,"CVER",22),this.D&&ye(t,"X-HTTP-Session-Id",this.D),W2(this,t),this.o&&m&&Zr(t,this.o,m),Bn(this.i,u),this.Ra&&ye(t,"TYPE","init"),this.ja?(ye(t,"$req",e),ye(t,"SID","null"),u.$=!0,ii(u,t,null)):ii(u,t,e),this.G=2}}else 3==this.G&&(i?Go(this,i):0==this.l.length||Ee(this.i)||Go(this))},le.Ga=function(){if(this.u=null,Z2(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=wt(it(this.bb,this),i)}},le.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ie(10),cr(this),Z2(this))},le.ab=function(){null!=this.v&&(this.v=null,cr(this),l2(this),Ie(19))},le.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Ie(2)):(this.h.info("Failed to ping google.com"),Ie(1))},(le=L2.prototype).xa=function(){},le.wa=function(){},le.va=function(){},le.ua=function(){},le.Oa=function(){},K2.prototype.g=function(i,e){return new u2(i,e)},hn(u2,Yn),u2.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Ar(it(i.hb,i,e))),Ie(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=z2(i,null,i.W),xi(i)},u2.prototype.close=function(){kr(this.g)},u2.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,or(this.g,e)}else this.v?((e={}).__data__=Fn(i),or(this.g,e)):or(this.g,i)},u2.prototype.M=function(){this.g.j=null,delete this.j,kr(this.g),delete this.g,u2.Z.M.call(this)},hn(js,Fr),hn($o,Vr),hn(li,L2),li.prototype.xa=function(){Tt(this.g,"a")},li.prototype.wa=function(i){Tt(this.g,new js(i))},li.prototype.va=function(i){Tt(this.g,new $o(i))},li.prototype.ua=function(){Tt(this.g,"b")},K2.prototype.createWebChannel=K2.prototype.g,u2.prototype.send=u2.prototype.u,u2.prototype.open=u2.prototype.m,u2.prototype.close=u2.prototype.close,Lt.NO_ERROR=0,Lt.TIMEOUT=8,Lt.HTTP_ERROR=6,Ut.COMPLETE="complete",l1.EventType=rr,rr.OPEN="a",rr.CLOSE="b",rr.ERROR="c",rr.MESSAGE="d",Yn.prototype.listen=Yn.prototype.N,ee.prototype.listenOnce=ee.prototype.O,ee.prototype.getLastError=ee.prototype.La,ee.prototype.getLastErrorCode=ee.prototype.Da,ee.prototype.getStatus=ee.prototype.ba,ee.prototype.getResponseJson=ee.prototype.Qa,ee.prototype.getResponseText=ee.prototype.ga,ee.prototype.send=ee.prototype.ea;var cs=_t.createWebChannelTransport=function(){return new K2},Ts=_t.getStatEventTarget=function(){return Z1()},Pi=_t.ErrorCode=Lt,Y2=_t.EventType=Ut,Io=_t.Event=ni,ls=_t.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ms=_t.FetchXmlHttpFactory=Us,Br=_t.WebChannel=l1,us=_t.XhrIo=ee;const gs="@firebase/firestore";class Hr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");let Ns="9.8.3";const Jr=new nt.Yd("@firebase/firestore");function vs(){return Jr.logLevel}function Pt(i,...e){if(Jr.logLevel<=nt.in.DEBUG){const t=e.map(Ji);Jr.debug(`Firestore (${Ns}): ${i}`,...t)}}function Y1(i,...e){if(Jr.logLevel<=nt.in.ERROR){const t=e.map(Ji);Jr.error(`Firestore (${Ns}): ${i}`,...t)}}function Qi(i,...e){if(Jr.logLevel<=nt.in.WARN){const t=e.map(Ji);Jr.warn(`Firestore (${Ns}): ${i}`,...t)}}function Ji(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function A(i="Unexpected state"){const e=`FIRESTORE (${Ns}) INTERNAL ASSERTION FAILED: `+i;throw Y1(e),new Error(e)}function E(i,e){i||A()}function N(i,e){return i}const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends qe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class he{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Se{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Hr.UNAUTHENTICATED))}shutdown(){}}class rn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qn{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let u=this.i;const m=q=>this.i!==u?(u=this.i,t(q)):Promise.resolve();let _=new he;this.o=()=>{this.i++,this.currentUser=this.u(),_.resolve(),_=new he,e.enqueueRetryable(()=>m(this.currentUser))};const S=()=>{const q=_;e.enqueueRetryable((0,Oe.Z)(function*(){yield q.promise,yield m(s.currentUser)}))},j=q=>{Pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),S()};this.t.onInit(q=>j(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?j(q):(Pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),_.resolve(),_=new he)}},0),S()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(Pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(E("string"==typeof s.accessToken),new Se(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return E(null===e||"string"==typeof e),new Hr(e)}}class ln{constructor(e,t,s){this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class P1{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new ln(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o1{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=m=>{null!=m.error&&Pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const _=m.token!==this.p;return this.p=m.token,Pt("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>s(m))};const u=m=>{Pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.g.onInit(m=>u(m)),setTimeout(()=>{if(!this.appCheck){const m=this.g.getImmediate({optional:!0});m?u(m):Pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(E("string"==typeof t.token),this.p=t.token,new q1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function P2(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class ys{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const u=P2(40);for(let m=0;m<u.length;++m)s.length<20&&u[m]<t&&(s+=e.charAt(u[m]%e.length))}return s}}function Dn(i,e){return i<e?-1:i>e?1:0}function h2(i,e,t){return i.length===e.length&&i.every((s,u)=>t(s,e[u]))}function f2(i){return i+"\0"}class Mr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new W(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mr.fromMillis(Date.now())}static fromDate(e){return Mr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new Mr(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dn(this.nanoseconds,e.nanoseconds):Dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class An{constructor(e){this.timestamp=e}static fromTimestamp(e){return new An(e)}static min(){return new An(new Mr(0,0))}static max(){return new An(new Mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Q2{constructor(e,t,s){void 0===t?t=0:t>e.length&&A(),void 0===s?s=e.length-t:s>e.length-t&&A(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===Q2.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Q2?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let u=0;u<s;u++){const m=e.get(u),_=t.get(u);if(m<_)return-1;if(m>_)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class w1 extends Q2{construct(e,t,s){return new w1(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new W(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(u=>u.length>0))}return new w1(t)}static emptyPath(){return new w1([])}}const Fa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class a1 extends Q2{construct(e,t,s){return new a1(e,t,s)}static isValidIdentifier(e){return Fa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),a1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new a1(["__name__"])}static fromServerFormat(e){const t=[];let s="",u=0;const m=()=>{if(0===s.length)throw new W(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let _=!1;for(;u<e.length;){const S=e[u];if("\\"===S){if(u+1===e.length)throw new W(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const j=e[u+1];if("\\"!==j&&"."!==j&&"`"!==j)throw new W(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=j,u+=2}else"`"===S?(_=!_,u++):"."!==S||_?(s+=S,u++):(m(),u++)}if(m(),_)throw new W(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new a1(t)}static emptyPath(){return new a1([])}}class en{constructor(e){this.path=e}static fromPath(e){return new en(w1.fromString(e))}static fromName(e){return new en(w1.fromString(e).popFirst(5))}static empty(){return new en(w1.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===w1.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return w1.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new en(new w1(e.slice()))}}class _c{constructor(e,t,s,u){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=u}}function Ua(i){return i.fields.find(e=>2===e.kind)}function lo(i){return i.fields.filter(e=>2!==e.kind)}_c.UNKNOWN_ID=-1;class Wo{constructor(e,t){this.fieldPath=e,this.kind=t}}class va{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new va(0,d2.min())}}function s4(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=An.fromTimestamp(1e9===s?new Mr(t+1,0):new Mr(t,s));return new d2(u,en.empty(),e)}function uo(i){return new d2(i.readTime,i.key,-1)}class d2{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new d2(An.min(),en.empty(),-1)}static max(){return new d2(An.max(),en.empty(),-1)}}function hi(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=en.comparator(i.documentKey,e.documentKey),0!==t?t:Dn(i.largestBatchId,e.largestBatchId))}const xo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zo{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zs(i){return Ba.apply(this,arguments)}function Ba(){return Ba=(0,Oe.Z)(function*(i){if(i.code!==z.FAILED_PRECONDITION||i.message!==xo)throw i;Pt("LocalStore","Unexpectedly lost primary lease")}),Ba.apply(this,arguments)}class Xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&A(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Xe((s,u)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(s,u)},this.catchCallback=m=>{this.wrapFailure(t,m).next(s,u)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Xe?t:Xe.resolve(t)}catch(t){return Xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Xe.reject(t)}static resolve(e){return new Xe((t,s)=>{t(e)})}static reject(e){return new Xe((t,s)=>{s(e)})}static waitFor(e){return new Xe((t,s)=>{let u=0,m=0,_=!1;e.forEach(S=>{++u,S.next(()=>{++m,_&&m===u&&t()},j=>s(j))}),_=!0,m===u&&t()})}static or(e){let t=Xe.resolve(!1);for(const s of e)t=t.next(u=>u?Xe.resolve(u):s());return t}static forEach(e,t){const s=[];return e.forEach((u,m)=>{s.push(t.call(this,u,m))}),this.waitFor(s)}static mapArray(e,t){return new Xe((s,u)=>{const m=e.length,_=new Array(m);let S=0;for(let j=0;j<m;j++){const q=j;t(e[q]).next(ce=>{_[q]=ce,++S,S===m&&s(_)},ce=>u(ce))}})}static doWhile(e,t){return new Xe((s,u)=>{const m=()=>{!0===e()?t().next(()=>{m()},u):s()};m()})}}class Si{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new he,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new e2(e,t.error)):this.T.resolve()},this.transaction.onerror=s=>{const u=_a(s.target.error);this.T.reject(new e2(e,u))}}static open(e,t,s,u){try{return new Si(t,e.transaction(u,s))}catch(m){throw new e2(t,m)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(Pt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new hs(t)}}class Xi{constructor(e,t,s){this.name=e,this.version=t,this.P=s,12.2===Xi.v((0,qe.z$)())&&Y1("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pt("SimpleDb","Removing database:",e),J2(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,qe.hl)())return!1;if(Xi.S())return!0;const e=(0,qe.z$)(),t=Xi.v(e),s=0<t&&t<10,u=Xi.D(e),m=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||m)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static D(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}k(e){var t=this;return(0,Oe.Z)(function*(){return t.db||(Pt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,u)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=_=>{s(_.target.result)},m.onblocked=()=>{u(new e2(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=_=>{const S=_.target.error;u("VersionError"===S.name?new W(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===S.name?new W(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+S):new e2(e,S))},m.onupgradeneeded=_=>{Pt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',_.oldVersion),t.P.O(_.target.result,m.transaction,_.oldVersion,t.version).next(()=>{Pt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=s=>t.M(s)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,u){var m=this;return(0,Oe.Z)(function*(){const _="readonly"===t;let S=0;for(;;){++S;try{m.db=yield m.k(e);const j=Si.open(m.db,e,_?"readonly":"readwrite",s),q=u(j).next(ce=>(j.R(),ce)).catch(ce=>(j.abort(ce),Xe.reject(ce))).toPromise();return q.catch(()=>{}),yield j.A,q}catch(j){const q="FirebaseError"!==j.name&&S<3;if(Pt("SimpleDb","Transaction failed with error:",j.message,"Retrying:",q),m.close(),!q)return Promise.reject(j)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class ho{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return J2(this.$.delete())}}class e2 extends W{constructor(e,t){super(z.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function p2(i){return"IndexedDbTransactionError"===i.name}class hs{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(Pt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(Pt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),J2(s)}add(e){return Pt("SimpleDb","ADD",this.store.name,e,e),J2(this.store.add(e))}get(e){return J2(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pt("SimpleDb","DELETE",this.store.name,e),J2(this.store.delete(e))}count(){return Pt("SimpleDb","COUNT",this.store.name),J2(this.store.count())}K(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const u=this.cursor(s),m=[];return this.G(u,(_,S)=>{m.push(S)}).next(()=>m)}{const u=this.store.getAll(s.range);return new Xe((m,_)=>{u.onerror=S=>{_(S.target.error)},u.onsuccess=S=>{m(S.target.result)}})}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Xe((u,m)=>{s.onerror=_=>{m(_.target.error)},s.onsuccess=_=>{u(_.target.result)}})}W(e,t){Pt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.H=!1;const u=this.cursor(s);return this.G(u,(m,_,S)=>S.delete())}J(e,t){let s;t?s=e:(s={},t=e);const u=this.cursor(s);return this.G(u,t)}Y(e){const t=this.cursor({});return new Xe((s,u)=>{t.onerror=m=>{const _=_a(m.target.error);u(_)},t.onsuccess=m=>{const _=m.target.result;_?e(_.primaryKey,_.value).next(S=>{S?_.continue():s()}):s()}})}G(e,t){const s=[];return new Xe((u,m)=>{e.onerror=_=>{m(_.target.error)},e.onsuccess=_=>{const S=_.target.result;if(!S)return void u();const j=new ho(S),q=t(S.primaryKey,S.value,j);if(q instanceof Xe){const ce=q.catch(Te=>(j.done(),Xe.reject(Te)));s.push(ce)}j.isDone?u():null===j.U?S.continue():S.continue(j.U)}}).next(()=>Xe.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function J2(i){return new Xe((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const u=_a(s.target.error);t(u)}})}let ya=!1;function _a(i){const e=Xi.v((0,qe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ya||(ya=!0,setTimeout(()=>{throw s},0)),s}}return i}class o4{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;Pt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Oe.Z)(function*(){t.task=null;try{Pt("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(s){p2(s)?Pt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield zs(s)}yield t.Z(1)}))}}class m2{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Oe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.et(s,e))})()}et(e,t){const s=new Set;let u=t,m=!0;return Xe.doWhile(()=>!0===m&&u>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(_=>{if(null!==_&&!s.has(_))return Pt("IndexBackiller",`Processing collection: ${_}`),this.nt(e,_,u).next(S=>{u-=S,s.add(_)});m=!1})).next(()=>t-u)}nt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(u=>this.localStore.localDocuments.getNextDocuments(e,t,u,s).next(m=>{const _=m.changes;return this.localStore.indexManager.updateIndexEntries(e,_).next(()=>this.st(u,m)).next(S=>(Pt("IndexBackiller",`Updating offset: ${S}`),this.localStore.indexManager.updateCollectionGroup(e,t,S))).next(()=>_.size)}))}st(e,t){let s=e;return t.changes.forEach((u,m)=>{const _=uo(m);hi(_,s)>0&&(s=_)}),new d2(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Oi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.it(s),this.rt=s=>t.writeSequenceNumber(s))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function fo(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Do(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function _s(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}Oi.ot=-1;class qr{constructor(e,t){this.comparator=e,this.root=t||yi.EMPTY}insert(e,t){return new qr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,yi.BLACK,null,null))}remove(e){return new qr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(e,s.key);if(0===u)return t+s.left.size;u<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new po(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new po(this.root,e,this.comparator,!1)}getReverseIterator(){return new po(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new po(this.root,e,this.comparator,!0)}}class po{constructor(e,t,s,u){this.isReverse=u,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?s(e.key,t):1,t&&u&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yi{constructor(e,t,s,u,m){this.key=e,this.value=t,this.color=null!=s?s:yi.RED,this.left=null!=u?u:yi.EMPTY,this.right=null!=m?m:yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,u,m){return new yi(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=u?u:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let u=this;const m=s(e,u.key);return u=m<0?u.copy(null,null,null,u.left.insert(e,t,s),null):0===m?u.copy(null,t,null,null,null):u.copy(null,null,null,null,u.right.insert(e,t,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,u=this;if(t(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,t),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===t(e,u.key)){if(u.right.isEmpty())return yi.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,t))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw A();const e=this.left.check();if(e!==this.right.check())throw A();return e+(this.isRed()?0:1)}}yi.EMPTY=null,yi.RED=!0,yi.BLACK=!1,yi.EMPTY=new class{constructor(){this.size=0}get key(){throw A()}get value(){throw A()}get color(){throw A()}get left(){throw A()}get right(){throw A()}copy(i,e,t,s,u){return this}insert(i,e,t){return new yi(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class T1{constructor(e){this.comparator=e,this.data=new qr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,e[1])>=0)return;t(u.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qo(this.data.getIterator())}getIteratorFrom(e){return new qo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof T1)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(0!==this.comparator(u,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new T1(this.comparator);return t.data=e,t}}class qo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function O2(i){return i.hasNext()?i.getNext():void 0}class Ti{constructor(e){this.fields=e,e.sort(a1.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new T1(a1.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return h2(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Ni{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ni(t)}static fromUint8Array(e){const t=function(s){let u="";for(let m=0;m<s.length;++m)u+=String.fromCharCode(s[m]);return u}(e);return new Ni(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ni.EMPTY_BYTE_STRING=new Ni("");const mo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function V2(i){if(E(!!i),"string"==typeof i){let e=0;const t=mo.exec(i);if(E(!!t),t[1]){let u=t[1];u=(u+"000000000").substr(0,9),e=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:zr(i.seconds),nanos:zr(i.nanos)}}function zr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function O(i){return"string"==typeof i?Ni.fromBase64String(i):Ni.fromUint8Array(i)}function F(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function X(i){const e=i.mapValue.fields.__previous_value__;return F(e)?X(e):e}function ge(i){const e=V2(i.mapValue.fields.__local_write_time__.timestampValue);return new Mr(e.seconds,e.nanos)}class Ge{constructor(e,t,s,u,m,_,S,j){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=u,this.ssl=m,this.forceLongPolling=_,this.autoDetectLongPolling=S,this.useFetchStreams=j}}class Qe{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qe("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qe&&e.projectId===this.projectId&&e.database===this.database}}function St(i){return null==i}function un(i){return 0===i&&1/i==-1/0}function _n(i){return"number"==typeof i&&Number.isInteger(i)&&!un(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const jn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},H1={nullValue:"NULL_VALUE"};function Tn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?F(i)?4:Cc(i)?9007199254740991:10:A()}function br(i,e){if(i===e)return!0;const t=Tn(i);if(t!==Tn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ge(i).isEqual(ge(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const m=V2(s.timestampValue),_=V2(u.timestampValue);return m.seconds===_.seconds&&m.nanos===_.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,O(i.bytesValue).isEqual(O(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,u){return zr(s.geoPointValue.latitude)===zr(u.geoPointValue.latitude)&&zr(s.geoPointValue.longitude)===zr(u.geoPointValue.longitude)}(i,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return zr(s.integerValue)===zr(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const m=zr(s.doubleValue),_=zr(u.doubleValue);return m===_?un(m)===un(_):isNaN(m)&&isNaN(_)}return!1}(i,e);case 9:return h2(i.arrayValue.values||[],e.arrayValue.values||[],br);case 10:return function(s,u){const m=s.mapValue.fields||{},_=u.mapValue.fields||{};if(fo(m)!==fo(_))return!1;for(const S in m)if(m.hasOwnProperty(S)&&(void 0===_[S]||!br(m[S],_[S])))return!1;return!0}(i,e);default:return A()}var u}function ji(i,e){return void 0!==(i.values||[]).find(t=>br(t,e))}function g2(i,e){if(i===e)return 0;const t=Tn(i),s=Tn(e);if(t!==s)return Dn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Dn(i.booleanValue,e.booleanValue);case 2:return function(u,m){const _=zr(u.integerValue||u.doubleValue),S=zr(m.integerValue||m.doubleValue);return _<S?-1:_>S?1:_===S?0:isNaN(_)?isNaN(S)?0:-1:1}(i,e);case 3:return Cs(i.timestampValue,e.timestampValue);case 4:return Cs(ge(i),ge(e));case 5:return Dn(i.stringValue,e.stringValue);case 6:return function(u,m){const _=O(u),S=O(m);return _.compareTo(S)}(i.bytesValue,e.bytesValue);case 7:return function(u,m){const _=u.split("/"),S=m.split("/");for(let j=0;j<_.length&&j<S.length;j++){const q=Dn(_[j],S[j]);if(0!==q)return q}return Dn(_.length,S.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,m){const _=Dn(zr(u.latitude),zr(m.latitude));return 0!==_?_:Dn(zr(u.longitude),zr(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,m){const _=u.values||[],S=m.values||[];for(let j=0;j<_.length&&j<S.length;++j){const q=g2(_[j],S[j]);if(q)return q}return Dn(_.length,S.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,m){if(u===jn.mapValue&&m===jn.mapValue)return 0;if(u===jn.mapValue)return 1;if(m===jn.mapValue)return-1;const _=u.fields||{},S=Object.keys(_),j=m.fields||{},q=Object.keys(j);S.sort(),q.sort();for(let ce=0;ce<S.length&&ce<q.length;++ce){const Te=Dn(S[ce],q[ce]);if(0!==Te)return Te;const ct=g2(_[S[ce]],j[q[ce]]);if(0!==ct)return ct}return Dn(S.length,q.length)}(i.mapValue,e.mapValue);default:throw A()}}function Cs(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Dn(i,e);const t=V2(i),s=V2(e),u=Dn(t.seconds,s.seconds);return 0!==u?u:Dn(t.nanos,s.nanos)}function t2(i){return Gs(i)}function Gs(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const u=V2(s);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?O(i.bytesValue).toBase64():"referenceValue"in i?en.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let u="[",m=!0;for(const _ of s.values||[])m?m=!1:u+=",",u+=Gs(_);return u+"]"}(i.arrayValue):"mapValue"in i?function(s){const u=Object.keys(s.fields||{}).sort();let m="{",_=!0;for(const S of u)_?_=!1:m+=",",m+=`${S}:${Gs(s.fields[S])}`;return m+"}"}(i.mapValue):A();var e}function R2(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Vi(i){return!!i&&"integerValue"in i}function k2(i){return!!i&&"arrayValue"in i}function ws(i){return!!i&&"nullValue"in i}function H2(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function $s(i){return!!i&&"mapValue"in i}function Ws(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Do(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ws(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ws(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Cc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function E6(i){return"nullValue"in i?H1:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?R2(Qe.empty(),en.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:A()}function Ca(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?R2(Qe.empty(),en.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?jn:A()}function Yo(i,e){const t=g2(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function wa(i,e){const t=g2(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class E2{constructor(e){this.value=e}static empty(){return new E2({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!$s(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ws(t)}setAll(e){let t=a1.emptyPath(),s={},u=[];e.forEach((_,S)=>{if(!t.isImmediateParentOf(S)){const j=this.getFieldsMap(t);this.applyChanges(j,s,u),s={},u=[],t=S.popLast()}_?s[S.lastSegment()]=Ws(_):u.push(S.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,s,u)}delete(e){const t=this.field(e.popLast());$s(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return br(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let u=t.mapValue.fields[e.get(s)];$s(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=u),t=u}return t.mapValue.fields}applyChanges(e,t,s){Do(t,(u,m)=>e[u]=m);for(const u of s)delete e[u]}clone(){return new E2(Ws(this.value))}}function Zs(i){const e=[];return Do(i.fields,(t,s)=>{const u=new a1([t]);if($s(s)){const m=Zs(s.mapValue).fields;if(0===m.length)e.push(u);else for(const _ of m)e.push(u.child(_))}else e.push(u)}),new Ti(e)}class dr{constructor(e,t,s,u,m,_){this.key=e,this.documentType=t,this.version=s,this.readTime=u,this.data=m,this.documentState=_}static newInvalidDocument(e){return new dr(e,0,An.min(),An.min(),E2.empty(),0)}static newFoundDocument(e,t,s){return new dr(e,1,t,An.min(),s,0)}static newNoDocument(e,t){return new dr(e,2,t,An.min(),E2.empty(),0)}static newUnknownDocument(e,t){return new dr(e,3,t,An.min(),E2.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=E2.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=E2.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=An.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class c0{constructor(e,t=null,s=[],u=[],m=null,_=null,S=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=u,this.limit=m,this.startAt=_,this.endAt=S,this.ut=null}}function ja(i,e=null,t=[],s=[],u=null,m=null,_=null){return new c0(i,e,t,s,u,m,_)}function Qo(i){const e=N(i);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(u=s).field.canonicalString()+u.op.toString()+t2(u.value);var u}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(u=s).field.canonicalString()+u.dir;var u}).join(","),St(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>t2(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>t2(s)).join(",")),e.ut=t}return e.ut}function So(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!I6(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((t=i.filters[u]).op!==(s=e.filters[u]).op||!t.field.isEqual(s.field)||!br(t.value,s.value))return!1;var t,s;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Xo(i.startAt,e.startAt)&&Xo(i.endAt,e.endAt)}function Ma(i){return en.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function qs(i,e){return i.filters.filter(t=>t instanceof zi&&t.field.isEqual(e))}function Ga(i,e,t){let s=H1,u=!0;for(const m of qs(i,e)){let _=H1,S=!0;switch(m.op){case"<":case"<=":_=E6(m.value);break;case"==":case"in":case">=":_=m.value;break;case">":_=m.value,S=!1;break;case"!=":case"not-in":_=H1}Yo({value:s,inclusive:u},{value:_,inclusive:S})<0&&(s=_,u=S)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const _=t.position[m];Yo({value:s,inclusive:u},{value:_,inclusive:t.inclusive})<0&&(s=_,u=t.inclusive);break}return{value:s,inclusive:u}}function V4(i,e,t){let s=jn,u=!0;for(const m of qs(i,e)){let _=jn,S=!0;switch(m.op){case">=":case">":_=Ca(m.value),S=!1;break;case"==":case"in":case"<=":_=m.value;break;case"<":_=m.value,S=!1;break;case"!=":case"not-in":_=jn}wa({value:s,inclusive:u},{value:_,inclusive:S})>0&&(s=_,u=S)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const _=t.position[m];wa({value:s,inclusive:u},{value:_,inclusive:t.inclusive})>0&&(s=_,u=t.inclusive);break}return{value:s,inclusive:u}}class zi extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,s):new Jo(e,t,s):"array-contains"===t?new Wa(e,s):"in"===t?new go(e,s):"not-in"===t?new wc(e,s):"array-contains-any"===t?new l4(e,s):new zi(e,t,s)}static ct(e,t,s){return"in"===t?new $a(e,s):new c4(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(g2(t,this.value)):null!==t&&Tn(this.value)===Tn(t)&&this.at(g2(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return A()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Jo extends zi{constructor(e,t,s){super(e,t,s),this.key=en.fromName(s.referenceValue)}matches(e){const t=en.comparator(e.key,this.key);return this.at(t)}}class $a extends zi{constructor(e,t){super(e,"in",t),this.keys=ba(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class c4 extends zi{constructor(e,t){super(e,"not-in",t),this.keys=ba(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ba(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>en.fromName(s.referenceValue))}class Wa extends zi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return k2(t)&&ji(t.arrayValue,this.value)}}class go extends zi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ji(this.value.arrayValue,t)}}class wc extends zi{constructor(e,t){super(e,"not-in",t)}matches(e){if(ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ji(this.value.arrayValue,t)}}class l4 extends zi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!k2(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>ji(this.value.arrayValue,s))}}class To{constructor(e,t){this.position=e,this.inclusive=t}}class Ks{constructor(e,t="asc"){this.field=e,this.dir=t}}function I6(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Ms(i,e,t){let s=0;for(let u=0;u<i.position.length;u++){const m=e[u],_=i.position[u];if(s=m.field.isKeyField()?en.comparator(en.fromName(_.referenceValue),t.key):g2(_,t.data.field(m.field)),"desc"===m.dir&&(s*=-1),0!==s)break}return s}function Xo(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!br(i.position[t],e.position[t]))return!1;return!0}class X2{constructor(e,t=null,s=[],u=[],m=null,_="F",S=null,j=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=u,this.limit=m,this.limitType=_,this.startAt=S,this.endAt=j,this.lt=null,this.ft=null}}function Mc(i,e,t,s,u,m,_,S){return new X2(i,e,t,s,u,m,_,S)}function ea(i){return new X2(i)}function Za(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function u4(i){for(const e of i.filters)if(e.ht())return e.field;return null}function Ea(i){return null!==i.collectionGroup}function vo(i){const e=N(i);if(null===e.lt){e.lt=[];const t=u4(e),s=Za(e);if(null!==t&&null===s)t.isKeyField()||e.lt.push(new Ks(t)),e.lt.push(new Ks(a1.keyField(),"asc"));else{let u=!1;for(const m of e.explicitOrderBy)e.lt.push(m),m.field.isKeyField()&&(u=!0);if(!u){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ks(a1.keyField(),m))}}}return e.lt}function es(i){const e=N(i);if(!e.ft)if("F"===e.limitType)e.ft=ja(e.path,e.collectionGroup,vo(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of vo(e))t.push(new Ks(m.field,"desc"===m.dir?"asc":"desc"));const s=e.endAt?new To(e.endAt.position,e.endAt.inclusive):null,u=e.startAt?new To(e.startAt.position,e.startAt.inclusive):null;e.ft=ja(e.path,e.collectionGroup,t,e.filters,e.limit,s,u)}return e.ft}function bc(i,e,t){return new X2(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function No(i,e){return So(es(i),es(e))&&i.limitType===e.limitType}function Ia(i){return`${Qo(es(i))}|lt:${i.limitType}`}function Ls(i){return`Query(target=${function a4(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${t2(s.value)}`;var s}).join(", ")}]`),St(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>t2(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>t2(t)).join(",")),`Target(${e})`}(es(i))}; limitType=${i.limitType})`}function zo(i,e){return e.isFoundDocument()&&function(t,s){const u=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(u):en.isDocumentKey(t.path)?t.path.isEqual(u):t.path.isImmediateParentOf(u)}(i,e)&&function(t,s){for(const u of t.explicitOrderBy)if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(i,e)&&function(t,s){for(const u of t.filters)if(!u.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(u,m,_){const S=Ms(u,m,_);return u.inclusive?S<=0:S<0}(t.startAt,vo(t),s)||t.endAt&&!function(u,m,_){const S=Ms(u,m,_);return u.inclusive?S>=0:S>0}(t.endAt,vo(t),s)));var t,s}function h4(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function I2(i){return(e,t)=>{let s=!1;for(const u of vo(i)){const m=Aa(u,e,t);if(0!==m)return m;s=s||u.field.isKeyField()}return 0}}function Aa(i,e,t){const s=i.field.isKeyField()?en.comparator(e.key,t.key):function(u,m,_){const S=m.data.field(u),j=_.data.field(u);return null!==S&&null!==j?g2(S,j):A()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return A()}}function qa(i,e){if(i.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:un(e)?"-0":e}}function ta(i){return{integerValue:""+i}}function Ka(i,e){return _n(e)?ta(e):qa(i,e)}class Ya{constructor(){this._=void 0}}function l0(i,e,t){return i instanceof Ps?function(s,u){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&(m.fields.__previous_value__=u),{mapValue:m}}(t,e):i instanceof Ys?A6(i,e):i instanceof Qs?bs(i,e):function(s,u){const m=Lo(s,u),_=Ec(m)+Ec(s._t);return Vi(m)&&Vi(s._t)?ta(_):qa(s.wt,_)}(i,e)}function u0(i,e,t){return i instanceof Ys?A6(i,e):i instanceof Qs?bs(i,e):t}function Lo(i,e){return i instanceof Os?Vi(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class Ps extends Ya{}class Ys extends Ya{constructor(e){super(),this.elements=e}}function A6(i,e){const t=f4(e);for(const s of i.elements)t.some(u=>br(u,s))||t.push(s);return{arrayValue:{values:t}}}class Qs extends Ya{constructor(e){super(),this.elements=e}}function bs(i,e){let t=f4(e);for(const s of i.elements)t=t.filter(u=>!br(u,s));return{arrayValue:{values:t}}}class Os extends Ya{constructor(e,t){super(),this.wt=e,this._t=t}}function Ec(i){return zr(i.integerValue||i.doubleValue)}function f4(i){return k2(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class na{constructor(e,t){this.field=e,this.transform=t}}class Js{constructor(e,t){this.version=e,this.transformResults=t}}class Xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function v2(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Oo{}function _i(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new ia(i.key,Xr.none()):new xa(i.key,i.data,Xr.none());{const t=i.data,s=E2.empty();let u=new T1(a1.comparator);for(let m of e.fields)if(!u.has(m)){let _=t.field(m);null===_&&m.length>1&&(m=m.popLast(),_=t.field(m)),null===_?s.delete(m):s.set(m,_),u=u.add(m)}return new Xs(i.key,s,new Ti(u.toArray()),Xr.none())}}function Qa(i,e,t){i instanceof xa?function(s,u,m){const _=s.value.clone(),S=Da(s.fieldTransforms,u,m.transformResults);_.setAll(S),u.convertToFoundDocument(m.version,_).setHasCommittedMutations()}(i,e,t):i instanceof Xs?function(s,u,m){if(!v2(s.precondition,u))return void u.convertToUnknownDocument(m.version);const _=Da(s.fieldTransforms,u,m.transformResults),S=u.data;S.setAll(k4(s)),S.setAll(_),u.convertToFoundDocument(m.version,S).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ra(i,e,t,s){return i instanceof xa?function(u,m,_,S){if(!v2(u.precondition,m))return _;const j=u.value.clone(),q=H4(u.fieldTransforms,S,m);return j.setAll(q),m.convertToFoundDocument(m.version,j).setHasLocalMutations(),null}(i,e,t,s):i instanceof Xs?function(u,m,_,S){if(!v2(u.precondition,m))return _;const j=H4(u.fieldTransforms,S,m),q=m.data;return q.setAll(k4(u)),q.setAll(j),m.convertToFoundDocument(m.version,q).setHasLocalMutations(),null===_?null:_.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(ce=>ce.field))}(i,e,t,s):(_=t,v2(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):_);var m,_}function F2(i,e){let t=null;for(const s of i.fieldTransforms){const u=e.data.field(s.field),m=Lo(s.transform,u||null);null!=m&&(null===t&&(t=E2.empty()),t.set(s.field,m))}return t||null}function Ic(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&h2(t,s,(u,m)=>function Po(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof Ys&&s instanceof Ys||t instanceof Qs&&s instanceof Qs?h2(t.elements,s.elements,br):t instanceof Os&&s instanceof Os?br(t._t,s._t):t instanceof Ps&&s instanceof Ps);var t,s}(u,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class xa extends Oo{constructor(e,t,s,u=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Xs extends Oo{constructor(e,t,s,u,m=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=u,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function k4(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Da(i,e,t){const s=new Map;E(i.length===t.length);for(let u=0;u<t.length;u++){const m=i[u],_=m.transform,S=e.data.field(m.field);s.set(m.field,u0(_,S,t[u]))}return s}function H4(i,e,t){const s=new Map;for(const u of i){const m=u.transform,_=t.data.field(u.field);s.set(u.field,l0(m,_,e))}return s}class ia extends Oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sa extends Oo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Ta{constructor(e){this.count=e}}var Q1,F1;function Na(i){switch(i){default:return A();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function Vo(i){if(void 0===i)return Y1("GRPC error has no .code"),z.UNKNOWN;switch(i){case Q1.OK:return z.OK;case Q1.CANCELLED:return z.CANCELLED;case Q1.UNKNOWN:return z.UNKNOWN;case Q1.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case Q1.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case Q1.INTERNAL:return z.INTERNAL;case Q1.UNAVAILABLE:return z.UNAVAILABLE;case Q1.UNAUTHENTICATED:return z.UNAUTHENTICATED;case Q1.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case Q1.NOT_FOUND:return z.NOT_FOUND;case Q1.ALREADY_EXISTS:return z.ALREADY_EXISTS;case Q1.PERMISSION_DENIED:return z.PERMISSION_DENIED;case Q1.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case Q1.ABORTED:return z.ABORTED;case Q1.OUT_OF_RANGE:return z.OUT_OF_RANGE;case Q1.UNIMPLEMENTED:return z.UNIMPLEMENTED;case Q1.DATA_LOSS:return z.DATA_LOSS;default:return A()}}(F1=Q1||(Q1={}))[F1.OK=0]="OK",F1[F1.CANCELLED=1]="CANCELLED",F1[F1.UNKNOWN=2]="UNKNOWN",F1[F1.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",F1[F1.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",F1[F1.NOT_FOUND=5]="NOT_FOUND",F1[F1.ALREADY_EXISTS=6]="ALREADY_EXISTS",F1[F1.PERMISSION_DENIED=7]="PERMISSION_DENIED",F1[F1.UNAUTHENTICATED=16]="UNAUTHENTICATED",F1[F1.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",F1[F1.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",F1[F1.ABORTED=10]="ABORTED",F1[F1.OUT_OF_RANGE=11]="OUT_OF_RANGE",F1[F1.UNIMPLEMENTED=12]="UNIMPLEMENTED",F1[F1.INTERNAL=13]="INTERNAL",F1[F1.UNAVAILABLE=14]="UNAVAILABLE",F1[F1.DATA_LOSS=15]="DATA_LOSS";class Kr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[u,m]of s)if(this.equalsFn(u,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),u=this.inner[s];if(void 0===u)return this.inner[s]=[[e,t]],void this.innerSize++;for(let m=0;m<u.length;m++)if(this.equalsFn(u[m][0],e))return void(u[m]=[e,t]);u.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return 1===s.length?delete this.inner[t]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(t,s)=>{for(const[u,m]of s)e(u,m)})}isEmpty(){return _s(this.inner)}size(){return this.innerSize}}const Ro=new qr(en.comparator);function A2(){return Ro}const Ac=new qr(en.comparator);function Ja(...i){let e=Ac;for(const t of i)e=e.insert(t.key,t);return e}function x2(i){let e=Ac;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function ts(){return Xa()}function xc(){return Xa()}function Xa(){return new Kr(i=>i.toString(),(i,e)=>i.isEqual(e))}const za=new qr(en.comparator),Dc=new T1(en.comparator);function E1(...i){let e=Dc;for(const t of i)e=e.add(t);return e}const yo=new T1(Dn);function Vs(){return yo}class Es{constructor(e,t,s,u,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=u,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,eo.createSynthesizedTargetChangeForCurrentChange(e,t)),new Es(An.min(),s,Vs(),A2(),E1())}}class eo{constructor(e,t,s,u,m){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=u,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t){return new eo(Ni.EMPTY_BYTE_STRING,t,E1(),E1(),E1())}}class sa{constructor(e,t,s,u){this.gt=e,this.removedTargetIds=t,this.key=s,this.yt=u}}class F4{constructor(e,t){this.targetId=e,this.It=t}}class to{constructor(e,t,s=Ni.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=u}}class d4{constructor(){this.Tt=0,this.Et=tc(),this.At=Ni.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=E1(),t=E1(),s=E1();return this.Et.forEach((u,m)=>{switch(m){case 0:e=e.add(u);break;case 2:t=t.add(u);break;case 1:s=s.add(u);break;default:A()}}),new eo(this.At,this.Rt,e,t,s)}Dt(){this.bt=!1,this.Et=tc()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class U2{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=A2(),this.Bt=ec(),this.Lt=new T1(Dn)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const s=this.Qt(t);switch(e.state){case 0:this.jt(t)&&s.Vt(e.resumeToken);break;case 1:s.kt(),s.Pt||s.Dt(),s.Vt(e.resumeToken);break;case 2:s.kt(),s.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(s.Ot(),s.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),s.Vt(e.resumeToken));break;default:A()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((s,u)=>{this.jt(u)&&t(u)})}zt(e){const t=e.targetId,s=e.It.count,u=this.Ht(t);if(u){const m=u.target;if(Ma(m))if(0===s){const _=new en(m.path);this.Kt(t,_,dr.newNoDocument(_,An.min()))}else E(1===s);else this.Jt(t)!==s&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((m,_)=>{const S=this.Ht(_);if(S){if(m.current&&Ma(S.target)){const j=new en(S.target.path);null!==this.$t.get(j)||this.Xt(_,j)||this.Kt(_,j,dr.newNoDocument(j,e))}m.vt&&(t.set(_,m.St()),m.Dt())}});let s=E1();this.Bt.forEach((m,_)=>{let S=!0;_.forEachWhile(j=>{const q=this.Ht(j);return!q||2===q.purpose||(S=!1,!1)}),S&&(s=s.add(m))}),this.$t.forEach((m,_)=>_.setReadTime(e));const u=new Es(e,t,this.Lt,this.$t,s);return this.$t=A2(),this.Bt=ec(),this.Lt=new T1(Dn),u}qt(e,t){if(!this.jt(e))return;const s=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,s),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,s){if(!this.jt(e))return;const u=this.Qt(e);this.Xt(e,t)?u.Ct(t,1):u.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),s&&(this.$t=this.$t.insert(t,s))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new d4,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new T1(Dn),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||Pt("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new d4),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function ec(){return new qr(en.comparator)}function tc(){return new qr(en.comparator)}const Sc={asc:"ASCENDING",desc:"DESCENDING"},Is={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class oa{constructor(e,t){this.databaseId=e,this.dt=t}}function La(i,e){return i.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function p4(i,e){return i.dt?e.toBase64():e.toUint8Array()}function m4(i,e){return La(i,e.toTimestamp())}function Ri(i){return E(!!i),An.fromTimestamp(function(e){const t=V2(e);return new Mr(t.seconds,t.nanos)}(i))}function Tc(i,e){return(t=i,new w1(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function g4(i){const e=w1.fromString(i);return E(Pc(e)),e}function Pa(i,e){return Tc(i.databaseId,e.path)}function D2(i,e){const t=g4(e);if(t.get(1)!==i.databaseId.projectId)throw new W(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new W(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new en(I(t))}function C(i,e){return Tc(i.databaseId,e)}function d(i){const e=g4(i);return 4===e.length?w1.emptyPath():I(e)}function g(i){return new w1(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function I(i){return E(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function $(i,e,t){return{name:Pa(i,e),fields:t.value.mapValue.fields}}function ne(i,e,t){const s=D2(i,e.name),u=Ri(e.updateTime),m=new E2({mapValue:{fields:e.fields}}),_=dr.newFoundDocument(s,u,m);return t&&_.setHasCommittedMutations(),t?_.setHasCommittedMutations():_}function Ht(i,e){let t;if(e instanceof xa)t={update:$(i,e.key,e.value)};else if(e instanceof ia)t={delete:Pa(i,e.key)};else if(e instanceof Xs)t={update:$(i,e.key,e.data),updateMask:Lc(e.fieldMask)};else{if(!(e instanceof Sa))return A();t={verify:Pa(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(u,m){const _=m.transform;if(_ instanceof Ps)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Ys)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Qs)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof Os)return{fieldPath:m.field.canonicalString(),increment:_._t};throw A()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:m4(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:A()),t;var u}function mn(i,e){const t=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?Xr.updateTime(Ri(u.updateTime)):void 0!==u.exists?Xr.exists(u.exists):Xr.none():Xr.none(),s=e.updateTransforms?e.updateTransforms.map(u=>function(m,_){let S=null;"setToServerValue"in _?(E("REQUEST_TIME"===_.setToServerValue),S=new Ps):"appendMissingElements"in _?S=new Ys(_.appendMissingElements.values||[]):"removeAllFromArray"in _?S=new Qs(_.removeAllFromArray.values||[]):"increment"in _?S=new Os(m,_.increment):A();const j=a1.fromServerFormat(_.fieldPath);return new na(j,S)}(i,u)):[];var u;if(e.update){const u=D2(i,e.update.name),m=new E2({mapValue:{fields:e.update.fields}});if(e.updateMask){const _=new Ti((e.updateMask.fieldPaths||[]).map(q=>a1.fromServerFormat(q)));return new Xs(u,m,_,t,s)}return new xa(u,m,t,s)}if(e.delete){const u=D2(i,e.delete);return new ia(u,t)}if(e.verify){const u=D2(i,e.verify);return new Sa(u,t)}return A()}function Pn(i,e){return{documents:[C(i,e.path)]}}function fi(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=C(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=C(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const u=function(j){if(0===j.length)return;const q=j.map(ce=>function(Te){if("=="===Te.op){if(H2(Te.value))return{unaryFilter:{field:As(Te.field),op:"IS_NAN"}};if(ws(Te.value))return{unaryFilter:{field:As(Te.field),op:"IS_NULL"}}}else if("!="===Te.op){if(H2(Te.value))return{unaryFilter:{field:As(Te.field),op:"IS_NOT_NAN"}};if(ws(Te.value))return{unaryFilter:{field:As(Te.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:As(Te.field),op:no(Te.op),value:Te.value}}}(ce));return 1===q.length?q[0]:{compositeFilter:{op:"AND",filters:q}}}(e.filters);u&&(t.structuredQuery.where=u);const m=function(j){if(0!==j.length)return j.map(q=>{return{field:As((ce=q).field),direction:U4(ce.dir)};var ce})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const _=(q=e.limit,i.dt||St(q)?q:{value:q});var q,S,j;return null!==_&&(t.structuredQuery.limit=_),e.startAt&&(t.structuredQuery.startAt={before:(S=e.startAt).inclusive,values:S.position}),e.endAt&&(t.structuredQuery.endAt={before:!(j=e.endAt).inclusive,values:j.position}),t}function ns(i){let e=d(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let u=null;if(s>0){E(1===s);const ce=t.from[0];ce.allDescendants?u=ce.collectionId:e=e.child(ce.collectionId)}let m=[];t.where&&(m=Nc(t.where));let _=[];t.orderBy&&(_=t.orderBy.map(ce=>{return new Ks(fs((Te=ce).field),function(ct){switch(ct){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Te.direction));var Te}));let S=null;t.limit&&(S=function(ce){let Te;return Te="object"==typeof ce?ce.value:ce,St(Te)?null:Te}(t.limit));let j=null;var ce;t.startAt&&(j=new To((ce=t.startAt).values||[],!!ce.before));let q=null;return t.endAt&&(q=function(ce){return new To(ce.values||[],!ce.before)}(t.endAt)),Mc(e,u,_,m,S,"F",j,q)}function Nc(i){return i?void 0!==i.unaryFilter?[nc(i)]:void 0!==i.fieldFilter?[zc(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Nc(e)).reduce((e,t)=>e.concat(t)):A():[]}function U4(i){return Sc[i]}function no(i){return Is[i]}function As(i){return{fieldPath:i.canonicalString()}}function fs(i){return a1.fromServerFormat(i.fieldPath)}function zc(i){return zi.create(fs(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return A()}}(i.fieldFilter.op),i.fieldFilter.value)}function nc(i){switch(i.unaryFilter.op){case"IS_NAN":const e=fs(i.unaryFilter.field);return zi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=fs(i.unaryFilter.field);return zi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fs(i.unaryFilter.field);return zi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=fs(i.unaryFilter.field);return zi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return A()}}function Lc(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Pc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function S2(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=xs(e)),e=Oc(i.get(t),e);return xs(e)}function Oc(i,e){let t=e;const s=i.length;for(let u=0;u<s;u++){const m=i.charAt(u);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function xs(i){return i+"\x01\x01"}function _o(i){const e=i.length;if(E(e>=2),2===e)return E("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),w1.emptyPath();const t=e-2,s=[];let u="";for(let m=0;m<e;){const _=i.indexOf("\x01",m);switch((_<0||_>t)&&A(),i.charAt(_+1)){case"\x01":const S=i.substring(m,_);let j;0===u.length?j=S:(u+=S,j=u,u=""),s.push(j);break;case"\x10":u+=i.substring(m,_),u+="\0";break;case"\x11":u+=i.substring(m,_+1);break;default:A()}m=_+2}return new w1(s)}const x6=["userId","batchId"];function Vc(i,e){return[i,S2(e)]}function D6(i,e,t){return[i,S2(e),t]}const B4={},w3=["prefixPath","collectionGroup","readTime","documentId"],M3=["prefixPath","collectionGroup","documentId"],h0=["collectionGroup","readTime","prefixPath","documentId"],f0=["canonicalId","targetId"],rc=["targetId","path"],d0=["path","targetId"],p0=["collectionId","parent"],b3=["indexId","uid"],j4=["uid","sequenceNumber"],E3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],m0=["indexId","uid","orderedDocumentKey"],g0=["userId","collectionPath","documentId"],v0=["userId","collectionPath","largestBatchId"],S6=["userId","collectionGroup","largestBatchId"],T6=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],G4=[...T6,"documentOverlays"],v4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rs=v4,N6=[...Rs,"indexConfiguration","indexState","indexEntries"];class Rc extends Zo{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Gi(i,e){const t=N(i);return Xi.N(t.ee,e)}class ic{constructor(e,t,s,u){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let u=0;u<this.mutations.length;u++){const m=this.mutations[u];m.key.isEqual(e.key)&&Qa(m,e,s[u])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ra(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ra(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=xc();return this.mutations.forEach(u=>{const m=e.get(u.key),_=m.overlayedDocument;let S=this.applyToLocalView(_,m.mutatedFields);S=t.has(u.key)?null:S;const j=_i(_,S);null!==j&&s.set(u.key,j),_.isValidDocument()||_.convertToNoDocument(An.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),E1())}isEqual(e){return this.batchId===e.batchId&&h2(this.mutations,e.mutations,(t,s)=>Ic(t,s))&&h2(this.baseMutations,e.baseMutations,(t,s)=>Ic(t,s))}}class $4{constructor(e,t,s,u){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=u}static from(e,t,s){E(e.mutations.length===s.length);let u=za;const m=e.mutations;for(let _=0;_<m.length;_++)u=u.insert(m[_].key,s[_].version);return new $4(e,t,s,u)}}class W4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Va{constructor(e,t,s,u,m=An.min(),_=An.min(),S=Ni.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=u,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=_,this.resumeToken=S}withSequenceNumber(e){return new Va(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Va(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class y0{constructor(e){this.ne=e}}function y4(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_4(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Pa(u=i.ne,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:La(u,m.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:kc(e.version)};else{if(!e.isUnknownDocument())return A();s.unknownDocument={path:t.path.toArray(),version:kc(e.version)}}var u,m;return s}function _4(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function kc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sc(i){const e=new Mr(i.seconds,i.nanoseconds);return An.fromTimestamp(e)}function oc(i,e){const t=(e.baseMutations||[]).map(m=>mn(i.ne,m));for(let m=0;m<e.mutations.length-1;++m){const _=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(_.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const s=e.mutations.map(m=>mn(i.ne,m)),u=Mr.fromMillis(e.localWriteTimeMs);return new ic(e.batchId,u,t,s)}function Hc(i){const e=sc(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?sc(i.lastLimboFreeSnapshotVersion):An.min();let s;var u;return void 0!==i.query.documents?(E(1===(u=i.query).documents.length),s=es(ea(d(u.documents[0])))):s=es(ns(i.query)),new Va(s,i.targetId,0,i.lastListenSequenceNumber,e,t,Ni.fromBase64String(i.resumeToken))}function C0(i,e){const t=kc(e.snapshotVersion),s=kc(e.lastLimboFreeSnapshotVersion);let u;u=Ma(e.target)?Pn(i.ne,e.target):fi(i.ne,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qo(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:u}}function z6(i){const e=ns({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?bc(e,e.limit,"L"):e}function ks(i,e){return new W4(e.largestBatchId,mn(i.ne,e.overlayMutation))}function w0(i,e){const t=e.path.lastSegment();return[i,S2(e.path.popLast()),t]}function L6(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:kc(s.readTime),documentKey:S2(s.documentKey.path),largestBatchId:s.largestBatchId}}class I3{getBundleMetadata(e,t){return M0(e).get(t).next(s=>{if(s)return{id:(u=s).bundleId,createTime:sc(u.createTime),version:u.version};var u})}saveBundleMetadata(e,t){return M0(e).put({bundleId:(s=t).id,createTime:kc(Ri(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return b0(e).get(t).next(s=>{if(s)return{name:(u=s).name,query:z6(u.bundledQuery),readTime:sc(u.readTime)};var u})}saveNamedQuery(e,t){return b0(e).put({name:(s=t).name,readTime:kc(Ri(s.readTime)),bundledQuery:s.bundledQuery});var s}}function M0(i){return Gi(i,"bundles")}function b0(i){return Gi(i,"namedQueries")}class P6{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new P6(e,t.uid||"")}getOverlay(e,t){return C4(e).get(w0(this.userId,t)).next(s=>s?ks(this.wt,s):null)}getOverlays(e,t){const s=ts();return Xe.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){const u=[];return s.forEach((m,_)=>{const S=new W4(t,_);u.push(this.ie(e,S))}),Xe.waitFor(u)}removeOverlaysForBatchId(e,t,s){const u=new Set;t.forEach(_=>u.add(S2(_.getCollectionPath())));const m=[];return u.forEach(_=>{const S=IDBKeyRange.bound([this.userId,_,s],[this.userId,_,s+1],!1,!0);m.push(C4(e).W("collectionPathOverlayIndex",S))}),Xe.waitFor(m)}getOverlaysForCollection(e,t,s){const u=ts(),m=S2(t),_=IDBKeyRange.bound([this.userId,m,s],[this.userId,m,Number.POSITIVE_INFINITY],!0);return C4(e).K("collectionPathOverlayIndex",_).next(S=>{for(const j of S){const q=ks(this.wt,j);u.set(q.getKey(),q)}return u})}getOverlaysForCollectionGroup(e,t,s,u){const m=ts();let _;const S=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return C4(e).J({index:"collectionGroupOverlayIndex",range:S},(j,q,ce)=>{const Te=ks(this.wt,q);m.size()<u||Te.largestBatchId===_?(m.set(Te.getKey(),Te),_=Te.largestBatchId):ce.done()}).next(()=>m)}ie(e,t){return C4(e).put(function(s,u,m){const[_,S,j]=w0(u,m.mutation.key);return{userId:u,collectionPath:S,documentId:j,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:Ht(s.ne,m.mutation)}}(this.wt,this.userId,t))}}function C4(i){return Gi(i,"documentOverlays")}class ac{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(zr(e.integerValue));else if("doubleValue"in e){const s=zr(e.doubleValue);isNaN(s)?this.ce(t,13):(this.ce(t,15),un(s)?t.ae(0):t.ae(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ce(t,20),"string"==typeof s?t.he(s):(t.he(`${s.seconds||""}`),t.ae(s.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(O(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ce(t,45),t.ae(s.latitude||0),t.ae(s.longitude||0)}else"mapValue"in e?Cc(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):A()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const s=e.fields||{};this.ce(t,55);for(const u of Object.keys(s))this.le(u,t),this.oe(s[u],t)}me(e,t){const s=e.values||[];this.ce(t,50);for(const u of s)this.oe(u,t)}_e(e,t){this.ce(t,37),en.fromName(e).path.forEach(s=>{this.ce(t,60),this.ge(s,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function A3(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function E0(i){const e=64-function(t){let s=0;for(let u=0;u<8;++u){const m=A3(255&t[u]);if(s+=m,8!==m)break}return s}(i);return Math.ceil(e/8)}ac.ye=new ac;class y1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ie(s.value),s=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ae(s.value),s=t.next();this.Re()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ie(s);else if(s<2048)this.Ie(960|s>>>6),this.Ie(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s);else{const u=t.codePointAt(0);this.Ie(240|u>>>18),this.Ie(128|63&u>>>12),this.Ie(128|63&u>>>6),this.Ie(128|63&u)}}this.Te()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ae(s);else if(s<2048)this.Ae(960|s>>>6),this.Ae(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s);else{const u=t.codePointAt(0);this.Ae(240|u>>>18),this.Ae(128|63&u>>>12),this.Ae(128|63&u>>>6),this.Ae(128|63&u)}}this.Re()}ve(e){const t=this.Ve(e),s=E0(t);this.Se(1+s),this.buffer[this.position++]=255&s;for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=255&t[u]}De(e){const t=this.Ve(e),s=E0(t);this.Se(1+s),this.buffer[this.position++]=~(255&s);for(let u=t.length-s;u<t.length;++u)this.buffer[this.position++]=~(255&t[u])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(u){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,u,!1),new Uint8Array(m.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let u=1;u<t.length;++u)t[u]^=s?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const u=new Uint8Array(s);u.set(this.buffer),this.buffer=u}}class I0{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class A0{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Fc{constructor(){this.Me=new y1,this.Fe=new I0(this.Me),this.$e=new A0(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class ko{constructor(e,t,s,u){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=u}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new ko(this.indexId,this.documentKey,this.arrayValue,s)}}function Ci(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=y2(i.arrayValue,e.arrayValue),0!==t?t:(t=y2(i.directionalValue,e.directionalValue),0!==t?t:en.comparator(i.documentKey,e.documentKey)))}function y2(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Hs{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const s=t;s.ht()?this.Ke=s:this.qe.push(s)}}Ge(e){const t=Ua(e);if(void 0!==t&&!this.Qe(t))return!1;const s=lo(e);let u=0,m=0;for(;u<s.length&&this.Qe(s[u]);++u);if(u===s.length)return!0;if(void 0!==this.Ke){const _=s[u];if(!this.je(this.Ke,_)||!this.We(this.Ue[m++],_))return!1;++u}for(;u<s.length;++u){const _=s[u];if(m>=this.Ue.length||!this.We(this.Ue[m++],_))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class cc{constructor(){this.ze=new Co}addToCollectionParentIndex(e,t){return this.ze.add(t),Xe.resolve()}getCollectionParents(e,t){return Xe.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Xe.resolve()}deleteFieldIndex(e,t){return Xe.resolve()}getDocumentsMatchingTarget(e,t){return Xe.resolve(null)}getIndexType(e,t){return Xe.resolve(0)}getFieldIndexes(e,t){return Xe.resolve([])}getNextCollectionGroupToUpdate(e){return Xe.resolve(null)}getMinOffset(e,t){return Xe.resolve(d2.min())}getMinOffsetFromCollectionGroup(e,t){return Xe.resolve(d2.min())}updateCollectionGroup(e,t,s){return Xe.resolve()}updateIndexEntries(e,t){return Xe.resolve()}}class Co{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t]||new T1(w1.comparator),m=!u.has(s);return this.index[t]=u.add(s),m}has(e){const t=e.lastSegment(),s=e.popLast(),u=this.index[t];return u&&u.has(s)}getEntries(e){return(this.index[e]||new T1(w1.comparator)).toArray()}}const Uc=new Uint8Array(0);class x0{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Co,this.Je=new Kr(s=>Qo(s),(s,u)=>So(s,u)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const s=t.lastSegment(),u=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const m={collectionId:s,parent:S2(u)};return Z4(e).put(m)}return Xe.resolve()}getCollectionParents(e,t){const s=[],u=IDBKeyRange.bound([t,""],[f2(t),""],!1,!0);return Z4(e).K(u).next(m=>{for(const _ of m){if(_.collectionId!==t)break;s.push(_o(_.parent))}return s})}addFieldIndex(e,t){const s=w4(e),u={indexId:(_=t).indexId,collectionGroup:_.collectionGroup,fields:_.fields.map(S=>[S.fieldPath.canonicalString(),S.kind])};var _;delete u.indexId;const m=s.add(u);if(t.indexState){const _=K4(e);return m.next(S=>{_.put(L6(S,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const s=w4(e),u=K4(e),m=q4(e);return s.delete(t.indexId).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=q4(e);let u=!0;const m=new Map;return Xe.forEach(this.Ye(t),_=>this.Xe(e,_).next(S=>{u&&(u=!!S),m.set(_,S)})).next(()=>{if(u){let _=E1();const S=[];return Xe.forEach(m,(j,q)=>{var ce;Pt("IndexedDbIndexManager",`Using index ${ce=j,`id=${ce.indexId}|cg=${ce.collectionGroup}|f=${ce.fields.map(wi=>`${wi.fieldPath}:${wi.kind}`).join(",")}`} to execute ${Qo(t)}`);const Te=function(wi,Wi){const Zi=Ua(Wi);if(void 0===Zi)return null;for(const n2 of qs(wi,Zi.fieldPath))switch(n2.op){case"array-contains-any":return n2.value.arrayValue.values||[];case"array-contains":return[n2.value]}return null}(q,j),ct=function(wi,Wi){const Zi=new Map;for(const n2 of lo(Wi))for(const oo of qs(wi,n2.fieldPath))switch(oo.op){case"==":case"in":Zi.set(n2.fieldPath.canonicalString(),oo.value);break;case"not-in":case"!=":return Zi.set(n2.fieldPath.canonicalString(),oo.value),Array.from(Zi.values())}return null}(q,j),At=function(wi,Wi){const Zi=[];let n2=!0;for(const oo of lo(Wi)){const C3=0===oo.kind?Ga(wi,oo.fieldPath,wi.startAt):V4(wi,oo.fieldPath,wi.startAt);Zi.push(C3.value),n2&&(n2=C3.inclusive)}return new To(Zi,n2)}(q,j),Rt=function(wi,Wi){const Zi=[];let n2=!0;for(const oo of lo(Wi)){const C3=0===oo.kind?V4(wi,oo.fieldPath,wi.endAt):Ga(wi,oo.fieldPath,wi.endAt);Zi.push(C3.value),n2&&(n2=C3.inclusive)}return new To(Zi,n2)}(q,j),wn=this.Ze(j,q,At),Un=this.Ze(j,q,Rt),jr=this.tn(j,q,ct),$i=this.en(j.indexId,Te,wn,At.inclusive,Un,Rt.inclusive,jr);return Xe.forEach($i,wi=>s.j(wi,t.limit).next(Wi=>{Wi.forEach(Zi=>{const n2=en.fromSegments(Zi.documentKey);_.has(n2)||(_=_.add(n2),S.push(n2))})}))}).next(()=>S)}return Xe.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,s,u,m,_,S){const j=(null!=t?t.length:1)*Math.max(s.length,m.length),q=j/(null!=t?t.length:1),ce=[];for(let Te=0;Te<j;++Te){const ct=t?this.nn(t[Te/q]):Uc,At=this.sn(e,ct,s[Te%q],u),Rt=this.rn(e,ct,m[Te%q],_),wn=S.map(Un=>this.sn(e,ct,Un,!0));ce.push(...this.createRange(At,Rt,wn))}return ce}sn(e,t,s,u){const m=new ko(e,en.empty(),t,s);return u?m:m.Le()}rn(e,t,s,u){const m=new ko(e,en.empty(),t,s);return u?m.Le():m}Xe(e,t){const s=new Hs(t),u=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,u).next(m=>{let _=null;for(const S of m)s.Ge(S)&&(!_||S.fields.length>_.fields.length)&&(_=S);return _})}getIndexType(e,t){let s=2;return Xe.forEach(this.Ye(t),u=>this.Xe(e,u).next(m=>{m?0!==s&&m.fields.length<function(_){let S=new T1(a1.comparator),j=!1;for(const q of _.filters){const ce=q;ce.field.isKeyField()||("array-contains"===ce.op||"array-contains-any"===ce.op?j=!0:S=S.add(ce.field))}for(const q of _.orderBy)q.field.isKeyField()||(S=S.add(q.field));return S.size+(j?1:0)}(u)&&(s=1):s=0})).next(()=>s)}on(e,t){const s=new Fc;for(const u of lo(e)){const m=t.data.field(u.fieldPath);if(null==m)return null;const _=s.Be(u.kind);ac.ye.re(m,_)}return s.Oe()}nn(e){const t=new Fc;return ac.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const s=new Fc;return ac.ye.re(R2(this.databaseId,t),s.Be(function(u){const m=lo(u);return 0===m.length?0:m[m.length-1].kind}(e))),s.Oe()}tn(e,t,s){if(null===s)return[];let u=[];u.push(new Fc);let m=0;for(const _ of lo(e)){const S=s[m++];for(const j of u)if(this.cn(t,_.fieldPath)&&k2(S))u=this.an(u,_,S);else{const q=j.Be(_.kind);ac.ye.re(S,q)}}return this.hn(u)}Ze(e,t,s){return this.tn(e,t,s.position)}hn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Oe();return t}an(e,t,s){const u=[...e],m=[];for(const _ of s.arrayValue.values||[])for(const S of u){const j=new Fc;j.seed(S.Oe()),ac.ye.re(_,j.Be(t.kind)),m.push(j)}return m}cn(e,t){return!!e.filters.find(s=>s instanceof zi&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=w4(e),u=K4(e);return(t?s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.K()).next(m=>{const _=[];return Xe.forEach(m,S=>u.get([S.indexId,this.uid]).next(j=>{_.push(function(q,ce){const Te=ce?new va(ce.sequenceNumber,new d2(sc(ce.readTime),new en(_o(ce.documentKey)),ce.largestBatchId)):va.empty(),ct=q.fields.map(([At,Rt])=>new Wo(a1.fromServerFormat(At),Rt));return new _c(q.indexId,q.collectionGroup,ct,Te)}(S,j))})).next(()=>_)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,u)=>{const m=s.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==m?m:Dn(s.collectionGroup,u.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const u=w4(e),m=K4(e);return this.ln(e).next(_=>u.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(S=>Xe.forEach(S,j=>m.put(L6(j.indexId,this.user,_,s)))))}updateIndexEntries(e,t){const s=new Map;return Xe.forEach(t,(u,m)=>{const _=s.get(u.collectionGroup);return(_?Xe.resolve(_):this.getFieldIndexes(e,u.collectionGroup)).next(S=>(s.set(u.collectionGroup,S),Xe.forEach(S,j=>this.fn(e,u,j).next(q=>{const ce=this.dn(m,j);return q.isEqual(ce)?Xe.resolve():this._n(e,m,j,q,ce)}))))})}wn(e,t,s,u){return q4(e).put({indexId:u.indexId,uid:this.uid,arrayValue:u.arrayValue,directionalValue:u.directionalValue,orderedDocumentKey:this.un(s,t.key),documentKey:t.key.path.toArray()})}mn(e,t,s,u){return q4(e).delete([u.indexId,this.uid,u.arrayValue,u.directionalValue,this.un(s,t.key),t.key.path.toArray()])}fn(e,t,s){const u=q4(e);let m=new T1(Ci);return u.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.un(s,t)])},(_,S)=>{m=m.add(new ko(s.indexId,t,S.arrayValue,S.directionalValue))}).next(()=>m)}dn(e,t){let s=new T1(Ci);const u=this.on(t,e);if(null==u)return s;const m=Ua(t);if(null!=m){const _=e.data.field(m.fieldPath);if(k2(_))for(const S of _.arrayValue.values||[])s=s.add(new ko(t.indexId,e.key,this.nn(S),u))}else s=s.add(new ko(t.indexId,e.key,Uc,u));return s}_n(e,t,s,u,m){Pt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const _=[];return function(S,j,q,ce,Te){const ct=S.getIterator(),At=j.getIterator();let Rt=O2(ct),wn=O2(At);for(;Rt||wn;){let Un=!1,jr=!1;if(Rt&&wn){const $i=q(Rt,wn);$i<0?jr=!0:$i>0&&(Un=!0)}else null!=Rt?jr=!0:Un=!0;Un?(ce(wn),wn=O2(At)):jr?(Te(Rt),Rt=O2(ct)):(Rt=O2(ct),wn=O2(At))}}(u,m,Ci,S=>{_.push(this.wn(e,t,s,S))},S=>{_.push(this.mn(e,t,s,S))}),Xe.waitFor(_)}ln(e){let t=1;return K4(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,u,m)=>{m.done(),t=u.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((_,S)=>Ci(_,S)).filter((_,S,j)=>!S||0!==Ci(_,j[S-1]));const u=[];u.push(e);for(const _ of s){const S=Ci(_,e),j=Ci(_,t);if(0===S)u[0]=e.Le();else if(S>0&&j<0)u.push(_),u.push(_.Le());else if(j>0)break}u.push(t);const m=[];for(let _=0;_<u.length;_+=2)m.push(IDBKeyRange.bound([u[_].indexId,this.uid,u[_].arrayValue,u[_].directionalValue,Uc,[]],[u[_+1].indexId,this.uid,u[_+1].arrayValue,u[_+1].directionalValue,Uc,[]]));return m}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(M4)}getMinOffset(e,t){return Xe.mapArray(this.Ye(t),s=>this.Xe(e,s).next(u=>u||A())).next(M4)}}function Z4(i){return Gi(i,"collectionParents")}function q4(i){return Gi(i,"indexEntries")}function w4(i){return Gi(i,"indexConfiguration")}function K4(i){return Gi(i,"indexState")}function M4(i){E(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const u=i[s].indexState.offset;hi(u,e)<0&&(e=u),t<u.largestBatchId&&(t=u.largestBatchId)}return new d2(e.readTime,e.documentKey,t)}const Bc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class B2{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new B2(e,B2.DEFAULT_COLLECTION_PERCENTILE,B2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function b4(i,e,t){const s=i.store("mutations"),u=i.store("documentMutations"),m=[],_=IDBKeyRange.only(t.batchId);let S=0;const j=s.J({range:_},(ce,Te,ct)=>(S++,ct.delete()));m.push(j.next(()=>{E(1===S)}));const q=[];for(const ce of t.mutations){const Te=D6(e,ce.key.path,t.batchId);m.push(u.delete(Te)),q.push(ce.key)}return Xe.waitFor(m).next(()=>q)}function lc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw A();e=i.noDocument}return JSON.stringify(e).length}B2.DEFAULT_COLLECTION_PERCENTILE=10,B2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,B2.DEFAULT=new B2(41943040,B2.DEFAULT_COLLECTION_PERCENTILE,B2.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),B2.DISABLED=new B2(-1,0,0);class uc{constructor(e,t,s,u){this.userId=e,this.wt=t,this.indexManager=s,this.referenceDelegate=u,this.gn={}}static se(e,t,s,u){E(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new uc(m,t,s,u)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).J({index:"userMutationsIndex",range:s},(u,m,_)=>{t=!1,_.done()}).next(()=>t)}addMutationBatch(e,t,s,u){const m=jc(e),_=aa(e);return _.add({}).next(S=>{E("number"==typeof S);const j=new ic(S,t,s,u),q=function(ct,At,Rt){const wn=Rt.baseMutations.map(jr=>Ht(ct.ne,jr)),Un=Rt.mutations.map(jr=>Ht(ct.ne,jr));return{userId:At,batchId:Rt.batchId,localWriteTimeMs:Rt.localWriteTime.toMillis(),baseMutations:wn,mutations:Un}}(this.wt,this.userId,j),ce=[];let Te=new T1((ct,At)=>Dn(ct.canonicalString(),At.canonicalString()));for(const ct of u){const At=D6(this.userId,ct.key.path,S);Te=Te.add(ct.key.path.popLast()),ce.push(_.put(q)),ce.push(m.put(At,B4))}return Te.forEach(ct=>{ce.push(this.indexManager.addToCollectionParentIndex(e,ct))}),e.addOnCommittedListener(()=>{this.gn[S]=j.keys()}),Xe.waitFor(ce).next(()=>j)})}lookupMutationBatch(e,t){return aa(e).get(t).next(s=>s?(E(s.userId===this.userId),oc(this.wt,s)):null)}yn(e,t){return this.gn[t]?Xe.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const u=s.keys();return this.gn[t]=u,u}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,u=IDBKeyRange.lowerBound([this.userId,s]);let m=null;return aa(e).J({index:"userMutationsIndex",range:u},(_,S,j)=>{S.userId===this.userId&&(E(S.batchId>=s),m=oc(this.wt,S)),j.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return aa(e).J({index:"userMutationsIndex",range:t,reverse:!0},(u,m,_)=>{s=m.batchId,_.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return aa(e).K("userMutationsIndex",t).next(s=>s.map(u=>oc(this.wt,u)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=Vc(this.userId,t.path),u=IDBKeyRange.lowerBound(s),m=[];return jc(e).J({range:u},(_,S,j)=>{const[q,ce,Te]=_,ct=_o(ce);if(q===this.userId&&t.path.isEqual(ct))return aa(e).get(Te).next(At=>{if(!At)throw A();E(At.userId===this.userId),m.push(oc(this.wt,At))});j.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new T1(Dn);const u=[];return t.forEach(m=>{const _=Vc(this.userId,m.path),S=IDBKeyRange.lowerBound(_),j=jc(e).J({range:S},(q,ce,Te)=>{const[ct,At,Rt]=q,wn=_o(At);ct===this.userId&&m.path.isEqual(wn)?s=s.add(Rt):Te.done()});u.push(j)}),Xe.waitFor(u).next(()=>this.pn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1,m=Vc(this.userId,s),_=IDBKeyRange.lowerBound(m);let S=new T1(Dn);return jc(e).J({range:_},(j,q,ce)=>{const[Te,ct,At]=j,Rt=_o(ct);Te===this.userId&&s.isPrefixOf(Rt)?Rt.length===u&&(S=S.add(At)):ce.done()}).next(()=>this.pn(e,S))}pn(e,t){const s=[],u=[];return t.forEach(m=>{u.push(aa(e).get(m).next(_=>{if(null===_)throw A();E(_.userId===this.userId),s.push(oc(this.wt,_))}))}),Xe.waitFor(u).next(()=>s)}removeMutationBatch(e,t){return b4(e.ee,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Xe.forEach(s,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Xe.resolve();const s=IDBKeyRange.lowerBound([this.userId]),u=[];return jc(e).J({range:s},(m,_,S)=>{if(m[0]===this.userId){const j=_o(m[1]);u.push(j)}else S.done()}).next(()=>{E(0===u.length)})})}containsKey(e,t){return D0(e,this.userId,t)}Tn(e){return S0(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function D0(i,e,t){const s=Vc(e,t.path),u=s[1],m=IDBKeyRange.lowerBound(s);let _=!1;return jc(i).J({range:m,H:!0},(S,j,q)=>{const[ce,Te,ct]=S;ce===e&&Te===u&&(_=!0),q.done()}).next(()=>_)}function aa(i){return Gi(i,"mutations")}function jc(i){return Gi(i,"documentMutations")}function S0(i){return Gi(i,"mutationQueues")}class ca{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new ca(0)}static Rn(){return new ca(-1)}}class x3{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const s=new ca(t.highestTargetId);return t.highestTargetId=s.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>An.fromTimestamp(new Mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.bn(e).next(u=>(u.highestListenSequenceNumber=t,s&&(u.lastRemoteSnapshotVersion=s.toTimestamp()),t>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=t),this.Pn(e,u)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(s=>(s.targetCount+=1,this.Vn(t,s),this.Pn(e,s))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hc(e).delete(t.targetId)).next(()=>this.bn(e)).next(s=>(E(s.targetCount>0),s.targetCount-=1,this.Pn(e,s)))}removeTargets(e,t,s){let u=0;const m=[];return hc(e).J((_,S)=>{const j=Hc(S);j.sequenceNumber<=t&&null===s.get(j.targetId)&&(u++,m.push(this.removeTargetData(e,j)))}).next(()=>Xe.waitFor(m)).next(()=>u)}forEachTarget(e,t){return hc(e).J((s,u)=>{const m=Hc(u);t(m)})}bn(e){return D3(e).get("targetGlobalKey").next(t=>(E(null!==t),t))}Pn(e,t){return D3(e).put("targetGlobalKey",t)}vn(e,t){return hc(e).put(C0(this.wt,t))}Vn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Qo(t),u=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let m=null;return hc(e).J({range:u,index:"queryTargetsIndex"},(_,S,j)=>{const q=Hc(S);So(t,q.target)&&(m=q,j.done())}).next(()=>m)}addMatchingKeys(e,t,s){const u=[],m=la(e);return t.forEach(_=>{const S=S2(_.path);u.push(m.put({targetId:s,path:S})),u.push(this.referenceDelegate.addReference(e,s,_))}),Xe.waitFor(u)}removeMatchingKeys(e,t,s){const u=la(e);return Xe.forEach(t,m=>{const _=S2(m.path);return Xe.waitFor([u.delete([s,_]),this.referenceDelegate.removeReference(e,s,m)])})}removeMatchingKeysForTargetId(e,t){const s=la(e),u=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(u)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),u=la(e);let m=E1();return u.J({range:s,H:!0},(_,S,j)=>{const q=_o(_[1]),ce=new en(q);m=m.add(ce)}).next(()=>m)}containsKey(e,t){const s=S2(t.path),u=IDBKeyRange.bound([s],[f2(s)],!1,!0);let m=0;return la(e).J({index:"documentTargetsIndex",H:!0,range:u},([_,S],j,q)=>{0!==_&&(m++,q.done())}).next(()=>m>0)}te(e,t){return hc(e).get(t).next(s=>s?Hc(s):null)}}function hc(i){return Gi(i,"targets")}function D3(i){return Gi(i,"targetGlobal")}function la(i){return Gi(i,"targetDocuments")}function O6([i,e],[t,s]){const u=Dn(i,t);return 0===u?Dn(e,s):u}class T0{constructor(e){this.Sn=e,this.buffer=new T1(O6),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();O6(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class V6{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;Pt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Oe.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){p2(s)?Pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield zs(s)}yield t.kn(3e5)}))}}class Zl{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Xe.resolve(Oi.ot);const s=new T0(t);return this.On.forEachTarget(e,u=>s.xn(u.sequenceNumber)).next(()=>this.On.Fn(e,u=>s.xn(u))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.On.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pt("LruGarbageCollector","Garbage collection skipped; disabled"),Xe.resolve(Bc)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(Pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bc):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let s,u,m,_,S,j,q;const ce=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Te=>(Te>this.params.maximumSequenceNumbersToCollect?(Pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Te}`),u=this.params.maximumSequenceNumbersToCollect):u=Te,_=Date.now(),this.nthSequenceNumber(e,u))).next(Te=>(s=Te,S=Date.now(),this.removeTargets(e,s,t))).next(Te=>(m=Te,j=Date.now(),this.removeOrphanedDocuments(e,s))).next(Te=>(q=Date.now(),vs()<=nt.in.DEBUG&&Pt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${_-ce}ms\n\tDetermined least recently used ${u} in `+(S-_)+`ms\n\tRemoved ${m} targets in `+(j-S)+`ms\n\tRemoved ${Te} documents in `+(q-j)+`ms\nTotal Duration: ${q-ce}ms`),Xe.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:m,documentsRemoved:Te})))}}class S3{constructor(e,t){this.db=e,this.garbageCollector=new Zl(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(u=>s+u))}Bn(e){let t=0;return this.Fn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(s,u)=>t(u))}addReference(e,t,s){return R6(e,s)}removeReference(e,t,s){return R6(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return R6(e,t)}Un(e,t){return function(s,u){let m=!1;return S0(s).Y(_=>D0(s,_,u).next(S=>(S&&(m=!0),Xe.resolve(!S)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let m=0;return this.Ln(e,(_,S)=>{if(S<=t){const j=this.Un(e,_).next(q=>{if(!q)return m++,s.getEntry(e,_).next(()=>(s.removeEntry(_,An.min()),la(e).delete([0,S2(_.path)])))});u.push(j)}}).next(()=>Xe.waitFor(u)).next(()=>s.apply(e)).next(()=>m)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return R6(e,t)}Ln(e,t){const s=la(e);let u,m=Oi.ot;return s.J({index:"documentTargetsIndex"},([_,S],{path:j,sequenceNumber:q})=>{0===_?(m!==Oi.ot&&t(new en(_o(u)),m),m=q,u=j):m=Oi.ot}).next(()=>{m!==Oi.ot&&t(new en(_o(u)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function R6(i,e){return la(i).put((s=i.currentSequenceNumber,{targetId:0,path:S2(e.path),sequenceNumber:s}));var s}class T3{constructor(){this.changes=new Kr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Xe.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ql{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Gc(e).put(s)}removeEntry(e,t,s){return Gc(e).delete(function(u,m){const _=u.path.toArray();return[_.slice(0,_.length-2),_[_.length-2],_4(m),_[_.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.qn(e,s)))}getEntry(e,t){let s=dr.newInvalidDocument(t);return Gc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(h(t))},(u,m)=>{s=this.Kn(t,m)}).next(()=>s)}Gn(e,t){let s={size:0,document:dr.newInvalidDocument(t)};return Gc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(h(t))},(u,m)=>{s={document:this.Kn(t,m),size:lc(m)}}).next(()=>s)}getEntries(e,t){let s=A2();return this.Qn(e,t,(u,m)=>{const _=this.Kn(u,m);s=s.insert(u,_)}).next(()=>s)}jn(e,t){let s=A2(),u=new qr(en.comparator);return this.Qn(e,t,(m,_)=>{const S=this.Kn(m,_);s=s.insert(m,S),u=u.insert(m,lc(_))}).next(()=>({documents:s,Wn:u}))}Qn(e,t,s){if(t.isEmpty())return Xe.resolve();let u=new T1(a);t.forEach(j=>u=u.add(j));const m=IDBKeyRange.bound(h(u.first()),h(u.last())),_=u.getIterator();let S=_.getNext();return Gc(e).J({index:"documentKeyIndex",range:m},(j,q,ce)=>{const Te=en.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;S&&a(S,Te)<0;)s(S,null),S=_.getNext();S&&S.isEqual(Te)&&(s(S,q),S=_.hasNext()?_.getNext():null),S?ce.q(h(S)):ce.done()}).next(()=>{for(;S;)s(S,null),S=_.hasNext()?_.getNext():null})}getAllFromCollection(e,t,s){const u=[t.popLast().toArray(),t.lastSegment(),_4(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Gc(e).K(IDBKeyRange.bound(u,m,!0)).next(_=>{let S=A2();for(const j of _){const q=this.Kn(en.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);S=S.insert(q.key,q)}return S})}getAllFromCollectionGroup(e,t,s,u){let m=A2();const _=l(t,s),S=l(t,d2.max());return Gc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(_,S,!0)},(j,q,ce)=>{const Te=this.Kn(en.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);m=m.insert(Te.key,Te),m.size===u&&ce.done()}).next(()=>m)}newChangeBuffer(e){return new Kl(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return z3(e).get("remoteDocumentGlobalKey").next(t=>(E(!!t),t))}qn(e,t){return z3(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const s=function _0(i,e){let t;if(e.document)t=ne(i.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=en.fromSegments(e.noDocument.path),u=sc(e.noDocument.readTime);t=dr.newNoDocument(s,u),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return A();{const s=en.fromSegments(e.unknownDocument.path),u=sc(e.unknownDocument.version);t=dr.newUnknownDocument(s,u)}}return e.readTime&&t.setReadTime(function(s){const u=new Mr(s[0],s[1]);return An.fromTimestamp(u)}(e.readTime)),t}(this.wt,t);if(!s.isNoDocument()||!s.version.isEqual(An.min()))return s}return dr.newInvalidDocument(e)}}function N3(i){return new ql(i)}class Kl extends T3{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Kr(s=>s.toString(),(s,u)=>s.isEqual(u))}applyChanges(e){const t=[];let s=0,u=new T1((m,_)=>Dn(m.canonicalString(),_.canonicalString()));return this.changes.forEach((m,_)=>{const S=this.Hn.get(m);if(t.push(this.zn.removeEntry(e,m,S.readTime)),_.isValidDocument()){const j=y4(this.zn.wt,_);u=u.add(m.path.popLast()),s+=lc(j)-S.size,t.push(this.zn.addEntry(e,m,j))}else if(s-=S.size,this.trackRemovals){const j=y4(this.zn.wt,_.convertToNoDocument(An.min()));t.push(this.zn.addEntry(e,m,j))}}),u.forEach(m=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.zn.updateMetadata(e,s)),Xe.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(s=>(this.Hn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:s,Wn:u})=>(u.forEach((m,_)=>{this.Hn.set(m,{size:_,readTime:s.get(m).readTime})}),s))}}function z3(i){return Gi(i,"remoteDocumentGlobal")}function Gc(i){return Gi(i,"remoteDocumentsV14")}function h(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function l(i,e){const t=e.documentKey.path.toArray();return[i,_4(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function a(i,e){const t=i.path.toArray(),s=e.path.toArray();let u=0;for(let m=0;m<t.length-2&&m<s.length-2;++m)if(u=Dn(t[m],s[m]),u)return u;return u=Dn(t.length,s.length),u||(u=Dn(t[t.length-2],s[s.length-2]),u||Dn(t[t.length-1],s[s.length-1]))}class p{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class w{constructor(e,t,s,u){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=u}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(u=>(s=u,this.getBaseDocument(e,t,s))).next(u=>(null!==s&&ra(s.mutation,u,Ti.empty(),Mr.now()),u))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,E1()).next(()=>s))}getLocalViewOfDocuments(e,t,s=E1()){const u=ts();return this.populateOverlays(e,u,t).next(()=>this.computeViews(e,t,u,s).next(m=>{let _=Ja();return m.forEach((S,j)=>{_=_.insert(S,j.overlayedDocument)}),_}))}getOverlayedDocuments(e,t){const s=ts();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,E1()))}populateOverlays(e,t,s){const u=[];return s.forEach(m=>{t.has(m)||u.push(m)}),this.documentOverlayCache.getOverlays(e,u).next(m=>{m.forEach((_,S)=>{t.set(_,S)})})}computeViews(e,t,s,u){let m=A2();const _=Xa(),S=Xa();return t.forEach((j,q)=>{const ce=s.get(q.key);u.has(q.key)&&(void 0===ce||ce.mutation instanceof Xs)?m=m.insert(q.key,q):void 0!==ce&&(_.set(q.key,ce.mutation.getFieldMask()),ra(ce.mutation,q,ce.mutation.getFieldMask(),Mr.now()))}),this.recalculateAndSaveOverlays(e,m).next(j=>(j.forEach((q,ce)=>_.set(q,ce)),t.forEach((q,ce)=>{var Te;return S.set(q,new p(ce,null!==(Te=_.get(q))&&void 0!==Te?Te:null))}),S))}recalculateAndSaveOverlays(e,t){const s=Xa();let u=new qr((_,S)=>_-S),m=E1();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(_=>{for(const S of _)S.keys().forEach(j=>{const q=t.get(j);if(null===q)return;let ce=s.get(j)||Ti.empty();ce=S.applyToLocalView(q,ce),s.set(j,ce);const Te=(u.get(S.batchId)||E1()).add(j);u=u.insert(S.batchId,Te)})}).next(()=>{const _=[],S=u.getReverseIterator();for(;S.hasNext();){const j=S.getNext(),q=j.key,ce=j.value,Te=xc();ce.forEach(ct=>{if(!m.has(ct)){const At=_i(t.get(ct),s.get(ct));null!==At&&Te.set(ct,At),m=m.add(ct)}}),_.push(this.documentOverlayCache.saveOverlays(e,q,Te))}return Xe.waitFor(_)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return en.isDocumentKey((u=t).path)&&null===u.collectionGroup&&0===u.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ea(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var u}getNextDocuments(e,t,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,u).next(m=>{const _=u-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,u-m.size):Xe.resolve(ts());let S=-1,j=m;return _.next(q=>Xe.forEach(q,(ce,Te)=>(S<Te.largestBatchId&&(S=Te.largestBatchId),m.get(ce)?Xe.resolve():this.getBaseDocument(e,ce,Te).next(ct=>{j=j.insert(ce,ct)}))).next(()=>this.populateOverlays(e,q,m)).next(()=>this.computeViews(e,j,q,E1())).next(ce=>({batchId:S,changes:x2(ce)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new en(t)).next(s=>{let u=Ja();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const u=t.collectionGroup;let m=Ja();return this.indexManager.getCollectionParents(e,u).next(_=>Xe.forEach(_,S=>{const j=(q=t,ce=S.child(u),new X2(ce,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ce;return this.getDocumentsMatchingCollectionQuery(e,j,s).next(q=>{q.forEach((ce,Te)=>{m=m.insert(ce,Te)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,s){let u;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(m=>(u=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(m=>{m.forEach((S,j)=>{const q=j.getKey();null===u.get(q)&&(u=u.insert(q,dr.newInvalidDocument(q)))});let _=Ja();return u.forEach((S,j)=>{const q=m.get(S);void 0!==q&&ra(q.mutation,j,Ti.empty(),Mr.now()),zo(t,j)&&(_=_.insert(S,j))}),_})}getBaseDocument(e,t,s){return null===s||1===s.mutation.type?this.remoteDocumentCache.getEntry(e,t):Xe.resolve(dr.newInvalidDocument(t))}}class T{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Xe.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var s;return this.Jn.set(t.id,{id:(s=t).id,version:s.version,createTime:Ri(s.createTime)}),Xe.resolve()}getNamedQuery(e,t){return Xe.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(s=t).name,query:z6(s.bundledQuery),readTime:Ri(s.readTime)}),Xe.resolve();var s}}class H{constructor(){this.overlays=new qr(en.comparator),this.Xn=new Map}getOverlay(e,t){return Xe.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ts();return Xe.forEach(t,u=>this.getOverlay(e,u).next(m=>{null!==m&&s.set(u,m)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((u,m)=>{this.ie(e,t,m)}),Xe.resolve()}removeOverlaysForBatchId(e,t,s){const u=this.Xn.get(s);return void 0!==u&&(u.forEach(m=>this.overlays=this.overlays.remove(m)),this.Xn.delete(s)),Xe.resolve()}getOverlaysForCollection(e,t,s){const u=ts(),m=t.length+1,_=new en(t.child("")),S=this.overlays.getIteratorFrom(_);for(;S.hasNext();){const j=S.getNext().value,q=j.getKey();if(!t.isPrefixOf(q.path))break;q.path.length===m&&j.largestBatchId>s&&u.set(j.getKey(),j)}return Xe.resolve(u)}getOverlaysForCollectionGroup(e,t,s,u){let m=new qr((q,ce)=>q-ce);const _=this.overlays.getIterator();for(;_.hasNext();){const q=_.getNext().value;if(q.getKey().getCollectionGroup()===t&&q.largestBatchId>s){let ce=m.get(q.largestBatchId);null===ce&&(ce=ts(),m=m.insert(q.largestBatchId,ce)),ce.set(q.getKey(),q)}}const S=ts(),j=m.getIterator();for(;j.hasNext()&&(j.getNext().value.forEach((q,ce)=>S.set(q,ce)),!(S.size()>=u)););return Xe.resolve(S)}ie(e,t,s){const u=this.overlays.get(s.key);if(null!==u){const _=this.Xn.get(u.largestBatchId).delete(s.key);this.Xn.set(u.largestBatchId,_)}this.overlays=this.overlays.insert(s.key,new W4(t,s));let m=this.Xn.get(t);void 0===m&&(m=E1(),this.Xn.set(t,m)),this.Xn.set(t,m.add(s.key))}}class J{constructor(){this.Zn=new T1(ae.ts),this.es=new T1(ae.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new ae(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new ae(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new en(new w1([])),s=new ae(t,e),u=new ae(t,e+1),m=[];return this.es.forEachInRange([s,u],_=>{this.rs(_),m.push(_.key)}),m}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new en(new w1([])),s=new ae(t,e),u=new ae(t,e+1);let m=E1();return this.es.forEachInRange([s,u],_=>{m=m.add(_.key)}),m}containsKey(e){const t=new ae(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class ae{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return en.comparator(e.key,t.key)||Dn(e.ls,t.ls)}static ns(e,t){return Dn(e.ls,t.ls)||en.comparator(e.key,t.key)}}class we{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new T1(ae.ts)}checkEmpty(e){return Xe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,u){const m=this.fs;this.fs++;const _=new ic(m,t,s,u);this.mutationQueue.push(_);for(const S of u)this.ds=this.ds.add(new ae(S.key,m)),this.indexManager.addToCollectionParentIndex(e,S.key.path.popLast());return Xe.resolve(_)}lookupMutationBatch(e,t){return Xe.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const u=this.ws(t+1),m=u<0?0:u;return Xe.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new ae(t,0),u=new ae(t,Number.POSITIVE_INFINITY),m=[];return this.ds.forEachInRange([s,u],_=>{const S=this._s(_.ls);m.push(S)}),Xe.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new T1(Dn);return t.forEach(u=>{const m=new ae(u,0),_=new ae(u,Number.POSITIVE_INFINITY);this.ds.forEachInRange([m,_],S=>{s=s.add(S.ls)})}),Xe.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,u=s.length+1;let m=s;en.isDocumentKey(m)||(m=m.child(""));const _=new ae(new en(m),0);let S=new T1(Dn);return this.ds.forEachWhile(j=>{const q=j.key.path;return!!s.isPrefixOf(q)&&(q.length===u&&(S=S.add(j.ls)),!0)},_),Xe.resolve(this.gs(S))}gs(e){const t=[];return e.forEach(s=>{const u=this._s(s);null!==u&&t.push(u)}),t}removeMutationBatch(e,t){E(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ds;return Xe.forEach(t.mutations,u=>{const m=new ae(u.key,t.batchId);return s=s.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.ds=s})}In(e){}containsKey(e,t){const s=new ae(t,0),u=this.ds.firstAfterOrEqual(s);return Xe.resolve(t.isEqual(u&&u.key))}performConsistencyCheck(e){return Xe.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lt{constructor(e){this.ps=e,this.docs=new qr(en.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,u=this.docs.get(s),m=u?u.size:0,_=this.ps(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:_}),this.size+=_-m,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Xe.resolve(s?s.document.mutableCopy():dr.newInvalidDocument(t))}getEntries(e,t){let s=A2();return t.forEach(u=>{const m=this.docs.get(u);s=s.insert(u,m?m.document.mutableCopy():dr.newInvalidDocument(u))}),Xe.resolve(s)}getAllFromCollection(e,t,s){let u=A2();const m=new en(t.child("")),_=this.docs.getIteratorFrom(m);for(;_.hasNext();){const{key:S,value:{document:j}}=_.getNext();if(!t.isPrefixOf(S.path))break;S.path.length>t.length+1||hi(uo(j),s)<=0||(u=u.insert(j.key,j.mutableCopy()))}return Xe.resolve(u)}getAllFromCollectionGroup(e,t,s,u){A()}Is(e,t){return Xe.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new at(this)}getSize(e){return Xe.resolve(this.size)}}class at extends T3{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?t.push(this.zn.addEntry(e,u)):this.zn.removeEntry(s)}),Xe.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class xt{constructor(e){this.persistence=e,this.Ts=new Kr(t=>Qo(t),So),this.lastRemoteSnapshotVersion=An.min(),this.highestTargetId=0,this.Es=0,this.As=new J,this.targetCount=0,this.Rs=ca.An()}forEachTarget(e,t){return this.Ts.forEach((s,u)=>t(u)),Xe.resolve()}getLastRemoteSnapshotVersion(e){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Xe.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Es&&(this.Es=t),Xe.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Xe.resolve()}updateTargetData(e,t){return this.vn(t),Xe.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(e,t,s){let u=0;const m=[];return this.Ts.forEach((_,S)=>{S.sequenceNumber<=t&&null===s.get(S.targetId)&&(this.Ts.delete(_),m.push(this.removeMatchingKeysForTargetId(e,S.targetId)),u++)}),Xe.waitFor(m).next(()=>u)}getTargetCount(e){return Xe.resolve(this.targetCount)}getTargetData(e,t){const s=this.Ts.get(t)||null;return Xe.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),Xe.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const u=this.persistence.referenceDelegate,m=[];return u&&t.forEach(_=>{m.push(u.markPotentiallyOrphaned(e,_))}),Xe.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Xe.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return Xe.resolve(s)}containsKey(e,t){return Xe.resolve(this.As.containsKey(t))}}class Cn{constructor(e,t){this.bs={},this.overlays={},this.Ps=new Oi(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new xt(this),this.indexManager=new cc,this.remoteDocumentCache=new lt(s=>this.referenceDelegate.Ss(s)),this.wt=new y0(t),this.Ds=new T(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new H,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.bs[e.toKey()];return s||(s=new we(t,this.referenceDelegate),this.bs[e.toKey()]=s),s}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,s){Pt("MemoryPersistence","Starting transaction:",e);const u=new Hn(this.Ps.next());return this.referenceDelegate.Cs(),s(u).next(m=>this.referenceDelegate.xs(u).next(()=>m)).toPromise().then(m=>(u.raiseOnCommittedEvent(),m))}Ns(e,t){return Xe.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class Hn extends Zo{constructor(e){super(),this.currentSequenceNumber=e}}class pr{constructor(e){this.persistence=e,this.ks=new J,this.Os=null}static Ms(e){return new pr(e)}get Fs(){if(this.Os)return this.Os;throw A()}addReference(e,t,s){return this.ks.addReference(s,t),this.Fs.delete(s.toString()),Xe.resolve()}removeReference(e,t,s){return this.ks.removeReference(s,t),this.Fs.add(s.toString()),Xe.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Xe.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(u=>this.Fs.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(u=>{u.forEach(m=>this.Fs.add(m.toString()))}).next(()=>s.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Fs,s=>{const u=en.fromPath(s);return this.$s(e,u).next(m=>{m||t.removeEntry(u,An.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Xe.or([()=>Xe.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class T2{constructor(e){this.wt=e}O(e,t,s,u){const m=new Si("createOrUpgrade",t);var S;s<1&&u>=1&&(e.createObjectStore("owner"),(S=e).createObjectStore("mutationQueues",{keyPath:"userId"}),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",x6,{unique:!0}),S.createObjectStore("documentMutations"),ro(e),function(S){S.createObjectStore("remoteDocuments")}(e));let _=Xe.resolve();return s<3&&u>=3&&(0!==s&&(function(S){S.deleteObjectStore("targetDocuments"),S.deleteObjectStore("targets"),S.deleteObjectStore("targetGlobal")}(e),ro(e)),_=_.next(()=>function(S){const j=S.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:An.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",q)}(m))),s<4&&u>=4&&(0!==s&&(_=_.next(()=>function(S,j){return j.store("mutations").K().next(q=>{S.deleteObjectStore("mutations"),S.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",x6,{unique:!0});const ce=j.store("mutations"),Te=q.map(ct=>ce.put(ct));return Xe.waitFor(Te)})}(e,m))),_=_.next(()=>{!function(S){S.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&u>=5&&(_=_.next(()=>this.Bs(m))),s<6&&u>=6&&(_=_.next(()=>(function(S){S.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(m)))),s<7&&u>=7&&(_=_.next(()=>this.Us(m))),s<8&&u>=8&&(_=_.next(()=>this.qs(e,m))),s<9&&u>=9&&(_=_.next(()=>{!function(S){S.objectStoreNames.contains("remoteDocumentChanges")&&S.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&u>=10&&(_=_.next(()=>this.Ks(m))),s<11&&u>=11&&(_=_.next(()=>{(function(S){S.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(S){S.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&u>=12&&(_=_.next(()=>{!function(S){const j=S.createObjectStore("documentOverlays",{keyPath:g0});j.createIndex("collectionPathOverlayIndex",v0,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",S6,{unique:!1})}(e)})),s<13&&u>=13&&(_=_.next(()=>function(S){const j=S.createObjectStore("remoteDocumentsV14",{keyPath:w3});j.createIndex("documentKeyIndex",M3),j.createIndex("collectionGroupIndex",h0)}(e)).next(()=>this.Gs(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&u>=14&&(_=_.next(()=>this.Qs(e,m))),s<15&&u>=15&&(_=_.next(()=>function(S){S.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),S.createObjectStore("indexState",{keyPath:b3}).createIndex("sequenceNumberIndex",j4,{unique:!1}),S.createObjectStore("indexEntries",{keyPath:E3}).createIndex("documentKeyIndex",m0,{unique:!1})}(e))),_}Ls(e){let t=0;return e.store("remoteDocuments").J((s,u)=>{t+=lc(u)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Bs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.K().next(u=>Xe.forEach(u,m=>{const _=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return s.K("userMutationsIndex",_).next(S=>Xe.forEach(S,j=>{E(j.userId===m.userId);const q=oc(this.wt,j);return b4(e,m.userId,q).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const m=[];return s.J((_,S)=>{const j=new w1(_),q=[0,S2(j)];m.push(t.get(q).next(ce=>ce?Xe.resolve():t.put({targetId:0,path:S2(j),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Xe.waitFor(m))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:p0});const s=t.store("collectionParents"),u=new Co,m=_=>{if(u.add(_)){const S=_.lastSegment(),j=_.popLast();return s.put({collectionId:S,parent:S2(j)})}};return t.store("remoteDocuments").J({H:!0},(_,S)=>{const j=new w1(_);return m(j.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([_,S,j],q)=>{const ce=_o(S);return m(ce.popLast())}))}Ks(e){const t=e.store("targets");return t.J((s,u)=>{const m=Hc(u),_=C0(this.wt,m);return t.put(_)})}Gs(e,t){const s=t.store("remoteDocuments"),u=[];return s.J((m,_)=>{const S=t.store("remoteDocumentsV14"),j=(q=_,q.document?new en(w1.fromString(q.document.name).popFirst(5)):q.noDocument?en.fromSegments(q.noDocument.path):q.unknownDocument?en.fromSegments(q.unknownDocument.path):A()).path.toArray();var q;const ce={prefixPath:j.slice(0,j.length-2),collectionGroup:j[j.length-2],documentId:j[j.length-1],readTime:_.readTime||[0,0],unknownDocument:_.unknownDocument,noDocument:_.noDocument,document:_.document,hasCommittedMutations:!!_.hasCommittedMutations};u.push(S.put(ce))}).next(()=>Xe.waitFor(u))}Qs(e,t){const s=t.store("mutations"),u=N3(this.wt),m=new Cn(pr.Ms,this.wt.ne);return s.K().next(_=>{const S=new Map;return _.forEach(j=>{var q;let ce=null!==(q=S.get(j.userId))&&void 0!==q?q:E1();oc(this.wt,j).keys().forEach(Te=>ce=ce.add(Te)),S.set(j.userId,ce)}),Xe.forEach(S,(j,q)=>{const ce=new Hr(q),Te=P6.se(this.wt,ce),ct=m.getIndexManager(ce),At=uc.se(ce,this.wt,ct,m.referenceDelegate);return new w(u,At,Te,ct).recalculateAndSaveOverlaysForDocumentKeys(new Rc(t,Oi.ot),j).next()})})}}function ro(i){i.createObjectStore("targetDocuments",{keyPath:rc}).createIndex("documentTargetsIndex",d0,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",f0,{unique:!0}),i.createObjectStore("targetGlobal")}const rs="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ho{constructor(e,t,s,u,m,_,S,j,q,ce,Te=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.js=m,this.window=_,this.document=S,this.Ws=q,this.zs=ce,this.Hs=Te,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=ct=>Promise.resolve(),!Ho.V())throw new W(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new S3(this,u),this.ei=t+"main",this.wt=new y0(j),this.ni=new Xi(this.ei,this.Hs,new T2(this.wt)),this.Vs=new x3(this.referenceDelegate,this.wt),this.remoteDocumentCache=N3(this.wt),this.Ds=new I3,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===ce&&Y1("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(z.FAILED_PRECONDITION,rs);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new Oi(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var s=(0,Oe.Z)(function*(u){if(t.started)return e(u)});return function(u){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Oe.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Oe.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>$c(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(p2(e))return Pt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Fo(e).get("owner").next(t=>Xe.resolve(this.di(t)))}_i(e){return $c(e).delete(this.clientId)}wi(){var e=this;return(0,Oe.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const u=Gi(s,"clientMetadata");return u.K().next(m=>{const _=e.gi(m,18e5),S=m.filter(j=>-1===_.indexOf(j));return Xe.forEach(S,j=>u.delete(j.clientId)).next(()=>S)})}).catch(()=>[]);if(e.si)for(const s of t)e.si.removeItem(e.yi(s.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Xe.resolve(!0):Fo(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new W(z.FAILED_PRECONDITION,rs);return!1}}return!(!this.networkEnabled||!this.inForeground)||$c(e).K().next(s=>void 0===this.gi(s,5e3).find(u=>{if(this.clientId!==u.clientId){const _=!this.inForeground&&u.inForeground,S=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||_&&S)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Oe.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Rc(t,Oi.ot);return e.li(s).next(()=>e._i(s))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(s=>this.mi(s.updateTimeMs,t)&&!this.pi(s.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>$c(e).K().next(t=>this.gi(t,18e5).map(s=>s.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return uc.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new x0(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return P6.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,s){Pt("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===t?"readonly":"readwrite",m=15===(_=this.Hs)?N6:14===_?Rs:13===_?v4:12===_?G4:11===_?T6:void A();var _;let S;return this.ni.runTransaction(e,u,m,j=>(S=new Rc(j,this.Ps?this.Ps.next():Oi.ot),"readwrite-primary"===t?this.ai(S).next(q=>!!q||this.hi(S)).next(q=>{if(!q)throw Y1(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new W(z.FAILED_PRECONDITION,xo);return s(S)}).next(q=>this.fi(S).next(()=>q)):this.bi(S).next(()=>s(S)))).then(j=>(S.raiseOnCommittedEvent(),j))}bi(e){return Fo(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new W(z.FAILED_PRECONDITION,rs)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fo(e).put("owner",t)}static V(){return Xi.V()}li(e){const t=Fo(e);return t.get("owner").next(s=>this.di(s)?(Pt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Xe.resolve())}mi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Y1(`Detected an update time that is in the future: ${e} > ${s}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,qe.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const s=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return Pt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Y1("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Y1("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fo(i){return Gi(i,"owner")}function $c(i){return Gi(i,"clientMetadata")}function Wc(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class L3{constructor(e,t,s,u){this.targetId=e,this.fromCache=t,this.Pi=s,this.vi=u}static Vi(e,t){let s=E1(),u=E1();for(const m of t.docChanges)switch(m.type){case 0:s=s.add(m.doc.key);break;case 1:u=u.add(m.doc.key)}return new L3(e,t.fromCache,s,u)}}class P3{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,s,u){return this.Ci(e,t).next(m=>m||this.xi(e,t,u,s)).next(m=>m||this.Ni(e,t))}Ci(e,t){return Xe.resolve(null)}xi(e,t,s,u){return function R4(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||u.isEqual(An.min())?this.Ni(e,t):this.Di.getDocuments(e,s).next(m=>{const _=this.ki(t,m);return this.Oi(t,_,s,u)?this.Ni(e,t):(vs()<=nt.in.DEBUG&&Pt("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),Ls(t)),this.Mi(e,_,t,s4(u,-1)))})}ki(e,t){let s=new T1(I2(e));return t.forEach((u,m)=>{zo(e,m)&&(s=s.add(m))}),s}Oi(e,t,s,u){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(u)>0)}Ni(e,t){return vs()<=nt.in.DEBUG&&Pt("QueryEngine","Using full collection scan to execute query:",Ls(t)),this.Di.getDocumentsMatchingQuery(e,t,d2.min())}Mi(e,t,s,u){return this.Di.getDocumentsMatchingQuery(e,s,u).next(m=>(t.forEach(_=>{m=m.insert(_.key,_)}),m))}}class Yl{constructor(e,t,s,u){this.persistence=e,this.Fi=t,this.wt=u,this.$i=new qr(Dn),this.Bi=new Kr(m=>Qo(m),So),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(s)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function N0(i,e,t,s){return new Yl(i,e,t,s)}function z0(i,e){return L0.apply(this,arguments)}function L0(){return L0=(0,Oe.Z)(function*(i,e){const t=N(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let u;return t.mutationQueue.getAllMutationBatches(s).next(m=>(u=m,t.qi(e),t.mutationQueue.getAllMutationBatches(s))).next(m=>{const _=[],S=[];let j=E1();for(const q of u){_.push(q.batchId);for(const ce of q.mutations)j=j.add(ce.key)}for(const q of m){S.push(q.batchId);for(const ce of q.mutations)j=j.add(ce.key)}return t.localDocuments.getDocuments(s,j).next(q=>({Ki:q,removedBatchIds:_,addedBatchIds:S}))})})}),L0.apply(this,arguments)}function P0(i,e){const t=N(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=e.batch.keys(),m=t.Ui.newChangeBuffer({trackRemovals:!0});return function(_,S,j,q){const ce=j.batch,Te=ce.keys();let ct=Xe.resolve();return Te.forEach(At=>{ct=ct.next(()=>q.getEntry(S,At)).next(Rt=>{const wn=j.docVersions.get(At);E(null!==wn),Rt.version.compareTo(wn)<0&&(ce.applyToRemoteDocument(Rt,j),Rt.isValidDocument()&&(Rt.setReadTime(j.commitVersion),q.addEntry(Rt)))})}),ct.next(()=>_.mutationQueue.removeMutationBatch(S,ce))}(t,s,e,m).next(()=>m.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,u,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(_){let S=E1();for(let j=0;j<_.mutationResults.length;++j)_.mutationResults[j].transformResults.length>0&&(S=S.add(_.batch.mutations[j].key));return S}(e))).next(()=>t.localDocuments.getDocuments(s,u))})}function Ql(i){const e=N(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function Jl(i,e){const t=N(i),s=e.snapshotVersion;let u=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const _=t.Ui.newChangeBuffer({trackRemovals:!0});u=t.$i;const S=[];e.targetChanges.forEach((ce,Te)=>{const ct=u.get(Te);if(!ct)return;S.push(t.Vs.removeMatchingKeys(m,ce.removedDocuments,Te).next(()=>t.Vs.addMatchingKeys(m,ce.addedDocuments,Te)));let At=ct.withSequenceNumber(m.currentSequenceNumber);var Rt,wn,Un;e.targetMismatches.has(Te)?At=At.withResumeToken(Ni.EMPTY_BYTE_STRING,An.min()).withLastLimboFreeSnapshotVersion(An.min()):ce.resumeToken.approximateByteSize()>0&&(At=At.withResumeToken(ce.resumeToken,s)),u=u.insert(Te,At),wn=At,Un=ce,(0===(Rt=ct).resumeToken.approximateByteSize()||wn.snapshotVersion.toMicroseconds()-Rt.snapshotVersion.toMicroseconds()>=3e8||Un.addedDocuments.size+Un.modifiedDocuments.size+Un.removedDocuments.size>0)&&S.push(t.Vs.updateTargetData(m,At))});let j=A2(),q=E1();if(e.documentUpdates.forEach(ce=>{e.resolvedLimboDocuments.has(ce)&&S.push(t.persistence.referenceDelegate.updateLimboDocument(m,ce))}),S.push(ku(m,_,e.documentUpdates).next(ce=>{j=ce.Gi,q=ce.Qi})),!s.isEqual(An.min())){const ce=t.Vs.getLastRemoteSnapshotVersion(m).next(Te=>t.Vs.setTargetsMetadata(m,m.currentSequenceNumber,s));S.push(ce)}return Xe.waitFor(S).next(()=>_.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,j,q)).next(()=>j)}).then(m=>(t.$i=u,m))}function ku(i,e,t){let s=E1(),u=E1();return t.forEach(m=>s=s.add(m)),e.getEntries(i,s).next(m=>{let _=A2();return t.forEach((S,j)=>{const q=m.get(S);j.isFoundDocument()!==q.isFoundDocument()&&(u=u.add(S)),j.isNoDocument()&&j.version.isEqual(An.min())?(e.removeEntry(S,j.readTime),_=_.insert(S,j)):!q.isValidDocument()||j.version.compareTo(q.version)>0||0===j.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(j),_=_.insert(S,j)):Pt("LocalStore","Ignoring outdated watch update for ",S,". Current version:",q.version," Watch version:",j.version)}),{Gi:_,Qi:u}})}function Xl(i,e){const t=N(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function E4(i,e){const t=N(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let u;return t.Vs.getTargetData(s,e).next(m=>m?(u=m,Xe.resolve(u)):t.Vs.allocateTargetId(s).next(_=>(u=new Va(e,_,0,s.currentSequenceNumber),t.Vs.addTargetData(s,u).next(()=>u))))}).then(s=>{const u=t.$i.get(s.targetId);return(null===u||s.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(t.$i=t.$i.insert(s.targetId,s),t.Bi.set(e,s.targetId)),s})}function I4(i,e,t){return O0.apply(this,arguments)}function O0(){return O0=(0,Oe.Z)(function*(i,e,t){const s=N(i),u=s.$i.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",m,_=>s.persistence.referenceDelegate.removeTarget(_,u)))}catch(_){if(!p2(_))throw _;Pt("LocalStore",`Failed to update sequence numbers for target ${e}: ${_}`)}s.$i=s.$i.remove(e),s.Bi.delete(u.target)}),O0.apply(this,arguments)}function V0(i,e,t){const s=N(i);let u=An.min(),m=E1();return s.persistence.runTransaction("Execute query","readonly",_=>function(S,j,q){const ce=N(S),Te=ce.Bi.get(q);return void 0!==Te?Xe.resolve(ce.$i.get(Te)):ce.Vs.getTargetData(j,q)}(s,_,es(e)).next(S=>{if(S)return u=S.lastLimboFreeSnapshotVersion,s.Vs.getMatchingKeysForTargetId(_,S.targetId).next(j=>{m=j})}).next(()=>s.Fi.getDocumentsMatchingQuery(_,e,t?u:An.min(),t?m:E1())).next(S=>(t8(s,h4(e),S),{documents:S,ji:m})))}function e8(i,e){const t=N(i),s=N(t.Vs),u=t.$i.get(e);return u?Promise.resolve(u.target):t.persistence.runTransaction("Get target data","readonly",m=>s.te(m,e).next(_=>_?_.target:null))}function io(i,e){const t=N(i),s=t.Li.get(e)||An.min();return t.persistence.runTransaction("Get new document changes","readonly",u=>t.Ui.getAllFromCollectionGroup(u,e,s4(s,-1),Number.MAX_SAFE_INTEGER)).then(u=>(t8(t,e,u),u))}function t8(i,e,t){let s=An.min();t.forEach((u,m)=>{m.readTime.compareTo(s)>0&&(s=m.readTime)}),i.Li.set(e,s)}function n8(){return n8=(0,Oe.Z)(function*(i,e,t,s){const u=N(i);let m=E1(),_=A2();for(const q of t){const ce=e.Wi(q.metadata.name);q.document&&(m=m.add(ce));const Te=e.zi(q);Te.setReadTime(e.Hi(q.metadata.readTime)),_=_.insert(ce,Te)}const S=u.Ui.newChangeBuffer({trackRemovals:!0}),j=yield E4(u,(q=s,es(ea(w1.fromString(`__bundle__/docs/${q}`)))));var q;return u.persistence.runTransaction("Apply bundle documents","readwrite",q=>ku(q,S,_).next(ce=>(S.apply(q),ce)).next(ce=>u.Vs.removeMatchingKeysForTargetId(q,j.targetId).next(()=>u.Vs.addMatchingKeys(q,m,j.targetId)).next(()=>u.localDocuments.getLocalViewOfDocuments(q,ce.Gi,ce.Qi)).next(()=>ce.Gi)))}),n8.apply(this,arguments)}function q5(i,e){return R0.apply(this,arguments)}function R0(){return R0=(0,Oe.Z)(function*(i,e,t=E1()){const s=yield E4(i,es(z6(e.bundledQuery))),u=N(i);return u.persistence.runTransaction("Save named query","readwrite",m=>{const _=Ri(e.readTime);if(s.snapshotVersion.compareTo(_)>=0)return u.Ds.saveNamedQuery(m,e);const S=s.withResumeToken(Ni.EMPTY_BYTE_STRING,_);return u.$i=u.$i.insert(S.targetId,S),u.Vs.updateTargetData(m,S).next(()=>u.Vs.removeMatchingKeysForTargetId(m,s.targetId)).next(()=>u.Vs.addMatchingKeys(m,t,s.targetId)).next(()=>u.Ds.saveNamedQuery(m,e))})}),R0.apply(this,arguments)}function Fu(i,e){return`firestore_clients_${i}_${e}`}function r8(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function k6(i,e){return`firestore_targets_${i}_${e}`}class Y4{constructor(e,t,s,u){this.user=e,this.batchId=t,this.state=s,this.error=u}static Ji(e,t,s){const u=JSON.parse(s);let m,_="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return _&&u.error&&(_="string"==typeof u.error.message&&"string"==typeof u.error.code,_&&(m=new W(u.error.code,u.error.message))),_?new Y4(e,t,u.state,m):(Y1("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class H6{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ji(e,t){const s=JSON.parse(t);let u,m="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return m&&s.error&&(m="string"==typeof s.error.message&&"string"==typeof s.error.code,m&&(u=new W(s.error.code,s.error.message))),m?new H6(e,s.state,u):(Y1("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class k0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const s=JSON.parse(t);let u="object"==typeof s&&s.activeTargetIds instanceof Array,m=Vs();for(let _=0;u&&_<s.activeTargetIds.length;++_)u=_n(s.activeTargetIds[_]),m=m.add(s.activeTargetIds[_]);return u?new k0(e,m):(Y1("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class O3{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new O3(t.clientId,t.onlineState):(Y1("SharedClientState",`Failed to parse online state: ${e}`),null)}}class H0{constructor(){this.activeTargetIds=Vs()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V3{constructor(e,t,s,u,m){this.window=e,this.js=t,this.persistenceKey=s,this.tr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new qr(Dn),this.started=!1,this.ir=[];const _=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.rr=Fu(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new H0),this.cr=new RegExp(`^firestore_clients_${_}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${_}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${_}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(S){return`firestore_bundle_loaded_v2_${S}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.syncEngine.Ri();for(const u of t){if(u===e.tr)continue;const m=e.getItem(Fu(e.persistenceKey,u));if(m){const _=k0.Ji(u,m);_&&(e.sr=e.sr.insert(_.clientId,_))}}e._r();const s=e.storage.getItem(e.lr);if(s){const u=e.wr(s);u&&e.mr(u)}for(const u of e.ir)e.nr(u);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((s,u)=>{u.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,s){this.yr(e,t,s),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(k6(this.persistenceKey,e));if(s){const u=H6.Ji(e,s);u&&(t=u.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(k6(this.persistenceKey,e))}updateQueryState(e,t,s){this.Tr(e,t,s)}handleUserChange(e,t,s){t.forEach(u=>{this.pr(u)}),this.currentUser=e,s.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pt("SharedClientState","READ",e,t),t}setItem(e,t){Pt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(Pt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.rr)return void Y1("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Oe.Z)(function*(){if(t.started){if(null!==s.key)if(t.cr.test(s.key)){if(null==s.newValue){const u=t.Rr(s.key);return t.br(u,null)}{const u=t.Pr(s.key,s.newValue);if(u)return t.br(u.clientId,u)}}else if(t.ar.test(s.key)){if(null!==s.newValue){const u=t.vr(s.key,s.newValue);if(u)return t.Vr(u)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const u=t.Sr(s.key,s.newValue);if(u)return t.Dr(u)}}else if(s.key===t.lr){if(null!==s.newValue){const u=t.wr(s.newValue);if(u)return t.mr(u)}}else if(s.key===t.ur){const u=function(m){let _=Oi.ot;if(null!=m)try{const S=JSON.parse(m);E("number"==typeof S),_=S}catch(S){Y1("SharedClientState","Failed to read sequence number from WebStorage",S)}return _}(s.newValue);u!==Oi.ot&&t.sequenceNumberHandler(u)}else if(s.key===t.dr){const u=t.Cr(s.newValue);yield Promise.all(u.map(m=>t.syncEngine.Nr(m)))}}else t.ir.push(s)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,s){const u=new Y4(this.currentUser,e,t,s),m=r8(this.persistenceKey,this.currentUser,e);this.setItem(m,u.Yi())}pr(e){const t=r8(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,s){const u=k6(this.persistenceKey,e),m=new H6(e,t,s);this.setItem(u,m.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const s=this.Rr(e);return k0.Ji(s,t)}vr(e,t){const s=this.ar.exec(e),u=Number(s[1]);return Y4.Ji(new Hr(void 0!==s[2]?s[2]:null),u,t)}Sr(e,t){const s=this.hr.exec(e),u=Number(s[1]);return H6.Ji(u,t)}wr(e){return O3.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Oe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);Pt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const s=t?this.sr.insert(e,t):this.sr.remove(e),u=this.gr(this.sr),m=this.gr(s),_=[],S=[];return m.forEach(j=>{u.has(j)||_.push(j)}),u.forEach(j=>{m.has(j)||S.push(j)}),this.syncEngine.Mr(_,S).then(()=>{this.sr=s})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=Vs();return e.forEach((s,u)=>{t=t.unionWith(u.activeTargetIds)}),t}}class R3{constructor(){this.Fr=new H0,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,s){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new H0,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Uu{Br(e){}shutdown(){}}class i8{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){Pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const s8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class o8{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Bu extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,s,u,m){const _=this.oo(e,t);Pt("RestConnection","Sending: ",_,s);const S={};return this.uo(S,u,m),this.co(e,_,S,s).then(j=>(Pt("RestConnection","Received: ",j),j),j=>{throw Qi("RestConnection",`${e} failed with error: `,j,"url: ",_,"request:",s),j})}ao(e,t,s,u,m){return this.ro(e,t,s,u,m)}uo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ns,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((u,m)=>e[m]=u),s&&s.headers.forEach((u,m)=>e[m]=u)}oo(e,t){return`${this.so}/v1/${t}:${s8[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,s,u){return new Promise((m,_)=>{const S=new us;S.listenOnce(Y2.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Pi.NO_ERROR:const q=S.getResponseJson();Pt("Connection","XHR received:",JSON.stringify(q)),m(q);break;case Pi.TIMEOUT:Pt("Connection",'RPC "'+e+'" timed out'),_(new W(z.DEADLINE_EXCEEDED,"Request time out"));break;case Pi.HTTP_ERROR:const ce=S.getStatus();if(Pt("Connection",'RPC "'+e+'" failed with status:',ce,"response text:",S.getResponseText()),ce>0){const Te=S.getResponseJson().error;if(Te&&Te.status&&Te.message){const ct=function(At){const Rt=At.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(Rt)>=0?Rt:z.UNKNOWN}(Te.status);_(new W(ct,Te.message))}else _(new W(z.UNKNOWN,"Server responded with status "+S.getStatus()))}else _(new W(z.UNAVAILABLE,"Connection failed."));break;default:A()}}finally{Pt("Connection",'RPC "'+e+'" completed.')}});const j=JSON.stringify(u);S.send(t,"POST",j,s,15)})}ho(e,t,s){const u=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=cs(),_=Ts(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(S.xmlHttpFactory=new ms({})),this.uo(S.initMessageHeaders,t,s),(0,qe.uI)()||(0,qe.b$)()||(0,qe.d)()||(0,qe.w1)()||(0,qe.Mn)()||(0,qe.ru)()||(S.httpHeadersOverwriteParam="$httpHeaders");const j=u.join("");Pt("Connection","Creating WebChannel: "+j,S);const q=m.createWebChannel(j,S);let ce=!1,Te=!1;const ct=new o8({jr:Rt=>{Te?Pt("Connection","Not sending because WebChannel is closed:",Rt):(ce||(Pt("Connection","Opening WebChannel transport."),q.open(),ce=!0),Pt("Connection","WebChannel sending:",Rt),q.send(Rt))},Wr:()=>q.close()}),At=(Rt,wn,Un)=>{Rt.listen(wn,jr=>{try{Un(jr)}catch($i){setTimeout(()=>{throw $i},0)}})};return At(q,Br.EventType.OPEN,()=>{Te||Pt("Connection","WebChannel transport opened.")}),At(q,Br.EventType.CLOSE,()=>{Te||(Te=!0,Pt("Connection","WebChannel transport closed"),ct.eo())}),At(q,Br.EventType.ERROR,Rt=>{Te||(Te=!0,Qi("Connection","WebChannel transport errored:",Rt),ct.eo(new W(z.UNAVAILABLE,"The operation could not be completed")))}),At(q,Br.EventType.MESSAGE,Rt=>{var wn;if(!Te){const Un=Rt.data[0];E(!!Un);const jr=Un,$i=jr.error||(null===(wn=jr[0])||void 0===wn?void 0:wn.error);if($i){Pt("Connection","WebChannel received error:",$i);const wi=$i.status;let Wi=function(n2){const oo=Q1[n2];if(void 0!==oo)return Vo(oo)}(wi),Zi=$i.message;void 0===Wi&&(Wi=z.INTERNAL,Zi="Unknown error status: "+wi+" with message "+$i.message),Te=!0,ct.eo(new W(Wi,Zi)),q.close()}else Pt("Connection","WebChannel received:",Un),ct.no(Un)}}),At(_,Io.STAT_EVENT,Rt=>{Rt.stat===ls.PROXY?Pt("Connection","Detected buffering proxy"):Rt.stat===ls.NOPROXY&&Pt("Connection","Detected no buffering proxy")}),setTimeout(()=>{ct.Zr()},0),ct}}function ua(){return"undefined"!=typeof window?window:null}function Q4(){return"undefined"!=typeof document?document:null}function F6(i){return new oa(i,!0)}class k3{constructor(e,t,s=1e3,u=1.5,m=6e4){this.js=e,this.timerId=t,this.lo=s,this.fo=u,this._o=m,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),u=Math.max(0,t-s);u>0&&Pt("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,u,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class ju{constructor(e,t,s,u,m,_,S,j){this.js=e,this.Ao=s,this.Ro=u,this.bo=m,this.authCredentialsProvider=_,this.appCheckCredentialsProvider=S,this.listener=j,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new k3(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Oe.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Oe.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var s=this;return(0,Oe.Z)(function*(){s.Fo(),s.$o(),s.So.cancel(),s.Po++,4!==e?s.So.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(Y1(t.toString()),Y1("Using maximum backoff delay to prevent overloading the backend."),s.So.po()):t&&t.code===z.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Bo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Po===t&&this.Uo(s,u)},s=>{e(()=>{const u=new W(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(u)})})}Uo(e,t){const s=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{s(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(u=>{s(()=>this.qo(u))}),this.stream.onMessage(u=>{s(()=>this.onMessage(u))})}xo(){var e=this;this.state=5,this.So.Io((0,Oe.Z)(function*(){e.state=0,e.start()}))}qo(e){return Pt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(Pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a8 extends ju{constructor(e,t,s,u,m,_){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,u,_),this.wt=m}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function gt(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:A(),u=e.targetChange.targetIds||[],m=function(j,q){return j.dt?(E(void 0===q||"string"==typeof q),Ni.fromBase64String(q||"")):(E(void 0===q||q instanceof Uint8Array),Ni.fromUint8Array(q||new Uint8Array))}(i,e.targetChange.resumeToken),_=e.targetChange.cause,S=_&&function(j){const q=void 0===j.code?z.UNKNOWN:Vo(j.code);return new W(q,j.message||"")}(_);t=new to(s,u,m,S||null)}else if("documentChange"in e){const s=e.documentChange,u=D2(i,s.document.name),m=Ri(s.document.updateTime),_=new E2({mapValue:{fields:s.document.fields}}),S=dr.newFoundDocument(u,m,_);t=new sa(s.targetIds||[],s.removedTargetIds||[],S.key,S)}else if("documentDelete"in e){const s=e.documentDelete,u=D2(i,s.document),m=s.readTime?Ri(s.readTime):An.min(),_=dr.newNoDocument(u,m);t=new sa([],s.removedTargetIds||[],_.key,_)}else if("documentRemove"in e){const s=e.documentRemove,u=D2(i,s.document);t=new sa([],s.removedTargetIds||[],u,null)}else{if(!("filter"in e))return A();{const s=e.filter,m=new Ta(s.count||0);t=new F4(s.targetId,m)}}var j;return t}(this.wt,e),s=function(u){if(!("targetChange"in u))return An.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?An.min():m.readTime?Ri(m.readTime):An.min()}(e);return this.listener.Go(t,s)}Qo(e){const t={};t.database=g(this.wt),t.addTarget=function(u,m){let _;const S=m.target;return _=Ma(S)?{documents:Pn(u,S)}:{query:fi(u,S)},_.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?_.resumeToken=p4(u,m.resumeToken):m.snapshotVersion.compareTo(An.min())>0&&(_.readTime=La(u,m.snapshotVersion.toTimestamp())),_}(this.wt,e);const s=function Oa(i,e){const t=function(s,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return A()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Mo(t)}jo(e){const t={};t.database=g(this.wt),t.removeTarget=e,this.Mo(t)}}class Gu extends ju{constructor(e,t,s,u,m,_){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,u,_),this.wt=m,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(E(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Vn(i,e){return i&&i.length>0?(E(void 0!==e),i.map(t=>function(s,u){let m=Ri(s.updateTime?s.updateTime:u);return m.isEqual(An.min())&&(m=Ri(u)),new Js(m,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ri(e.commitTime);return this.listener.Jo(s,t)}return E(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=g(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ht(this.wt,s))};this.Mo(t)}}class $u extends class{}{constructor(e,t,s,u){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.wt=u,this.Zo=!1}tu(){if(this.Zo)throw new W(z.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.bo.ro(e,t,s,u,m)).catch(u=>{throw"FirebaseError"===u.name?(u.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new W(z.UNKNOWN,u.toString())})}ao(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.bo.ao(e,t,s,u,m)).catch(u=>{throw"FirebaseError"===u.name?(u.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new W(z.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class Wu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Y1(t),this.su=!1):Pt("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class H3{constructor(e,t,s,u,m){var _=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=m,this.du.Br(S=>{s.enqueueAndForget((0,Oe.Z)(function*(){var j;Ra(_)&&(Pt("RemoteStore","Restarting streams for network reachability change."),yield(j=(0,Oe.Z)(function*(q){const ce=N(q);ce.lu.add(4),yield fc(ce),ce._u.set("Unknown"),ce.lu.delete(4),yield U6(ce)}),function(q){return j.apply(this,arguments)})(_))}))}),this._u=new Wu(s,u)}}function U6(i){return F3.apply(this,arguments)}function F3(){return F3=(0,Oe.Z)(function*(i){if(Ra(i))for(const e of i.fu)yield e(!0)}),F3.apply(this,arguments)}function fc(i){return B6.apply(this,arguments)}function B6(){return B6=(0,Oe.Z)(function*(i){for(const e of i.fu)yield e(!1)}),B6.apply(this,arguments)}function F0(i,e){const t=N(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),l8(t)?c8(t):t6(t).Co()&&j6(t,e))}function A4(i,e){const t=N(i),s=t6(t);t.hu.delete(e),s.Co()&&U3(t,e),0===t.hu.size&&(s.Co()?s.ko():Ra(t)&&t._u.set("Unknown"))}function j6(i,e){i.wu.Nt(e.targetId),t6(i).Qo(e)}function U3(i,e){i.wu.Nt(e),t6(i).jo(e)}function c8(i){i.wu=new U2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),te:e=>i.hu.get(e)||null}),t6(i).start(),i._u.iu()}function l8(i){return Ra(i)&&!t6(i).Do()&&i.hu.size>0}function Ra(i){return 0===N(i).lu.size}function Zu(i){i.wu=void 0}function qu(i){return U0.apply(this,arguments)}function U0(){return U0=(0,Oe.Z)(function*(i){i.hu.forEach((e,t)=>{j6(i,e)})}),U0.apply(this,arguments)}function u8(i,e){return B0.apply(this,arguments)}function B0(){return B0=(0,Oe.Z)(function*(i,e){Zu(i),l8(i)?(i._u.uu(e),c8(i)):i._u.set("Unknown")}),B0.apply(this,arguments)}function h8(i,e,t){return j0.apply(this,arguments)}function j0(){return j0=(0,Oe.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof to&&2===e.state&&e.cause)try{yield(s=(0,Oe.Z)(function*(u,m){const _=m.cause;for(const S of m.targetIds)u.hu.has(S)&&(yield u.remoteSyncer.rejectListen(S,_),u.hu.delete(S),u.wu.removeTarget(S))}),function(u,m){return s.apply(this,arguments)})(i,e)}catch(s){Pt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Uo(i,s)}else if(e instanceof sa?i.wu.Ut(e):e instanceof F4?i.wu.zt(e):i.wu.Gt(e),!t.isEqual(An.min()))try{const s=yield Ql(i.localStore);t.compareTo(s)>=0&&(yield function(u,m){const _=u.wu.Yt(m);return _.targetChanges.forEach((S,j)=>{if(S.resumeToken.approximateByteSize()>0){const q=u.hu.get(j);q&&u.hu.set(j,q.withResumeToken(S.resumeToken,m))}}),_.targetMismatches.forEach(S=>{const j=u.hu.get(S);if(!j)return;u.hu.set(S,j.withResumeToken(Ni.EMPTY_BYTE_STRING,j.snapshotVersion)),U3(u,S);const q=new Va(j.target,S,1,j.sequenceNumber);j6(u,q)}),u.remoteSyncer.applyRemoteEvent(_)}(i,t))}catch(s){Pt("RemoteStore","Failed to raise snapshot:",s),yield Uo(i,s)}var s}),j0.apply(this,arguments)}function Uo(i,e,t){return J4.apply(this,arguments)}function J4(){return J4=(0,Oe.Z)(function*(i,e,t){if(!p2(e))throw e;i.lu.add(1),yield fc(i),i._u.set("Offline"),t||(t=()=>Ql(i.localStore)),i.asyncQueue.enqueueRetryable((0,Oe.Z)(function*(){Pt("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield U6(i)}))}),J4.apply(this,arguments)}function f8(i,e){return e().catch(t=>Uo(i,t,e))}function X4(i){return d8.apply(this,arguments)}function d8(){return d8=(0,Oe.Z)(function*(i){const e=N(i),t=qc(e);let s=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;B3(e);)try{const u=yield Xl(e.localStore,s);if(null===u){0===e.au.length&&t.ko();break}s=u.batchId,p8(e,u)}catch(u){yield Uo(e,u)}G0(e)&&e6(e)}),d8.apply(this,arguments)}function B3(i){return Ra(i)&&i.au.length<10}function p8(i,e){i.au.push(e);const t=qc(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function G0(i){return Ra(i)&&!qc(i).Do()&&i.au.length>0}function e6(i){qc(i).start()}function Ku(i){return G6.apply(this,arguments)}function G6(){return G6=(0,Oe.Z)(function*(i){qc(i).Xo()}),G6.apply(this,arguments)}function m8(i){return $0.apply(this,arguments)}function $0(){return $0=(0,Oe.Z)(function*(i){const e=qc(i);for(const t of i.au)e.Ho(t.mutations)}),$0.apply(this,arguments)}function g8(i,e,t){return j3.apply(this,arguments)}function j3(){return j3=(0,Oe.Z)(function*(i,e,t){const s=i.au.shift(),u=$4.from(s,e,t);yield f8(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield X4(i)}),j3.apply(this,arguments)}function G3(i,e){return $3.apply(this,arguments)}function $3(){return $3=(0,Oe.Z)(function*(i,e){var t;e&&qc(i).zo&&(yield(t=(0,Oe.Z)(function*(s,u){if(Na(m=u.code)&&m!==z.ABORTED){const _=s.au.shift();qc(s).No(),yield f8(s,()=>s.remoteSyncer.rejectFailedWrite(_.batchId,u)),yield X4(s)}var m}),function(s,u){return t.apply(this,arguments)})(i,e)),G0(i)&&e6(i)}),$3.apply(this,arguments)}function v8(i,e){return W0.apply(this,arguments)}function W0(){return W0=(0,Oe.Z)(function*(i,e){const t=N(i);t.asyncQueue.verifyOperationInProgress(),Pt("RemoteStore","RemoteStore received new credentials");const s=Ra(t);t.lu.add(3),yield fc(t),s&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield U6(t)}),W0.apply(this,arguments)}function Zc(i,e){return Z0.apply(this,arguments)}function Z0(){return Z0=(0,Oe.Z)(function*(i,e){const t=N(i);e?(t.lu.delete(2),yield U6(t)):e||(t.lu.add(2),yield fc(t),t._u.set("Unknown"))}),Z0.apply(this,arguments)}function t6(i){return i.mu||(i.mu=function(e,t,s){const u=N(e);return u.tu(),new a8(t,u.bo,u.authCredentials,u.appCheckCredentials,u.wt,s)}(i.datastore,i.asyncQueue,{zr:qu.bind(null,i),Jr:u8.bind(null,i),Go:h8.bind(null,i)}),i.fu.push(function(){var e=(0,Oe.Z)(function*(t){t?(i.mu.No(),l8(i)?c8(i):i._u.set("Unknown")):(yield i.mu.stop(),Zu(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function qc(i){return i.gu||(i.gu=function(e,t,s){const u=N(e);return u.tu(),new Gu(t,u.bo,u.authCredentials,u.appCheckCredentials,u.wt,s)}(i.datastore,i.asyncQueue,{zr:Ku.bind(null,i),Jr:G3.bind(null,i),Yo:m8.bind(null,i),Jo:g8.bind(null,i)}),i.fu.push(function(){var e=(0,Oe.Z)(function*(t){t?(i.gu.No(),yield X4(i)):(yield i.gu.stop(),i.au.length>0&&(Pt("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Kc{constructor(e,t,s,u,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=u,this.removalCallback=m,this.deferred=new he,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(_=>{})}static createAndSchedule(e,t,s,u,m){const _=Date.now()+s,S=new Kc(e,t,_,u,m);return S.start(s),S}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new W(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function n6(i,e){if(Y1("AsyncQueue",`${e}: ${i}`),p2(i))return new W(z.UNAVAILABLE,`${e}: ${i}`);throw i}class r6{constructor(e){this.comparator=e?(t,s)=>e(t,s)||en.comparator(t.key,s.key):(t,s)=>en.comparator(t.key,s.key),this.keyedMap=Ja(),this.sortedSet=new qr(this.comparator)}static emptySet(e){return new r6(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof r6)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const u=t.getNext().key,m=s.getNext().key;if(!u.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new r6;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class y8{constructor(){this.yu=new qr(en.comparator)}track(e){const t=e.doc.key,s=this.yu.get(t);s?0!==e.type&&3===s.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==s.type?this.yu=this.yu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.yu=this.yu.remove(t):1===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):A():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,s)=>{e.push(s)}),e}}class i6{constructor(e,t,s,u,m,_,S,j){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=u,this.mutatedKeys=m,this.fromCache=_,this.syncStateChanged=S,this.excludesMetadataChanges=j}static fromInitialDocuments(e,t,s,u){const m=[];return t.forEach(_=>{m.push({type:0,doc:_})}),new i6(e,t,r6.emptySet(t),m,s,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&No(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let u=0;u<t.length;u++)if(t[u].type!==s[u].type||!t[u].doc.isEqual(s[u].doc))return!1;return!0}}class ka{constructor(){this.Iu=void 0,this.listeners=[]}}class W3{constructor(){this.queries=new Kr(e=>Ia(e),No),this.onlineState="Unknown",this.Tu=new Set}}function $6(i,e){return q0.apply(this,arguments)}function q0(){return q0=(0,Oe.Z)(function*(i,e){const t=N(i),s=e.query;let u=!1,m=t.queries.get(s);if(m||(u=!0,m=new ka),u)try{m.Iu=yield t.onListen(s)}catch(_){const S=n6(_,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(S)}t.queries.set(s,m),m.listeners.push(e),e.Eu(t.onlineState),m.Iu&&e.Au(m.Iu)&&Z3(t)}),q0.apply(this,arguments)}function K0(i,e){return Y0.apply(this,arguments)}function Y0(){return Y0=(0,Oe.Z)(function*(i,e){const t=N(i),s=e.query;let u=!1;const m=t.queries.get(s);if(m){const _=m.listeners.indexOf(e);_>=0&&(m.listeners.splice(_,1),u=0===m.listeners.length)}if(u)return t.queries.delete(s),t.onUnlisten(s)}),Y0.apply(this,arguments)}function Yu(i,e){const t=N(i);let s=!1;for(const u of e){const _=t.queries.get(u.query);if(_){for(const S of _.listeners)S.Au(u)&&(s=!0);_.Iu=u}}s&&Z3(t)}function Qu(i,e,t){const s=N(i),u=s.queries.get(e);if(u)for(const m of u.listeners)m.onError(t);s.queries.delete(e)}function Z3(i){i.Tu.forEach(e=>{e.next()})}class q3{constructor(e,t,s){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const u of e.docChanges)3!==u.type&&s.push(u);e=new i6(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=i6.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class _8{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Ju{constructor(e){this.wt=e}Wi(e){return D2(this.wt,e)}zi(e){return e.metadata.exists?ne(this.wt,e.document,!1):dr.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Ri(e)}}class C8{constructor(e,t,s){this.xu=e,this.localStore=t,this.wt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=w8(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=w1.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,s=new Ju(this.wt);for(const u of e)if(u.metadata.queries){const m=s.Wi(u.metadata.name);for(const _ of u.metadata.queries){const S=(t.get(_)||E1()).add(m);t.set(_,S)}}return t}complete(){var e=this;return(0,Oe.Z)(function*(){const t=yield function Hu(i,e,t,s){return n8.apply(this,arguments)}(e.localStore,new Ju(e.wt),e.documents,e.xu.id),s=e.ku(e.documents);for(const u of e.queries)yield q5(e.localStore,u,s.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function w8(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class M8{constructor(e){this.key=e}}class Xu{constructor(e){this.key=e}}class e5{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=E1(),this.mutatedKeys=E1(),this.Lu=I2(e),this.Uu=new r6(this.Lu)}get qu(){return this.Fu}Ku(e,t){const s=t?t.Gu:new y8,u=t?t.Uu:this.Uu;let m=t?t.mutatedKeys:this.mutatedKeys,_=u,S=!1;const j="F"===this.query.limitType&&u.size===this.query.limit?u.last():null,q="L"===this.query.limitType&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((ce,Te)=>{const ct=u.get(ce),At=zo(this.query,Te)?Te:null,Rt=!!ct&&this.mutatedKeys.has(ct.key),wn=!!At&&(At.hasLocalMutations||this.mutatedKeys.has(At.key)&&At.hasCommittedMutations);let Un=!1;ct&&At?ct.data.isEqual(At.data)?Rt!==wn&&(s.track({type:3,doc:At}),Un=!0):this.Qu(ct,At)||(s.track({type:2,doc:At}),Un=!0,(j&&this.Lu(At,j)>0||q&&this.Lu(At,q)<0)&&(S=!0)):!ct&&At?(s.track({type:0,doc:At}),Un=!0):ct&&!At&&(s.track({type:1,doc:ct}),Un=!0,(j||q)&&(S=!0)),Un&&(At?(_=_.add(At),m=wn?m.add(ce):m.delete(ce)):(_=_.delete(ce),m=m.delete(ce)))}),null!==this.query.limit)for(;_.size>this.query.limit;){const ce="F"===this.query.limitType?_.last():_.first();_=_.delete(ce.key),m=m.delete(ce.key),s.track({type:1,doc:ce})}return{Uu:_,Gu:s,Oi:S,mutatedKeys:m}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const u=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const m=e.Gu.pu();m.sort((q,ce)=>function(Te,ct){const At=Rt=>{switch(Rt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A()}};return At(Te)-At(ct)}(q.type,ce.type)||this.Lu(q.doc,ce.doc)),this.ju(s);const _=t?this.Wu():[],S=0===this.Bu.size&&this.current?1:0,j=S!==this.$u;return this.$u=S,0!==m.length||j?{snapshot:new i6(this.query,e.Uu,u,m,e.mutatedKeys,0===S,j,!1),zu:_}:{zu:_}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new y8,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=E1(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const t=[];return e.forEach(s=>{this.Bu.has(s)||t.push(new Xu(s))}),this.Bu.forEach(s=>{e.has(s)||t.push(new M8(s))}),t}Ju(e){this.Fu=e.ji,this.Bu=E1();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return i6.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class K3{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class t5{constructor(e){this.key=e,this.Xu=!1}}class b8{constructor(e,t,s,u,m,_){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=u,this.currentUser=m,this.maxConcurrentLimboResolutions=_,this.Zu={},this.tc=new Kr(S=>Ia(S),No),this.ec=new Map,this.nc=new Set,this.sc=new qr(en.comparator),this.ic=new Map,this.rc=new J,this.oc={},this.uc=new Map,this.cc=ca.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function E8(i,e){return I8.apply(this,arguments)}function I8(){return I8=(0,Oe.Z)(function*(i,e){const t=n3(i);let s,u;const m=t.tc.get(e);if(m)s=m.targetId,t.sharedClientState.addLocalQueryTarget(s),u=m.view.Yu();else{const _=yield E4(t.localStore,es(e));t.isPrimaryClient&&F0(t.remoteStore,_);const S=t.sharedClientState.addLocalQueryTarget(_.targetId);s=_.targetId,u=yield wo(t,e,s,"current"===S)}return u}),I8.apply(this,arguments)}function wo(i,e,t,s){return A8.apply(this,arguments)}function A8(){return A8=(0,Oe.Z)(function*(i,e,t,s){i.hc=(ce,Te,ct)=>{return(At=(0,Oe.Z)(function*(Rt,wn,Un,jr){let $i=wn.view.Ku(Un);$i.Oi&&($i=yield V0(Rt.localStore,wn.query,!1).then(({documents:Zi})=>wn.view.Ku(Zi,$i)));const wi=jr&&jr.targetChanges.get(wn.targetId),Wi=wn.view.applyChanges($i,Rt.isPrimaryClient,wi);return x4(Rt,wn.targetId,Wi.zu),Wi.snapshot}),function(Rt,wn,Un,jr){return At.apply(this,arguments)})(i,ce,Te,ct);var At};const u=yield V0(i.localStore,e,!0),m=new e5(e,u.ji),_=m.Ku(u.documents),S=eo.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState),j=m.applyChanges(_,i.isPrimaryClient,S);x4(i,t,j.zu);const q=new K3(e,t,m);return i.tc.set(e,q),i.ec.has(t)?i.ec.get(t).push(e):i.ec.set(t,[e]),j.snapshot}),A8.apply(this,arguments)}function K5(i,e){return Q0.apply(this,arguments)}function Q0(){return Q0=(0,Oe.Z)(function*(i,e){const t=N(i),s=t.tc.get(e),u=t.ec.get(s.targetId);if(u.length>1)return t.ec.set(s.targetId,u.filter(m=>!No(m,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield I4(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),A4(t.remoteStore,s.targetId),ha(t,s.targetId)}).catch(zs))):(ha(t,s.targetId),yield I4(t.localStore,s.targetId,!0))}),Q0.apply(this,arguments)}function J0(){return J0=(0,Oe.Z)(function*(i,e,t){const s=r3(i);try{const u=yield function(m,_){const S=N(m),j=Mr.now(),q=_.reduce((ct,At)=>ct.add(At.key),E1());let ce,Te;return S.persistence.runTransaction("Locally write mutations","readwrite",ct=>{let At=A2(),Rt=E1();return S.Ui.getEntries(ct,q).next(wn=>{At=wn,At.forEach((Un,jr)=>{jr.isValidDocument()||(Rt=Rt.add(Un))})}).next(()=>S.localDocuments.getOverlayedDocuments(ct,At)).next(wn=>{ce=wn;const Un=[];for(const jr of _){const $i=F2(jr,ce.get(jr.key).overlayedDocument);null!=$i&&Un.push(new Xs(jr.key,$i,Zs($i.value.mapValue),Xr.exists(!0)))}return S.mutationQueue.addMutationBatch(ct,j,Un,_)}).next(wn=>{Te=wn;const Un=wn.applyToLocalDocumentSet(ce,Rt);return S.documentOverlayCache.saveOverlays(ct,wn.batchId,Un)})}).then(()=>({batchId:Te.batchId,changes:x2(ce)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(u.batchId),function(m,_,S){let j=m.oc[m.currentUser.toKey()];j||(j=new qr(Dn)),j=j.insert(_,S),m.oc[m.currentUser.toKey()]=j}(s,u.batchId,t),yield fa(s,u.changes),yield X4(s.remoteStore)}catch(u){const m=n6(u,"Failed to persist write");t.reject(m)}}),J0.apply(this,arguments)}function Y3(i,e){return D8.apply(this,arguments)}function D8(){return D8=(0,Oe.Z)(function*(i,e){const t=N(i);try{const s=yield Jl(t.localStore,e);e.targetChanges.forEach((u,m)=>{const _=t.ic.get(m);_&&(E(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?_.Xu=!0:u.modifiedDocuments.size>0?E(_.Xu):u.removedDocuments.size>0&&(E(_.Xu),_.Xu=!1))}),yield fa(t,s,e)}catch(s){yield zs(s)}}),D8.apply(this,arguments)}function Q3(i,e,t){const s=N(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const u=[];s.tc.forEach((m,_)=>{const S=_.view.Eu(e);S.snapshot&&u.push(S.snapshot)}),function(m,_){const S=N(m);S.onlineState=_;let j=!1;S.queries.forEach((q,ce)=>{for(const Te of ce.listeners)Te.Eu(_)&&(j=!0)}),j&&Z3(S)}(s.eventManager,e),u.length&&s.Zu.Go(u),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function J3(i,e,t){return X3.apply(this,arguments)}function X3(){return X3=(0,Oe.Z)(function*(i,e,t){const s=N(i);s.sharedClientState.updateQueryState(e,"rejected",t);const u=s.ic.get(e),m=u&&u.key;if(m){let _=new qr(en.comparator);_=_.insert(m,dr.newNoDocument(m,An.min()));const S=E1().add(m),j=new Es(An.min(),new Map,new T1(Dn),_,S);yield Y3(s,j),s.sc=s.sc.remove(m),s.ic.delete(e),sl(s)}else yield I4(s.localStore,e,!1).then(()=>ha(s,e,t)).catch(zs)}),X3.apply(this,arguments)}function el(i,e){return tl.apply(this,arguments)}function tl(){return tl=(0,Oe.Z)(function*(i,e){const t=N(i),s=e.batch.batchId;try{const u=yield P0(t.localStore,e);s6(t,s,null),il(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield fa(t,u)}catch(u){yield zs(u)}}),tl.apply(this,arguments)}function n5(i,e,t){return nl.apply(this,arguments)}function nl(){return nl=(0,Oe.Z)(function*(i,e,t){const s=N(i);try{const u=yield function(m,_){const S=N(m);return S.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let q;return S.mutationQueue.lookupMutationBatch(j,_).next(ce=>(E(null!==ce),q=ce.keys(),S.mutationQueue.removeMutationBatch(j,ce))).next(()=>S.mutationQueue.performConsistencyCheck(j)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(j,q,_)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,q)).next(()=>S.localDocuments.getDocuments(j,q))})}(s.localStore,e);s6(s,e,t),il(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield fa(s,u)}catch(u){yield zs(u)}}),nl.apply(this,arguments)}function rl(){return rl=(0,Oe.Z)(function*(i,e){const t=N(i);Ra(t.remoteStore)||Pt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(m){const _=N(m);return _.persistence.runTransaction("Get highest unacknowledged batch id","readonly",S=>_.mutationQueue.getHighestUnacknowledgedBatchId(S))}(t.localStore);if(-1===s)return void e.resolve();const u=t.uc.get(s)||[];u.push(e),t.uc.set(s,u)}catch(s){const u=n6(s,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),rl.apply(this,arguments)}function il(i,e){(i.uc.get(e)||[]).forEach(t=>{t.resolve()}),i.uc.delete(e)}function s6(i,e,t){const s=N(i);let u=s.oc[s.currentUser.toKey()];if(u){const m=u.get(e);m&&(t?m.reject(t):m.resolve(),u=u.remove(e)),s.oc[s.currentUser.toKey()]=u}}function ha(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.ec.get(e))i.tc.delete(s),t&&i.Zu.lc(s,t);i.ec.delete(e),i.isPrimaryClient&&i.rc.us(e).forEach(s=>{i.rc.containsKey(s)||S8(i,s)})}function S8(i,e){i.nc.delete(e.path.canonicalString());const t=i.sc.get(e);null!==t&&(A4(i.remoteStore,t),i.sc=i.sc.remove(e),i.ic.delete(t),sl(i))}function x4(i,e,t){for(const s of t)s instanceof M8?(i.rc.addReference(s.key,e),i5(i,s)):s instanceof Xu?(Pt("SyncEngine","Document no longer in limbo: "+s.key),i.rc.removeReference(s.key,e),i.rc.containsKey(s.key)||S8(i,s.key)):A()}function i5(i,e){const t=e.key,s=t.path.canonicalString();i.sc.get(t)||i.nc.has(s)||(Pt("SyncEngine","New document in limbo: "+t),i.nc.add(s),sl(i))}function sl(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const e=i.nc.values().next().value;i.nc.delete(e);const t=new en(w1.fromString(e)),s=i.cc.next();i.ic.set(s,new t5(t)),i.sc=i.sc.insert(t,s),F0(i.remoteStore,new Va(es(ea(t.path)),s,2,Oi.ot))}}function fa(i,e,t){return Bo.apply(this,arguments)}function Bo(){return Bo=(0,Oe.Z)(function*(i,e,t){const s=N(i),u=[],m=[],_=[];var S;s.tc.isEmpty()||(s.tc.forEach((S,j)=>{_.push(s.hc(j,e,t).then(q=>{if(q){s.isPrimaryClient&&s.sharedClientState.updateQueryState(j.targetId,q.fromCache?"not-current":"current"),u.push(q);const ce=L3.Vi(j.targetId,q);m.push(ce)}}))}),yield Promise.all(_),s.Zu.Go(u),yield(S=(0,Oe.Z)(function*(j,q){const ce=N(j);try{yield ce.persistence.runTransaction("notifyLocalViewChanges","readwrite",Te=>Xe.forEach(q,ct=>Xe.forEach(ct.Pi,At=>ce.persistence.referenceDelegate.addReference(Te,ct.targetId,At)).next(()=>Xe.forEach(ct.vi,At=>ce.persistence.referenceDelegate.removeReference(Te,ct.targetId,At)))))}catch(Te){if(!p2(Te))throw Te;Pt("LocalStore","Failed to update sequence numbers: "+Te)}for(const Te of q){const ct=Te.targetId;if(!Te.fromCache){const At=ce.$i.get(ct),wn=At.withLastLimboFreeSnapshotVersion(At.snapshotVersion);ce.$i=ce.$i.insert(ct,wn)}}}),function(j,q){return S.apply(this,arguments)})(s.localStore,m))}),Bo.apply(this,arguments)}function W6(i,e){return is.apply(this,arguments)}function is(){return is=(0,Oe.Z)(function*(i,e){const t=N(i);if(!t.currentUser.isEqual(e)){Pt("SyncEngine","User change. New user:",e.toKey());const s=yield z0(t.localStore,e);t.currentUser=e,(u=t).uc.forEach(_=>{_.forEach(S=>{S.reject(new W(z.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.uc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield fa(t,s.Ki)}var u}),is.apply(this,arguments)}function D4(i,e){const t=N(i),s=t.ic.get(e);if(s&&s.Xu)return E1().add(s.key);{let u=E1();const m=t.ec.get(e);if(!m)return u;for(const _ of m){const S=t.tc.get(_);u=u.unionWith(S.view.qu)}return u}}function X0(i,e){return so.apply(this,arguments)}function so(){return so=(0,Oe.Z)(function*(i,e){const t=N(i),s=yield V0(t.localStore,e.query,!0),u=e.view.Ju(s);return t.isPrimaryClient&&x4(t,e.targetId,u.zu),u}),so.apply(this,arguments)}function ol(i,e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,Oe.Z)(function*(i,e){const t=N(i);return io(t.localStore,e).then(s=>fa(t,s))}),Yc.apply(this,arguments)}function o6(i,e,t,s){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,Oe.Z)(function*(i,e,t,s){const u=N(i),m=yield function(_,S){const j=N(_),q=N(j.mutationQueue);return j.persistence.runTransaction("Lookup mutation documents","readonly",ce=>q.yn(ce,S).next(Te=>Te?j.localDocuments.getDocuments(ce,Te):Xe.resolve(null)))}(u.localStore,e);var S;null!==m?("pending"===t?yield X4(u.remoteStore):"acknowledged"===t||"rejected"===t?(s6(u,e,s||null),il(u,e),S=e,N(N(u.localStore).mutationQueue).In(S)):A(),yield fa(u,m)):Pt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Qc.apply(this,arguments)}function Jc(){return Jc=(0,Oe.Z)(function*(i,e){const t=N(i);if(n3(t),r3(t),!0===e&&!0!==t.ac){const s=t.sharedClientState.getAllActiveQueryTargets(),u=yield S4(t,s.toArray());t.ac=!0,yield Zc(t.remoteStore,!0);for(const m of u)F0(t.remoteStore,m)}else if(!1===e&&!1!==t.ac){const s=[];let u=Promise.resolve();t.ec.forEach((m,_)=>{t.sharedClientState.isLocalQueryTarget(_)?s.push(_):u=u.then(()=>(ha(t,_),I4(t.localStore,_,!0))),A4(t.remoteStore,_)}),yield u,yield S4(t,s),function(m){const _=N(m);_.ic.forEach((S,j)=>{A4(_.remoteStore,j)}),_.rc.cs(),_.ic=new Map,_.sc=new qr(en.comparator)}(t),t.ac=!1,yield Zc(t.remoteStore,!1)}}),Jc.apply(this,arguments)}function S4(i,e,t){return Xc.apply(this,arguments)}function Xc(){return Xc=(0,Oe.Z)(function*(i,e,t){const s=N(i),u=[],m=[];for(const _ of e){let S;const j=s.ec.get(_);if(j&&0!==j.length){S=yield E4(s.localStore,es(j[0]));for(const q of j){const ce=s.tc.get(q),Te=yield X0(s,ce);Te.snapshot&&m.push(Te.snapshot)}}else{const q=yield e8(s.localStore,_);S=yield E4(s.localStore,q),yield wo(s,T4(q),_,!1)}u.push(S)}return s.Zu.Go(m),u}),Xc.apply(this,arguments)}function T4(i){return Mc(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function c6(i){const e=N(i);return N(N(e.localStore).persistence).Ri()}function T8(i,e,t,s){return e3.apply(this,arguments)}function e3(){return e3=(0,Oe.Z)(function*(i,e,t,s){const u=N(i);if(u.ac)return void Pt("SyncEngine","Ignoring unexpected query state notification.");const m=u.ec.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const _=yield io(u.localStore,h4(m[0])),S=Es.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield fa(u,_,S);break}case"rejected":yield I4(u.localStore,e,!0),ha(u,e,s);break;default:A()}}),e3.apply(this,arguments)}function N8(i,e,t){return t3.apply(this,arguments)}function t3(){return t3=(0,Oe.Z)(function*(i,e,t){const s=n3(i);if(s.ac){for(const u of e){if(s.ec.has(u)){Pt("SyncEngine","Adding an already active target "+u);continue}const m=yield e8(s.localStore,u),_=yield E4(s.localStore,m);yield wo(s,T4(m),_.targetId,!1),F0(s.remoteStore,_)}for(const u of t)s.ec.has(u)&&(yield I4(s.localStore,u,!1).then(()=>{A4(s.remoteStore,u),ha(s,u)}).catch(zs))}}),t3.apply(this,arguments)}function n3(i){const e=N(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J3.bind(null,e),e.Zu.Go=Yu.bind(null,e.eventManager),e.Zu.lc=Qu.bind(null,e.eventManager),e}function r3(i){const e=N(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=el.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=n5.bind(null,e),e}class al{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Oe.Z)(function*(){t.wt=F6(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return N0(this.persistence,new P3,e.initialUser,this.wt)}_c(e){return new Cn(pr.Ms,this.wt)}dc(e){return new R3}terminate(){var e=this;return(0,Oe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class cl extends al{constructor(e,t,s){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Oe.Z)(function*(){yield t().call(s,e),yield s.yc.initialize(s,e),yield r3(s.yc.syncEngine),yield X4(s.yc.remoteStore),yield s.persistence.ci(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return N0(this.persistence,new P3,e.initialUser,this.wt)}mc(e,t){return new V6(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const s=new m2(t,this.persistence);return new o4(e.asyncQueue,s)}_c(e){const t=Wc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?B2.withCacheSize(this.cacheSizeBytes):B2.DEFAULT;return new Ho(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,ua(),Q4(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new R3}}class s5 extends cl{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Oe.Z)(function*(){yield t().call(s,e);const u=s.yc.syncEngine;s.sharedClientState instanceof V3&&(s.sharedClientState.syncEngine={kr:o6.bind(null,u),Or:T8.bind(null,u),Mr:N8.bind(null,u),Ri:c6.bind(null,u),Nr:ol.bind(null,u)},yield s.sharedClientState.start()),yield s.persistence.ci(function(){var m=(0,Oe.Z)(function*(_){yield function a6(i,e){return Jc.apply(this,arguments)}(s.yc.syncEngine,_),s.gcScheduler&&(_&&!s.gcScheduler.started?s.gcScheduler.start():_||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(_&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():_||s.indexBackfillerScheduler.stop())});return function(_){return m.apply(this,arguments)}}())})()}dc(e){const t=ua();if(!V3.V(t))throw new W(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Wc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new V3(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class i3{initialize(e,t){var s=this;return(0,Oe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=u=>Q3(s.syncEngine,u,1),s.remoteStore.remoteSyncer.handleCredentialChange=W6.bind(null,s.syncEngine),yield Zc(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new W3}createDatastore(e){const t=F6(e.databaseInfo.databaseId),s=new Bu(e.databaseInfo);return new $u(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,u=e.asyncQueue,m=S=>Q3(this.syncEngine,S,0),_=i8.V()?new i8:new Uu,new H3(t,s,u,m,_);var t,s,u,m,_}createSyncEngine(e,t){return function(s,u,m,_,S,j,q){const ce=new b8(s,u,m,_,S,j);return q&&(ce.ac=!0),ce}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Oe.Z)(function*(t){const s=N(t);Pt("RemoteStore","RemoteStore shutting down."),s.lu.add(5),yield fc(s),s.du.shutdown(),s._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function L8(i,e=10240){let t=0;return{read:()=>(0,Oe.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Oe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Z6{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class P8{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new he,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(s=>{s&&s.Cu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Oe.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Oe.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.bc();if(null===t)return null;const s=e.Ac.decode(t),u=Number(s);isNaN(u)&&e.Pc(`length string (${s}) is not valid number`);const m=yield e.vc(u);return new _8(JSON.parse(m),t.length+u)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Oe.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,Oe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const s=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Oe.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class o5{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Oe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new W(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(u=(0,Oe.Z)(function*(m,_){const S=N(m),j=g(S.wt)+"/documents",q={documents:_.map(At=>Pa(S.wt,At))},ce=yield S.ao("BatchGetDocuments",j,q),Te=new Map;ce.forEach(At=>{const Rt=function Fe(i,e){return"found"in e?function(t,s){E(!!s.found);const u=D2(t,s.found.name),m=Ri(s.found.updateTime),_=new E2({mapValue:{fields:s.found.fields}});return dr.newFoundDocument(u,m,_)}(i,e):"missing"in e?function(t,s){E(!!s.missing),E(!!s.readTime);const u=D2(t,s.missing),m=Ri(s.readTime);return dr.newNoDocument(u,m)}(i,e):A()}(S.wt,At);Te.set(Rt.key.toString(),Rt)});const ct=[];return _.forEach(At=>{const Rt=Te.get(At.toString());E(!!Rt),ct.push(Rt)}),ct}),function(m,_){return u.apply(this,arguments)})(t.datastore,e);var u;return s.forEach(u=>t.recordVersion(u)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new ia(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Oe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,u)=>{const m=en.fromPath(u);e.mutations.push(new Sa(m,e.precondition(m)))}),yield(s=(0,Oe.Z)(function*(u,m){const _=N(u),S=g(_.wt)+"/documents",j={writes:m.map(q=>Ht(_.wt,q))};yield _.ro("Commit",S,j)}),function(u,m){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw A();t=An.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new W(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Xr.updateTime(t):Xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(An.min()))throw new W(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xr.updateTime(t)}return Xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class a5{constructor(e,t,s,u,m){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=u,this.deferred=m,this.Dc=s.maxAttempts,this.So=new k3(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Oe.Z)(function*(){const t=new o5(e.datastore),s=e.xc(t);s&&s.then(u=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(u)}).catch(m=>{e.Nc(m)}))}).catch(u=>{e.Nc(u)})}))}xc(e){try{const t=this.updateFunction(e);return!St(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Na(t)}return!1}}class O8{constructor(e,t,s,u){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=u,this.user=Hr.UNAUTHENTICATED,this.clientId=ys.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var _=(0,Oe.Z)(function*(S){Pt("FirestoreClient","Received user=",S.uid),yield m.authCredentialListener(S),m.user=S});return function(S){return _.apply(this,arguments)}}()),this.appCheckCredentials.start(s,_=>(Pt("FirestoreClient","Received new app check token=",_),this.appCheckCredentialListener(_,this.user)))}getConfiguration(){var e=this;return(0,Oe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new he;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const u=n6(s,"Failed to shutdown persistence");t.reject(u)}})),t.promise}}function V8(i,e){return s3.apply(this,arguments)}function s3(){return s3=(0,Oe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),Pt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var u=(0,Oe.Z)(function*(m){s.isEqual(m)||(yield z0(e.localStore,m),s=m)});return function(m){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),s3.apply(this,arguments)}function R8(i,e){return ll.apply(this,arguments)}function ll(){return ll=(0,Oe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield k8(i);Pt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(u=>v8(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,m)=>v8(e.remoteStore,m)),i.onlineComponents=e}),ll.apply(this,arguments)}function k8(i){return ul.apply(this,arguments)}function ul(){return ul=(0,Oe.Z)(function*(i){return i.offlineComponents||(Pt("FirestoreClient","Using default OfflineComponentProvider"),yield V8(i,new al)),i.offlineComponents}),ul.apply(this,arguments)}function l6(i){return q6.apply(this,arguments)}function q6(){return q6=(0,Oe.Z)(function*(i){return i.onlineComponents||(Pt("FirestoreClient","Using default OnlineComponentProvider"),yield R8(i,new i3)),i.onlineComponents}),q6.apply(this,arguments)}function H8(i){return k8(i).then(e=>e.persistence)}function F8(i){return k8(i).then(e=>e.localStore)}function c5(i){return l6(i).then(e=>e.remoteStore)}function U8(i){return l6(i).then(e=>e.syncEngine)}function u6(i){return o3.apply(this,arguments)}function o3(){return o3=(0,Oe.Z)(function*(i){const e=yield l6(i),t=e.eventManager;return t.onListen=E8.bind(null,e.syncEngine),t.onUnlisten=K5.bind(null,e.syncEngine),t}),o3.apply(this,arguments)}function B8(i,e,t={}){const s=new he;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(u,m,_,S,j){const q=new Z6({next:Te=>{m.enqueueAndForget(()=>K0(u,ce));const ct=Te.docs.has(_);!ct&&Te.fromCache?j.reject(new W(z.UNAVAILABLE,"Failed to get document because the client is offline.")):ct&&Te.fromCache&&S&&"server"===S.source?j.reject(new W(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(Te)},error:Te=>j.reject(Te)}),ce=new q3(ea(_.path),q,{includeMetadataChanges:!0,Du:!0});return $6(u,ce)}(yield u6(i),i.asyncQueue,e,t,s)})),s.promise}function G8(i,e,t={}){const s=new he;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function(u,m,_,S,j){const q=new Z6({next:Te=>{m.enqueueAndForget(()=>K0(u,ce)),Te.fromCache&&"server"===S.source?j.reject(new W(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(Te)},error:Te=>j.reject(Te)}),ce=new q3(_,q,{includeMetadataChanges:!0,Du:!0});return $6(u,ce)}(yield u6(i),i.asyncQueue,e,t,s)})),s.promise}const Z8=new Map;function hl(i,e,t){if(!t)throw new W(z.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function q8(i,e,t,s){if(!0===e&&!0===s)throw new W(z.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function K8(i){if(!en.isDocumentKey(i))throw new W(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Y8(i){if(en.isDocumentKey(i))throw new W(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function K6(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":A()}function mr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new W(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=K6(i);throw new W(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function fl(i,e){if(e<=0)throw new W(z.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class dl{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new W(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new W(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,q8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class N4{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dl({}),this._settingsFrozen=!1,e instanceof Qe?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new W(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qe(u.options.projectId)}(e))}get app(){if(!this._app)throw new W(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new W(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dl(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new mt;switch(t.type){case"gapi":const s=t.client;return E(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new P1(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new W(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Z8.get(e);t&&(Pt("ComponentProvider","Removing Datastore"),Z8.delete(e),t.terminate())}(this),Promise.resolve()}}class di{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new di(this.firestore,e,this._key)}}class Ds{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ds(this.firestore,e,this._query)}}class dc extends Ds{constructor(e,t,s){super(e,t,ea(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new di(this.firestore,null,new en(e))}withConverter(e){return new dc(this.firestore,e,this._path)}}function f6(i,e,...t){if(i=(0,qe.m9)(i),hl("collection","path",e),i instanceof N4){const s=w1.fromString(e,...t);return Y8(s),new dc(i,null,s)}{if(!(i instanceof di||i instanceof dc))throw new W(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(w1.fromString(e,...t));return Y8(s),new dc(i.firestore,null,s)}}function d6(i,e,...t){if(i=(0,qe.m9)(i),1===arguments.length&&(e=ys.I()),hl("doc","path",e),i instanceof N4){const s=w1.fromString(e,...t);return K8(s),new di(i,null,new en(s))}{if(!(i instanceof di||i instanceof dc))throw new W(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(w1.fromString(e,...t));return K8(s),new di(i.firestore,i instanceof dc?i.converter:null,new en(s))}}function c3(i,e){return i=(0,qe.m9)(i),e=(0,qe.m9)(e),(i instanceof di||i instanceof dc)&&(e instanceof di||e instanceof dc)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function J8(i,e){return i=(0,qe.m9)(i),e=(0,qe.m9)(e),i instanceof Ds&&e instanceof Ds&&i.firestore===e.firestore&&No(i._query,e._query)&&i.converter===e.converter}class l3{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new k3(this,"async_queue_retry"),this.Kc=()=>{const t=Q4();t&&Pt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Q4();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Q4();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new he;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Oe.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!p2(t))throw t;Pt("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(s=>{throw this.Bc=s,this.Lc=!1,Y1("INTERNAL UNHANDLED ERROR: ",function(m){let _=m.message||"";return m.stack&&(_=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),_}(s)),s}).then(s=>(this.Lc=!1,s))));return this.Oc=t,t}enqueueAfterDelay(e,t,s){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const u=Kc.createAndSchedule(this,e,t,s,m=>this.Wc(m));return this.$c.push(u),u}Gc(){this.Bc&&A()}verifyOperationInProgress(){}zc(){var e=this;return(0,Oe.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function p6(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(i)}class pl{constructor(){this._progressObserver={},this._taskCompletionResolver=new he,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ki extends N4{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new l3,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ml(this),this._firestoreClient.terminate()}}function _2(i){return i._firestoreClient||ml(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function ml(i){var e;const t=i._freezeSettings(),s=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Ge(i._databaseId,m,i._persistenceKey,(S=t).host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,S.useFetchStreams));var m,S;i._firestoreClient=new O8(i._authCredentials,i._appCheckCredentials,i._queue,s)}function vl(i,e,t){const s=new he;return i.asyncQueue.enqueue((0,Oe.Z)(function*(){try{yield V8(i,t),yield R8(i,e),s.resolve()}catch(u){if(!("FirebaseError"===(m=u).name?m.code===z.FAILED_PRECONDITION||m.code===z.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),s.reject(u)}var m})).then(()=>s.promise)}function su(i){if(i._initialized||i._terminated)throw new W(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ha{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new W(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new a1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class da{constructor(e){this._byteString=e}static fromBase64String(e){try{return new da(Ni.fromBase64String(e))}catch(t){throw new W(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new da(Ni.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pc{constructor(e){this._methodName=e}}class Y6{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dn(this._lat,e._lat)||Dn(this._long,e._long)}}const ou=/^__.*__$/;class au{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new xa(e,this.data,t,this.fieldTransforms)}}class Cl{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function wl(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw A()}}class Q6{constructor(e,t,s,u,m,_){this.settings=e,this.databaseId=t,this.wt=s,this.ignoreUndefinedProperties=u,void 0===m&&this.Xc(),this.fieldTransforms=m||[],this.fieldMask=_||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Q6(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ta({path:s,na:!1});return u.sa(e),u}ia(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),u=this.ta({path:s,na:!1});return u.Xc(),u}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return h3(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(wl(this.Zc)&&ou.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class cu{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=s||F6(e)}aa(e,t,s,u=!1){return new Q6({Zc:e,methodName:t,ca:s,path:a1.emptyPath(),na:!1,ua:u},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function e4(i){const e=i._freezeSettings(),t=F6(i._databaseId);return new cu(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Ml(i,e,t,s,u,m={}){const _=i.aa(m.merge||m.mergeFields?2:0,e,t,u);t4("Data must be an object, but it was:",_,s);const S=Al(s,_);let j,q;if(m.merge)j=new Ti(_.fieldMask),q=_.fieldTransforms;else if(m.mergeFields){const ce=[];for(const Te of m.mergeFields){const ct=Dl(e,Te,t);if(!_.contains(ct))throw new W(z.INVALID_ARGUMENT,`Field '${ct}' is specified in your field mask but missing from your input data.`);Sl(ce,ct)||ce.push(ct)}j=new Ti(ce),q=_.fieldTransforms.filter(Te=>j.covers(Te.field))}else j=null,q=_.fieldTransforms;return new au(new E2(S),j,q)}class J6 extends pc{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof J6}}function lu(i,e,t){return new Q6({Zc:3,ca:e.settings.ca,methodName:i._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class u3 extends pc{_toFieldTransform(e){return new na(e.path,new Ps)}isEqual(e){return e instanceof u3}}class p5 extends pc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=lu(this,e,!0),s=this.ha.map(m=>z4(m,t)),u=new Ys(s);return new na(e.path,u)}isEqual(e){return this===e}}class j2 extends pc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=lu(this,e,!0),s=this.ha.map(m=>z4(m,t)),u=new Qs(s);return new na(e.path,u)}isEqual(e){return this===e}}class uu extends pc{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Os(e.wt,Ka(e.wt,this.la));return new na(e.path,t)}isEqual(e){return this===e}}function bl(i,e,t,s){const u=i.aa(1,e,t);t4("Data must be an object, but it was:",u,s);const m=[],_=E2.empty();Do(s,(j,q)=>{const ce=X6(e,j,t);q=(0,qe.m9)(q);const Te=u.ia(ce);if(q instanceof J6)m.push(ce);else{const ct=z4(q,Te);null!=ct&&(m.push(ce),_.set(ce,ct))}});const S=new Ti(m);return new Cl(_,S,u.fieldTransforms)}function El(i,e,t,s,u,m){const _=i.aa(1,e,t),S=[Dl(e,s,t)],j=[u];if(m.length%2!=0)throw new W(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ct=0;ct<m.length;ct+=2)S.push(Dl(e,m[ct])),j.push(m[ct+1]);const q=[],ce=E2.empty();for(let ct=S.length-1;ct>=0;--ct)if(!Sl(q,S[ct])){const At=S[ct];let Rt=j[ct];Rt=(0,qe.m9)(Rt);const wn=_.ia(At);if(Rt instanceof J6)q.push(At);else{const Un=z4(Rt,wn);null!=Un&&(q.push(At),ce.set(At,Un))}}const Te=new Ti(q);return new Cl(ce,Te,_.fieldTransforms)}function Il(i,e,t,s=!1){return z4(t,i.aa(s?4:3,e))}function z4(i,e){if(xl(i=(0,qe.m9)(i)))return t4("Unsupported field value:",e,i),Al(i,e);if(i instanceof pc)return function(t,s){if(!wl(s.Zc))throw s.oa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.oa(`${t._methodName}() is not currently supported inside arrays`);const u=t._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,s){const u=[];let m=0;for(const _ of t){let S=z4(_,s.ra(m));null==S&&(S={nullValue:"NULL_VALUE"}),u.push(S),m++}return{arrayValue:{values:u}}}(i,e)}return function(t,s){if(null===(t=(0,qe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ka(s.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const u=Mr.fromDate(t);return{timestampValue:La(s.wt,u)}}if(t instanceof Mr){const u=new Mr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:La(s.wt,u)}}if(t instanceof Y6)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof da)return{bytesValue:p4(s.wt,t._byteString)};if(t instanceof di){const u=s.databaseId,m=t.firestore._databaseId;if(!m.isEqual(u))throw s.oa(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Tc(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.oa(`Unsupported field value: ${K6(t)}`)}(i,e)}function Al(i,e){const t={};return _s(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(i,(s,u)=>{const m=z4(u,e.ea(s));null!=m&&(t[s]=m)}),{mapValue:{fields:t}}}function xl(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Mr||i instanceof Y6||i instanceof da||i instanceof di||i instanceof pc)}function t4(i,e,t){if(!xl(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=K6(t);throw e.oa("an object"===s?i+" a custom object":i+" "+s)}var s}function Dl(i,e,t){if((e=(0,qe.m9)(e))instanceof Ha)return e._internalPath;if("string"==typeof e)return X6(i,e);throw h3("Field path arguments must be of type string or ",i,!1,void 0,t)}const m5=new RegExp("[~\\*/\\[\\]]");function X6(i,e,t){if(e.search(m5)>=0)throw h3(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ha(...e.split("."))._internalPath}catch(s){throw h3(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function h3(i,e,t,s,u){const m=s&&!s.isEmpty(),_=void 0!==u;let S=`Function ${e}() called with invalid data`;t&&(S+=" (via `toFirestore()`)"),S+=". ";let j="";return(m||_)&&(j+=" (found",m&&(j+=` in field ${s}`),_&&(j+=` in document ${u}`),j+=")"),new W(z.INVALID_ARGUMENT,S+i+j)}function Sl(i,e){return i.some(t=>t.isEqual(e))}class f3{constructor(e,t,s,u,m){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=u,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new di(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new hu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(m6("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class hu extends f3{data(){return super.data()}}function m6(i,e){return"string"==typeof e?X6(i,e):e instanceof Ha?e._internalPath:e._delegate._internalPath}class Ss{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mc extends f3{constructor(e,t,s,u,m,_){super(e,t,s,u,_),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new e0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(m6("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class e0 extends mc{data(e={}){return super.data(e)}}class ds{constructor(e,t,s,u){this._firestore=e,this._userDataWriter=t,this._snapshot=u,this.metadata=new Ss(u.hasPendingWrites,u.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new e0(this._firestore,this._userDataWriter,s.key,s,new Ss(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let m=0;return s._snapshot.docChanges.map(_=>({type:"added",doc:new e0(s._firestore,s._userDataWriter,_.doc.key,_.doc,new Ss(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:m++}))}{let m=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(_=>u||3!==_.type).map(_=>{const S=new e0(s._firestore,s._userDataWriter,_.doc.key,_.doc,new Ss(s._snapshot.mutatedKeys.has(_.doc.key),s._snapshot.fromCache),s.query.converter);let j=-1,q=-1;return 0!==_.type&&(j=m.indexOf(_.doc.key),m=m.delete(_.doc.key)),1!==_.type&&(m=m.add(_.doc),q=m.indexOf(_.doc.key)),{type:pa(_.type),doc:S,oldIndex:j,newIndex:q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pa(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A()}}function jo(i,e){return i instanceof mc&&e instanceof mc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ds&&e instanceof ds&&i._firestore===e._firestore&&J8(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Tl(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new W(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g6{}function n4(i,...e){for(const t of e)i=t._apply(i);return i}class g5 extends g6{constructor(e,t,s){super(),this.fa=e,this.da=t,this._a=s,this.type="where"}_apply(e){const t=e4(e.firestore),s=function(u,m,_,S,j,q,ce){let Te;if(j.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new W(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){n0(ce,q);const At=[];for(const Rt of ce)At.push(d3(S,u,Rt));Te={arrayValue:{values:At}}}else Te=d3(S,u,ce)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||n0(ce,q),Te=Il(_,"where",ce,"in"===q||"not-in"===q);const ct=zi.create(j,q,Te);return function(At,Rt){if(Rt.ht()){const Un=u4(At);if(null!==Un&&!Un.isEqual(Rt.field))throw new W(z.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Un.toString()}' and '${Rt.field.toString()}'`);const jr=Za(At);null!==jr&&p3(0,Rt.field,jr)}const wn=function(Un,jr){for(const $i of Un.filters)if(jr.indexOf($i.op)>=0)return $i.op;return null}(At,function(Un){switch(Un){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Rt.op));if(null!==wn)throw new W(z.INVALID_ARGUMENT,wn===Rt.op?`Invalid query. You cannot use more than one '${Rt.op.toString()}' filter.`:`Invalid query. You cannot use '${Rt.op.toString()}' filters with '${wn.toString()}' filters.`)}(u,ct),ct}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Ds(e.firestore,e.converter,function(u,m){const _=u.filters.concat([m]);return new X2(u.path,u.collectionGroup,u.explicitOrderBy.slice(),_,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,s))}}class y5 extends g6{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(s,u,m){if(null!==s.startAt)throw new W(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new W(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const _=new Ks(u,m);return function(S,j){if(null===Za(S)){const q=u4(S);null!==q&&p3(0,q,j.field)}}(s,_),_}(e._query,this.fa,this.wa);return new Ds(e.firestore,e.converter,function(s,u){const m=s.explicitOrderBy.concat([u]);return new X2(s.path,s.collectionGroup,m,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class v6 extends g6{constructor(e,t,s){super(),this.type=e,this.ma=t,this.ga=s}_apply(e){return new Ds(e.firestore,e.converter,bc(e._query,this.ma,this.ga))}}class du extends g6{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=zl(e,this.type,this.ya,this.pa);return new Ds(e.firestore,e.converter,(u=t,new X2((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,u,s.endAt)));var s,u}}class t0 extends g6{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=zl(e,this.type,this.ya,this.pa);return new Ds(e.firestore,e.converter,(u=t,new X2((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,u)));var s,u}}function zl(i,e,t,s){if(t[0]=(0,qe.m9)(t[0]),t[0]instanceof f3)return function(u,m,_,S,j){if(!S)throw new W(z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${_}().`);const q=[];for(const ce of vo(u))if(ce.field.isKeyField())q.push(R2(m,S.key));else{const Te=S.data.field(ce.field);if(F(Te))throw new W(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ce.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Te){const ct=ce.field.canonicalString();throw new W(z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ct}' (used as the orderBy) does not exist.`)}q.push(Te)}return new To(q,j)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const u=e4(i.firestore);return function(m,_,S,j,q,ce){const Te=m.explicitOrderBy;if(q.length>Te.length)throw new W(z.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ct=[];for(let At=0;At<q.length;At++){const Rt=q[At];if(Te[At].field.isKeyField()){if("string"!=typeof Rt)throw new W(z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof Rt}`);if(!Ea(m)&&-1!==Rt.indexOf("/"))throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${Rt}' contains a slash.`);const wn=m.path.child(w1.fromString(Rt));if(!en.isDocumentKey(wn))throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${wn}' is not because it contains an odd number of segments.`);const Un=new en(wn);ct.push(R2(_,Un))}else{const wn=Il(S,j,Rt);ct.push(wn)}}return new To(ct,ce)}(i._query,i.firestore._databaseId,u,e,t,s)}}function d3(i,e,t){if("string"==typeof(t=(0,qe.m9)(t))){if(""===t)throw new W(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ea(e)&&-1!==t.indexOf("/"))throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(w1.fromString(t));if(!en.isDocumentKey(s))throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return R2(i,new en(s))}if(t instanceof di)return R2(i,t._key);throw new W(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${K6(t)}.`)}function n0(i,e){if(!Array.isArray(i)||0===i.length)throw new W(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new W(z.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function p3(i,e,t){if(!t.isEqual(e))throw new W(z.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const vu={maxAttempts:5};class r0{convertValue(e,t="none"){switch(Tn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(O(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw A()}}convertObject(e,t){const s={};return Do(e.fields,(u,m)=>{s[u]=this.convertValue(m,t)}),s}convertGeoPoint(e){return new Y6(zr(e.latitude),zr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=X(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ge(e));default:return null}}convertTimestamp(e){const t=V2(e);return new Mr(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=w1.fromString(e);E(Pc(s));const u=new Qe(s.get(1),s.get(3)),m=new en(s.popFirst(5));return u.isEqual(t)||Y1(`Document ${m} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function s0(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class yu extends r0{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new di(this.firestore,null,t)}}class Ll{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=e4(e)}set(e,t,s){this._verifyNotCommitted();const u=gc(e,this._firestore),m=s0(u.converter,t,s),_=Ml(this._dataReader,"WriteBatch.set",u._key,m,null!==u.converter,s);return this._mutations.push(_.toMutation(u._key,Xr.none())),this}update(e,t,s,...u){this._verifyNotCommitted();const m=gc(e,this._firestore);let _;return _="string"==typeof(t=(0,qe.m9)(t))||t instanceof Ha?El(this._dataReader,"WriteBatch.update",m._key,t,s,u):bl(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(_.toMutation(m._key,Xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=gc(e,this._firestore);return this._mutations=this._mutations.concat(new ia(t._key,Xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gc(i,e){if((i=(0,qe.m9)(i)).firestore!==e)throw new W(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class L4 extends r0{constructor(e){super(),this.firestore=e}convertBytes(e){return new da(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new di(this.firestore,null,t)}}function Cu(i,e,t){i=mr(i,di);const s=mr(i.firestore,ki),u=s0(i.converter,e,t);return y6(s,[Ml(e4(s),"setDoc",i._key,u,null!==i.converter,t).toMutation(i._key,Xr.none())])}function wu(i,e,t,...s){i=mr(i,di);const u=mr(i.firestore,ki),m=e4(u);let _;return _="string"==typeof(e=(0,qe.m9)(e))||e instanceof Ha?El(m,"updateDoc",i._key,e,t,s):bl(m,"updateDoc",i._key,e),y6(u,[_.toMutation(i._key,Xr.exists(!0))])}function Mu(i,...e){var t,s,u;i=(0,qe.m9)(i);let m={includeMetadataChanges:!1},_=0;"object"!=typeof e[_]||p6(e[_])||(m=e[_],_++);const S={includeMetadataChanges:m.includeMetadataChanges};if(p6(e[_])){const Te=e[_];e[_]=null===(t=Te.next)||void 0===t?void 0:t.bind(Te),e[_+1]=null===(s=Te.error)||void 0===s?void 0:s.bind(Te),e[_+2]=null===(u=Te.complete)||void 0===u?void 0:u.bind(Te)}let j,q,ce;if(i instanceof di)q=mr(i.firestore,ki),ce=ea(i._key.path),j={next:Te=>{e[_]&&e[_](Pl(q,i,Te))},error:e[_+1],complete:e[_+2]};else{const Te=mr(i,Ds);q=mr(Te.firestore,ki),ce=Te._query;const ct=new L4(q);j={next:At=>{e[_]&&e[_](new ds(q,ct,Te,At))},error:e[_+1],complete:e[_+2]},Tl(i._query)}return function(Te,ct,At,Rt){const wn=new Z6(Rt),Un=new q3(ct,wn,At);return Te.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return $6(yield u6(Te),Un)})),()=>{wn.Tc(),Te.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return K0(yield u6(Te),Un)}))}}(_2(q),ce,S,j)}function y6(i,e){return function(t,s){const u=new he;return t.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function x8(i,e,t){return J0.apply(this,arguments)}(yield U8(t),s,u)})),u.promise}(_2(i),e)}function Pl(i,e,t){const s=t.docs.get(e._key),u=new L4(i);return new mc(i,u,e._key,s,new Ss(t.hasPendingWrites,t.fromCache),e.converter)}class S5 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=e4(e)}get(e){const t=gc(e,this._firestore),s=new yu(this._firestore);return this._transaction.lookup([t._key]).then(u=>{if(!u||1!==u.length)return A();const m=u[0];if(m.isFoundDocument())return new f3(this._firestore,s,m.key,m,t.converter);if(m.isNoDocument())return new f3(this._firestore,s,t._key,null,t.converter);throw A()})}set(e,t,s){const u=gc(e,this._firestore),m=s0(u.converter,t,s),_=Ml(this._dataReader,"Transaction.set",u._key,m,null!==u.converter,s);return this._transaction.set(u._key,_),this}update(e,t,s,...u){const m=gc(e,this._firestore);let _;return _="string"==typeof(t=(0,qe.m9)(t))||t instanceof Ha?El(this._dataReader,"Transaction.update",m._key,t,s,u):bl(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,_),this}delete(e){const t=gc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=gc(e,this._firestore),s=new L4(this._firestore);return super.get(e).then(u=>new mc(this._firestore,s,t._key,u._document,new Ss(!1,!1),t.converter))}}function m3(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new W("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function g3(){if("undefined"==typeof Uint8Array)throw new W("unimplemented","Uint8Arrays are not available in this environment.")}function Vl(){if(!function Ko(){return"undefined"!=typeof atob}())throw new W("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){Ns=kt.SDK_VERSION,(0,kt._registerComponent)(new ft.wA("firestore",(t,{options:s})=>{const u=t.getProvider("app").getImmediate(),m=new ki(u,new Qn(t.getProvider("auth-internal")),new o1(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),m._setSettings(s),m},"PUBLIC")),(0,kt.registerVersion)(gs,"3.4.10",i),(0,kt.registerVersion)(gs,"3.4.10","esm2017")}();class ma{constructor(e){this._delegate=e}static fromBase64String(e){return Vl(),new ma(da.fromBase64String(e))}static fromUint8Array(e){return g3(),new ma(da.fromUint8Array(e))}toBase64(){return Vl(),this._delegate.toBase64()}toUint8Array(){return g3(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Rl(i){return function O5(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class _6{enableIndexedDbPersistence(e,t){return function gl(i,e){su(i=mr(i,ki));const t=_2(i),s=i._freezeSettings(),u=new i3;return vl(t,u,new cl(u,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function tu(i){su(i=mr(i,ki));const e=_2(i),t=i._freezeSettings(),s=new i3;return vl(e,s,new s5(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yl(i){if(i._initialized&&!i._terminated)throw new W(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new he;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Oe.Z)(function*(){try{yield(t=(0,Oe.Z)(function*(s){if(!Xi.V())return Promise.resolve();const u=s+"main";yield Xi.delete(u)}),function(s){return t.apply(this,arguments)})(Wc(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class V5{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qe||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Q5(i,e,t,s={}){var u;const m=(i=mr(i,N4))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&Qi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let _,S;if("string"==typeof s.mockUserToken)_=s.mockUserToken,S=Hr.MOCK_USER;else{_=(0,qe.Sg)(s.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const j=s.mockUserToken.sub||s.mockUserToken.user_id;if(!j)throw new W(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Hr(j)}i._authCredentials=new rn(new Se(_,S))}}(this._delegate,e,t,s)}enableNetwork(){return function h5(i){return function Y5(i){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield H8(i),t=yield c5(i);return e.setNetworkEnabled(!0),function(s){const u=N(s);return u.lu.delete(0),U6(u)}(t)}))}(_2(i=mr(i,ki)))}(this._delegate)}disableNetwork(){return function ru(i){return function l5(i){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){const e=yield H8(i),t=yield c5(i);return e.setNetworkEnabled(!1),(s=(0,Oe.Z)(function*(u){const m=N(u);m.lu.add(0),yield fc(m),m._u.set("Offline")}),function(u){return s.apply(this,arguments)})(t);var s}))}(_2(i=mr(i,ki)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,q8("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function nu(i){return function(e){const t=new he;return e.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return function r5(i,e){return rl.apply(this,arguments)}(yield U8(e),t)})),t.promise}(_2(i=mr(i,ki)))}(this._delegate)}onSnapshotsInSync(e){return function D5(i,e){return function $8(i,e){const t=new Z6(e);return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return s=yield u6(i),u=t,N(s).Tu.add(u),void u.next();var s,u})),()=>{t.Tc(),i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return s=yield u6(i),u=t,void N(s).Tu.delete(u);var s,u}))}}(_2(i=mr(i,ki)),p6(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new W("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new a0(this,f6(this._delegate,e))}catch(t){throw Fs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Sn(this,d6(this._delegate,e))}catch(t){throw Fs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ss(this,function Q8(i,e){if(i=mr(i,N4),hl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new W(z.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ds(i,null,(t=e,new X2(w1.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Fs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function T5(i,e,t){i=mr(i,ki);const s=Object.assign(Object.assign({},vu),t);return function(u){if(u.maxAttempts<1)throw new W(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function a3(i,e,t){const s=new he;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){const u=yield(m=i,l6(m).then(_=>_.datastore));var m;new a5(i.asyncQueue,u,t,e,s).run()})),s.promise}(_2(i),u=>e(new S5(i,u)),s)}(this._delegate,t=>e(new kl(this,t)))}batch(){return _2(this._delegate),new Hl(new Ll(this._delegate,e=>y6(this._delegate,e)))}loadBundle(e){return function _l(i,e){const t=_2(i=mr(i,ki)),s=new pl;return function u5(i,e,t,s){const u=function(m,_){let S;return S="string"==typeof m?(new TextEncoder).encode(m):m,j=function(j,q){if(j instanceof Uint8Array)return L8(j,q);if(j instanceof ArrayBuffer)return L8(new Uint8Array(j),q);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(S),new P8(j,_);var j}(t,F6(e));i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){!function z8(i,e,t){const s=N(i);var u;(u=(0,Oe.Z)(function*(m,_,S){try{const j=yield _.getMetadata();if(yield function(ct,At){const Rt=N(ct),wn=Ri(At.createTime);return Rt.persistence.runTransaction("hasNewerBundle","readonly",Un=>Rt.Ds.getBundleMetadata(Un,At.id)).then(Un=>!!Un&&Un.createTime.compareTo(wn)>=0)}(m.localStore,j))return yield _.close(),S._completeWith({taskState:"Success",documentsLoaded:(ct=j).totalDocuments,bytesLoaded:ct.totalBytes,totalDocuments:ct.totalDocuments,totalBytes:ct.totalBytes}),Promise.resolve(new Set);S._updateProgress(w8(j));const q=new C8(j,m.localStore,_.wt);let ce=yield _.fc();for(;ce;){const ct=yield q.Nu(ce);ct&&S._updateProgress(ct),ce=yield _.fc()}const Te=yield q.complete();return yield fa(m,Te.Mu,void 0),yield function(ct,At){const Rt=N(ct);return Rt.persistence.runTransaction("Save bundle","readwrite",wn=>Rt.Ds.saveBundleMetadata(wn,At))}(m.localStore,j),S._completeWith(Te.progress),Promise.resolve(Te.Ou)}catch(j){return Qi("SyncEngine",`Loading bundle failed with ${j}`),S._failWith(j),Promise.resolve(new Set)}var ct}),function(m,_,S){return u.apply(this,arguments)})(s,e,t).then(u=>{s.sharedClientState.notifyBundleLoaded(u)})}(yield U8(i),u,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function iu(i,e){return function W8(i,e){return i.asyncQueue.enqueue((0,Oe.Z)(function*(){return function(t,s){const u=N(t);return u.persistence.runTransaction("Get named query","readonly",m=>u.Ds.getNamedQuery(m,s))}(yield F8(i),e)}))}(_2(i=mr(i,ki)),e).then(t=>t?new Ds(i,null,t.query):null)}(this._delegate,e).then(t=>t?new ss(this,t):null)}}class C6 extends r0{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(new da(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Sn.forKey(t,this.firestore,null)}}class kl{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new C6(e)}get(e){const t=i4(e);return this._delegate.get(t).then(s=>new r4(this._firestore,new mc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const u=i4(e);return s?(m3("Transaction.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=i4(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=i4(e);return this._delegate.delete(t),this}}class Hl{constructor(e){this._delegate=e}set(e,t,s){const u=i4(e);return s?(m3("WriteBatch.set",s),this._delegate.set(u,t,s)):this._delegate.set(u,t),this}update(e,t,s,...u){const m=i4(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,s,...u),this}delete(e){const t=i4(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class w6{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new e0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new o0(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=w6.INSTANCES;let u=s.get(e);u||(u=new WeakMap,s.set(e,u));let m=u.get(t);return m||(m=new w6(e,new C6(e),t),u.set(t,m)),m}}w6.INSTANCES=new WeakMap;class Sn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new C6(e)}static forPath(e,t,s){if(e.length%2!=0)throw new W("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Sn(t,new di(t._delegate,s,new en(e)))}static forKey(e,t,s){return new Sn(t,new di(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new a0(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new a0(this.firestore,f6(this._delegate,e))}catch(t){throw Fs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,qe.m9)(e))instanceof di&&c3(this._delegate,e)}set(e,t){t=m3("DocumentReference.set",t);try{return t?Cu(this._delegate,e,t):Cu(this._delegate,e)}catch(s){throw Fs(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?wu(this._delegate,e):wu(this._delegate,e,t,...s)}catch(u){throw Fs(u,"updateDoc()","DocumentReference.update()")}}delete(){return function A5(i){return y6(mr(i.firestore,ki),[new ia(i._key,Xr.none())])}(this._delegate)}onSnapshot(...e){const t=Du(e),s=Su(e,u=>new r4(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,u._key,u._document,u.metadata,this._delegate.converter)));return Mu(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function w5(i){i=mr(i,di);const e=mr(i.firestore,ki),t=_2(e),s=new L4(e);return function h6(i,e){const t=new he;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(s=(0,Oe.Z)(function*(u,m,_){try{const S=yield function(j,q){const ce=N(j);return ce.persistence.runTransaction("read document","readonly",Te=>ce.localDocuments.getDocument(Te,q))}(u,m);S.isFoundDocument()?_.resolve(S):S.isNoDocument()?_.resolve(null):_.reject(new W(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(S){const j=n6(S,`Failed to get document '${m} from cache`);_.reject(j)}}),function(u,m,_){return s.apply(this,arguments)})(yield F8(i),e,t);var s})),t.promise}(t,i._key).then(u=>new mc(e,s,i._key,u,new Ss(null!==u&&u.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function M5(i){i=mr(i,di);const e=mr(i.firestore,ki);return B8(_2(e),i._key,{source:"server"}).then(t=>Pl(e,i,t))}(this._delegate):function _u(i){i=mr(i,di);const e=mr(i.firestore,ki);return B8(_2(e),i._key).then(t=>Pl(e,i,t))}(this._delegate),t.then(s=>new r4(this.firestore,new mc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Sn(this.firestore,this._delegate.withConverter(e?w6.getInstance(this.firestore,e):null))}}function Fs(i,e,t){return i.message=i.message.replace(e,t),i}function Du(i){for(const e of i)if("object"==typeof e&&!Rl(e))return e;return{}}function Su(i,e){var t,s;let u;return u=Rl(i[0])?i[0]:Rl(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{u.next&&u.next(e(m))},error:null===(t=u.error)||void 0===t?void 0:t.bind(u),complete:null===(s=u.complete)||void 0===s?void 0:s.bind(u)}}class r4{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Sn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jo(this._delegate,e._delegate)}}class o0 extends r4{data(e){const t=this._delegate.data(e);return function b(i,e){i||A()}(void 0!==t),t}}class ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new C6(e)}where(e,t,s){try{return new ss(this.firestore,n4(this._delegate,function v5(i,e,t){const s=e,u=m6("where",i);return new g5(u,s,t)}(e,t,s)))}catch(u){throw Fs(u,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ss(this.firestore,n4(this._delegate,function Nl(i,e="asc"){const t=e,s=m6("orderBy",i);return new y5(s,t)}(e,t)))}catch(s){throw Fs(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ss(this.firestore,n4(this._delegate,function _5(i){return fl("limit",i),new v6("limit",i,"F")}(e)))}catch(t){throw Fs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ss(this.firestore,n4(this._delegate,function fu(i){return fl("limitToLast",i),new v6("limitToLast",i,"L")}(e)))}catch(t){throw Fs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ss(this.firestore,n4(this._delegate,function pu(...i){return new du("startAt",i,!0)}(...e)))}catch(t){throw Fs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ss(this.firestore,n4(this._delegate,function mu(...i){return new du("startAfter",i,!1)}(...e)))}catch(t){throw Fs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ss(this.firestore,n4(this._delegate,function C5(...i){return new t0("endBefore",i,!1)}(...e)))}catch(t){throw Fs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ss(this.firestore,n4(this._delegate,function gu(...i){return new t0("endAt",i,!0)}(...e)))}catch(t){throw Fs(t,"endAt()","Query.endAt()")}}isEqual(e){return J8(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function E5(i){i=mr(i,Ds);const e=mr(i.firestore,ki),t=_2(e),s=new L4(e);return function j8(i,e){const t=new he;return i.asyncQueue.enqueueAndForget((0,Oe.Z)(function*(){return(s=(0,Oe.Z)(function*(u,m,_){try{const S=yield V0(u,m,!0),j=new e5(m,S.ji),q=j.Ku(S.documents),ce=j.applyChanges(q,!1);_.resolve(ce.snapshot)}catch(S){const j=n6(S,`Failed to execute query '${m} against cache`);_.reject(j)}}),function(u,m,_){return s.apply(this,arguments)})(yield F8(i),e,t);var s})),t.promise}(t,i._query).then(u=>new ds(e,s,i,u))}(this._delegate):"server"===(null==e?void 0:e.source)?function I5(i){i=mr(i,Ds);const e=mr(i.firestore,ki),t=_2(e),s=new L4(e);return G8(t,i._query,{source:"server"}).then(u=>new ds(e,s,i,u))}(this._delegate):function b5(i){i=mr(i,Ds);const e=mr(i.firestore,ki),t=_2(e),s=new L4(e);return Tl(i._query),G8(t,i._query).then(u=>new ds(e,s,i,u))}(this._delegate),t.then(s=>new Hi(this.firestore,new ds(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Du(e),s=Su(e,u=>new Hi(this.firestore,new ds(this.firestore._delegate,this._userDataWriter,this._delegate,u._snapshot)));return Mu(this._delegate,t,s)}withConverter(e){return new ss(this.firestore,this._delegate.withConverter(e?w6.getInstance(this.firestore,e):null))}}class v3{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new o0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Hi{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new o0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new v3(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new o0(this._firestore,s))})}isEqual(e){return jo(this._delegate,e._delegate)}}class a0 extends ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Sn(this.firestore,e):null}doc(e){try{return new Sn(this.firestore,void 0===e?d6(this._delegate):d6(this._delegate,e))}catch(t){throw Fs(t,"doc()","CollectionReference.doc()")}}add(e){return function x5(i,e){const t=mr(i.firestore,ki),s=d6(i),u=s0(i.converter,e);return y6(t,[Ml(e4(i.firestore),"addDoc",s._key,u,null!==i.converter,{}).toMutation(s._key,Xr.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Sn(this.firestore,t))}isEqual(e){return c3(this._delegate,e._delegate)}withConverter(e){return new a0(this.firestore,this._delegate.withConverter(e?w6.getInstance(this.firestore,e):null))}}function i4(i){return mr(i,di)}class Fl{constructor(...e){this._delegate=new Ha(...e)}static documentId(){return new Fl(a1.keyField().canonicalString())}isEqual(e){return(e=(0,qe.m9)(e))instanceof Ha&&this._delegate._internalPath.isEqual(e._internalPath)}}class P4{constructor(e){this._delegate=e}static serverTimestamp(){const e=function z5(){return new u3("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new P4(e)}static delete(){const e=function N5(){return new J6("deleteField")}();return e._methodName="FieldValue.delete",new P4(e)}static arrayUnion(...e){const t=function bu(...i){return new p5("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new P4(t)}static arrayRemove(...e){const t=function Eu(...i){return new j2("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new P4(t)}static increment(e){const t=function Iu(i){return new uu("increment",i)}(e);return t._methodName="FieldValue.increment",new P4(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Tu={Firestore:V5,GeoPoint:Y6,Timestamp:Mr,Blob:ma,Transaction:kl,WriteBatch:Hl,DocumentReference:Sn,DocumentSnapshot:r4,Query:ss,QueryDocumentSnapshot:o0,QuerySnapshot:Hi,CollectionReference:a0,FieldPath:Fl,FieldValue:P4,setLogLevel:function X5(i){!function Ao(i){Jr.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function zu(i){(function Nu(i,e){i.INTERNAL.registerComponent(new ft.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),u=t.getProvider("firestore").getImmediate();return e(s,u)},"PUBLIC").setServiceProps(Object.assign({},Tu)))})(i,(e,t)=>new V5(e,t,new _6)),i.registerVersion("@firebase/firestore-compat","0.1.19")}(dt.Z);var vc=B(1205),R5=B(440),k5=B(127);function M6(i,e){return function H5(i,e=D.z){return new te.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Ul(i,e){return M6(i,e).pipe((0,pe.U)(t=>({payload:t,type:"query"})))}function Bl(i,e){return Ul(i,e).pipe((0,_e.O)(void 0),ze(),(0,pe.U)(([t,s])=>{const u=s.payload.docChanges(),m=u.map(_=>({type:_.type,payload:_}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((_,S)=>{const j=u.find(ce=>ce.doc.ref.isEqual(_.ref)),q=null==t?void 0:t.payload.docs.find(ce=>ce.ref.isEqual(_.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(_.metadata)||!j&&q&&JSON.stringify(q.metadata)===JSON.stringify(_.metadata)||m.push({type:"modified",payload:{oldIndex:S,newIndex:S,type:"modified",doc:_}})}),m}))}function jl(i,e,t){return Bl(i,t).pipe((0,je.R)((s,u)=>function eh(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function th(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return Lu(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Lu(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Lu(i,e.oldIndex,1)}return i}(i,s))}),i}(s,u.map(m=>m.payload),e),[]),(0,Nt.x)(),(0,pe.U)(s=>s.map(u=>({type:u.type,payload:u}))))}function Lu(i,e,t,...s){const u=i.slice();return u.splice(e,t,...s),u}function nh(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class y3{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Bl(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pe.U)(s=>s.filter(u=>e.indexOf(u.type)>-1)))),t.pipe((0,_e.O)(void 0),ze(),(0,ht.h)(([s,u])=>u.length>0||!s),(0,pe.U)(([s,u])=>u),Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,je.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=nh(e);return jl(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Ul(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Ae.iC)}get(e){return(0,Le.D)(this.query.get(e)).pipe(Ae.iC)}add(e){return this.ref.add(e)}doc(e){return new _3(this.ref.doc(e),this.afs)}}class _3{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:u,query:m}=U5(s,t);return new y3(u,m,this.afs)}snapshotChanges(){return function F5(i,e){return M6(i,e).pipe((0,_e.O)(void 0),ze(),(0,pe.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Le.D)(this.ref.get(e)).pipe(Ae.iC)}}class yh{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Bl(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,ht.h)(t=>t.length>0),Ae.iC):Bl(this.query,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,je.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=nh(e);return jl(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ae.iC)}valueChanges(e={}){return Ul(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(s=>s.payload.docs.map(u=>e.idField?Object.assign({[e.idField]:u.id},u.data()):u.data())),Ae.iC)}get(e){return(0,Le.D)(this.query.get(e)).pipe(Ae.iC)}}const rh=new y.OlP("angularfire2.enableFirestorePersistence"),ih=new y.OlP("angularfire2.firestore.persistenceSettings"),sh=new y.OlP("angularfire2.firestore.settings"),oh=new y.OlP("angularfire2.firestore.use-emulator");function U5(i,e=(t=>t)){return{query:e(i),ref:i}}let ah=(()=>{class i{constructor(t,s,u,m,_,S,j,q,ce,Te,ct,At,Rt,wn,Un,jr,$i){this.schedulers=j;const wi=(0,vt.on)(t,S,s),Wi=ce;Te&&(0,vc.nw)(wi,S,ct,Rt,wn,Un,At,jr),[this.firestore,this.persistenceEnabled$]=(0,vt.cc)(`${wi.name}.firestore`,"AngularFirestore",wi.name,()=>{const Zi=S.runOutsideAngular(()=>wi.firestore());if(m&&Zi.settings(m),Wi&&Zi.useEmulator(...Wi),u&&!(0,zt.PM)(_)){const n2=()=>{try{return(0,Le.D)(Zi.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(oo){return"undefined"!=typeof console&&console.warn(oo),(0,De.of)(!1)}};return[Zi,S.runOutsideAngular(n2)]}return[Zi,(0,De.of)(!1)]},[m,Wi,u])}collection(t,s){let u;u="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:_}=U5(u,s),S=this.schedulers.ngZone.run(()=>m);return new y3(S,_,this)}collectionGroup(t,s){const u=s||(_=>_),m=this.firestore.collectionGroup(t);return new yh(u(m),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const u=this.schedulers.ngZone.run(()=>s);return new _3(u,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(y.LFG(vt.Dh),y.LFG(vt.xv,8),y.LFG(rh,8),y.LFG(sh,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Ae.HU),y.LFG(ih,8),y.LFG(oh,8),y.LFG(vc.zQ,8),y.LFG(vc.Qv,8),y.LFG(vc.L6,8),y.LFG(vc._Q,8),y.LFG(vc.rT,8),y.LFG(vc.lh,8),y.LFG(vc.f7,8),y.LFG(R5.nm,8))},i.\u0275prov=y.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ch=(()=>{class i{constructor(){k5.Z.registerVersion("angularfire",Ae.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:rh,useValue:!0},{provide:ih,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=y.oAB({type:i}),i.\u0275inj=y.cJS({providers:[ah]}),i})()},2011:(jt,We,B)=>{B.d(We,{Dh:()=>ve,GT:()=>Ae,cc:()=>ht,hO:()=>Nt,on:()=>_e,pX:()=>De,xv:()=>ze});var y=B(5e3),D=B(127),te=B(5813);jt=B.hmd(jt);const Le=["ngOnDestroy"],De=(dt,Oe,kt,ft={})=>new Proxy(dt,{get:(nt,qe)=>kt.runOutsideAngular(()=>{var et;if(dt[qe])return(null===(et=null==ft?void 0:ft.spy)||void 0===et?void 0:et.get)&&ft.spy.get(qe,dt[qe]),dt[qe];if(Le.indexOf(qe)>-1)return()=>{};const _t=Oe.toPromise().then(le=>{const ot=le&&le[qe];return"function"==typeof ot?ot.bind(le):ot&&ot.then?ot.then(me=>kt.run(()=>me)):kt.run(()=>ot)});return new Proxy(()=>{},{get:(le,ot)=>_t[ot],apply:(le,ot,me)=>_t.then(Pe=>{var Ue;const Ze=Pe&&Pe(...me);return(null===(Ue=null==ft?void 0:ft.spy)||void 0===Ue?void 0:Ue.apply)&&ft.spy.apply(qe,me,Ze),Ze})})})}),Ae=(dt,Oe)=>{Oe.forEach(kt=>{Object.getOwnPropertyNames(kt.prototype||kt).forEach(ft=>{Object.defineProperty(dt.prototype,ft,Object.getOwnPropertyDescriptor(kt.prototype||kt,ft))})})};class ue{constructor(Oe){return Oe}}const ve=new y.OlP("angularfire2.app.options"),ze=new y.OlP("angularfire2.app.name");function _e(dt,Oe,kt){const nt="object"==typeof kt&&kt||{};nt.name=nt.name||"string"==typeof kt&&kt||"[DEFAULT]";const et=D.Z.apps.filter(_t=>_t&&_t.name===nt.name)[0]||Oe.runOutsideAngular(()=>D.Z.initializeApp(dt,nt));try{JSON.stringify(dt)!==JSON.stringify(et.options)&&pe("error",`${et.name} Firebase App already initialized with different options${jt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(_t){}return new ue(et)}const pe=(dt,...Oe)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[dt](...Oe)},je={provide:ue,useFactory:_e,deps:[ve,y.R0b,[new y.FiY,ze]]};let Nt=(()=>{class dt{constructor(kt){D.Z.registerVersion("angularfire",te.q4.full,"core"),D.Z.registerVersion("angularfire",te.q4.full,"app-compat"),D.Z.registerVersion("angular",y.q4F.full,kt.toString())}static initializeApp(kt,ft){return{ngModule:dt,providers:[{provide:ve,useValue:kt},{provide:ze,useValue:ft}]}}}return dt.\u0275fac=function(kt){return new(kt||dt)(y.LFG(y.Lbi))},dt.\u0275mod=y.oAB({type:dt}),dt.\u0275inj=y.cJS({providers:[je]}),dt})();function ht(dt,Oe,kt,ft,nt){const[,qe,et]=globalThis.\u0275AngularfireInstanceCache.find(_t=>_t[0]===dt)||[];if(qe)return function vt(dt,Oe){try{return dt.toString()===Oe.toString()}catch(kt){return dt===Oe}}(nt,et)||(tt("error",`${Oe} was already initialized on the ${kt} Firebase App with different settings.${zt?" You may need to reload as Firebase is not HMR aware.":""}`),tt("warn",{is:nt,was:et})),qe;{const _t=ft();return globalThis.\u0275AngularfireInstanceCache.push([dt,_t,nt]),_t}}const zt=!!jt.hot,tt=(dt,...Oe)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[dt](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(jt,We,B)=>{B.d(We,{q4:()=>Xi,iC:()=>Ni,HU:()=>yi,vb:()=>Do,JM:()=>fo});var y=B(5e3),D=B(5867),te=B(5861),Le=B(9681),De=B(2090),Ae=B(4859),ue=B(1877),ve=B(8766);const ze="@firebase/installations",_e="0.5.10",je=`w:${_e}`,Nt="FIS_v2",Oe=new De.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function kt(O){return O instanceof De.ZR&&O.code.includes("request-failed")}function ft({projectId:O}){return`https://firebaseinstallations.googleapis.com/v1/projects/${O}/installations`}function nt(O){return{token:O.token,requestStatus:2,expiresIn:Pe(O.expiresIn),creationTime:Date.now()}}function qe(O,F){return et.apply(this,arguments)}function et(){return(et=(0,te.Z)(function*(O,F){const ge=(yield F.json()).error;return Oe.create("request-failed",{requestName:O,serverCode:ge.code,serverMessage:ge.message,serverStatus:ge.status})})).apply(this,arguments)}function _t({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function le(O,{refreshToken:F}){const X=_t(O);return X.append("Authorization",function Ue(O){return`${Nt} ${O}`}(F)),X}function ot(O){return me.apply(this,arguments)}function me(){return(me=(0,te.Z)(function*(O){const F=yield O();return F.status>=500&&F.status<600?O():F})).apply(this,arguments)}function Pe(O){return Number(O.replace("s","000"))}function Ze(O,F){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,te.Z)(function*({appConfig:O,heartbeatServiceProvider:F},{fid:X}){const ge=ft(O),Ge=_t(O),Qe=F.getImmediate({optional:!0});if(Qe){const jn=yield Qe.getHeartbeatsHeader();jn&&Ge.append("x-firebase-client",jn)}const un={method:"POST",headers:Ge,body:JSON.stringify({fid:X,authVersion:Nt,appId:O.appId,sdkVersion:je})},_n=yield ot(()=>fetch(ge,un));if(_n.ok){const jn=yield _n.json();return{fid:jn.fid||X,registrationStatus:2,refreshToken:jn.refreshToken,authToken:nt(jn.authToken)}}throw yield qe("Create Installation",_n)})).apply(this,arguments)}function Et(O){return new Promise(F=>{setTimeout(F,O)})}const Yt=/^[cdef][\w-]{21}$/;function it(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const X=function sn(O){return function Vt(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return Yt.test(X)?X:""}catch(O){return""}}function hn(O){return`${O.appName}!${O.appId}`}const fn=new Map;function an(O,F){const X=hn(O);Mn(X,F),function I1(O,F){const X=function A1(){return!c1&&"BroadcastChannel"in self&&(c1=new BroadcastChannel("[Firebase] FID Change"),c1.onmessage=O=>{Mn(O.data.key,O.data.fid)}),c1}();X&&X.postMessage({key:O,fid:F}),function p1(){0===fn.size&&c1&&(c1.close(),c1=null)}()}(X,F)}function Mn(O,F){const X=fn.get(O);if(X)for(const ge of X)ge(F)}let c1=null;const r1="firebase-installations-store";let Wn=null;function dn(){return Wn||(Wn=(0,ve.X3)("firebase-installations-database",1,{upgrade:(O,F)=>{0===F&&O.createObjectStore(r1)}})),Wn}function zn(O,F){return xn.apply(this,arguments)}function xn(){return(xn=(0,te.Z)(function*(O,F){const X=hn(O),Ge=(yield dn()).transaction(r1,"readwrite"),Qe=Ge.objectStore(r1),St=yield Qe.get(X);return yield Qe.put(F,X),yield Ge.done,(!St||St.fid!==F.fid)&&an(O,F.fid),F})).apply(this,arguments)}function ie(O){return gr.apply(this,arguments)}function gr(){return(gr=(0,te.Z)(function*(O){const F=hn(O),ge=(yield dn()).transaction(r1,"readwrite");yield ge.objectStore(r1).delete(F),yield ge.done})).apply(this,arguments)}function vr(O,F){return B1.apply(this,arguments)}function B1(){return(B1=(0,te.Z)(function*(O,F){const X=hn(O),Ge=(yield dn()).transaction(r1,"readwrite"),Qe=Ge.objectStore(r1),St=yield Qe.get(X),un=F(St);return void 0===un?yield Qe.delete(X):yield Qe.put(un,X),yield Ge.done,un&&(!St||St.fid!==un.fid)&&an(O,un.fid),un})).apply(this,arguments)}function Xt(O){return N1.apply(this,arguments)}function N1(){return(N1=(0,te.Z)(function*(O){let F;const X=yield vr(O.appConfig,ge=>{const Ge=Kn(ge),Qe=Gt(O,Ge);return F=Qe.registrationPromise,Qe.installationEntry});return""===X.fid?{installationEntry:yield F}:{installationEntry:X,registrationPromise:F}})).apply(this,arguments)}function Kn(O){return Er(O||{fid:it(),registrationStatus:0})}function Gt(O,F){if(0===F.registrationStatus){if(!navigator.onLine)return{installationEntry:F,registrationPromise:Promise.reject(Oe.create("app-offline"))};const X={fid:F.fid,registrationStatus:1,registrationTime:Date.now()},ge=function nn(O,F){return Wt.apply(this,arguments)}(O,X);return{installationEntry:X,registrationPromise:ge}}return 1===F.registrationStatus?{installationEntry:F,registrationPromise:j1(O)}:{installationEntry:F}}function Wt(){return(Wt=(0,te.Z)(function*(O,F){try{const X=yield Ze(O,F);return zn(O.appConfig,X)}catch(X){throw kt(X)&&409===X.customData.serverCode?yield ie(O.appConfig):yield zn(O.appConfig,{fid:F.fid,registrationStatus:0}),X}})).apply(this,arguments)}function j1(O){return x1.apply(this,arguments)}function x1(){return(x1=(0,te.Z)(function*(O){let F=yield kn(O.appConfig);for(;1===F.registrationStatus;)yield Et(100),F=yield kn(O.appConfig);if(0===F.registrationStatus){const{installationEntry:X,registrationPromise:ge}=yield Xt(O);return ge||X}return F})).apply(this,arguments)}function kn(O){return vr(O,F=>{if(!F)throw Oe.create("installation-not-found");return Er(F)})}function Er(O){return function D1(O){return 1===O.registrationStatus&&O.registrationTime+1e4<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function i1(O,F){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,te.Z)(function*({appConfig:O,heartbeatServiceProvider:F},X){const ge=Ne(O,X),Ge=le(O,X),Qe=F.getImmediate({optional:!0});if(Qe){const jn=yield Qe.getHeartbeatsHeader();jn&&Ge.append("x-firebase-client",jn)}const un={method:"POST",headers:Ge,body:JSON.stringify({installation:{sdkVersion:je,appId:O.appId}})},_n=yield ot(()=>fetch(ge,un));if(_n.ok)return nt(yield _n.json());throw yield qe("Generate Auth Token",_n)})).apply(this,arguments)}function Ne(O,{fid:F}){return`${ft(O)}/${F}/authTokens:generate`}function be(O){return pt.apply(this,arguments)}function pt(){return(pt=(0,te.Z)(function*(O,F=!1){let X;const ge=yield vr(O.appConfig,Qe=>{if(!cn(Qe))throw Oe.create("not-registered");const St=Qe.authToken;if(!F&&Zn(St))return Qe;if(1===St.requestStatus)return X=Me(O,F),Qe;{if(!navigator.onLine)throw Oe.create("app-offline");const un=Jn(Qe);return X=Ft(O,un),un}});return X?yield X:ge.authToken})).apply(this,arguments)}function Me(O,F){return ke.apply(this,arguments)}function ke(){return(ke=(0,te.Z)(function*(O,F){let X=yield rt(O.appConfig);for(;1===X.authToken.requestStatus;)yield Et(100),X=yield rt(O.appConfig);const ge=X.authToken;return 0===ge.requestStatus?be(O,F):ge})).apply(this,arguments)}function rt(O){return vr(O,F=>{if(!cn(F))throw Oe.create("not-registered");return function G1(O){return 1===O.requestStatus&&O.requestTime+1e4<Date.now()}(F.authToken)?Object.assign(Object.assign({},F),{authToken:{requestStatus:0}}):F})}function Ft(O,F){return tn.apply(this,arguments)}function tn(){return(tn=(0,te.Z)(function*(O,F){try{const X=yield i1(O,F),ge=Object.assign(Object.assign({},F),{authToken:X});return yield zn(O.appConfig,ge),X}catch(X){if(!kt(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const ge=Object.assign(Object.assign({},F),{authToken:{requestStatus:0}});yield zn(O.appConfig,ge)}else yield ie(O.appConfig);throw X}})).apply(this,arguments)}function cn(O){return void 0!==O&&2===O.registrationStatus}function Zn(O){return 2===O.requestStatus&&!function Jt(O){const F=Date.now();return F<O.creationTime||O.creationTime+O.expiresIn<F+36e5}(O)}function Jn(O){const F={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:F})}function $e(){return($e=(0,te.Z)(function*(O){const F=O,{installationEntry:X,registrationPromise:ge}=yield Xt(F);return ge?ge.catch(console.error):be(F).catch(console.error),X.fid})).apply(this,arguments)}function se(){return(se=(0,te.Z)(function*(O,F=!1){const X=O;return yield Re(X),(yield be(X,F)).token})).apply(this,arguments)}function Re(O){return yt.apply(this,arguments)}function yt(){return(yt=(0,te.Z)(function*(O){const{registrationPromise:F}=yield Xt(O);F&&(yield F)})).apply(this,arguments)}function yr(O){return Oe.create("missing-app-config-values",{valueName:O})}const Yn="installations",Zt=O=>{const F=O.getProvider("app").getImmediate(),X=function k1(O){if(!O||!O.options)throw yr("App Configuration");if(!O.name)throw yr("App Name");const F=["projectId","apiKey","appId"];for(const X of F)if(!O.options[X])throw yr(X);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(F);return{app:F,appConfig:X,heartbeatServiceProvider:(0,Le._getProvider)(F,"heartbeat"),_delete:()=>Promise.resolve()}},Fn=O=>{const F=O.getProvider("app").getImmediate(),X=(0,Le._getProvider)(F,Yn).getImmediate();return{getId:()=>function Ir(O){return $e.apply(this,arguments)}(X),getToken:Ge=>function xe(O){return se.apply(this,arguments)}(X,Ge)}};(function W1(){(0,Le._registerComponent)(new Ae.wA(Yn,Zt,"PUBLIC")),(0,Le._registerComponent)(new Ae.wA("installations-internal",Fn,"PRIVATE"))})(),(0,Le.registerVersion)(ze,_e),(0,Le.registerVersion)(ze,_e,"esm2017");const Lr="@firebase/remote-config",z1=new De.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ni{constructor(F,X,ge,Ge){this.client=F,this.storage=X,this.storageCache=ge,this.logger=Ge}isCachedDataFresh(F,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ge=Date.now()-X,Ge=ge<=F;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${F}. Is cache hit: ${Ge}.`),Ge}fetch(F){var X=this;return(0,te.Z)(function*(){const[ge,Ge]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if(Ge&&X.isCachedDataFresh(F.cacheMaxAgeMillis,ge))return Ge;F.eTag=Ge&&Ge.eTag;const Qe=yield X.client.fetch(F),St=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Qe.status&&St.push(X.storage.setLastSuccessfulFetchResponse(Qe)),yield Promise.all(St),Qe})()}}function C2(O=navigator){return O.languages&&O.languages[0]||O.language}class Z1{constructor(F,X,ge,Ge,Qe,St){this.firebaseInstallations=F,this.sdkVersion=X,this.namespace=ge,this.projectId=Ge,this.apiKey=Qe,this.appId=St}fetch(F){var X=this;return(0,te.Z)(function*(){var ge,Ge,Qe;const[St,un]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),jn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,H1={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":F.eTag||"*"},Tn={sdk_version:X.sdkVersion,app_instance_id:St,app_instance_id_token:un,app_id:X.appId,language_code:C2()},br={method:"POST",headers:H1,body:JSON.stringify(Tn)},ji=fetch(jn,br),g2=new Promise((k2,ws)=>{F.signal.addEventListener(()=>{const H2=new Error("The operation was aborted.");H2.name="AbortError",ws(H2)})});let Cs;try{yield Promise.race([ji,g2]),Cs=yield ji}catch(k2){let ws="fetch-client-network";throw"AbortError"===(null===(ge=k2)||void 0===ge?void 0:ge.name)&&(ws="fetch-timeout"),z1.create(ws,{originalErrorMessage:null===(Ge=k2)||void 0===Ge?void 0:Ge.message})}let t2=Cs.status;const Gs=Cs.headers.get("ETag")||void 0;let R2,Vi;if(200===Cs.status){let k2;try{k2=yield Cs.json()}catch(ws){throw z1.create("fetch-client-parse",{originalErrorMessage:null===(Qe=ws)||void 0===Qe?void 0:Qe.message})}R2=k2.entries,Vi=k2.state}if("INSTANCE_STATE_UNSPECIFIED"===Vi?t2=500:"NO_CHANGE"===Vi?t2=304:("NO_TEMPLATE"===Vi||"EMPTY_CONFIG"===Vi)&&(R2={}),304!==t2&&200!==t2)throw z1.create("fetch-status",{httpStatus:t2});return{status:t2,eTag:Gs,config:R2}})()}}class He{constructor(F,X){this.client=F,this.storage=X}fetch(F){var X=this;return(0,te.Z)(function*(){const ge=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(F,ge)})()}attemptFetch(F,{throttleEndTimeMillis:X,backoffCount:ge}){var Ge=this;return(0,te.Z)(function*(){yield function Qr(O,F){return new Promise((X,ge)=>{const Ge=Math.max(F-Date.now(),0),Qe=setTimeout(X,Ge);O.addEventListener(()=>{clearTimeout(Qe),ge(z1.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}(F.signal,X);try{const Qe=yield Ge.client.fetch(F);return yield Ge.storage.deleteThrottleMetadata(),Qe}catch(Qe){if(!function pi(O){if(!(O instanceof De.ZR&&O.customData))return!1;const F=Number(O.customData.httpStatus);return 429===F||500===F||503===F||504===F}(Qe))throw Qe;const St={throttleEndTimeMillis:Date.now()+(0,De.$s)(ge),backoffCount:ge+1};return yield Ge.storage.setThrottleMetadata(St),Ge.attemptFetch(F,St)}})()}}class wt{constructor(F,X,ge,Ge,Qe){this.app=F,this._client=X,this._storageCache=ge,this._storage=Ge,this._logger=Qe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Lt(O,F){var X;const ge=O.target.error||void 0;return z1.create(F,{originalErrorMessage:ge&&(null===(X=ge)||void 0===X?void 0:X.message)})}const Ut="app_namespace_store";class rr{constructor(F,X,ge,Ge=function l1(){return new Promise((O,F)=>{var X;try{const ge=indexedDB.open("firebase_remote_config",1);ge.onerror=Ge=>{F(Lt(Ge,"storage-open"))},ge.onsuccess=Ge=>{O(Ge.target.result)},ge.onupgradeneeded=Ge=>{0===Ge.oldVersion&&Ge.target.result.createObjectStore(Ut,{keyPath:"compositeKey"})}}catch(ge){F(z1.create("storage-open",{originalErrorMessage:null===(X=ge)||void 0===X?void 0:X.message}))}})}()){this.appId=F,this.appName=X,this.namespace=ge,this.openDbPromise=Ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(F){return this.set("last_fetch_status",F)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(F){return this.set("last_successful_fetch_timestamp_millis",F)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(F){return this.set("last_successful_fetch_response",F)}getActiveConfig(){return this.get("active_config")}setActiveConfig(F){return this.set("active_config",F)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(F){return this.set("active_config_etag",F)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(F){return this.set("throttle_metadata",F)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(F){var X=this;return(0,te.Z)(function*(){const ge=yield X.openDbPromise;return new Promise((Ge,Qe)=>{var St;const _n=ge.transaction([Ut],"readonly").objectStore(Ut),jn=X.createCompositeKey(F);try{const H1=_n.get(jn);H1.onerror=Tn=>{Qe(Lt(Tn,"storage-get"))},H1.onsuccess=Tn=>{const br=Tn.target.result;Ge(br?br.value:void 0)}}catch(H1){Qe(z1.create("storage-get",{originalErrorMessage:null===(St=H1)||void 0===St?void 0:St.message}))}})})()}set(F,X){var ge=this;return(0,te.Z)(function*(){const Ge=yield ge.openDbPromise;return new Promise((Qe,St)=>{var un;const jn=Ge.transaction([Ut],"readwrite").objectStore(Ut),H1=ge.createCompositeKey(F);try{const Tn=jn.put({compositeKey:H1,value:X});Tn.onerror=br=>{St(Lt(br,"storage-set"))},Tn.onsuccess=()=>{Qe()}}catch(Tn){St(z1.create("storage-set",{originalErrorMessage:null===(un=Tn)||void 0===un?void 0:un.message}))}})})()}delete(F){var X=this;return(0,te.Z)(function*(){const ge=yield X.openDbPromise;return new Promise((Ge,Qe)=>{var St;const _n=ge.transaction([Ut],"readwrite").objectStore(Ut),jn=X.createCompositeKey(F);try{const H1=_n.delete(jn);H1.onerror=Tn=>{Qe(Lt(Tn,"storage-delete"))},H1.onsuccess=()=>{Ge()}}catch(H1){Qe(z1.create("storage-delete",{originalErrorMessage:null===(St=H1)||void 0===St?void 0:St.message}))}})})()}createCompositeKey(F){return[this.appId,this.appName,this.namespace,F].join()}}class Fr{constructor(F){this.storage=F}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var F=this;return(0,te.Z)(function*(){const X=F.storage.getLastFetchStatus(),ge=F.storage.getLastSuccessfulFetchTimestampMillis(),Ge=F.storage.getActiveConfig(),Qe=yield X;Qe&&(F.lastFetchStatus=Qe);const St=yield ge;St&&(F.lastSuccessfulFetchTimestampMillis=St);const un=yield Ge;un&&(F.activeConfig=un)})()}setLastFetchStatus(F){return this.lastFetchStatus=F,this.storage.setLastFetchStatus(F)}setLastSuccessfulFetchTimestampMillis(F){return this.lastSuccessfulFetchTimestampMillis=F,this.storage.setLastSuccessfulFetchTimestampMillis(F)}setActiveConfig(F){return this.activeConfig=F,this.storage.setActiveConfig(F)}}function mi(){return s2.apply(this,arguments)}function s2(){return(s2=(0,te.Z)(function*(){if(!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch(O){return!1}})).apply(this,arguments)}!function Vr(){(0,Le._registerComponent)(new Ae.wA("remote-config",function O(F,{instanceIdentifier:X}){const ge=F.getProvider("app").getImmediate(),Ge=F.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw z1.create("registration-window");if(!(0,De.hl)())throw z1.create("indexed-db-unavailable");const{projectId:Qe,apiKey:St,appId:un}=ge.options;if(!Qe)throw z1.create("registration-project-id");if(!St)throw z1.create("registration-api-key");if(!un)throw z1.create("registration-app-id");const _n=new rr(un,ge.name,X=X||"firebase"),jn=new Fr(_n),H1=new ue.Yd(Lr);H1.logLevel=ue.in.ERROR;const Tn=new Z1(Ge,Le.SDK_VERSION,X,Qe,St,un),br=new He(Tn,_n),ji=new ni(br,_n,jn,H1),g2=new wt(ge,ji,jn,_n,H1);return function s1(O){const F=(0,De.m9)(O);F._initializePromise||(F._initializePromise=F._storageCache.loadFromStorage().then(()=>{F._isInitializationComplete=!0}))}(g2),g2},"PUBLIC").setMultipleInstances(!0)),(0,Le.registerVersion)(Lr,"0.3.9"),(0,Le.registerVersion)(Lr,"0.3.9","esm2017")}();const o2="/firebase-messaging-sw.js",tr="/firebase-cloud-messaging-push-scope",ri="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",qi="google.c.a.c_id",w2="google.c.a.c_l",Ii="google.c.a.ts",os="google.c.a.e";var Ai=(()=>{return(O=Ai||(Ai={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",Ai;var O})();function Dr(O){const F=new Uint8Array(O);return btoa(String.fromCharCode(...F)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ki(O){const X=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ge=atob(X),Ge=new Uint8Array(ge.length);for(let Qe=0;Qe<ge.length;++Qe)Ge[Qe]=ge.charCodeAt(Qe);return Ge}const ir="fcm_token_details_db",Cr="fcm_token_object_Store";function a2(O){return Gn.apply(this,arguments)}function Gn(){return Gn=(0,te.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Qe=>Qe.name).includes(ir))return null;let F=null;return(yield(0,ve.X3)(ir,5,{upgrade:(ge=(0,te.Z)(function*(Ge,Qe,St,un){var _n;if(Qe<2||!Ge.objectStoreNames.contains(Cr))return;const jn=un.objectStore(Cr),H1=yield jn.index("fcmSenderId").get(O);if(yield jn.clear(),H1)if(2===Qe){const Tn=H1;if(!Tn.auth||!Tn.p256dh||!Tn.endpoint)return;F={token:Tn.fcmToken,createTime:null!==(_n=Tn.createTime)&&void 0!==_n?_n:Date.now(),subscriptionOptions:{auth:Tn.auth,p256dh:Tn.p256dh,endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:"string"==typeof Tn.vapidKey?Tn.vapidKey:Dr(Tn.vapidKey)}}}else if(3===Qe){const Tn=H1;F={token:Tn.fcmToken,createTime:Tn.createTime,subscriptionOptions:{auth:Dr(Tn.auth),p256dh:Dr(Tn.p256dh),endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:Dr(Tn.vapidKey)}}}else if(4===Qe){const Tn=H1;F={token:Tn.fcmToken,createTime:Tn.createTime,subscriptionOptions:{auth:Dr(Tn.auth),p256dh:Dr(Tn.p256dh),endpoint:Tn.endpoint,swScope:Tn.swScope,vapidKey:Dr(Tn.vapidKey)}}}}),function(Qe,St,un,_n){return ge.apply(this,arguments)})})).close(),yield(0,ve.Lj)(ir),yield(0,ve.Lj)("fcm_vapid_details_db"),yield(0,ve.Lj)("undefined"),qn(F)?F:null;var ge}),Gn.apply(this,arguments)}function qn(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:F}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof F.auth&&F.auth.length>0&&"string"==typeof F.p256dh&&F.p256dh.length>0&&"string"==typeof F.endpoint&&F.endpoint.length>0&&"string"==typeof F.swScope&&F.swScope.length>0&&"string"==typeof F.vapidKey&&F.vapidKey.length>0}const Xn="firebase-messaging-store";let Li=null;function f1(){return Li||(Li=(0,ve.X3)("firebase-messaging-database",1,{upgrade:(O,F)=>{0===F&&O.createObjectStore(Xn)}})),Li}function k(O){return Y.apply(this,arguments)}function Y(){return(Y=(0,te.Z)(function*(O){const F=bt(O),ge=yield(yield f1()).transaction(Xn).objectStore(Xn).get(F);if(ge)return ge;{const Ge=yield a2(O.appConfig.senderId);if(Ge)return yield R(O,Ge),Ge}})).apply(this,arguments)}function R(O,F){return K.apply(this,arguments)}function K(){return(K=(0,te.Z)(function*(O,F){const X=bt(O),Ge=(yield f1()).transaction(Xn,"readwrite");return yield Ge.objectStore(Xn).put(F,X),yield Ge.done,F})).apply(this,arguments)}function ye(O){return st.apply(this,arguments)}function st(){return(st=(0,te.Z)(function*(O){const F=bt(O),ge=(yield f1()).transaction(Xn,"readwrite");yield ge.objectStore(Xn).delete(F),yield ge.done})).apply(this,arguments)}function bt({appConfig:O}){return O.appId}const En=new De.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function u1(O,F){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,te.Z)(function*(O,F){const X=yield Sr(O),ge=gi(F),Ge={method:"POST",headers:X,body:JSON.stringify(ge)};let Qe;try{Qe=yield(yield fetch(oi(O.appConfig),Ge)).json()}catch(St){throw En.create("token-subscribe-failed",{errorInfo:St})}if(Qe.error)throw En.create("token-subscribe-failed",{errorInfo:Qe.error.message});if(!Qe.token)throw En.create("token-subscribe-no-token");return Qe.token})).apply(this,arguments)}function $n(O,F){return b1.apply(this,arguments)}function b1(){return(b1=(0,te.Z)(function*(O,F){const X=yield Sr(O),ge=gi(F.subscriptionOptions),Ge={method:"PATCH",headers:X,body:JSON.stringify(ge)};let Qe;try{Qe=yield(yield fetch(`${oi(O.appConfig)}/${F.token}`,Ge)).json()}catch(St){throw En.create("token-update-failed",{errorInfo:St})}if(Qe.error)throw En.create("token-update-failed",{errorInfo:Qe.error.message});if(!Qe.token)throw En.create("token-update-no-token");return Qe.token})).apply(this,arguments)}function S1(O,F){return L1.apply(this,arguments)}function L1(){return(L1=(0,te.Z)(function*(O,F){const ge={method:"DELETE",headers:yield Sr(O)};try{const Qe=yield(yield fetch(`${oi(O.appConfig)}/${F}`,ge)).json();if(Qe.error)throw En.create("token-unsubscribe-failed",{errorInfo:Qe.error.message})}catch(Ge){throw En.create("token-unsubscribe-failed",{errorInfo:Ge})}})).apply(this,arguments)}function oi({projectId:O}){return`https://fcmregistrations.googleapis.com/v1/projects/${O}/registrations`}function Sr(O){return gn.apply(this,arguments)}function gn(){return(gn=(0,te.Z)(function*({appConfig:O,installations:F}){const X=yield F.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function gi({p256dh:O,auth:F,endpoint:X,vapidKey:ge}){const Ge={web:{endpoint:X,auth:F,p256dh:O}};return ge!==ri&&(Ge.web.applicationPubKey=ge),Ge}const G2=6048e5;function M2(O){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,te.Z)(function*(O){const F=yield C1(O.swRegistration,O.vapidKey),X={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:F.endpoint,auth:Dr(F.getKey("auth")),p256dh:Dr(F.getKey("p256dh"))},ge=yield k(O.firebaseDependencies);if(ge){if(ai(ge.subscriptionOptions,X))return Date.now()>=ge.createTime+G2?V(O,{token:ge.token,createTime:Date.now(),subscriptionOptions:X}):ge.token;try{yield S1(O.firebaseDependencies,ge.token)}catch(Ge){console.warn(Ge)}return Ee(O.firebaseDependencies,X)}return Ee(O.firebaseDependencies,X)})).apply(this,arguments)}function U(O){return P.apply(this,arguments)}function P(){return(P=(0,te.Z)(function*(O){const F=yield k(O.firebaseDependencies);F&&(yield S1(O.firebaseDependencies,F.token),yield ye(O.firebaseDependencies));const X=yield O.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()})).apply(this,arguments)}function V(O,F){return re.apply(this,arguments)}function re(){return(re=(0,te.Z)(function*(O,F){try{const X=yield $n(O.firebaseDependencies,F),ge=Object.assign(Object.assign({},F),{token:X,createTime:Date.now()});return yield R(O.firebaseDependencies,ge),X}catch(X){throw yield U(O),X}})).apply(this,arguments)}function Ee(O,F){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,te.Z)(function*(O,F){const ge={token:yield u1(O,F),createTime:Date.now(),subscriptionOptions:F};return yield R(O,ge),ge.token})).apply(this,arguments)}function C1(O,F){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,te.Z)(function*(O,F){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ki(F)})})).apply(this,arguments)}function ai(O,F){return F.vapidKey===O.vapidKey&&F.endpoint===O.endpoint&&F.auth===O.auth&&F.p256dh===O.p256dh}function sr(O){const F={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function Wr(O,F){if(!F.notification)return;O.notification={};const X=F.notification.title;X&&(O.notification.title=X);const ge=F.notification.body;ge&&(O.notification.body=ge);const Ge=F.notification.image;Ge&&(O.notification.image=Ge)}(F,O),function Ui(O,F){!F.data||(O.data=F.data)}(F,O),function as(O,F){var X,ge,Ge,Qe,St;if(!F.fcmOptions&&!(null===(X=F.notification)||void 0===X?void 0:X.click_action))return;O.fcmOptions={};const un=null!==(Ge=null===(ge=F.fcmOptions)||void 0===ge?void 0:ge.link)&&void 0!==Ge?Ge:null===(Qe=F.notification)||void 0===Qe?void 0:Qe.click_action;un&&(O.fcmOptions.link=un);const _n=null===(St=F.fcmOptions)||void 0===St?void 0:St.analytics_label;_n&&(O.fcmOptions.analyticsLabel=_n)}(F,O),F}function Mo(O){return"object"==typeof O&&!!O&&qi in O}function ps(O,F){const X=[];for(let ge=0;ge<O.length;ge++)X.push(O.charAt(ge)),ge<F.length&&X.push(F.charAt(ge));return X.join("")}function c2(O){return En.create("missing-app-config-values",{valueName:O})}ps("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ps("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Rr{constructor(F,X,ge){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ge=function Us(O){if(!O||!O.options)throw c2("App Configuration Object");if(!O.name)throw c2("App Name");const F=["projectId","apiKey","appId","messagingSenderId"],{options:X}=O;for(const ge of F)if(!X[ge])throw c2(ge);return{appName:O.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(F);this.firebaseDependencies={app:F,appConfig:Ge,installations:X,analyticsProvider:ge}}_delete(){return Promise.resolve()}}function Bi(O){return $2.apply(this,arguments)}function $2(){return($2=(0,te.Z)(function*(O){var F;try{O.swRegistration=yield navigator.serviceWorker.register(o2,{scope:tr}),O.swRegistration.update().catch(()=>{})}catch(X){throw En.create("failed-service-worker-registration",{browserErrorMessage:null===(F=X)||void 0===F?void 0:F.message})}})).apply(this,arguments)}function Yi(O,F){return G.apply(this,arguments)}function G(){return(G=(0,te.Z)(function*(O,F){if(!F&&!O.swRegistration&&(yield Bi(O)),F||!O.swRegistration){if(!(F instanceof ServiceWorkerRegistration))throw En.create("invalid-sw-registration");O.swRegistration=F}})).apply(this,arguments)}function ee(O,F){return oe.apply(this,arguments)}function oe(){return(oe=(0,te.Z)(function*(O,F){F?O.vapidKey=F:O.vapidKey||(O.vapidKey=ri)})).apply(this,arguments)}function Be(){return(Be=(0,te.Z)(function*(O,F){if(!navigator)throw En.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw En.create("permission-blocked");return yield ee(O,null==F?void 0:F.vapidKey),yield Yi(O,null==F?void 0:F.serviceWorkerRegistration),M2(O)})).apply(this,arguments)}function ut(O,F,X){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,te.Z)(function*(O,F,X){const ge=Ct(F);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(ge,{message_id:X[qi],message_name:X[w2],message_time:X[Ii],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ct(O){switch(O){case Ai.NOTIFICATION_CLICKED:return"notification_open";case Ai.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function On(){return(On=(0,te.Z)(function*(O,F){const X=F.data;if(!X.isFirebaseMessaging)return;O.onMessageHandler&&X.messageType===Ai.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(sr(X)):O.onMessageHandler.next(sr(X)));const ge=X.data;Mo(ge)&&"1"===ge[os]&&(yield ut(O,X.messageType,ge))})).apply(this,arguments)}const Bt="@firebase/messaging",g1=O=>{const F=new Rr(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function $t(O,F){return On.apply(this,arguments)}(F,X)),F},Ur=O=>{const F=O.getProvider("messaging").getImmediate();return{getToken:ge=>function de(O,F){return Be.apply(this,arguments)}(F,ge)}};function Zr(){return fr.apply(this,arguments)}function fr(){return(fr=(0,te.Z)(function*(){try{yield(0,De.eu)()}catch(O){return!1}return"undefined"!=typeof window&&(0,De.hl)()&&(0,De.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function d1(){(0,Le._registerComponent)(new Ae.wA("messaging",g1,"PUBLIC")),(0,Le._registerComponent)(new Ae.wA("messaging-internal",Ur,"PRIVATE")),(0,Le.registerVersion)(Bt,"0.9.14"),(0,Le.registerVersion)(Bt,"0.9.14","esm2017")}();const W2="analytics",N2="firebase_id",b2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Z2="https://www.googletagmanager.com/gtag/js",v1=new ue.Yd("@firebase/analytics");function Eo(O){return Promise.all(O.map(F=>F.catch(X=>X)))}function Bs(O,F){const X=document.createElement("script");X.src=`${Z2}?l=${O}&id=${F}`,X.async=!0,document.head.appendChild(X)}function q2(O,F,X,ge,Ge,Qe){return z2.apply(this,arguments)}function z2(){return(z2=(0,te.Z)(function*(O,F,X,ge,Ge,Qe){const St=ge[Ge];try{if(St)yield F[St];else{const _n=(yield Eo(X)).find(jn=>jn.measurementId===Ge);_n&&(yield F[_n.appId])}}catch(un){v1.error(un)}O("config",Ge,Qe)})).apply(this,arguments)}function co(O,F,X,ge,Ge){return L2.apply(this,arguments)}function L2(){return(L2=(0,te.Z)(function*(O,F,X,ge,Ge){try{let Qe=[];if(Ge&&Ge.send_to){let St=Ge.send_to;Array.isArray(St)||(St=[St]);const un=yield Eo(X);for(const _n of St){const jn=un.find(Tn=>Tn.measurementId===_n),H1=jn&&F[jn.appId];if(!H1){Qe=[];break}Qe.push(H1)}}0===Qe.length&&(Qe=Object.values(F)),yield Promise.all(Qe),O("event",ge,Ge||{})}catch(Qe){v1.error(Qe)}})).apply(this,arguments)}function js(){const O=window.document.getElementsByTagName("script");for(const F of Object.values(O))if(F.src&&F.src.includes(Z2))return F;return null}const li=new De.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Y2=new class Pi{constructor(F={},X=1e3){this.throttleMetadata=F,this.intervalMillis=X}getThrottleMetadata(F){return this.throttleMetadata[F]}setThrottleMetadata(F,X){this.throttleMetadata[F]=X}deleteThrottleMetadata(F){delete this.throttleMetadata[F]}};function Io(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function ls(O){return ms.apply(this,arguments)}function ms(){return(ms=(0,te.Z)(function*(O){var F;const{appId:X,apiKey:ge}=O,Ge={method:"GET",headers:Io(ge)},Qe=b2.replace("{app-id}",X),St=yield fetch(Qe,Ge);if(200!==St.status&&304!==St.status){let un="";try{const _n=yield St.json();(null===(F=_n.error)||void 0===F?void 0:F.message)&&(un=_n.error.message)}catch(_n){}throw li.create("config-fetch-failed",{httpStatus:St.status,responseMessage:un})}return St.json()})).apply(this,arguments)}function Br(O){return us.apply(this,arguments)}function us(){return(us=(0,te.Z)(function*(O,F=Y2,X){const{appId:ge,apiKey:Ge,measurementId:Qe}=O.options;if(!ge)throw li.create("no-app-id");if(!Ge){if(Qe)return{measurementId:Qe,appId:ge};throw li.create("no-api-key")}const St=F.getThrottleMetadata(ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},un=new vs;return setTimeout((0,te.Z)(function*(){un.abort()}),void 0!==X?X:6e4),gs({appId:ge,apiKey:Ge,measurementId:Qe},St,un,F)})).apply(this,arguments)}function gs(O,F,X){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,te.Z)(function*(O,{throttleEndTimeMillis:F,backoffCount:X},ge,Ge=Y2){const{appId:Qe,measurementId:St}=O;try{yield Ns(ge,F)}catch(un){if(St)return v1.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${St} provided in the "measurementId" field in the local Firebase config. [${un.message}]`),{appId:Qe,measurementId:St};throw un}try{const un=yield ls(O);return Ge.deleteThrottleMetadata(Qe),un}catch(un){if(!Jr(un)){if(Ge.deleteThrottleMetadata(Qe),St)return v1.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${St} provided in the "measurementId" field in the local Firebase config. [${un.message}]`),{appId:Qe,measurementId:St};throw un}const _n=503===Number(un.customData.httpStatus)?(0,De.$s)(X,Ge.intervalMillis,30):(0,De.$s)(X,Ge.intervalMillis),jn={throttleEndTimeMillis:Date.now()+_n,backoffCount:X+1};return Ge.setThrottleMetadata(Qe,jn),v1.debug(`Calling attemptFetch again in ${_n} millis`),gs(O,jn,ge,Ge)}})).apply(this,arguments)}function Ns(O,F){return new Promise((X,ge)=>{const Ge=Math.max(F-Date.now(),0),Qe=setTimeout(X,Ge);O.addEventListener(()=>{clearTimeout(Qe),ge(li.create("fetch-throttle",{throttleEndTimeMillis:F}))})})}function Jr(O){if(!(O instanceof De.ZR&&O.customData))return!1;const F=Number(O.customData.httpStatus);return 429===F||500===F||503===F||504===F}class vs{constructor(){this.listeners=[]}addEventListener(F){this.listeners.push(F)}abort(){this.listeners.forEach(F=>F())}}function Ao(){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,te.Z)(function*(){if(!(0,De.hl)())return v1.warn(li.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,De.eu)()}catch(O){return v1.warn(li.create("indexeddb-unavailable",{errorInfo:O}).message),!1}return!0})).apply(this,arguments)}function Qi(){return(Qi=(0,te.Z)(function*(O,F,X,ge,Ge,Qe,St){var un;const _n=Br(O);_n.then(ji=>{X[ji.measurementId]=ji.appId,O.options.measurementId&&ji.measurementId!==O.options.measurementId&&v1.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${ji.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ji=>v1.error(ji)),F.push(_n);const jn=Ao().then(ji=>{if(ji)return ge.getId()}),[H1,Tn]=yield Promise.all([_n,jn]);js()||Bs(Qe,H1.measurementId),Ge("js",new Date);const br=null!==(un=null==St?void 0:St.config)&&void 0!==un?un:{};return br.origin="firebase",br.update=!0,null!=Tn&&(br[N2]=Tn),Ge("config",H1.measurementId,br),H1.measurementId})).apply(this,arguments)}class Ji{constructor(F){this.app=F}_delete(){return delete A[this.app.options.appId],Promise.resolve()}}let A={},E=[];const b={};let W,he,N="dataLayer",Se=!1;function Qn(O,F,X){!function rn(){const O=[];if((0,De.ru)()&&O.push("This is a browser extension environment."),(0,De.zI)()||O.push("Cookies are not available."),O.length>0){const F=O.map((ge,Ge)=>`(${Ge+1}) ${ge}`).join(" "),X=li.create("invalid-analytics-context",{errorInfo:F});v1.warn(X.message)}}();const ge=O.options.appId;if(!ge)throw li.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw li.create("no-api-key");v1.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=A[ge])throw li.create("already-exists",{id:ge});if(!Se){!function Di(O){let F=[];Array.isArray(window[O])?F=window[O]:window[O]=F}(N);const{wrappedGtag:Qe,gtagCore:St}=function u2(O,F,X,ge,Ge){let Qe=function(...St){window[ge].push(arguments)};return window[Ge]&&"function"==typeof window[Ge]&&(Qe=window[Ge]),window[Ge]=function K2(O,F,X,ge){function Qe(){return(Qe=(0,te.Z)(function*(St,un,_n){try{"event"===St?yield co(O,F,X,un,_n):"config"===St?yield q2(O,F,X,ge,un,_n):O("set",un)}catch(jn){v1.error(jn)}})).apply(this,arguments)}return function Ge(St,un,_n){return Qe.apply(this,arguments)}}(Qe,O,F,X),{gtagCore:Qe,wrappedGtag:window[Ge]}}(A,E,b,N,"gtag");he=Qe,W=St,Se=!0}return A[ge]=function Y1(O,F,X,ge,Ge,Qe,St){return Qi.apply(this,arguments)}(O,E,b,F,W,N,X),new Ji(O)}function P1(){return(P1=(0,te.Z)(function*(O,F,X,ge,Ge){if(Ge&&Ge.global)O("event",X,ge);else{const Qe=yield F;O("event",X,Object.assign(Object.assign({},ge),{send_to:Qe}))}})).apply(this,arguments)}function Q2(){return w1.apply(this,arguments)}function w1(){return(w1=(0,te.Z)(function*(){if((0,De.ru)()||!(0,De.zI)()||!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch(O){return!1}})).apply(this,arguments)}const lo="@firebase/analytics";!function va(){(0,Le._registerComponent)(new Ae.wA(W2,(F,{options:X})=>Qn(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,Le._registerComponent)(new Ae.wA("analytics-internal",function O(F){try{const X=F.getProvider(W2).getImmediate();return{logEvent:(ge,Ge,Qe)=>function Ua(O,F,X,ge){O=(0,De.m9)(O),function ln(O,F,X,ge,Ge){return P1.apply(this,arguments)}(he,A[O.app.options.appId],F,X,ge).catch(Ge=>v1.error(Ge))}(X,ge,Ge,Qe)}}catch(X){throw li.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,Le.registerVersion)(lo,"0.7.10"),(0,Le.registerVersion)(lo,"0.7.10","esm2017")}();var s4=B(4408),d2=B(7565);const xo=new class hi extends d2.v{}(class uo extends s4.o{constructor(F,X){super(F,X),this.scheduler=F,this.work=X}schedule(F,X=0){return X>0?super.schedule(F,X):(this.delay=X,this.state=F,this.scheduler.flush(this),this)}execute(F,X){return X>0||this.closed?super.execute(F,X):this._execute(F,X)}requestAsyncId(F,X,ge=0){return null!=ge&&ge>0||null==ge&&this.delay>0?super.requestAsyncId(F,X,ge):F.flush(this)}});var zs=B(4986),Ba=B(8505),Xe=B(9468),Si=B(5363);const Xi=new y.GfV("7.4.1"),ho="__angularfire_symbol__analyticsIsSupportedValue",e2="__angularfire_symbol__analyticsIsSupported",p2="__angularfire_symbol__remoteConfigIsSupportedValue",hs="__angularfire_symbol__remoteConfigIsSupported",J2="__angularfire_symbol__messagingIsSupportedValue",ya="__angularfire_symbol__messagingIsSupported";function fo(O,F,X){if(F){if(1===F.length)return F[0];const Qe=F.filter(St=>St.app===X);if(1===Qe.length)return Qe[0]}return X.container.getProvider(O).getImmediate({optional:!0})}globalThis[e2]||(globalThis[e2]=Q2().then(O=>globalThis[ho]=O).catch(()=>globalThis[ho]=!1)),globalThis[ya]||(globalThis[ya]=Zr().then(O=>globalThis[J2]=O).catch(()=>globalThis[J2]=!1)),globalThis[hs]||(globalThis[hs]=mi().then(O=>globalThis[p2]=O).catch(()=>globalThis[p2]=!1));const Do=(O,F)=>{const X=F?[F]:(0,D.C6)(),ge=[];return X.forEach(Ge=>{Ge.container.getProvider(O).instances.forEach(St=>{ge.includes(St)||ge.push(St)})}),ge};function _s(){}class qr{constructor(F,X=xo){this.zone=F,this.delegate=X}now(){return this.delegate.now()}schedule(F,X,ge){const Ge=this.zone;return this.delegate.schedule(function(St){Ge.runGuarded(()=>{F.apply(this,[St])})},X,ge)}}class po{constructor(F){this.zone=F,this.task=null}call(F,X){const ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_s,{},_s,_s)),X.pipe((0,Ba.b)({next:ge,complete:ge,error:ge})).subscribe(F).add(ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yi=(()=>{class O{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new qr(Zone.current)),this.insideAngular=X.run(()=>new qr(Zone.current,zs.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(X){return new(X||O)(y.LFG(y.R0b))},O.\u0275prov=y.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function T1(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function Ni(O){return T1(),function mo(O){return function(X){return(X=X.lift(new po(O.ngZone))).pipe((0,Xe.R)(O.outsideAngular),(0,Si.Q)(O.insideAngular))}}(T1())(O)}},2090:(jt,We,B)=>{B.d(We,{$s:()=>kn,BH:()=>Nt,DV:()=>vn,Dv:()=>gr,G6:()=>_t,GJ:()=>an,L:()=>ve,LL:()=>Ke,Mn:()=>qe,Pz:()=>Qt,Sg:()=>ht,UG:()=>tt,UI:()=>I1,US:()=>Ae,Wj:()=>Xt,Yr:()=>et,ZB:()=>pe,ZR:()=>Ze,b$:()=>kt,cI:()=>Yt,d:()=>ft,dS:()=>Kn,eu:()=>ot,g5:()=>te,gK:()=>vr,gQ:()=>r1,h$:()=>ue,hl:()=>le,hu:()=>D,jU:()=>dt,lb:()=>N1,m9:()=>i1,ne:()=>Wn,p$:()=>_e,pd:()=>n1,r3:()=>Rn,ru:()=>Oe,tV:()=>ze,uI:()=>zt,ug:()=>Gt,vZ:()=>c1,w1:()=>nt,w9:()=>fn,xO:()=>p1,xb:()=>Mn,z$:()=>vt,zI:()=>me,zd:()=>U1});const D=function(Ce,Ne){if(!Ce)throw te(Ne)},te=function(Ce){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Ce)},Le=function(Ce){const Ne=[];let be=0;for(let pt=0;pt<Ce.length;pt++){let Me=Ce.charCodeAt(pt);Me<128?Ne[be++]=Me:Me<2048?(Ne[be++]=Me>>6|192,Ne[be++]=63&Me|128):55296==(64512&Me)&&pt+1<Ce.length&&56320==(64512&Ce.charCodeAt(pt+1))?(Me=65536+((1023&Me)<<10)+(1023&Ce.charCodeAt(++pt)),Ne[be++]=Me>>18|240,Ne[be++]=Me>>12&63|128,Ne[be++]=Me>>6&63|128,Ne[be++]=63&Me|128):(Ne[be++]=Me>>12|224,Ne[be++]=Me>>6&63|128,Ne[be++]=63&Me|128)}return Ne},Ae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Ce,Ne){if(!Array.isArray(Ce))throw Error("encodeByteArray takes an array as a parameter");this.init_();const be=Ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,pt=[];for(let Me=0;Me<Ce.length;Me+=3){const ke=Ce[Me],rt=Me+1<Ce.length,Ft=rt?Ce[Me+1]:0,tn=Me+2<Ce.length,cn=tn?Ce[Me+2]:0;let Jn=(15&Ft)<<2|cn>>6,G1=63&cn;tn||(G1=64,rt||(Jn=64)),pt.push(be[ke>>2],be[(3&ke)<<4|Ft>>4],be[Jn],be[G1])}return pt.join("")},encodeString(Ce,Ne){return this.HAS_NATIVE_SUPPORT&&!Ne?btoa(Ce):this.encodeByteArray(Le(Ce),Ne)},decodeString(Ce,Ne){return this.HAS_NATIVE_SUPPORT&&!Ne?atob(Ce):function(Ce){const Ne=[];let be=0,pt=0;for(;be<Ce.length;){const Me=Ce[be++];if(Me<128)Ne[pt++]=String.fromCharCode(Me);else if(Me>191&&Me<224){const ke=Ce[be++];Ne[pt++]=String.fromCharCode((31&Me)<<6|63&ke)}else if(Me>239&&Me<365){const tn=((7&Me)<<18|(63&Ce[be++])<<12|(63&Ce[be++])<<6|63&Ce[be++])-65536;Ne[pt++]=String.fromCharCode(55296+(tn>>10)),Ne[pt++]=String.fromCharCode(56320+(1023&tn))}else{const ke=Ce[be++],rt=Ce[be++];Ne[pt++]=String.fromCharCode((15&Me)<<12|(63&ke)<<6|63&rt)}}return Ne.join("")}(this.decodeStringToByteArray(Ce,Ne))},decodeStringToByteArray(Ce,Ne){this.init_();const be=Ne?this.charToByteMapWebSafe_:this.charToByteMap_,pt=[];for(let Me=0;Me<Ce.length;){const ke=be[Ce.charAt(Me++)],Ft=Me<Ce.length?be[Ce.charAt(Me)]:0;++Me;const cn=Me<Ce.length?be[Ce.charAt(Me)]:64;++Me;const Jt=Me<Ce.length?be[Ce.charAt(Me)]:64;if(++Me,null==ke||null==Ft||null==cn||null==Jt)throw Error();pt.push(ke<<2|Ft>>4),64!==cn&&(pt.push(Ft<<4&240|cn>>2),64!==Jt&&pt.push(cn<<6&192|Jt))}return pt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Ce=0;Ce<this.ENCODED_VALS.length;Ce++)this.byteToCharMap_[Ce]=this.ENCODED_VALS.charAt(Ce),this.charToByteMap_[this.byteToCharMap_[Ce]]=Ce,this.byteToCharMapWebSafe_[Ce]=this.ENCODED_VALS_WEBSAFE.charAt(Ce),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Ce]]=Ce,Ce>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Ce)]=Ce,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Ce)]=Ce)}}},ue=function(Ce){const Ne=Le(Ce);return Ae.encodeByteArray(Ne,!0)},ve=function(Ce){return ue(Ce).replace(/\./g,"")},ze=function(Ce){try{return Ae.decodeString(Ce,!0)}catch(Ne){console.error("base64Decode failed: ",Ne)}return null};function _e(Ce){return pe(void 0,Ce)}function pe(Ce,Ne){if(!(Ne instanceof Object))return Ne;switch(Ne.constructor){case Date:return new Date(Ne.getTime());case Object:void 0===Ce&&(Ce={});break;case Array:Ce=[];break;default:return Ne}for(const be in Ne)!Ne.hasOwnProperty(be)||!je(be)||(Ce[be]=pe(Ce[be],Ne[be]));return Ce}function je(Ce){return"__proto__"!==Ce}class Nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ne,be)=>{this.resolve=Ne,this.reject=be})}wrapCallback(Ne){return(be,pt)=>{be?this.reject(be):this.resolve(pt),"function"==typeof Ne&&(this.promise.catch(()=>{}),1===Ne.length?Ne(be):Ne(be,pt))}}}function ht(Ce,Ne){if(Ce.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const pt=Ne||"demo-project",Me=Ce.iat||0,ke=Ce.sub||Ce.user_id;if(!ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rt=Object.assign({iss:`https://securetoken.google.com/${pt}`,aud:pt,iat:Me,exp:Me+3600,auth_time:Me,sub:ke,user_id:ke,firebase:{sign_in_provider:"custom",identities:{}}},Ce);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(rt)),""].join(".")}function vt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function zt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function tt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Ce){return!1}}function dt(){return"object"==typeof self&&self.self===self}function Oe(){const Ce="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Ce&&void 0!==Ce.id}function kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ft(){return vt().indexOf("Electron/")>=0}function nt(){const Ce=vt();return Ce.indexOf("MSIE ")>=0||Ce.indexOf("Trident/")>=0}function qe(){return vt().indexOf("MSAppHost/")>=0}function et(){return!1}function _t(){return!tt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){return"object"==typeof indexedDB}function ot(){return new Promise((Ce,Ne)=>{try{let be=!0;const pt="validate-browser-context-for-indexeddb-analytics-module",Me=self.indexedDB.open(pt);Me.onsuccess=()=>{Me.result.close(),be||self.indexedDB.deleteDatabase(pt),Ce(!0)},Me.onupgradeneeded=()=>{be=!1},Me.onerror=()=>{var ke;Ne((null===(ke=Me.error)||void 0===ke?void 0:ke.message)||"")}}catch(be){Ne(be)}})}function me(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ze extends Error{constructor(Ne,be,pt){super(be),this.code=Ne,this.customData=pt,this.name="FirebaseError",Object.setPrototypeOf(this,Ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(Ne,be,pt){this.service=Ne,this.serviceName=be,this.errors=pt}create(Ne,...be){const pt=be[0]||{},Me=`${this.service}/${Ne}`,ke=this.errors[Ne],rt=ke?function Et(Ce,Ne){return Ce.replace(Vt,(be,pt)=>{const Me=Ne[pt];return null!=Me?String(Me):`<${pt}?>`})}(ke,pt):"Error";return new Ze(Me,`${this.serviceName}: ${rt} (${Me}).`,pt)}}const Vt=/\{\$([^}]+)}/g;function Yt(Ce){return JSON.parse(Ce)}function Qt(Ce){return JSON.stringify(Ce)}const it=function(Ce){let Ne={},be={},pt={},Me="";try{const ke=Ce.split(".");Ne=Yt(ze(ke[0])||""),be=Yt(ze(ke[1])||""),Me=ke[2],pt=be.d||{},delete be.d}catch(ke){}return{header:Ne,claims:be,data:pt,signature:Me}},fn=function(Ce){const be=it(Ce).claims;return!!be&&"object"==typeof be&&be.hasOwnProperty("iat")},an=function(Ce){const Ne=it(Ce).claims;return"object"==typeof Ne&&!0===Ne.admin};function Rn(Ce,Ne){return Object.prototype.hasOwnProperty.call(Ce,Ne)}function vn(Ce,Ne){if(Object.prototype.hasOwnProperty.call(Ce,Ne))return Ce[Ne]}function Mn(Ce){for(const Ne in Ce)if(Object.prototype.hasOwnProperty.call(Ce,Ne))return!1;return!0}function I1(Ce,Ne,be){const pt={};for(const Me in Ce)Object.prototype.hasOwnProperty.call(Ce,Me)&&(pt[Me]=Ne.call(be,Ce[Me],Me,Ce));return pt}function c1(Ce,Ne){if(Ce===Ne)return!0;const be=Object.keys(Ce),pt=Object.keys(Ne);for(const Me of be){if(!pt.includes(Me))return!1;const ke=Ce[Me],rt=Ne[Me];if(A1(ke)&&A1(rt)){if(!c1(ke,rt))return!1}else if(ke!==rt)return!1}for(const Me of pt)if(!be.includes(Me))return!1;return!0}function A1(Ce){return null!==Ce&&"object"==typeof Ce}function p1(Ce){const Ne=[];for(const[be,pt]of Object.entries(Ce))Array.isArray(pt)?pt.forEach(Me=>{Ne.push(encodeURIComponent(be)+"="+encodeURIComponent(Me))}):Ne.push(encodeURIComponent(be)+"="+encodeURIComponent(pt));return Ne.length?"&"+Ne.join("&"):""}function U1(Ce){const Ne={};return Ce.replace(/^\?/,"").split("&").forEach(pt=>{if(pt){const[Me,ke]=pt.split("=");Ne[decodeURIComponent(Me)]=decodeURIComponent(ke)}}),Ne}function n1(Ce){const Ne=Ce.indexOf("?");if(!Ne)return"";const be=Ce.indexOf("#",Ne);return Ce.substring(Ne,be>0?be:void 0)}class r1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ne=1;Ne<this.blockSize;++Ne)this.pad_[Ne]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ne,be){be||(be=0);const pt=this.W_;if("string"==typeof Ne)for(let Jt=0;Jt<16;Jt++)pt[Jt]=Ne.charCodeAt(be)<<24|Ne.charCodeAt(be+1)<<16|Ne.charCodeAt(be+2)<<8|Ne.charCodeAt(be+3),be+=4;else for(let Jt=0;Jt<16;Jt++)pt[Jt]=Ne[be]<<24|Ne[be+1]<<16|Ne[be+2]<<8|Ne[be+3],be+=4;for(let Jt=16;Jt<80;Jt++){const Jn=pt[Jt-3]^pt[Jt-8]^pt[Jt-14]^pt[Jt-16];pt[Jt]=4294967295&(Jn<<1|Jn>>>31)}let cn,Zn,Me=this.chain_[0],ke=this.chain_[1],rt=this.chain_[2],Ft=this.chain_[3],tn=this.chain_[4];for(let Jt=0;Jt<80;Jt++){Jt<40?Jt<20?(cn=Ft^ke&(rt^Ft),Zn=1518500249):(cn=ke^rt^Ft,Zn=1859775393):Jt<60?(cn=ke&rt|Ft&(ke|rt),Zn=2400959708):(cn=ke^rt^Ft,Zn=3395469782);const Jn=(Me<<5|Me>>>27)+cn+tn+Zn+pt[Jt]&4294967295;tn=Ft,Ft=rt,rt=4294967295&(ke<<30|ke>>>2),ke=Me,Me=Jn}this.chain_[0]=this.chain_[0]+Me&4294967295,this.chain_[1]=this.chain_[1]+ke&4294967295,this.chain_[2]=this.chain_[2]+rt&4294967295,this.chain_[3]=this.chain_[3]+Ft&4294967295,this.chain_[4]=this.chain_[4]+tn&4294967295}update(Ne,be){if(null==Ne)return;void 0===be&&(be=Ne.length);const pt=be-this.blockSize;let Me=0;const ke=this.buf_;let rt=this.inbuf_;for(;Me<be;){if(0===rt)for(;Me<=pt;)this.compress_(Ne,Me),Me+=this.blockSize;if("string"==typeof Ne){for(;Me<be;)if(ke[rt]=Ne.charCodeAt(Me),++rt,++Me,rt===this.blockSize){this.compress_(ke),rt=0;break}}else for(;Me<be;)if(ke[rt]=Ne[Me],++rt,++Me,rt===this.blockSize){this.compress_(ke),rt=0;break}}this.inbuf_=rt,this.total_+=be}digest(){const Ne=[];let be=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Me=this.blockSize-1;Me>=56;Me--)this.buf_[Me]=255&be,be/=256;this.compress_(this.buf_);let pt=0;for(let Me=0;Me<5;Me++)for(let ke=24;ke>=0;ke-=8)Ne[pt]=this.chain_[Me]>>ke&255,++pt;return Ne}}function Wn(Ce,Ne){const be=new dn(Ce,Ne);return be.subscribe.bind(be)}class dn{constructor(Ne,be){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=be,this.task.then(()=>{Ne(this)}).catch(pt=>{this.error(pt)})}next(Ne){this.forEachObserver(be=>{be.next(Ne)})}error(Ne){this.forEachObserver(be=>{be.error(Ne)}),this.close(Ne)}complete(){this.forEachObserver(Ne=>{Ne.complete()}),this.close()}subscribe(Ne,be,pt){let Me;if(void 0===Ne&&void 0===be&&void 0===pt)throw new Error("Missing Observer.");Me=function xn(Ce,Ne){if("object"!=typeof Ce||null===Ce)return!1;for(const be of Ne)if(be in Ce&&"function"==typeof Ce[be])return!0;return!1}(Ne,["next","error","complete"])?Ne:{next:Ne,error:be,complete:pt},void 0===Me.next&&(Me.next=ie),void 0===Me.error&&(Me.error=ie),void 0===Me.complete&&(Me.complete=ie);const ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Me.error(this.finalError):Me.complete()}catch(rt){}}),this.observers.push(Me),ke}unsubscribeOne(Ne){void 0===this.observers||void 0===this.observers[Ne]||(delete this.observers[Ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ne){if(!this.finalized)for(let be=0;be<this.observers.length;be++)this.sendOne(be,Ne)}sendOne(Ne,be){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ne])try{be(this.observers[Ne])}catch(pt){"undefined"!=typeof console&&console.error&&console.error(pt)}})}close(Ne){this.finalized||(this.finalized=!0,void 0!==Ne&&(this.finalError=Ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ie(){}const gr=function(Ce,Ne,be,pt){let Me;if(pt<Ne?Me="at least "+Ne:pt>be&&(Me=0===be?"none":"no more than "+be),Me)throw new Error(Ce+" failed: Was called with "+pt+(1===pt?" argument.":" arguments.")+" Expects "+Me+".")};function vr(Ce,Ne){return`${Ce} failed: ${Ne} argument `}function Xt(Ce,Ne,be,pt){if((!pt||be)&&"function"!=typeof be)throw new Error(vr(Ce,Ne)+"must be a valid function.")}function N1(Ce,Ne,be,pt){if((!pt||be)&&("object"!=typeof be||null===be))throw new Error(vr(Ce,Ne)+"must be a valid context object.")}const Kn=function(Ce){const Ne=[];let be=0;for(let pt=0;pt<Ce.length;pt++){let Me=Ce.charCodeAt(pt);if(Me>=55296&&Me<=56319){const ke=Me-55296;pt++,D(pt<Ce.length,"Surrogate pair missing trail surrogate."),Me=65536+(ke<<10)+(Ce.charCodeAt(pt)-56320)}Me<128?Ne[be++]=Me:Me<2048?(Ne[be++]=Me>>6|192,Ne[be++]=63&Me|128):Me<65536?(Ne[be++]=Me>>12|224,Ne[be++]=Me>>6&63|128,Ne[be++]=63&Me|128):(Ne[be++]=Me>>18|240,Ne[be++]=Me>>12&63|128,Ne[be++]=Me>>6&63|128,Ne[be++]=63&Me|128)}return Ne},Gt=function(Ce){let Ne=0;for(let be=0;be<Ce.length;be++){const pt=Ce.charCodeAt(be);pt<128?Ne++:pt<2048?Ne+=2:pt>=55296&&pt<=56319?(Ne+=4,be++):Ne+=3}return Ne};function kn(Ce,Ne=1e3,be=2){const pt=Ne*Math.pow(be,Ce),Me=Math.round(.5*pt*(Math.random()-.5)*2);return Math.min(144e5,pt+Me)}function i1(Ce){return Ce&&Ce._delegate?Ce._delegate:Ce}},534:(jt,We,B)=>{B.d(We,{I7:()=>Vr,IL:()=>$r,XC:()=>Yr,Xc:()=>an,cw:()=>A1});var an={prefix:"far",iconName:"edit",icon:[576,512,[],"f044","M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"]},A1={prefix:"far",iconName:"file-alt",icon:[384,512,[],"f15c","M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"]},Yr={prefix:"far",iconName:"paper-plane",icon:[512,512,[],"f1d8","M440 6.5L24 246.4c-34.4 19.9-31.1 70.8 5.7 85.9L144 379.6V464c0 46.4 59.2 65.5 86.6 28.6l43.8-59.1 111.9 46.2c5.9 2.4 12.1 3.6 18.3 3.6 8.2 0 16.3-2.1 23.6-6.2 12.8-7.2 21.6-20 23.9-34.5l59.4-387.2c6.1-40.1-36.9-68.8-71.5-48.9zM192 464v-64.6l36.6 15.1L192 464zm212.6-28.7l-153.8-63.5L391 169.5c10.7-15.5-9.5-33.5-23.7-21.2L155.8 332.6 48 288 464 48l-59.4 387.3z"]},Vr={prefix:"far",iconName:"trash-alt",icon:[448,512,[],"f2ed","M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"]},$r={prefix:"far",iconName:"user",icon:[448,512,[],"f007","M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"]}},801:(jt,We,B)=>{B.d(We,{Eo4:()=>I4,FU$:()=>P1,G_j:()=>V2,KS0:()=>xi,Mdf:()=>Ua,Ry6:()=>bi,XKl:()=>F1,Xf_:()=>$a,acZ:()=>it,jLD:()=>Y3,m08:()=>r0,ptq:()=>En,r8p:()=>Y4,wn1:()=>$6});var it={prefix:"fas",iconName:"arrow-left",icon:[448,512,[],"f060","M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"]},bi={prefix:"fas",iconName:"calendar-check",icon:[448,512,[],"f274","M436 160H12c-6.627 0-12-5.373-12-12v-36c0-26.51 21.49-48 48-48h48V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h128V12c0-6.627 5.373-12 12-12h40c6.627 0 12 5.373 12 12v52h48c26.51 0 48 21.49 48 48v36c0 6.627-5.373 12-12 12zM12 192h424c6.627 0 12 5.373 12 12v260c0 26.51-21.49 48-48 48H48c-26.51 0-48-21.49-48-48V204c0-6.627 5.373-12 12-12zm333.296 95.947l-28.169-28.398c-4.667-4.705-12.265-4.736-16.97-.068L194.12 364.665l-45.98-46.352c-4.667-4.705-12.266-4.736-16.971-.068l-28.397 28.17c-4.705 4.667-4.736 12.265-.068 16.97l82.601 83.269c4.667 4.705 12.265 4.736 16.97.068l142.953-141.805c4.705-4.667 4.736-12.265.068-16.97z"]},En={prefix:"fas",iconName:"chevron-down",icon:[448,512,[],"f078","M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"]},xi={prefix:"fas",iconName:"crosshairs",icon:[512,512,[],"f05b","M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"]},P1={prefix:"fas",iconName:"envelope",icon:[512,512,[],"f0e0","M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"]},Ua={prefix:"fas",iconName:"eye",icon:[576,512,[],"f06e","M572.52 241.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400a144 144 0 1 1 144-144 143.93 143.93 0 0 1-144 144zm0-240a95.31 95.31 0 0 0-25.31 3.79 47.85 47.85 0 0 1-66.9 66.9A95.78 95.78 0 1 0 288 160z"]},V2={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"]},$a={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[],"f19d","M622.34 153.2L343.4 67.5c-15.2-4.67-31.6-4.67-46.79 0L17.66 153.2c-23.54 7.23-23.54 38.36 0 45.59l48.63 14.94c-10.67 13.19-17.23 29.28-17.88 46.9C38.78 266.15 32 276.11 32 288c0 10.78 5.68 19.85 13.86 25.65L20.33 428.53C18.11 438.52 25.71 448 35.94 448h56.11c10.24 0 17.84-9.48 15.62-19.47L82.14 313.65C90.32 307.85 96 298.78 96 288c0-11.57-6.47-21.25-15.66-26.87.76-15.02 8.44-28.3 20.69-36.72L296.6 284.5c9.06 2.78 26.44 6.25 46.79 0l278.95-85.7c23.55-7.24 23.55-38.36 0-45.6zM352.79 315.09c-28.53 8.76-52.84 3.92-65.59 0l-145.02-44.55L128 384c0 35.35 85.96 64 192 64s192-28.65 192-64l-14.18-113.47-145.03 44.56z"]},F1={prefix:"fas",iconName:"headset",icon:[512,512,[],"f590","M192 208c0-17.67-14.33-32-32-32h-16c-35.35 0-64 28.65-64 64v48c0 35.35 28.65 64 64 64h16c17.67 0 32-14.33 32-32V208zm176 144c35.35 0 64-28.65 64-64v-48c0-35.35-28.65-64-64-64h-16c-17.67 0-32 14.33-32 32v112c0 17.67 14.33 32 32 32h16zM256 0C113.18 0 4.58 118.83 0 256v16c0 8.84 7.16 16 16 16h16c8.84 0 16-7.16 16-16v-16c0-114.69 93.31-208 208-208s208 93.31 208 208h-.12c.08 2.43.12 165.72.12 165.72 0 23.35-18.93 42.28-42.28 42.28H320c0-26.51-21.49-48-48-48h-32c-26.51 0-48 21.49-48 48s21.49 48 48 48h181.72c49.86 0 90.28-40.42 90.28-90.28V256C507.42 118.83 398.82 0 256 0z"]},I4={prefix:"fas",iconName:"phone-volume",icon:[384,512,[],"f2a0","M97.333 506.966c-129.874-129.874-129.681-340.252 0-469.933 5.698-5.698 14.527-6.632 21.263-2.422l64.817 40.513a17.187 17.187 0 0 1 6.849 20.958l-32.408 81.021a17.188 17.188 0 0 1-17.669 10.719l-55.81-5.58c-21.051 58.261-20.612 122.471 0 179.515l55.811-5.581a17.188 17.188 0 0 1 17.669 10.719l32.408 81.022a17.188 17.188 0 0 1-6.849 20.958l-64.817 40.513a17.19 17.19 0 0 1-21.264-2.422zM247.126 95.473c11.832 20.047 11.832 45.008 0 65.055-3.95 6.693-13.108 7.959-18.718 2.581l-5.975-5.726c-3.911-3.748-4.793-9.622-2.261-14.41a32.063 32.063 0 0 0 0-29.945c-2.533-4.788-1.65-10.662 2.261-14.41l5.975-5.726c5.61-5.378 14.768-4.112 18.718 2.581zm91.787-91.187c60.14 71.604 60.092 175.882 0 247.428-4.474 5.327-12.53 5.746-17.552.933l-5.798-5.557c-4.56-4.371-4.977-11.529-.93-16.379 49.687-59.538 49.646-145.933 0-205.422-4.047-4.85-3.631-12.008.93-16.379l5.798-5.557c5.022-4.813 13.078-4.394 17.552.933zm-45.972 44.941c36.05 46.322 36.108 111.149 0 157.546-4.39 5.641-12.697 6.251-17.856 1.304l-5.818-5.579c-4.4-4.219-4.998-11.095-1.285-15.931 26.536-34.564 26.534-82.572 0-117.134-3.713-4.836-3.115-11.711 1.285-15.931l5.818-5.579c5.159-4.947 13.466-4.337 17.856 1.304z"]},Y4={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},$6={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},Y3={prefix:"fas",iconName:"sign-out-alt",icon:[512,512,[],"f2f5","M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"]},r0={prefix:"fas",iconName:"user-circle",icon:[496,512,[],"f2bd","M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"]}},4546:(jt,We,B)=>{B.d(We,{O:()=>De});var y=B(5839),D=B(9808),te=B(9444),Le=B(5e3);let De=(()=>{class Ae{}return Ae.\u0275fac=function(ve){return new(ve||Ae)},Ae.\u0275mod=Le.oAB({type:Ae}),Ae.\u0275inj=Le.cJS({imports:[[D.ez,y.Bz,te.uH]]}),Ae})()},554:(jt,We,B)=>{B.d(We,{r:()=>D});var y=B(5e3);let D=(()=>{class te{constructor(){this.viewEvent=new y.vpe}onOffHeader(De){this.viewEvent.emit(De)}}return te.\u0275fac=function(De){return new(De||te)},te.\u0275prov=y.Yz7({token:te,factory:te.\u0275fac,providedIn:"root"}),te})()},892:(jt,We,B)=>{B.d(We,{e:()=>te});var y=B(5e3),D=B(1205);let te=(()=>{class Le{constructor(Ae){this.afa=Ae}login(Ae){return this.afa.signInWithEmailAndPassword(Ae.email,Ae.password)}register(Ae){return this.afa.createUserWithEmailAndPassword(Ae.email,Ae.password)}logout(){return this.afa.signOut()}getAuth(){return this.afa}}return Le.\u0275fac=function(Ae){return new(Ae||Le)(y.LFG(D.zQ))},Le.\u0275prov=y.Yz7({token:Le,factory:Le.\u0275fac,providedIn:"root"}),Le})()},4141:(jt,We,B)=>{B.d(We,{h:()=>Le});var y=B(4004),D=B(5e3),te=B(7407);let Le=(()=>{class De{constructor(ue){this.afs=ue,this.funil=this.afs.collection("Funil"),this.vendedor=this.afs.collection("Vendedor"),this.tarefa=this.afs.collection("Tarefa"),this.produto=this.afs.collection("Produto"),this.landing=this.afs.collection("Landing"),this.responsavel=this.afs.collection("Responsavel"),this.campanhas=this.afs.collection("Campanha"),this.clientes=this.afs.collection("Clientes"),this.etapa=this.afs.collection("Etapa")}criarFunil(ue,ve){return this.afs.collection("Funil").doc(ue).set(ve)}getFunil(){return this.funil.snapshotChanges().pipe((0,y.U)(ue=>ue.map(ve=>{const ze=ve.payload.doc.data();return Object.assign({id:ve.payload.doc.id},ze)})))}getFunilId(ue){return this.afs.collection("Funil",ze=>ze.where("id","==",ue)).valueChanges()}editarFunil(ue,ve){return this.afs.collection("Funil").doc(ue).update(ve)}cadastrarVendedor(ue,ve){return this.afs.collection("Vendedor").doc(ue).set(ve)}getVendedor(){return this.vendedor.snapshotChanges().pipe((0,y.U)(ue=>ue.map(ve=>{const ze=ve.payload.doc.data();return Object.assign({id:ve.payload.doc.id},ze)})))}getvendedorId(ue){return this.afs.collection("Vendedor",ze=>ze.where("id","==",ue)).valueChanges()}editarVendedor(ue,ve){return this.afs.collection("Vendedor").doc(ue).update(ve)}addTarefa(ue,ve){return this.afs.collection("Tarefa").doc(ue).set(ve)}getTarefa(){return this.tarefa.snapshotChanges().pipe((0,y.U)(ue=>ue.map(ve=>{const ze=ve.payload.doc.data();return Object.assign({id:ve.payload.doc.id},ze)})))}addProduto(ue,ve){return this.afs.collection("Produto").doc(ue).set(ve)}getProdutos(){return this.produto.snapshotChanges().pipe((0,y.U)(ue=>ue.map(ve=>{const ze=ve.payload.doc.data();return Object.assign({id:ve.payload.doc.id},ze)})))}editarProdutos(ue,ve){return this.afs.collection("Produto").doc(ue).update(ve)}addLanding(ue,ve){return this.afs.collection("Landing").doc(ue).set(ve)}getCampanha(){return this.landing.snapshotChanges().pipe((0,y.U)(ue=>ue.map(ve=>{const ze=ve.payload.doc.data();return Object.assign({id:ve.payload.doc.id},ze)})))}getLandingId(ue){return this.afs.collection("Landing",ze=>ze.where("id","==",ue)).valueChanges()}editarlanding(ue,ve){return this.afs.collection("Landing").doc(ue).update(ve)}exluirLanding(ue){return this.afs.collection("Landing").doc(ue).delete()}getCampanhaId(ue){return this.afs.collection("Landing",ze=>ze.where("link","==",ue)).valueChanges()}addCliente(ue,ve){return this.afs.collection("Clientes").doc(ue).set(ve)}exluirFunil(ue){return this.afs.collection("Funil").doc(ue).delete()}addEtapa(ue,ve){return this.afs.collection("Etapa").doc(ue).set(ve)}getFunilEtapa(ue){return this.afs.collection("Funil",ze=>ze.where("id","==",ue)).valueChanges()}getFunilEtapaInteressado(ue,ve){return this.afs.collection("Etapa",_e=>_e.where("idfunil","==",ue).where("etapa","==",ve)).valueChanges()}getEtapa(){return this.etapa.snapshotChanges().pipe((0,y.U)(ue=>ue.map(ve=>{const ze=ve.payload.doc.data();return Object.assign({id:ve.payload.doc.id},ze)})))}getprodutovalor(ue){return this.afs.collection("Produto",ze=>ze.where("nome","==",ue)).valueChanges()}addRelatorioValores(ue,ve){return this.afs.collection("Relatorio Etapas").doc(ue).set(ve)}getCliente(ue){return this.afs.collection("Clientes",ze=>ze.where("id","==",ue)).valueChanges()}getClienteEtapa(ue){return this.afs.collection("Etapa",ze=>ze.where("idcliente","==",ue)).valueChanges()}editarEtapa(ue,ve){return this.afs.collection("Etapa").doc(ue).update(ve)}getClienteFunil(ue){return this.afs.collection("Etapa",ze=>ze.where("idfunil","==",ue)).valueChanges()}}return De.\u0275fac=function(ue){return new(ue||De)(D.LFG(te.ST))},De.\u0275prov=D.Yz7({token:De,factory:De.\u0275fac,providedIn:"root"}),De})()},3674:(jt,We,B)=>{var y=B(2313),D=B(5e3),te=B(5839),Le=B(534),De=B(801),Ae=B(554),ue=B(9444),ve=B(9808),ze=B(2382);function _e(h,l){if(1&h&&(D.TgZ(0,"div",49)(1,"div",21)(2,"p",50),D._uU(3),D.qZA(),D.TgZ(4,"p",51),D._uU(5),D.qZA()(),D.TgZ(6,"div",52)(7,"p",53),D._uU(8),D.qZA()()()),2&h){const a=l.$implicit;D.xp6(3),D.Oqu(a.name),D.xp6(2),D.Oqu(a.action),D.xp6(3),D.Oqu(a.date)}}const pe=function(){return["/landingPage"]};let je=(()=>{class h{constructor(a){this.headerService=a,this.landing=Le.cw,this.funnel=De.G_j,this.seller=De.XKl,this.client=Le.IL,this.contatos=15,this.vendas=30,this.tarefas=23,this.ganho=600,this.atividades=[{name:"Mario Becker",action:"Fez uma anota\xe7\xe3o na etapa prospec\xe7\xe3o",date:"em 18/06/2021 \xe1s 16:00"},{name:"Camila Santos",action:"Fez uma liga\xe7\xe3o",date:"em 18/06/2021 \xe1s 13:00"},{name:"Marlene Silva",action:"enviou um email",date:"em 15/06/2021 \xe1s 16:00"},{name:"Joyce Carvalho",action:"Enviou uma mensagem via Whatsapp",date:"em 14/06/2021 \xe1s 14:00"}],this.taxaCoversao="20%",this.perdas=90,this.valorPerdido=684}ngOnInit(){this.headerService.onOffHeader(!0)}backPage(){sessionStorage.setItem("back","/home")}timeSelect(a){let p=function(w,T,H){document.getElementById(w).style.borderBottom="5px solid #5855d6",document.getElementById(T).style.borderBottom="none",document.getElementById(H).style.borderBottom="none"};"day"==a&&(this.contatos=15,this.vendas=30,this.tarefas=23,this.ganho=600,this.taxaCoversao="13%",this.perdas=90,this.valorPerdido=684,p(a,"week","mouth")),"week"==a&&(this.contatos=103,this.vendas=89,this.tarefas=205,this.ganho=432,this.taxaCoversao="54%",this.perdas=198,this.valorPerdido=1230,p(a,"day","mouth")),"mouth"==a&&(this.contatos=783,this.vendas=186,this.tarefas=982,this.ganho=1180,this.taxaCoversao="65%",this.perdas=350,this.valorPerdido=3625,p(a,"day","week"))}}return h.\u0275fac=function(a){return new(a||h)(D.Y36(Ae.r))},h.\u0275cmp=D.Xpm({type:h,selectors:[["app-home"]],decls:141,vars:21,consts:[[1,"content"],[1,"cards-content"],[1,"user-text"],[1,"user"],[1,"title"],[1,"cards-selectors"],["id","landing",1,"card-landing",3,"routerLink"],[1,"landing"],[3,"icon"],["id","funnel","routerLink","/funil",1,"card-funnel"],[1,"funnel"],["id","seller","routerLink","/vendedor",1,"card-seller"],[1,"seller"],["id","client","routerLink","/cliente",1,"card-client"],[1,"client"],[1,"date-selector"],["id","day",2,"border-bottom","5px solid #5855d6",3,"click"],["id","week",3,"click"],["id","mouth",3,"click"],[1,"info-content"],[1,"resume"],[1,"info"],[1,"contacts"],[1,"tag"],[1,"sales"],[1,"tasks"],[1,"gain"],[1,"activity-flow"],[1,"activities"],["class","history",4,"ngFor","ngForOf"],[1,"funnel-content"],[1,"sales-funnel"],[1,"type-funnel"],[1,"type"],["value","Whatsapp"],[1,"info-types"],[1,"pass"],[1,"stay"],[1,"lost"],[1,"prevision"],[1,"inform-content"],[1,"inform"],[1,"blue"],[1,"yellow"],[1,"red"],[1,"green"],[1,"final-content"],[1,"final-info"],[1,"black"],[1,"history"],[1,"name"],[1,"activity"],[1,"timing"],[1,"time"]],template:function(a,p){1&a&&(D.TgZ(0,"main")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"p"),D._uU(6,"Ol\xe1, Victor!"),D.qZA()(),D.TgZ(7,"div",4)(8,"p"),D._uU(9,"Acesso R\xe1pido"),D.qZA()()(),D.TgZ(10,"div",5)(11,"div",6)(12,"div",7),D._UZ(13,"fa-icon",8),D.TgZ(14,"h2"),D._uU(15,"Landing Page"),D.qZA()()(),D.TgZ(16,"div",9)(17,"div",10),D._UZ(18,"fa-icon",8),D.TgZ(19,"h2"),D._uU(20,"Funil"),D.qZA()()(),D.TgZ(21,"div",11)(22,"div",12),D._UZ(23,"fa-icon",8),D.TgZ(24,"h2"),D._uU(25,"Vendedor"),D.qZA()()(),D.TgZ(26,"div",13)(27,"div",14),D._UZ(28,"fa-icon",8),D.TgZ(29,"h2"),D._uU(30,"Cliente"),D.qZA()()()()(),D.TgZ(31,"div",15)(32,"button",16),D.NdJ("click",function(){return p.timeSelect("day")}),D._uU(33,"Hoje"),D.qZA(),D.TgZ(34,"button",17),D.NdJ("click",function(){return p.timeSelect("week")}),D._uU(35,"Semana"),D.qZA(),D.TgZ(36,"button",18),D.NdJ("click",function(){return p.timeSelect("mouth")}),D._uU(37,"M\xeas"),D.qZA()(),D.TgZ(38,"div",19)(39,"div",20)(40,"p",4),D._uU(41,"Resumo"),D.qZA(),D.TgZ(42,"div",21)(43,"div",22)(44,"h2"),D._uU(45),D.qZA(),D.TgZ(46,"p",23),D._uU(47,"Contatos"),D.qZA()(),D.TgZ(48,"div",24)(49,"h2"),D._uU(50,"23032"),D.qZA(),D.TgZ(51,"p",23),D._uU(52,"Vendas"),D.qZA()(),D.TgZ(53,"div",25)(54,"h2"),D._uU(55),D.qZA(),D.TgZ(56,"p",23),D._uU(57,"Tarefas"),D.qZA()(),D.TgZ(58,"div",26)(59,"h2"),D._uU(60),D.ALo(61,"currency"),D.qZA(),D.TgZ(62,"p",23),D._uU(63,"Ganhos"),D.qZA()()()(),D.TgZ(64,"div",27)(65,"p",4),D._uU(66,"Fluxo de Atividade"),D.qZA(),D.TgZ(67,"div",28),D.YNc(68,_e,9,3,"div",29),D.qZA()()(),D.TgZ(69,"div",30)(70,"div",31)(71,"div",4)(72,"p"),D._uU(73,"Funil de vendas"),D.qZA(),D.TgZ(74,"div",32)(75,"p"),D._uU(76,"Tipo de Funil:"),D.qZA(),D.TgZ(77,"select",33)(78,"option",34)(79,"p"),D._uU(80,"Whatsapp"),D.qZA()()()()(),D.TgZ(81,"div",35)(82,"button",36),D._uU(83,"O que passou"),D.qZA(),D.TgZ(84,"button",37),D._uU(85,"O que ficou"),D.qZA(),D.TgZ(86,"button",38),D._uU(87,"O que perdeu"),D.qZA(),D.TgZ(88,"button",39),D._uU(89,"Previs\xe3o"),D.qZA()(),D.TgZ(90,"div",40)(91,"div",41)(92,"p"),D._uU(93,"Interessados"),D.qZA(),D.TgZ(94,"button",42),D._uU(95,"1200"),D.qZA(),D.TgZ(96,"button",43),D._uU(97,"1200"),D.qZA(),D.TgZ(98,"button",44),D._uU(99,"1200"),D.qZA(),D.TgZ(100,"button",45),D._uU(101,"1200"),D.qZA()(),D.TgZ(102,"div",41)(103,"p"),D._uU(104,"Demonstra\xe7\xf5es"),D.qZA(),D.TgZ(105,"button",42),D._uU(106,"1200"),D.qZA(),D.TgZ(107,"button",43),D._uU(108,"1200"),D.qZA(),D.TgZ(109,"button",44),D._uU(110,"1200"),D.qZA(),D.TgZ(111,"button",45),D._uU(112,"1200"),D.qZA()(),D.TgZ(113,"div",41)(114,"p"),D._uU(115,"Negocia\xe7\xf5es"),D.qZA(),D.TgZ(116,"button",42),D._uU(117,"1200"),D.qZA(),D.TgZ(118,"button",43),D._uU(119,"1200"),D.qZA(),D.TgZ(120,"button",44),D._uU(121,"1200"),D.qZA(),D.TgZ(122,"button",45),D._uU(123,"1200"),D.qZA()()(),D.TgZ(124,"div",46)(125,"div",47)(126,"button",42),D._uU(127,"Taxa de convers\xe3o"),D.qZA(),D.TgZ(128,"h2"),D._uU(129),D.qZA()(),D.TgZ(130,"div",47)(131,"button",44),D._uU(132,"Perdas"),D.qZA(),D.TgZ(133,"h2"),D._uU(134),D.qZA()(),D.TgZ(135,"div",47)(136,"button",48),D._uU(137,"Valor Perdido"),D.qZA(),D.TgZ(138,"h2"),D._uU(139),D.ALo(140,"currency"),D.qZA()()()()()()()),2&a&&(D.xp6(11),D.Q6J("routerLink",D.DdM(20,pe)),D.xp6(2),D.Q6J("icon",p.landing),D.xp6(5),D.Q6J("icon",p.funnel),D.xp6(5),D.Q6J("icon",p.seller),D.xp6(5),D.Q6J("icon",p.client),D.xp6(17),D.Oqu(p.contatos),D.xp6(10),D.Oqu(p.tarefas),D.xp6(5),D.Oqu(D.Dn7(61,12,p.ganho,"BRL","symbol")),D.xp6(8),D.Q6J("ngForOf",p.atividades),D.xp6(61),D.Oqu(p.taxaCoversao),D.xp6(5),D.Oqu(p.perdas),D.xp6(5),D.Oqu(D.Dn7(140,16,p.valorPerdido,"BRL","symbol")))},directives:[te.rH,ue.BN,ve.sg,ze.YN,ze.Kr],pipes:[ve.H9],styles:["main[_ngcontent-%COMP%]{display:flex;justify-content:center}.content[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;width:70%;max-width:1200px}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]{margin-top:50px}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .user-text[_ngcontent-%COMP%]{text-align:center}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .user-text[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .user-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:20px}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .user-text[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#84a2c3}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:center;align-items:center;height:200px}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:16px;margin-top:10px}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{width:max-content;font-size:50px;color:#fff}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   .card-landing[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:30px;padding:20px;width:200px;margin:10px;box-shadow:2px 2px 5px gray;background-color:#9e77f5}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   .card-landing[_ngcontent-%COMP%]   .landing[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:max-content}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   .card-funnel[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:30px;padding:20px;width:200px;margin:10px;background-color:#efab35;box-shadow:2px 2px 5px gray}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   .card-funnel[_ngcontent-%COMP%]   .funnel[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   .card-seller[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:30px;padding:20px;width:200px;margin:10px;background-color:#3e96f5;box-shadow:2px 2px 5px gray}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   .card-seller[_ngcontent-%COMP%]   .seller[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   .card-client[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;border-radius:30px;padding:20px;width:200px;margin:10px;background-color:#00e676;box-shadow:2px 2px 5px gray}.content[_ngcontent-%COMP%]   .cards-content[_ngcontent-%COMP%]   .cards-selectors[_ngcontent-%COMP%]   .card-client[_ngcontent-%COMP%]   .seller[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   .date-selector[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:center;margin-top:20px}.content[_ngcontent-%COMP%]   .date-selector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:20px;font-size:18px;background-color:#eee;border:none;padding:10px}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]{width:100%;margin-top:50px;display:flex;justify-content:space-between;align-items:center}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]{width:550px;height:350px;background-color:#fff;border-radius:20px}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:max-content;margin:20px 20px -20px 50px;font-size:20px;color:#5855d6}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;text-align:center;padding:30px;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .tag[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#5855d6}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .sales[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .tasks[_ngcontent-%COMP%], .content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]{margin:10px;border-radius:30px;padding:30px}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]{border:1px solid #22c7fb}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .sales[_ngcontent-%COMP%]{border:1px solid #fec869}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .tasks[_ngcontent-%COMP%]{border:1px solid #b38fff}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .resume[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .gain[_ngcontent-%COMP%]{border:1px solid #54d2af}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:550px;height:350px;background-color:#fff;border-radius:20px}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:max-content;margin:20px 20px 20px 50px;font-size:20px;color:#5855d6}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]   .activities[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]   .activities[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:center;display:flex;border:1px solid #ebeaea;border-radius:10px;width:420px;height:50px;margin:10px}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]   .activities[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;height:max-content;width:100%}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]   .activities[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:17px;font-weight:700;width:max-content;height:max-content;margin-right:15px;margin-left:10px}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]   .activities[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .activity[_ngcontent-%COMP%]{font-size:14px;color:gray;font-weight:200;width:max-content;height:max-content}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]   .activities[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .timing[_ngcontent-%COMP%]{display:flex;justify-content:right;width:100%;margin-bottom:2px}.content[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   .activity-flow[_ngcontent-%COMP%]   .activities[_ngcontent-%COMP%]   .history[_ngcontent-%COMP%]   .timing[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-right:10px;width:max-content;font-size:10px;font-family:sans-serif;color:gray}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:50px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:30px;width:100%;height:450px;background-color:#fff}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:90%;margin-top:20px;margin-bottom:15px;margin-left:50px;font-size:20px;color:#5855d6}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .type-funnel[_ngcontent-%COMP%]{display:flex;flex-direction:row}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .type-funnel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:15px;font-weight:700}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .type-funnel[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:max-content;margin-left:5px;width:130px;text-align:center;background-color:#eee;border-radius:5px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .info-types[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-evenly;margin-top:10px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .info-types[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;width:130px;border:none;border-radius:15px;color:#ebeaea}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .info-types[_ngcontent-%COMP%]   .pass[_ngcontent-%COMP%]{background-color:#3e96f5}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .info-types[_ngcontent-%COMP%]   .stay[_ngcontent-%COMP%]{background-color:#ffb803}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .info-types[_ngcontent-%COMP%]   .lost[_ngcontent-%COMP%]{background-color:#fc8b6b}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .info-types[_ngcontent-%COMP%]   .prevision[_ngcontent-%COMP%]{background-color:#07bd8b}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .inform-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-top:25px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .inform-content[_ngcontent-%COMP%]   .inform[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center;border:1px solid gray;border-radius:20px;width:90%;height:50px;margin-bottom:10px;margin-top:5px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .inform-content[_ngcontent-%COMP%]   .inform[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:120px;font-weight:600}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .inform-content[_ngcontent-%COMP%]   .inform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:120px;color:#fff;border-radius:10px;border:none;font-size:12px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .inform-content[_ngcontent-%COMP%]   .inform[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background-color:#3e96f5}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .inform-content[_ngcontent-%COMP%]   .inform[_ngcontent-%COMP%]   .yellow[_ngcontent-%COMP%]{background-color:#ffb803}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .inform-content[_ngcontent-%COMP%]   .inform[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background-color:#fc8b6b}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .inform-content[_ngcontent-%COMP%]   .inform[_ngcontent-%COMP%]   .green[_ngcontent-%COMP%]{background-color:#07bd8b}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .final-content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:30px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .final-content[_ngcontent-%COMP%]   .final-info[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;width:150px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .final-content[_ngcontent-%COMP%]   .final-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;width:130px;font-size:12px;margin-bottom:5px;color:#fff;border-radius:10px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .final-content[_ngcontent-%COMP%]   .final-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:25px}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .final-content[_ngcontent-%COMP%]   .final-info[_ngcontent-%COMP%]   .blue[_ngcontent-%COMP%]{background-color:#3e96f5}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .final-content[_ngcontent-%COMP%]   .final-info[_ngcontent-%COMP%]   .red[_ngcontent-%COMP%]{background-color:#fc8b6b}.content[_ngcontent-%COMP%]   .funnel-content[_ngcontent-%COMP%]   .sales-funnel[_ngcontent-%COMP%]   .final-content[_ngcontent-%COMP%]   .final-info[_ngcontent-%COMP%]   .black[_ngcontent-%COMP%]{background-color:#000}#day[_ngcontent-%COMP%]{border-bottom:5px solid #5855d6}#landing[_ngcontent-%COMP%]:hover{border:#bc40f5 solid 2px;cursor:pointer}#funnel[_ngcontent-%COMP%]:hover{border:#ffd903 solid 2px;cursor:pointer}#seller[_ngcontent-%COMP%]:hover{border:#22c7fb solid 2px;cursor:pointer}#client[_ngcontent-%COMP%]:hover{border:#00a884 solid 2px;cursor:pointer}.text-button[_ngcontent-%COMP%]{font-size:25px}"]}),h})();var Nt=B(5861),ht=B(892);let vt=(()=>{class h{constructor(a,p,w){this.headerService=a,this.authService=p,this.router=w,this.userLogin={}}ngOnInit(){this.headerService.onOffHeader(!1)}login(){var a=this;return(0,Nt.Z)(function*(){console.log(a.userLogin);try{yield a.authService.login(a.userLogin),a.router.navigate(["/home"])}catch(p){console.log(p)}})()}}return h.\u0275fac=function(a){return new(a||h)(D.Y36(Ae.r),D.Y36(ht.e),D.Y36(te.F0))},h.\u0275cmp=D.Xpm({type:h,selectors:[["app-login"]],decls:15,vars:3,consts:[[1,"container"],[1,"box-login"],[1,"logo"],["src","../../assets/img/login.png"],[1,"info-login"],["type","email","name","email","placeholder","Usu\xe1rio: ",3,"ngModel","ngModelChange"],["type","password","name","password","placeholder","Senha: ",3,"ngModel","ngModelChange"],["align","center"],[1,"button",3,"click"]],template:function(a,p){1&a&&(D.TgZ(0,"section",0)(1,"div",1)(2,"div",2),D._UZ(3,"img",3),D.qZA(),D.TgZ(4,"div",4)(5,"h2"),D._uU(6," Login"),D.qZA(),D._UZ(7,"br")(8,"br"),D.TgZ(9,"input",5),D.NdJ("ngModelChange",function(T){return p.userLogin.email=T}),D.qZA(),D.TgZ(10,"input",6),D.NdJ("ngModelChange",function(T){return p.userLogin.password=T})("ngModelChange",function(T){return p.userLogin.password=T}),D.qZA(),D.TgZ(11,"div",7),D._UZ(12,"Br"),D.TgZ(13,"button",8),D.NdJ("click",function(){return p.login()}),D._uU(14,"Login"),D.qZA()()()()()),2&a&&(D.xp6(9),D.Q6J("ngModel",p.userLogin.email),D.xp6(1),D.Q6J("ngModel",p.userLogin.password)("ngModel",p.userLogin.password))},directives:[ze.Fj,ze.JJ,ze.On],styles:[".container[_ngcontent-%COMP%]{background-color:#3f48cc;height:100vh;width:100vw;display:flex;flex-direction:row;justify-content:center;align-items:center}.box-login[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;background-color:#fff;padding-top:150px;padding-bottom:80px;width:900px;border-radius:30px;box-shadow:2px 2px 2px 1px #0003}.info-login[_ngcontent-%COMP%]{width:300px}input[type=email][_ngcontent-%COMP%]{width:100%;border-radius:30px;padding:12px 20px;margin:8px 0;border:none;box-sizing:border-box}input[type=password][_ngcontent-%COMP%]{width:100%;border-radius:30px;border:none;padding:12px 20px;margin:8px 0;box-sizing:border-box}h2[_ngcontent-%COMP%]{text-align:center}.button[_ngcontent-%COMP%]{background-color:#4caf50;border:none;color:#fff;border-radius:30px;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px}img[_ngcontent-%COMP%]{margin-top:-60px}"]}),h})();const zt=function(){return["/home"]};let tt=(()=>{class h{constructor(){}ngOnInit(){}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275cmp=D.Xpm({type:h,selectors:[["app-register"]],decls:15,vars:2,consts:[[1,"container"],[1,"box-login"],[1,"logo"],["src","../../assets/img/login.png"],[1,"info-login"],["type","text","placeholder","Usu\xe1rio: "],["type","password","placeholder","Senha: "],["align","center"],[1,"button",3,"routerLink"]],template:function(a,p){1&a&&(D.TgZ(0,"section",0)(1,"div",1)(2,"div",2),D._UZ(3,"img",3),D.qZA(),D.TgZ(4,"div",4)(5,"h2"),D._uU(6," Login"),D.qZA(),D._UZ(7,"br")(8,"br")(9,"input",5)(10,"input",6),D.TgZ(11,"div",7),D._UZ(12,"Br"),D.TgZ(13,"button",8),D._uU(14,"Login"),D.qZA()()()()()),2&a&&(D.xp6(13),D.Q6J("routerLink",D.DdM(1,zt)))},directives:[te.rH],styles:[".container[_ngcontent-%COMP%]{background-color:#3f48cc;height:100vh;width:100vw;display:flex;flex-direction:row;justify-content:center;align-items:center}.box-login[_ngcontent-%COMP%]{display:grid;grid-template-columns:50% 50%;background-color:#fff;padding-top:150px;padding-bottom:80px;width:900px;border-radius:30px;box-shadow:2px 2px 2px 1px #0003}.info-login[_ngcontent-%COMP%]{width:300px}input[type=text][_ngcontent-%COMP%]{width:100%;border-radius:30px;padding:12px 20px;margin:8px 0;border:none;box-sizing:border-box}input[type=password][_ngcontent-%COMP%]{width:100%;border-radius:30px;border:none;padding:12px 20px;margin:8px 0;box-sizing:border-box}h2[_ngcontent-%COMP%]{text-align:center}.button[_ngcontent-%COMP%]{background-color:#4caf50;border:none;color:#fff;border-radius:30px;padding:15px 32px;text-align:center;text-decoration:none;display:inline-block;font-size:16px}img[_ngcontent-%COMP%]{margin-top:-60px}"]}),h})(),dt=(()=>{class h{constructor(a,p){this.authService=a,this.router=p}canActivate(){return new Promise(a=>{this.authService.getAuth().onAuthStateChanged(p=>{p||this.router.navigate([""]),a(!!p)})})}}return h.\u0275fac=function(a){return new(a||h)(D.LFG(ht.e),D.LFG(te.F0))},h.\u0275prov=D.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})(),Oe=(()=>{class h{constructor(a,p){this.authService=a,this.router=p}canActivate(){return new Promise(a=>{this.authService.getAuth().onAuthStateChanged(p=>{p&&this.router.navigate(["/home"]),a(!p)})})}}return h.\u0275fac=function(a){return new(a||h)(D.LFG(ht.e),D.LFG(te.F0))},h.\u0275prov=D.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"}),h})();var kt=B(7407),ft=B(4141);function nt(h,l){if(1&h&&(D.TgZ(0,"div",7)(1,"label",8),D._uU(2),D.qZA(),D._UZ(3,"input",14),D.qZA()),2&h){const a=l.$implicit;D.xp6(2),D.Oqu(a.campo),D.xp6(1),D.Q6J("type",a.tipo)("name",a.tratado)}}function qe(h,l){if(1&h){const a=D.EpF();D.TgZ(0,"main",2)(1,"div",3)(2,"div",4)(3,"h2"),D._uU(4),D.qZA()(),D.TgZ(5,"form",5,6),D.NdJ("ngSubmit",function(){D.CHM(a);const w=D.MAs(6);return D.oxw().submitForm(w)}),D.TgZ(7,"div",7)(8,"label",8),D._uU(9,"Nome:"),D.qZA(),D._UZ(10,"input",9),D.qZA(),D.TgZ(11,"div",7)(12,"label",8),D._uU(13,"Telefone:"),D.qZA(),D._UZ(14,"input",10),D.qZA(),D.YNc(15,nt,4,3,"div",11),D.TgZ(16,"div",12)(17,"button",13),D._uU(18),D.qZA()()()()()}if(2&h){const a=D.oxw();D.xp6(4),D.Oqu(a.dadosCampanha.titulo),D.xp6(11),D.Q6J("ngForOf",a.dadosCampanha.campos),D.xp6(3),D.Oqu(a.dadosCampanha.butao)}}function et(h,l){if(1&h){const a=D.EpF();D.TgZ(0,"main",15)(1,"div",16)(2,"h2"),D._uU(3,"Parab\xe9ns !"),D.qZA(),D.TgZ(4,"p"),D._uU(5,"Sua inscri\xe7\xe3o foi efetuada com sucesso, entraremos em contato em breve !"),D.qZA(),D.TgZ(6,"button",17),D.NdJ("click",function(){return D.CHM(a),D.oxw().conclusao()}),D._uU(7,"Ok"),D.qZA()()()}}let _t=(()=>{class h{constructor(a,p,w,T,H){this.fireservice=a,this.service=p,this.headerService=w,this.activeRoute=T,this.router=H,this.concluido=!1,this.clientes={},this.dadosExibir=[],this.id="",this.nomefunil=""}ngOnInit(){this.id=this.router.url.split("/")[2],this.headerService.onOffHeader(!1),this.service.getCampanhaId(this.id).subscribe(a=>{this.dadosCampanha=a[0],console.log(this.dadosCampanha),this.dadosExibir=a,this.nomefunil=this.dadosCampanha.funil})}conclusao(){this.concluido=0==this.concluido,console.log(this.concluido)}submitForm(a){var p=this;return(0,Nt.Z)(function*(){p.clientes.campos=a.value;let w=p.fireservice.createId(),T=[{id:w,idfunil:p.dadosCampanha.funil,nomecliente:a.value.nome,telefonecliente:a.value.telefone,campos:p.clientes.campos,link:p.dadosCampanha.link,nome:p.dadosCampanha.nome,idlanding:p.dadosCampanha.id,produto:p.dadosCampanha.produto,valorproduto:p.dadosCampanha.valorproduto}];yield p.service.getFunilEtapa(p.nomefunil).subscribe(H=>{p.etapafunil=H[0];let J=p.fireservice.createId(),ae=p.fireservice.createId(),we=[{id:J,nomecliente:a.value.nome,idcliente:w,telefonecliente:a.value.telefone,campos:p.clientes.campos,etapa:p.etapafunil.fase[0],atualizacao:(new Date).toLocaleDateString(),tarefa:"Contato Adicionado",idfunil:p.nomefunil}],lt=[{id:ae,idcliente:w,nomecliente:a.value.nome,etapa:p.etapafunil.fase[0],atualizacao:(new Date).toLocaleDateString(),tarefa:"Contato Adicionado",idfunil:p.nomefunil,produto:p.dadosCampanha.produto,valorproduto:p.dadosCampanha.valorproduto}];p.service.addEtapa(J,we[0]),p.service.addRelatorioValores(ae,lt[0]),console.log(we),p.concluido=0==p.concluido,console.log(p.concluido)});try{p.service.addCliente(w,T[0])}catch(H){console.log(H)}})()}}return h.\u0275fac=function(a){return new(a||h)(D.Y36(kt.ST),D.Y36(ft.h),D.Y36(Ae.r),D.Y36(te.gz),D.Y36(te.F0))},h.\u0275cmp=D.Xpm({type:h,selectors:[["app-campanha"]],decls:2,vars:2,consts:[["id","main",4,"ngIf"],["id","next",4,"ngIf"],["id","main"],["id","content",1,"content"],[1,"title"],[3,"ngSubmit"],["f","ngForm"],[1,"info"],["for","name"],["type","text","name","nome","ngModel",""],["type","text","name","telefone","ngModel",""],["class","info",4,"ngFor","ngForOf"],["align","center"],["id","button","type","submit"],["ngModel","",3,"type","name"],["id","next"],["id","content-next",1,"content-next"],[3,"click"]],template:function(a,p){1&a&&(D.YNc(0,qe,19,3,"main",0),D.YNc(1,et,8,0,"main",1)),2&a&&(D.Q6J("ngIf",0==p.concluido),D.xp6(1),D.Q6J("ngIf",1==p.concluido))},directives:[ve.O5,ze._Y,ze.JL,ze.F,ze.Fj,ze.JJ,ze.On,ve.sg],styles:["@media only screen and (max-width: 992px){#main[_ngcontent-%COMP%]{justify-content:center}#content[_ngcontent-%COMP%]{width:50%;margin:0}}@media only screen and (max-width: 680px){#main[_ngcontent-%COMP%]{justify-content:center}#content[_ngcontent-%COMP%]{width:70%;margin:0}#button[_ngcontent-%COMP%]{width:70%;font-size:12px}}main[_ngcontent-%COMP%]{background:url(/assets/img/background.jpg) no-repeat center/cover!important;height:100vh;width:100%;display:flex;justify-content:right;align-items:center}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-right:100px;border-radius:30px;height:500px;width:30%;max-width:500px;background:white}.content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:90%;margin-top:20px;text-align:center;margin-bottom:40px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:18px;font-weight:600;font-family:sans-serif;margin-bottom:5px}.content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-bottom:20px;height:25px;font-size:16px;border:none;border-radius:5px;background-color:#dfdfdf;text-indent:5px}.content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:2px 2px 3px gray;margin-top:50px;height:35px;border:none;width:200px;border-radius:5px;text-align:center;font-weight:600;background-color:#3e96f5;color:#fff;cursor:pointer}.content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#2d6db1;color:#eee}#next[_ngcontent-%COMP%]{display:flex;justify-content:center}#content-next[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin-right:100px;border-radius:30px;height:300px;width:50%;max-width:500px;background:rgba(0,0,0,.678);color:#fff}#content-next[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:35px}#content-next[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:90%;font-size:20px;text-align:center;margin-top:20px}#content-next[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{box-shadow:2px 2px 3px gray;margin-top:50px;height:35px;border:none;width:200px;border-radius:5px;text-align:center;font-weight:600;background-color:#3e96f5;color:#fff;cursor:pointer}"]}),h})();const le=[{path:"",component:vt},{path:"home",component:je,canActivate:[dt]},{path:"landingPage",loadChildren:()=>B.e(523).then(B.bind(B,4523)).then(h=>h.LandingPageModule)},{path:"funil",loadChildren:()=>B.e(490).then(B.bind(B,3490)).then(h=>h.FunilModule)},{path:"vendedor",loadChildren:()=>Promise.all([B.e(757),B.e(268)]).then(B.bind(B,9268)).then(h=>h.VendedorModule)},{path:"cliente",loadChildren:()=>Promise.all([B.e(757),B.e(163)]).then(B.bind(B,163)).then(h=>h.ClientesModule)},{path:"register",component:tt,canActivate:[Oe]},{path:"campanha",component:_t},{path:"campanha/:id",component:_t}];let ot=(()=>{class h{}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=D.oAB({type:h}),h.\u0275inj=D.cJS({imports:[[te.Bz.forRoot(le)],te.Bz]}),h})();function me(h,l){if(1&h&&(D.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),D._UZ(4,"img",5),D.qZA(),D.TgZ(5,"div",6)(6,"form"),D._UZ(7,"fa-icon",7)(8,"input",8),D.qZA()(),D.TgZ(9,"div",9)(10,"div",10)(11,"h2"),D._uU(12,"Victor Sanches"),D.qZA(),D.TgZ(13,"p"),D._uU(14,"Vendedor"),D.qZA()()(),D.TgZ(15,"div",11)(16,"div",12),D._UZ(17,"fa-icon",7),D.qZA(),D.TgZ(18,"div",13),D._UZ(19,"fa-icon",7),D.qZA(),D.TgZ(20,"div",14),D._UZ(21,"fa-icon",7),D.qZA()()()()()),2&h){const a=D.oxw();D.xp6(7),D.Q6J("icon",a.search),D.xp6(10),D.Q6J("icon",a.userIcon),D.xp6(2),D.Q6J("icon",a.arrowDown),D.xp6(2),D.Q6J("icon",a.sign)}}let Pe=(()=>{class h{constructor(a){this.headerService=a,this.search=De.wn1,this.arrowDown=De.ptq,this.userIcon=De.m08,this.sign=De.jLD,this.showHeader=!0}ngOnInit(){this.headerService.viewEvent.subscribe(a=>this.viewHeader(a))}viewHeader(a){this.showHeader=a}}return h.\u0275fac=function(a){return new(a||h)(D.Y36(Ae.r))},h.\u0275cmp=D.Xpm({type:h,selectors:[["app-header"]],decls:1,vars:1,consts:[["class","content",4,"ngIf"],[1,"content"],[1,"userBar"],[1,"row"],[1,"logo"],["src","../../../assets/img/logo.png","height","40px"],[1,"search-bar"],[3,"icon"],["type","text","placeholder","Pesquisar"],[1,"user"],[1,"username"],[1,"icons"],[1,"userIcon"],[1,"arrowDown"],[1,"out"]],template:function(a,p){1&a&&D.YNc(0,me,22,4,"div",0),2&a&&D.Q6J("ngIf",1==p.showHeader)},directives:[ve.O5,ue.BN],styles:[".userBar[_ngcontent-%COMP%]{width:100%;padding:10px;box-shadow:1px 5px 8px gray;position:relative;background-color:#fff}.logo[_ngcontent-%COMP%]{margin-left:80px}.row[_ngcontent-%COMP%]{display:flex;width:1200px;flex-flow:row;justify-content:center;align-items:center}.search-bar[_ngcontent-%COMP%]{display:flex;width:35%;align-items:center;margin-left:100px}.search-bar[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%;position:relative}.search-bar[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-radius:20px;width:100%;height:40px;text-indent:50px;font-size:15px;background-color:#eee}.search-bar[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{position:absolute;left:20px;bottom:10px}.user[_ngcontent-%COMP%]{display:flex;margin-left:50px;align-items:center;border-left:1px solid rgba(224,224,224,.933)}.user[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{margin-left:15px;flex-direction:column;justify-items:center;text-align:right}.user[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:15px;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:gray}.user[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:10px;color:gray}.icons[_ngcontent-%COMP%]{margin-left:10px;display:flex;align-items:center}.icons[_ngcontent-%COMP%]   .userIcon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.icons[_ngcontent-%COMP%]   .userIcon[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{margin-top:5px;color:#6e83b7;font-size:40px}.icons[_ngcontent-%COMP%]   .arrowDown[_ngcontent-%COMP%]{margin-left:10px}.icons[_ngcontent-%COMP%]   .arrowDown[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{width:30px;height:30px;color:gray}.icons[_ngcontent-%COMP%]   .arrowDown[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]:hover{color:#000}.icons[_ngcontent-%COMP%]   .out[_ngcontent-%COMP%]{margin-left:25px}.icons[_ngcontent-%COMP%]   .out[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:18px;color:gray}.icons[_ngcontent-%COMP%]   .out[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]:hover{color:#000}"]}),h})(),Ue=(()=>{class h{constructor(){this.title="CRM"}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275cmp=D.Xpm({type:h,selectors:[["app-root"]],decls:3,vars:0,template:function(a,p){1&a&&(D._UZ(0,"app-header"),D.TgZ(1,"main"),D._UZ(2,"router-outlet"),D.qZA())},directives:[Pe,te.lC],styles:[""]}),h})();var Ze=B(2011);const Ke_firebase={apiKey:"AIzaSyB01BK2rto8yQfaPvwMa7gUg7tBXcQ-ar8",authDomain:"app-crm-33e48.firebaseapp.com",projectId:"app-crm-33e48",storageBucket:"app-crm-33e48.appspot.com",messagingSenderId:"630420365553",appId:"1:630420365553:web:bbcf6b5c3f977d707fc950",measurementId:"G-R815NEZMBF"};var Et=B(1205),Vt=B(4986),Yt=B(8306),Qt=B(9646),it=B(6451),sn=B(4004),hn=B(3099),fn=B(3900),an=B(5026),Rn=B(1884),vn=B(4482),Mn=B(5403),I1=B(8421),c1=B(4671),A1=B(5032),p1=B(7669),r1=B(5813),dn=(B(9916),B(3942)),zn=B(4859),xn=B(9681),ie=B(2090),gr=B(1877);const vr="@firebase/database";let Xt="";function N1(h){Xt=h}class Kn{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,a){null==a?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,ie.Pz)(a))}get(l){const a=this.domStorage_.getItem(this.prefixedName_(l));return null==a?null:(0,ie.cI)(a)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Gt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,a){null==a?delete this.cache_[l]:this.cache_[l]=a}get(l){return(0,ie.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const nn=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){const l=window[h];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new Kn(l)}}catch(l){}return new Gt},Wt=nn("localStorage"),j1=nn("sessionStorage"),x1=new gr.Yd("@firebase/database"),kn=function(){let h=1;return function(){return h++}}(),Er=function(h){const l=(0,ie.dS)(h),a=new ie.gQ;a.update(l);const p=a.digest();return ie.US.encodeByteArray(p)},D1=function(...h){let l="";for(let a=0;a<h.length;a++){const p=h[a];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?l+=D1.apply(null,p):l+="object"==typeof p?(0,ie.Pz)(p):p,l+=" "}return l};let i1=null,Ce=!0;const Ne=function(h,l){(0,ie.hu)(!l||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(x1.logLevel=gr.in.VERBOSE,i1=x1.log.bind(x1),l&&j1.set("logging_enabled",!0)):"function"==typeof h?i1=h:(i1=null,j1.remove("logging_enabled"))},be=function(...h){if(!0===Ce&&(Ce=!1,null===i1&&!0===j1.get("logging_enabled")&&Ne(!0)),i1){const l=D1.apply(null,h);i1(l)}},pt=function(h){return function(...l){be(h,...l)}},Me=function(...h){const l="FIREBASE INTERNAL ERROR: "+D1(...h);x1.error(l)},ke=function(...h){const l=`FIREBASE FATAL ERROR: ${D1(...h)}`;throw x1.error(l),new Error(l)},rt=function(...h){const l="FIREBASE WARNING: "+D1(...h);x1.warn(l)},tn=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Zn="[MIN_NAME]",Jt="[MAX_NAME]",Jn=function(h,l){if(h===l)return 0;if(h===Zn||l===Jt)return-1;if(l===Zn||h===Jt)return 1;{const a=lr(h),p=lr(l);return null!==a?null!==p?a-p==0?h.length-l.length:a-p:-1:null!==p?1:h<l?-1:1}},G1=function(h,l){return h===l?0:h<l?-1:1},Ir=function(h,l){if(l&&h in l)return l[h];throw new Error("Missing required key ("+h+") in object: "+(0,ie.Pz)(l))},$e=function(h){if("object"!=typeof h||null===h)return(0,ie.Pz)(h);const l=[];for(const p in h)l.push(p);l.sort();let a="{";for(let p=0;p<l.length;p++)0!==p&&(a+=","),a+=(0,ie.Pz)(l[p]),a+=":",a+=$e(h[l[p]]);return a+="}",a},xe=function(h,l){const a=h.length;if(a<=l)return[h];const p=[];for(let w=0;w<a;w+=l)p.push(h.substring(w,w+l>a?a:w+l));return p};function se(h,l){for(const a in h)h.hasOwnProperty(a)&&l(a,h[a])}const Re=function(h){(0,ie.hu)(!tn(h),"Invalid JSON number");const p=1023;let w,T,H,J,ae;0===h?(T=0,H=0,w=1/h==-1/0?1:0):(w=h<0,(h=Math.abs(h))>=Math.pow(2,1-p)?(J=Math.min(Math.floor(Math.log(h)/Math.LN2),p),T=J+p,H=Math.round(h*Math.pow(2,52-J)-Math.pow(2,52))):(T=0,H=Math.round(h/Math.pow(2,-1074))));const we=[];for(ae=52;ae;ae-=1)we.push(H%2?1:0),H=Math.floor(H/2);for(ae=11;ae;ae-=1)we.push(T%2?1:0),T=Math.floor(T/2);we.push(w?1:0),we.reverse();const lt=we.join("");let at="";for(ae=0;ae<64;ae+=8){let xt=parseInt(lt.substr(ae,8),2).toString(16);1===xt.length&&(xt="0"+xt),at+=xt}return at.toLowerCase()},_1=new RegExp("^-?(0*)\\d{1,10}$"),O1=-2147483648,ar=2147483647,lr=function(h){if(_1.test(h)){const l=Number(h);if(l>=O1&&l<=ar)return l}return null},$1=function(h){try{h()}catch(l){setTimeout(()=>{throw rt("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},yr=function(h,l){const a=setTimeout(h,l);return"object"==typeof a&&a.unref&&a.unref(),a};class Yn{constructor(l,a){this.appName_=l,this.appCheckProvider=a,this.appCheck=null==a?void 0:a.getImmediate({optional:!0}),this.appCheck||null==a||a.get().then(p=>this.appCheck=p)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((a,p)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(a,p):a(null)},0)})}addTokenChangeListener(l){var a;null===(a=this.appCheckProvider)||void 0===a||a.get().then(p=>p.addTokenListener(l))}notifyForInvalidToken(){rt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Tt{constructor(l,a,p){this.appName_=l,this.firebaseOptions_=a,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(w=>this.auth_=w)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(a=>a&&"auth/token-not-initialized"===a.code?(be("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,p)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(a,p):a(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(a=>a.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(a=>a.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rt(l)}}let Zt=(()=>{class h{constructor(a){this.accessToken=a}getToken(a){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(a){a(this.accessToken)}removeTokenChangeListener(a){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const m1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Or="websocket",ei="long_polling";class ti{constructor(l,a,p,w,T=!1,H="",J=!1){this.secure=a,this.namespace=p,this.webSocketOnly=w,this.nodeAdmin=T,this.persistenceKey=H,this.includeNamespaceInQueryParams=J,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Wt.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Wt.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function M1(h,l,a){let p;if((0,ie.hu)("string"==typeof l,"typeof type must == string"),(0,ie.hu)("object"==typeof a,"typeof params must == object"),l===Or)p=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(l!==ei)throw new Error("Unknown connection type: "+l);p=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function ur(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(a.ns=h.namespace);const w=[];return se(a,(T,H)=>{w.push(T+"="+H)}),p+w.join("&")}class J1{constructor(){this.counters_={}}incrementCounter(l,a=1){(0,ie.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=a}get(){return(0,ie.p$)(this.counters_)}}const X1={},R1={};function s1(h){const l=h.toString();return X1[l]||(X1[l]=new J1),X1[l]}class _r{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,a){this.closeAfterResponse=l,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,a){for(this.pendingResponses[l]=a;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let w=0;w<p.length;++w)p[w]&&$1(()=>{this.onMessage_(p[w])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ut{constructor(l,a,p,w,T,H,J){this.connId=l,this.repoInfo=a,this.applicationId=p,this.appCheckToken=w,this.authToken=T,this.transportSessionId=H,this.lastSessionId=J,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pt(l),this.stats_=s1(a),this.urlFn=ae=>(this.appCheckToken&&(ae.ac=this.appCheckToken),M1(a,ei,ae))}open(l,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new _r(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,ie.Yr)()||"complete"===document.readyState)h();else{let l=!1;const a=function(){document.body?l||(l=!0,h()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&a()}),window.attachEvent("onload",a))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new h1((...T)=>{const[H,J,ae,we,lt]=T;if(this.incrementIncomingBytes_(T),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===H)this.id=J,this.password=ae;else{if("close"!==H)throw new Error("Unrecognized command received: "+H);J?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(J,()=>{this.onClosed_()})):this.onClosed_()}},(...T)=>{const[H,J]=T;this.incrementIncomingBytes_(T),this.myPacketOrderer.handleResponse(H,J)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&m1.test(location.hostname)&&(p.r="f");const w=this.urlFn(p);this.log_("Connecting via long-poll to "+w),this.scriptTagHolder.addTag(w,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ut.forceAllow_=!0}static forceDisallow(){Ut.forceDisallow_=!0}static isAvailable(){return!((0,ie.Yr)()||!Ut.forceAllow_&&(Ut.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const a=(0,ie.Pz)(l);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const p=(0,ie.h$)(a),w=xe(p,1840);for(let T=0;T<w.length;T++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,w.length,w[T]),this.curSegmentNum++}addDisconnectPingFrame(l,a){if((0,ie.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=l,p.pw=a,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const a=(0,ie.Pz)(l).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class h1{constructor(l,a,p,w){if(this.onDisconnect=p,this.urlFn=w,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ie.Yr)())this.commandCB=l,this.onMessageCB=a;else{this.uniqueCallbackIdentifier=kn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=a,this.myIFrame=h1.createIFrame_();let T="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(T='<script>document.domain="'+document.domain+'";<\/script>');const H="<html><body>"+T+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(H),this.myIFrame.doc.close()}catch(J){be("frame writing exception"),J.stack&&be(J.stack),be(J)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||be("No IE domain setting required")}catch(a){const p=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,a){for(this.myID=l,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let a=this.urlFn(l),p="",w=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const H=this.pendingSegs.shift();p=p+"&seg"+w+"="+H.seg+"&ts"+w+"="+H.ts+"&d"+w+"="+H.d,w++}return a+=p,this.addLongPollTag_(a,this.currentSerial),!0}return!1}enqueueSegment(l,a,p){this.pendingSegs.push({seg:l,ts:a,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(l,a){this.outstandingRequests.add(a);const p=()=>{this.outstandingRequests.delete(a),this.newRequest_()},w=setTimeout(p,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(w),p()})}addTag(l,a){(0,ie.Yr)()?this.doNodeLongPoll(l,a):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=l,p.onload=p.onreadystatechange=function(){const w=p.readyState;(!w||"loaded"===w||"complete"===w)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),a())},p.onerror=()=>{be("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let rr=null;"undefined"!=typeof MozWebSocket?rr=MozWebSocket:"undefined"!=typeof WebSocket&&(rr=WebSocket);let Fr=(()=>{class h{constructor(a,p,w,T,H,J,ae){this.connId=a,this.applicationId=w,this.appCheckToken=T,this.authToken=H,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pt(this.connId),this.stats_=s1(p),this.connURL=h.connectionURL_(p,J,ae,T,w),this.nodeAdmin=p.nodeAdmin}static connectionURL_(a,p,w,T,H){const J={v:"5"};return!(0,ie.Yr)()&&"undefined"!=typeof location&&location.hostname&&m1.test(location.hostname)&&(J.r="f"),p&&(J.s=p),w&&(J.ls=w),T&&(J.ac=T),H&&(J.p=H),M1(a,Or,J)}open(a,p){this.onDisconnect=p,this.onMessage=a,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Wt.set("previous_websocket_failure",!0);try{let w;if((0,ie.Yr)()){const H={headers:{"User-Agent":`Firebase/5/${Xt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(H.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(H.headers["X-Firebase-AppCheck"]=this.appCheckToken);const J=process.env,ae=0===this.connURL.indexOf("wss://")?J.HTTPS_PROXY||J.https_proxy:J.HTTP_PROXY||J.http_proxy;ae&&(H.proxy={origin:ae})}this.mySock=new rr(this.connURL,[],w)}catch(w){this.log_("Error instantiating WebSocket.");const T=w.message||w.data;return T&&this.log_(T),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=w=>{this.handleIncomingFrame(w)},this.mySock.onerror=w=>{this.log_("WebSocket error.  Closing connection.");const T=w.message||w.data;T&&this.log_(T),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let a=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const w=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);w&&w.length>1&&parseFloat(w[1])<4.4&&(a=!0)}return!a&&null!==rr&&!h.forceDisallow_}static previouslyFailed(){return Wt.isInMemoryStorage||!0===Wt.get("previous_websocket_failure")}markConnectionHealthy(){Wt.remove("previous_websocket_failure")}appendFrame_(a){if(this.frames.push(a),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const w=(0,ie.cI)(p);this.onMessage(w)}}handleNewFrameCount_(a){this.totalFrames=a,this.frames=[]}extractFrameCount_(a){if((0,ie.hu)(null===this.frames,"We already have a frame buffer"),a.length<=6){const p=Number(a);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),a}handleIncomingFrame(a){if(null===this.mySock)return;const p=a.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const w=this.extractFrameCount_(p);null!==w&&this.appendFrame_(w)}}send(a){this.resetKeepAlive();const p=(0,ie.Pz)(a);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const w=xe(p,16384);w.length>1&&this.sendString_(String(w.length));for(let T=0;T<w.length;T++)this.sendString_(w[T])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(a){try{this.mySock.send(a)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),Vr=(()=>{class h{constructor(a){this.initTransports_(a)}static get ALL_TRANSPORTS(){return[Ut,Fr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(a){const p=Fr&&Fr.isAvailable();let w=p&&!Fr.previouslyFailed();if(a.webSocketOnly&&(p||rt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),w=!0),w)this.transports_=[Fr];else{const T=this.transports_=[];for(const H of h.ALL_TRANSPORTS)H&&H.isAvailable()&&T.push(H);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class Dr{constructor(l,a,p,w,T,H,J,ae,we,lt){this.id=l,this.repoInfo_=a,this.applicationId_=p,this.appCheckToken_=w,this.authToken_=T,this.onMessage_=H,this.onReady_=J,this.onDisconnect_=ae,this.onKill_=we,this.lastSessionId=lt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pt("c:"+this.id+":"),this.transportManager_=new Vr(a),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,p)},Math.floor(0));const w=l.healthyTimeout||0;w>0&&(this.healthyTimeout_=yr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(w)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return a=>{l===this.conn_?this.onConnectionLost_(a):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return a=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(a):l===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const a=l.t;"a"===a?this.upgradeIfSecondaryHealthy_():"r"===a?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===a&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const a=Ir("t",l),p=Ir("d",l);if("c"===a)this.onSecondaryControl_(p);else{if("d"!==a)throw new Error("Unknown protocol layer: "+a);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const a=Ir("t",l),p=Ir("d",l);"c"===a?this.onControl_(p):"d"===a&&this.onDataMessage_(p)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const a=Ir("t",l);if("d"in l){const p=l.d;if("h"===a)this.onHandshake_(p);else if("n"===a){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let w=0;w<this.pendingDataMessages.length;++w)this.onDataMessage_(this.pendingDataMessages[w]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===a?this.onConnectionShutdown_(p):"r"===a?this.onReset_(p):"e"===a?Me("Server Error: "+p):"o"===a?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Me("Unknown control packet command: "+a)}}onHandshake_(l){const a=l.ts,p=l.v,w=l.h;this.sessionId=l.s,this.repoInfo_.host=w,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),"5"!==p&&rt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,p),yr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,a){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Wt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ki{put(l,a,p,w){}merge(l,a,p,w){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,a,p){}onDisconnectMerge(l,a,p){}onDisconnectCancel(l,a){}reportStats(l){}}class ir{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,ie.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...a){if(Array.isArray(this.listeners_[l])){const p=[...this.listeners_[l]];for(let w=0;w<p.length;w++)p[w].callback.apply(p[w].context,a)}}on(l,a,p){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:a,context:p});const w=this.getInitialEvent(l);w&&a.apply(p,w)}off(l,a,p){this.validateEventType_(l);const w=this.listeners_[l]||[];for(let T=0;T<w.length;T++)if(w[T].callback===a&&(!p||p===w[T].context))return void w.splice(T,1)}validateEventType_(l){(0,ie.hu)(this.allowedEvents_.find(a=>a===l),"Unknown event: "+l)}}class si extends ir{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,ie.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new si}getInitialEvent(l){return(0,ie.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(l,a){if(void 0===a){this.pieces_=l.split("/");let p=0;for(let w=0;w<this.pieces_.length;w++)this.pieces_[w].length>0&&(this.pieces_[p]=this.pieces_[w],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=a}toString(){let l="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)""!==this.pieces_[a]&&(l+="/"+this.pieces_[a]);return l||"/"}}function qn(){return new Gn("")}function bn(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function wr(h){return h.pieces_.length-h.pieceNum_}function Xn(h){let l=h.pieceNum_;return l<h.pieces_.length&&l++,new Gn(h.pieces_,l)}function Li(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function k(h,l=0){return h.pieces_.slice(h.pieceNum_+l)}function Y(h){if(h.pieceNum_>=h.pieces_.length)return null;const l=[];for(let a=h.pieceNum_;a<h.pieces_.length-1;a++)l.push(h.pieces_[a]);return new Gn(l,0)}function R(h,l){const a=[];for(let p=h.pieceNum_;p<h.pieces_.length;p++)a.push(h.pieces_[p]);if(l instanceof Gn)for(let p=l.pieceNum_;p<l.pieces_.length;p++)a.push(l.pieces_[p]);else{const p=l.split("/");for(let w=0;w<p.length;w++)p[w].length>0&&a.push(p[w])}return new Gn(a,0)}function K(h){return h.pieceNum_>=h.pieces_.length}function ye(h,l){const a=bn(h),p=bn(l);if(null===a)return l;if(a===p)return ye(Xn(h),Xn(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+h+")")}function st(h,l){const a=k(h,0),p=k(l,0);for(let w=0;w<a.length&&w<p.length;w++){const T=Jn(a[w],p[w]);if(0!==T)return T}return a.length===p.length?0:a.length<p.length?-1:1}function bt(h,l){if(wr(h)!==wr(l))return!1;for(let a=h.pieceNum_,p=l.pieceNum_;a<=h.pieces_.length;a++,p++)if(h.pieces_[a]!==l.pieces_[p])return!1;return!0}function Kt(h,l){let a=h.pieceNum_,p=l.pieceNum_;if(wr(h)>wr(l))return!1;for(;a<h.pieces_.length;){if(h.pieces_[a]!==l.pieces_[p])return!1;++a,++p}return!0}class En{constructor(l,a){this.errorPrefix_=a,this.parts_=k(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,ie.ug)(this.parts_[p]);$n(this)}}function $n(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+b1(h))}function b1(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class S1 extends ir{constructor(){let l,a;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(a="visibilitychange",l="hidden"):void 0!==document.mozHidden?(a="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(a="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(a="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const p=!document[l];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new S1}getInitialEvent(l){return(0,ie.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const L1=1e3;let re,U=(()=>{class h extends Ki{constructor(a,p,w,T,H,J,ae,we){if(super(),this.repoInfo_=a,this.applicationId_=p,this.onDataUpdate_=w,this.onConnectStatus_=T,this.onServerInfoUpdate_=H,this.authTokenProvider_=J,this.appCheckTokenProvider_=ae,this.authOverride_=we,this.id=h.nextPersistentConnectionId_++,this.log_=pt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=L1,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,we&&!(0,ie.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");S1.getInstance().on("visible",this.onVisible_,this),-1===a.host.indexOf("fblocal")&&si.getInstance().on("online",this.onOnline_,this)}sendRequest(a,p,w){const T=++this.requestNumber_,H={r:T,a,b:p};this.log_((0,ie.Pz)(H)),(0,ie.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(H),w&&(this.requestCBHash_[T]=w)}get(a){this.initConnection_();const p=new ie.BH,w={p:a._path.toString(),q:a._queryObject},T={action:"g",request:w,onComplete:J=>{const ae=J.d;"ok"===J.s?(this.onDataUpdate_(w.p,ae,!1,null),p.resolve(ae)):p.reject(ae)}};this.outstandingGets_.push(T),this.outstandingGetCount_++;const H=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const J=this.outstandingGets_[H];void 0===J||T!==J||(delete this.outstandingGets_[H],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+H+" timed out on connection"),p.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(H),p.promise}listen(a,p,w,T){this.initConnection_();const H=a._queryIdentifier,J=a._path.toString();this.log_("Listen called for "+J+" "+H),this.listens.has(J)||this.listens.set(J,new Map),(0,ie.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ie.hu)(!this.listens.get(J).has(H),"listen() called twice for same path/queryId.");const ae={onComplete:T,hashFn:p,query:a,tag:w};this.listens.get(J).set(H,ae),this.connected_&&this.sendListen_(ae)}sendGet_(a){const p=this.outstandingGets_[a];this.sendRequest("g",p.request,w=>{delete this.outstandingGets_[a],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(w)})}sendListen_(a){const p=a.query,w=p._path.toString(),T=p._queryIdentifier;this.log_("Listen on "+w+" for "+T);const H={p:w};a.tag&&(H.q=p._queryObject,H.t=a.tag),H.h=a.hashFn(),this.sendRequest("q",H,ae=>{const we=ae.d,lt=ae.s;h.warnOnListenWarnings_(we,p),(this.listens.get(w)&&this.listens.get(w).get(T))===a&&(this.log_("listen response",ae),"ok"!==lt&&this.removeListen_(w,T),a.onComplete&&a.onComplete(lt,we))})}static warnOnListenWarnings_(a,p){if(a&&"object"==typeof a&&(0,ie.r3)(a,"w")){const w=(0,ie.DV)(a,"w");if(Array.isArray(w)&&~w.indexOf("no_index")){const T='".indexOn": "'+p._queryParams.getIndex().toString()+'"',H=p._path.toString();rt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${T} at ${H} to your security rules for better performance.`)}}}refreshAuthToken(a){this.authToken_=a,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(a)}reduceReconnectDelayIfAdminCredential_(a){(a&&40===a.length||(0,ie.GJ)(a))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(a){this.appCheckToken_=a,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const a=this.authToken_,p=(0,ie.w9)(a)?"auth":"gauth",w={cred:a};null===this.authOverride_?w.noauth=!0:"object"==typeof this.authOverride_&&(w.authvar=this.authOverride_),this.sendRequest(p,w,T=>{const H=T.s,J=T.d||"error";this.authToken_===a&&("ok"===H?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(H,J))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},a=>{const p=a.s,w=a.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,w)})}unlisten(a,p){const w=a._path.toString(),T=a._queryIdentifier;this.log_("Unlisten called for "+w+" "+T),(0,ie.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(w,T)&&this.connected_&&this.sendUnlisten_(w,T,a._queryObject,p)}sendUnlisten_(a,p,w,T){this.log_("Unlisten on "+a+" for "+p);const H={p:a};T&&(H.q=w,H.t=T),this.sendRequest("n",H)}onDisconnectPut(a,p,w){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",a,p,w):this.onDisconnectRequestQueue_.push({pathString:a,action:"o",data:p,onComplete:w})}onDisconnectMerge(a,p,w){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",a,p,w):this.onDisconnectRequestQueue_.push({pathString:a,action:"om",data:p,onComplete:w})}onDisconnectCancel(a,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",a,null,p):this.onDisconnectRequestQueue_.push({pathString:a,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(a,p,w,T){const H={p,d:w};this.log_("onDisconnect "+a,H),this.sendRequest(a,H,J=>{T&&setTimeout(()=>{T(J.s,J.d)},Math.floor(0))})}put(a,p,w,T){this.putInternal("p",a,p,w,T)}merge(a,p,w,T){this.putInternal("m",a,p,w,T)}putInternal(a,p,w,T,H){this.initConnection_();const J={p,d:w};void 0!==H&&(J.h=H),this.outstandingPuts_.push({action:a,request:J,onComplete:T}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(a){const p=this.outstandingPuts_[a].action,w=this.outstandingPuts_[a].request,T=this.outstandingPuts_[a].onComplete;this.outstandingPuts_[a].queued=this.connected_,this.sendRequest(p,w,H=>{this.log_(p+" response",H),delete this.outstandingPuts_[a],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),T&&T(H.s,H.d)})}reportStats(a){if(this.connected_){const p={c:a};this.log_("reportStats",p),this.sendRequest("s",p,w=>{"ok"!==w.s&&this.log_("reportStats","Error sending stats: "+w.d)})}}onDataMessage_(a){if("r"in a){this.log_("from server: "+(0,ie.Pz)(a));const p=a.r,w=this.requestCBHash_[p];w&&(delete this.requestCBHash_[p],w(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&this.onDataPush_(a.a,a.b)}}onDataPush_(a,p){this.log_("handleServerMessage",a,p),"d"===a?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===a?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===a?this.onListenRevoked_(p.p,p.q):"ac"===a?this.onAuthRevoked_(p.s,p.d):"apc"===a?this.onAppCheckRevoked_(p.s,p.d):"sd"===a?this.onSecurityDebugPacket_(p):Me("Unrecognized action received from server: "+(0,ie.Pz)(a)+"\nAre you using the latest client?")}onReady_(a,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(a),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(a){(0,ie.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(a))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(a){a&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=L1,this.realtime_||this.scheduleConnect_(0)),this.visible_=a}onOnline_(a){a?(this.log_("Browser went online."),this.reconnectDelay_=L1,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=L1),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const a=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-a);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var a=this;return(0,Nt.Z)(function*(){if(a.shouldReconnect_()){a.log_("Making a connection attempt"),a.lastConnectionAttemptTime_=(new Date).getTime(),a.lastConnectionEstablishedTime_=null;const p=a.onDataMessage_.bind(a),w=a.onReady_.bind(a),T=a.onRealtimeDisconnect_.bind(a),H=a.id+":"+h.nextConnectionId_++,J=a.lastSessionId;let ae=!1,we=null;const lt=function(){we?we.close():(ae=!0,T())};a.realtime_={close:lt,sendRequest:function(Cn){(0,ie.hu)(we,"sendRequest call when we're not connected not allowed."),we.sendRequest(Cn)}};const xt=a.forceTokenRefresh_;a.forceTokenRefresh_=!1;try{const[Cn,Hn]=yield Promise.all([a.authTokenProvider_.getToken(xt),a.appCheckTokenProvider_.getToken(xt)]);ae?be("getToken() completed but was canceled"):(be("getToken() completed. Creating connection."),a.authToken_=Cn&&Cn.accessToken,a.appCheckToken_=Hn&&Hn.token,we=new Dr(H,a.repoInfo_,a.applicationId_,a.appCheckToken_,a.authToken_,p,w,T,pr=>{rt(pr+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},J))}catch(Cn){a.log_("Failed to get token: "+Cn),ae||(a.repoInfo_.nodeAdmin&&rt(Cn),lt())}}})()}interrupt(a){be("Interrupting connection for reason: "+a),this.interruptReasons_[a]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(a){be("Resuming connection for reason: "+a),delete this.interruptReasons_[a],(0,ie.xb)(this.interruptReasons_)&&(this.reconnectDelay_=L1,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(a){const p=a-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let a=0;a<this.outstandingPuts_.length;a++){const p=this.outstandingPuts_[a];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[a],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(a,p){let w;w=p?p.map(H=>$e(H)).join("$"):"default";const T=this.removeListen_(a,w);T&&T.onComplete&&T.onComplete("permission_denied")}removeListen_(a,p){const w=new Gn(a).toString();let T;if(this.listens.has(w)){const H=this.listens.get(w);T=H.get(p),H.delete(p),0===H.size&&this.listens.delete(w)}else T=void 0;return T}onAuthRevoked_(a,p){be("Auth token revoked: "+a+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===a||"permission_denied"===a)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(a,p){be("App check token revoked: "+a+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===a||"permission_denied"===a)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(a){this.securityDebugCallback_?this.securityDebugCallback_(a):"msg"in a&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const a of this.listens.values())for(const p of a.values())this.sendListen_(p);for(let a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){const a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(let a=0;a<this.outstandingGets_.length;a++)this.outstandingGets_[a]&&this.sendGet_(a)}sendConnectStats_(){const a={};let p="js";(0,ie.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),a["sdk."+p+"."+Xt.replace(/\./g,"-")]=1,(0,ie.uI)()?a["framework.cordova"]=1:(0,ie.b$)()&&(a["framework.reactnative"]=1),this.reportStats(a)}shouldReconnect_(){const a=si.getInstance().currentlyOnline();return(0,ie.xb)(this.interruptReasons_)&&a}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class P{constructor(l,a){this.name=l,this.node=a}static Wrap(l,a){return new P(l,a)}}class V{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,a){const p=new P(Zn,l),w=new P(Zn,a);return 0!==this.compare(p,w)}minPost(){return P.MIN}}class Ee extends V{static get __EMPTY_NODE(){return re}static set __EMPTY_NODE(l){re=l}compare(l,a){return Jn(l.name,a.name)}isDefinedOn(l){throw(0,ie.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,a){return!1}minPost(){return P.MIN}maxPost(){return new P(Jt,re)}makePost(l,a){return(0,ie.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new P(l,re)}toString(){return".key"}}const Dt=new Ee;class C1{constructor(l,a,p,w,T=null){this.isReverse_=w,this.resultGenerator_=T,this.nodeStack_=[];let H=1;for(;!l.isEmpty();)if(l=l,H=a?p(l.key,a):1,w&&(H*=-1),H<0)l=this.isReverse_?l.left:l.right;else{if(0===H){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let a,l=this.nodeStack_.pop();if(a=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let as,Bn=(()=>{class h{constructor(a,p,w,T,H){this.key=a,this.value=p,this.color=null!=w?w:h.RED,this.left=null!=T?T:sr.EMPTY_NODE,this.right=null!=H?H:sr.EMPTY_NODE}copy(a,p,w,T,H){return new h(null!=a?a:this.key,null!=p?p:this.value,null!=w?w:this.color,null!=T?T:this.left,null!=H?H:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||!!a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(a,p,w){let T=this;const H=w(a,T.key);return T=H<0?T.copy(null,null,null,T.left.insert(a,p,w),null):0===H?T.copy(null,p,null,null,null):T.copy(null,null,null,null,T.right.insert(a,p,w)),T.fixUp_()}removeMin_(){if(this.left.isEmpty())return sr.EMPTY_NODE;let a=this;return!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.removeMin_(),null),a.fixUp_()}remove(a,p){let w,T;if(w=this,p(a,w.key)<0)!w.left.isEmpty()&&!w.left.isRed_()&&!w.left.left.isRed_()&&(w=w.moveRedLeft_()),w=w.copy(null,null,null,w.left.remove(a,p),null);else{if(w.left.isRed_()&&(w=w.rotateRight_()),!w.right.isEmpty()&&!w.right.isRed_()&&!w.right.left.isRed_()&&(w=w.moveRedRight_()),0===p(a,w.key)){if(w.right.isEmpty())return sr.EMPTY_NODE;T=w.right.min_(),w=w.copy(T.key,T.value,null,null,w.right.removeMin_())}w=w.copy(null,null,null,null,w.right.remove(a,p))}return w.fixUp_()}isRed_(){return this.color}fixUp_(){let a=this;return a.right.isRed_()&&!a.left.isRed_()&&(a=a.rotateLeft_()),a.left.isRed_()&&a.left.left.isRed_()&&(a=a.rotateRight_()),a.left.isRed_()&&a.right.isRed_()&&(a=a.colorFlip_()),a}moveRedLeft_(){let a=this.colorFlip_();return a.right.left.isRed_()&&(a=a.copy(null,null,null,null,a.right.rotateRight_()),a=a.rotateLeft_(),a=a.colorFlip_()),a}moveRedRight_(){let a=this.colorFlip_();return a.left.left.isRed_()&&(a=a.rotateRight_(),a=a.colorFlip_()),a}rotateLeft_(){const a=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight_(){const a=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip_(){const a=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,p)}checkMaxDepth_(){const a=this.check_();return Math.pow(2,a)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const a=this.left.check_();if(a!==this.right.check_())throw new Error("Black depths differ");return a+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class sr{constructor(l,a=sr.EMPTY_NODE){this.comparator_=l,this.root_=a}insert(l,a){return new sr(this.comparator_,this.root_.insert(l,a,this.comparator_).copy(null,null,Bn.BLACK,null,null))}remove(l){return new sr(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,Bn.BLACK,null,null))}get(l){let a,p=this.root_;for(;!p.isEmpty();){if(a=this.comparator_(l,p.key),0===a)return p.value;a<0?p=p.left:a>0&&(p=p.right)}return null}getPredecessorKey(l){let a,p=this.root_,w=null;for(;!p.isEmpty();){if(a=this.comparator_(l,p.key),0===a){if(p.left.isEmpty())return w?w.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}a<0?p=p.left:a>0&&(w=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new C1(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,a){return new C1(this.root_,l,this.comparator_,!1,a)}getReverseIteratorFrom(l,a){return new C1(this.root_,l,this.comparator_,!0,a)}getReverseIterator(l){return new C1(this.root_,null,this.comparator_,!0,l)}}function Wr(h,l){return Jn(h.name,l.name)}function Ui(h,l){return Jn(h,l)}sr.EMPTY_NODE=new class ai{copy(l,a,p,w,T){return this}insert(l,a,p){return new Bn(l,a,null)}remove(l,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ps=function(h){return"number"==typeof h?"number:"+Re(h):"string:"+h},Us=function(h){if(h.isLeafNode()){const l=h.val();(0,ie.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,ie.r3)(l,".sv"),"Priority must be a string or number.")}else(0,ie.hu)(h===as||h.isEmpty(),"priority of unexpected type.");(0,ie.hu)(h===as||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let c2,Bi,$2,Rr=(()=>{class h{constructor(a,p=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=a,this.priorityNode_=p,this.lazyHash_=null,(0,ie.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Us(this.priorityNode_)}static set __childrenNodeConstructor(a){c2=a}static get __childrenNodeConstructor(){return c2}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(a){return new h(this.value_,a)}getImmediateChild(a){return".priority"===a?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(a){return K(a)?this:".priority"===bn(a)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(a,p){return null}updateImmediateChild(a,p){return".priority"===a?this.updatePriority(p):p.isEmpty()&&".priority"!==a?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(a,p).updatePriority(this.priorityNode_)}updateChild(a,p){const w=bn(a);return null===w?p:p.isEmpty()&&".priority"!==w?this:((0,ie.hu)(".priority"!==w||1===wr(a),".priority must be the last token in a path"),this.updateImmediateChild(w,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Xn(a),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(a,p){return!1}val(a){return a&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let a="";this.priorityNode_.isEmpty()||(a+="priority:"+ps(this.priorityNode_.val())+":");const p=typeof this.value_;a+=p+":",a+="number"===p?Re(this.value_):this.value_,this.lazyHash_=Er(a)}return this.lazyHash_}getValue(){return this.value_}compareTo(a){return a===h.__childrenNodeConstructor.EMPTY_NODE?1:a instanceof h.__childrenNodeConstructor?-1:((0,ie.hu)(a.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(a))}compareToLeafNode_(a){const p=typeof a.value_,w=typeof this.value_,T=h.VALUE_TYPE_ORDER.indexOf(p),H=h.VALUE_TYPE_ORDER.indexOf(w);return(0,ie.hu)(T>=0,"Unknown leaf type: "+p),(0,ie.hu)(H>=0,"Unknown leaf type: "+w),T===H?"object"===w?0:this.value_<a.value_?-1:this.value_===a.value_?0:1:H-T}withIndex(){return this}isIndexed(){return!0}equals(a){if(a===this)return!0;if(a.isLeafNode()){const p=a;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const oe=new class ee extends V{compare(l,a){const p=l.node.getPriority(),w=a.node.getPriority(),T=p.compareTo(w);return 0===T?Jn(l.name,a.name):T}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,a){return!l.getPriority().equals(a.getPriority())}minPost(){return P.MIN}maxPost(){return new P(Jt,new Rr("[PRIORITY-POST]",$2))}makePost(l,a){const p=Bi(l);return new P(a,new Rr("[PRIORITY-POST]",p))}toString(){return".priority"}},de=Math.log(2);class Be{constructor(l){this.count=parseInt(Math.log(l+1)/de,10),this.current_=this.count-1;const w=(T=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&w}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const ut=function(h,l,a,p){h.sort(l);const w=function(ae,we){const lt=we-ae;let at,xt;if(0===lt)return null;if(1===lt)return at=h[ae],xt=a?a(at):at,new Bn(xt,at.node,Bn.BLACK,null,null);{const Cn=parseInt(lt/2,10)+ae,Hn=w(ae,Cn),pr=w(Cn+1,we);return at=h[Cn],xt=a?a(at):at,new Bn(xt,at.node,Bn.BLACK,Hn,pr)}},J=function(ae){let we=null,lt=null,at=h.length;const xt=function(Hn,pr){const T2=at-Hn,ro=at;at-=Hn;const rs=w(T2+1,ro),Ho=h[T2],Fo=a?a(Ho):Ho;Cn(new Bn(Fo,Ho.node,pr,null,rs))},Cn=function(Hn){we?(we.left=Hn,we=Hn):(lt=Hn,we=Hn)};for(let Hn=0;Hn<ae.count;++Hn){const pr=ae.nextBitIsOne(),T2=Math.pow(2,ae.count-(Hn+1));pr?xt(T2,Bn.BLACK):(xt(T2,Bn.BLACK),xt(T2,Bn.RED))}return lt}(new Be(h.length));return new sr(p||l,J)};let Mt;const Ct={};class $t{constructor(l,a){this.indexes_=l,this.indexSet_=a}static get Default(){return(0,ie.hu)(Ct&&oe,"ChildrenNode.ts has not been loaded"),Mt=Mt||new $t({".priority":Ct},{".priority":oe}),Mt}get(l){const a=(0,ie.DV)(this.indexes_,l);if(!a)throw new Error("No index defined for "+l);return a instanceof sr?a:null}hasIndex(l){return(0,ie.r3)(this.indexSet_,l.toString())}addIndex(l,a){(0,ie.hu)(l!==Dt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let w=!1;const T=a.getIterator(P.Wrap);let J,H=T.getNext();for(;H;)w=w||l.isDefinedOn(H.node),p.push(H),H=T.getNext();J=w?ut(p,l.getCompare()):Ct;const ae=l.toString(),we=Object.assign({},this.indexSet_);we[ae]=l;const lt=Object.assign({},this.indexes_);return lt[ae]=J,new $t(lt,we)}addToIndexes(l,a){const p=(0,ie.UI)(this.indexes_,(w,T)=>{const H=(0,ie.DV)(this.indexSet_,T);if((0,ie.hu)(H,"Missing index implementation for "+T),w===Ct){if(H.isDefinedOn(l.node)){const J=[],ae=a.getIterator(P.Wrap);let we=ae.getNext();for(;we;)we.name!==l.name&&J.push(we),we=ae.getNext();return J.push(l),ut(J,H.getCompare())}return Ct}{const J=a.get(l.name);let ae=w;return J&&(ae=ae.remove(new P(l.name,J))),ae.insert(l,l.node)}});return new $t(p,this.indexSet_)}removeFromIndexes(l,a){const p=(0,ie.UI)(this.indexes_,w=>{if(w===Ct)return w;{const T=a.get(l.name);return T?w.remove(new P(l.name,T)):w}});return new $t(p,this.indexSet_)}}let On,Bt=(()=>{class h{constructor(a,p,w){this.children_=a,this.priorityNode_=p,this.indexMap_=w,this.lazyHash_=null,this.priorityNode_&&Us(this.priorityNode_),this.children_.isEmpty()&&(0,ie.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return On||(On=new h(new sr(Ui),null,$t.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||On}updatePriority(a){return this.children_.isEmpty()?this:new h(this.children_,a,this.indexMap_)}getImmediateChild(a){if(".priority"===a)return this.getPriority();{const p=this.children_.get(a);return null===p?On:p}}getChild(a){const p=bn(a);return null===p?this:this.getImmediateChild(p).getChild(Xn(a))}hasChild(a){return null!==this.children_.get(a)}updateImmediateChild(a,p){if((0,ie.hu)(p,"We should always be passing snapshot nodes"),".priority"===a)return this.updatePriority(p);{const w=new P(a,p);let T,H;p.isEmpty()?(T=this.children_.remove(a),H=this.indexMap_.removeFromIndexes(w,this.children_)):(T=this.children_.insert(a,p),H=this.indexMap_.addToIndexes(w,this.children_));const J=T.isEmpty()?On:this.priorityNode_;return new h(T,J,H)}}updateChild(a,p){const w=bn(a);if(null===w)return p;{(0,ie.hu)(".priority"!==bn(a)||1===wr(a),".priority must be the last token in a path");const T=this.getImmediateChild(w).updateChild(Xn(a),p);return this.updateImmediateChild(w,T)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(a){if(this.isEmpty())return null;const p={};let w=0,T=0,H=!0;if(this.forEachChild(oe,(J,ae)=>{p[J]=ae.val(a),w++,H&&h.INTEGER_REGEXP_.test(J)?T=Math.max(T,Number(J)):H=!1}),!a&&H&&T<2*w){const J=[];for(const ae in p)J[ae]=p[ae];return J}return a&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let a="";this.getPriority().isEmpty()||(a+="priority:"+ps(this.getPriority().val())+":"),this.forEachChild(oe,(p,w)=>{const T=w.hash();""!==T&&(a+=":"+p+":"+T)}),this.lazyHash_=""===a?"":Er(a)}return this.lazyHash_}getPredecessorChildName(a,p,w){const T=this.resolveIndex_(w);if(T){const H=T.getPredecessorKey(new P(a,p));return H?H.name:null}return this.children_.getPredecessorKey(a)}getFirstChildName(a){const p=this.resolveIndex_(a);if(p){const w=p.minKey();return w&&w.name}return this.children_.minKey()}getFirstChild(a){const p=this.getFirstChildName(a);return p?new P(p,this.children_.get(p)):null}getLastChildName(a){const p=this.resolveIndex_(a);if(p){const w=p.maxKey();return w&&w.name}return this.children_.maxKey()}getLastChild(a){const p=this.getLastChildName(a);return p?new P(p,this.children_.get(p)):null}forEachChild(a,p){const w=this.resolveIndex_(a);return w?w.inorderTraversal(T=>p(T.name,T.node)):this.children_.inorderTraversal(p)}getIterator(a){return this.getIteratorFrom(a.minPost(),a)}getIteratorFrom(a,p){const w=this.resolveIndex_(p);if(w)return w.getIteratorFrom(a,T=>T);{const T=this.children_.getIteratorFrom(a.name,P.Wrap);let H=T.peek();for(;null!=H&&p.compare(H,a)<0;)T.getNext(),H=T.peek();return T}}getReverseIterator(a){return this.getReverseIteratorFrom(a.maxPost(),a)}getReverseIteratorFrom(a,p){const w=this.resolveIndex_(p);if(w)return w.getReverseIteratorFrom(a,T=>T);{const T=this.children_.getReverseIteratorFrom(a.name,P.Wrap);let H=T.peek();for(;null!=H&&p.compare(H,a)>0;)T.getNext(),H=T.peek();return T}}compareTo(a){return this.isEmpty()?a.isEmpty()?0:-1:a.isLeafNode()||a.isEmpty()?1:a===g1?-1:0}withIndex(a){if(a===Dt||this.indexMap_.hasIndex(a))return this;{const p=this.indexMap_.addIndex(a,this.children_);return new h(this.children_,this.priorityNode_,p)}}isIndexed(a){return a===Dt||this.indexMap_.hasIndex(a)}equals(a){if(a===this)return!0;if(a.isLeafNode())return!1;{const p=a;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const w=this.getIterator(oe),T=p.getIterator(oe);let H=w.getNext(),J=T.getNext();for(;H&&J;){if(H.name!==J.name||!H.node.equals(J.node))return!1;H=w.getNext(),J=T.getNext()}return null===H&&null===J}return!1}return!1}}resolveIndex_(a){return a===Dt?null:this.indexMap_.get(a.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const g1=new class e1 extends Bt{constructor(){super(new sr(Ui),Bt.EMPTY_NODE,$t.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return Bt.EMPTY_NODE}isEmpty(){return!1}};function d1(h,l=null){if(null===h)return Bt.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(l=h[".priority"]),(0,ie.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new Rr(h,d1(l));if(h instanceof Array){let a=Bt.EMPTY_NODE;return se(h,(p,w)=>{if((0,ie.r3)(h,p)&&"."!==p.substring(0,1)){const T=d1(w);(T.isLeafNode()||!T.isEmpty())&&(a=a.updateImmediateChild(p,T))}}),a.updatePriority(d1(l))}{const a=[];let p=!1;if(se(h,(H,J)=>{if("."!==H.substring(0,1)){const ae=d1(J);ae.isEmpty()||(p=p||!ae.getPriority().isEmpty(),a.push(new P(H,ae)))}}),0===a.length)return Bt.EMPTY_NODE;const T=ut(a,Wr,H=>H.name,Ui);if(p){const H=ut(a,oe.getCompare());return new Bt(T,d1(l),new $t({".priority":H},{".priority":oe}))}return new Bt(T,d1(l),$t.Default)}}Object.defineProperties(P,{MIN:{value:new P(Zn,Bt.EMPTY_NODE)},MAX:{value:new P(Jt,g1)}}),Ee.__EMPTY_NODE=Bt.EMPTY_NODE,Rr.__childrenNodeConstructor=Bt,function Mo(h){as=h}(g1),function G(h){$2=h}(g1),function Yi(h){Bi=h}(d1);class Zr extends V{constructor(l){super(),this.indexPath_=l,(0,ie.hu)(!K(l)&&".priority"!==bn(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,a){const p=this.extractChild(l.node),w=this.extractChild(a.node),T=p.compareTo(w);return 0===T?Jn(l.name,a.name):T}makePost(l,a){const p=d1(l),w=Bt.EMPTY_NODE.updateChild(this.indexPath_,p);return new P(a,w)}maxPost(){const l=Bt.EMPTY_NODE.updateChild(this.indexPath_,g1);return new P(Jt,l)}toString(){return k(this.indexPath_,0).join("/")}}const vi=new class fr extends V{compare(l,a){const p=l.node.compareTo(a.node);return 0===p?Jn(l.name,a.name):p}isDefinedOn(l){return!0}indexedValueChanged(l,a){return!l.equals(a)}minPost(){return P.MIN}maxPost(){return P.MAX}makePost(l,a){const p=d1(l);return new P(a,p)}toString(){return".value"}},kr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",xi=function(){let h=0;const l=[];return function(a){const p=a===h;let w;h=a;const T=new Array(8);for(w=7;w>=0;w--)T[w]=kr.charAt(a%64),a=Math.floor(a/64);(0,ie.hu)(0===a,"Cannot push at time == 0");let H=T.join("");if(p){for(w=11;w>=0&&63===l[w];w--)l[w]=0;l[w]++}else for(w=0;w<12;w++)l[w]=Math.floor(64*Math.random());for(w=0;w<12;w++)H+=kr.charAt(l[w]);return(0,ie.hu)(20===H.length,"nextPushId: Length should be 20."),H}}(),bo=function(h){if(h===""+ar)return"-";const l=lr(h);if(null!=l)return""+(l+1);const a=new Array(h.length);for(let H=0;H<a.length;H++)a[H]=h.charAt(H);if(a.length<786)return a.push("-"),a.join("");let p=a.length-1;for(;p>=0&&"z"===a[p];)p--;if(-1===p)return Jt;const T=kr.charAt(kr.indexOf(a[p])+1);return a[p]=T,a.slice(0,p+1).join("")},Go=function(h){if(h===""+O1)return Zn;const l=lr(h);if(null!=l)return""+(l-1);const a=new Array(h.length);for(let p=0;p<a.length;p++)a[p]=h.charAt(p);return"-"===a[a.length-1]?1===a.length?""+ar:(delete a[a.length-1],a.join("")):(a[a.length-1]=kr.charAt(kr.indexOf(a[a.length-1])-1),a.join("")+"z".repeat(786-a.length))};function W2(h){return{type:"value",snapshotNode:h}}function N2(h,l){return{type:"child_added",snapshotNode:l,childName:h}}function ao(h,l){return{type:"child_removed",snapshotNode:l,childName:h}}function l2(h,l,a){return{type:"child_changed",snapshotNode:l,childName:h,oldSnap:a}}class Z2{constructor(l){this.index_=l}updateChild(l,a,p,w,T,H){(0,ie.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const J=l.getImmediateChild(a);return J.getChild(w).equals(p.getChild(w))&&J.isEmpty()===p.isEmpty()||(null!=H&&(p.isEmpty()?l.hasChild(a)?H.trackChildChange(ao(a,J)):(0,ie.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):J.isEmpty()?H.trackChildChange(N2(a,p)):H.trackChildChange(l2(a,p,J))),l.isLeafNode()&&p.isEmpty())?l:l.updateImmediateChild(a,p).withIndex(this.index_)}updateFullNode(l,a,p){return null!=p&&(l.isLeafNode()||l.forEachChild(oe,(w,T)=>{a.hasChild(w)||p.trackChildChange(ao(w,T))}),a.isLeafNode()||a.forEachChild(oe,(w,T)=>{if(l.hasChild(w)){const H=l.getImmediateChild(w);H.equals(T)||p.trackChildChange(l2(w,T,H))}else p.trackChildChange(N2(w,T))})),a.withIndex(this.index_)}updatePriority(l,a){return l.isEmpty()?Bt.EMPTY_NODE:l.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class v1{constructor(l){this.indexedFilter_=new Z2(l.getIndex()),this.index_=l.getIndex(),this.startPost_=v1.getStartPost_(l),this.endPost_=v1.getEndPost_(l)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0}updateChild(l,a,p,w,T,H){return this.matches(new P(a,p))||(p=Bt.EMPTY_NODE),this.indexedFilter_.updateChild(l,a,p,w,T,H)}updateFullNode(l,a,p){a.isLeafNode()&&(a=Bt.EMPTY_NODE);let w=a.withIndex(this.index_);w=w.updatePriority(Bt.EMPTY_NODE);const T=this;return a.forEachChild(oe,(H,J)=>{T.matches(new P(H,J))||(w=w.updateImmediateChild(H,Bt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,w,p)}updatePriority(l,a){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const a=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),a)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const a=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),a)}return l.getIndex().maxPost()}}class Eo{constructor(l){this.rangedFilter_=new v1(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}updateChild(l,a,p,w,T,H){return this.rangedFilter_.matches(new P(a,p))||(p=Bt.EMPTY_NODE),l.getImmediateChild(a).equals(p)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,a,p,w,T,H):this.fullLimitUpdateChild_(l,a,p,T,H)}updateFullNode(l,a,p){let w;if(a.isLeafNode()||a.isEmpty())w=Bt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){let T;w=Bt.EMPTY_NODE.withIndex(this.index_),T=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let H=0;for(;T.hasNext()&&H<this.limit_;){const J=T.getNext();let ae;if(ae=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),J)<=0:this.index_.compare(J,this.rangedFilter_.getEndPost())<=0,!ae)break;w=w.updateImmediateChild(J.name,J.node),H++}}else{let T,H,J,ae;if(w=a.withIndex(this.index_),w=w.updatePriority(Bt.EMPTY_NODE),this.reverse_){ae=w.getReverseIterator(this.index_),T=this.rangedFilter_.getEndPost(),H=this.rangedFilter_.getStartPost();const at=this.index_.getCompare();J=(xt,Cn)=>at(Cn,xt)}else ae=w.getIterator(this.index_),T=this.rangedFilter_.getStartPost(),H=this.rangedFilter_.getEndPost(),J=this.index_.getCompare();let we=0,lt=!1;for(;ae.hasNext();){const at=ae.getNext();!lt&&J(T,at)<=0&&(lt=!0),lt&&we<this.limit_&&J(at,H)<=0?we++:w=w.updateImmediateChild(at.name,Bt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,w,p)}updatePriority(l,a){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,a,p,w,T){let H;if(this.reverse_){const at=this.index_.getCompare();H=(xt,Cn)=>at(Cn,xt)}else H=this.index_.getCompare();const J=l;(0,ie.hu)(J.numChildren()===this.limit_,"");const ae=new P(a,p),we=this.reverse_?J.getFirstChild(this.index_):J.getLastChild(this.index_),lt=this.rangedFilter_.matches(ae);if(J.hasChild(a)){const at=J.getImmediateChild(a);let xt=w.getChildAfterChild(this.index_,we,this.reverse_);for(;null!=xt&&(xt.name===a||J.hasChild(xt.name));)xt=w.getChildAfterChild(this.index_,xt,this.reverse_);const Cn=null==xt?1:H(xt,ae);if(lt&&!p.isEmpty()&&Cn>=0)return null!=T&&T.trackChildChange(l2(a,p,at)),J.updateImmediateChild(a,p);{null!=T&&T.trackChildChange(ao(a,at));const pr=J.updateImmediateChild(a,Bt.EMPTY_NODE);return null!=xt&&this.rangedFilter_.matches(xt)?(null!=T&&T.trackChildChange(N2(xt.name,xt.node)),pr.updateImmediateChild(xt.name,xt.node)):pr}}return p.isEmpty()?l:lt&&H(we,ae)>=0?(null!=T&&(T.trackChildChange(ao(we.name,we.node)),T.trackChildChange(N2(a,p))),J.updateImmediateChild(a,p).updateImmediateChild(we.name,Bt.EMPTY_NODE)):l}}class Bs{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=oe}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ie.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Zn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ie.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ie.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===oe}copy(){const l=new Bs;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function co(h,l,a){const p=h.copy();return p.startSet_=!0,void 0===l&&(l=null),p.indexStartValue_=l,null!=a?(p.startNameSet_=!0,p.indexStartName_=a):(p.startNameSet_=!1,p.indexStartName_=""),p}function K2(h,l,a){const p=h.copy();return p.endSet_=!0,void 0===l&&(l=null),p.indexEndValue_=l,void 0!==a?(p.endNameSet_=!0,p.indexEndName_=a):(p.endNameSet_=!1,p.indexEndName_=""),p}function js(h,l){const a=h.copy();return a.index_=l,a}function $o(h){const l={};if(h.isDefault())return l;let a;return h.index_===oe?a="$priority":h.index_===vi?a="$value":h.index_===Dt?a="$key":((0,ie.hu)(h.index_ instanceof Zr,"Unrecognized index type!"),a=h.index_.toString()),l.orderBy=(0,ie.Pz)(a),h.startSet_&&(l.startAt=(0,ie.Pz)(h.indexStartValue_),h.startNameSet_&&(l.startAt+=","+(0,ie.Pz)(h.indexStartName_))),h.endSet_&&(l.endAt=(0,ie.Pz)(h.indexEndValue_),h.endNameSet_&&(l.endAt+=","+(0,ie.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?l.limitToFirst=h.limit_:l.limitToLast=h.limit_),l}function li(h){const l={};if(h.startSet_&&(l.sp=h.indexStartValue_,h.startNameSet_&&(l.sn=h.indexStartName_)),h.endSet_&&(l.ep=h.indexEndValue_,h.endNameSet_&&(l.en=h.indexEndName_)),h.limitSet_){l.l=h.limit_;let a=h.viewFrom_;""===a&&(a=h.isViewFromLeft()?"l":"r"),l.vf=a}return h.index_!==oe&&(l.i=h.index_.toString()),l}class cs extends Ki{constructor(l,a,p,w){super(),this.repoInfo_=l,this.onDataUpdate_=a,this.authTokenProvider_=p,this.appCheckTokenProvider_=w,this.log_=pt("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,a){return void 0!==a?"tag$"+a:((0,ie.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,a,p,w){const T=l._path.toString();this.log_("Listen called for "+T+" "+l._queryIdentifier);const H=cs.getListenId_(l,p),J={};this.listens_[H]=J;const ae=$o(l._queryParams);this.restRequest_(T+".json",ae,(we,lt)=>{let at=lt;if(404===we&&(at=null,we=null),null===we&&this.onDataUpdate_(T,at,!1,p),(0,ie.DV)(this.listens_,H)===J){let xt;xt=we?401===we?"permission_denied":"rest_error:"+we:"ok",w(xt,null)}})}unlisten(l,a){const p=cs.getListenId_(l,a);delete this.listens_[p]}get(l){const a=$o(l._queryParams),p=l._path.toString(),w=new ie.BH;return this.restRequest_(p+".json",a,(T,H)=>{let J=H;404===T&&(J=null,T=null),null===T?(this.onDataUpdate_(p,J,!1,null),w.resolve(J)):w.reject(new Error(J))}),w.promise}refreshAuthToken(l){}restRequest_(l,a={},p){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([w,T])=>{w&&w.accessToken&&(a.auth=w.accessToken),T&&T.token&&(a.ac=T.token);const H=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,ie.xO)(a);this.log_("Sending REST request for "+H);const J=new XMLHttpRequest;J.onreadystatechange=()=>{if(p&&4===J.readyState){this.log_("REST Response for "+H+" received. status:",J.status,"response:",J.responseText);let ae=null;if(J.status>=200&&J.status<300){try{ae=(0,ie.cI)(J.responseText)}catch(we){rt("Failed to parse JSON response for "+H+": "+J.responseText)}p(null,ae)}else 401!==J.status&&404!==J.status&&rt("Got unsuccessful REST response for "+H+" Status: "+J.status),p(J.status);p=null}},J.open("GET",H,!0),J.send()})}}class Ts{constructor(){this.rootNode_=Bt.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,a){this.rootNode_=this.rootNode_.updateChild(l,a)}}function Pi(){return{value:null,children:new Map}}function Y2(h,l,a){if(K(l))h.value=a,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(l,a);else{const p=bn(l);h.children.has(p)||h.children.set(p,Pi()),Y2(h.children.get(p),l=Xn(l),a)}}function Io(h,l){if(K(l))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const a=h.value;return h.value=null,a.forEachChild(oe,(p,w)=>{Y2(h,new Gn(p),w)}),Io(h,l)}}if(h.children.size>0){const a=bn(l);return l=Xn(l),h.children.has(a)&&Io(h.children.get(a),l)&&h.children.delete(a),0===h.children.size}return!0}function ls(h,l,a){null!==h.value?a(l,h.value):function ms(h,l){h.children.forEach((a,p)=>{l(p,a)})}(h,(p,w)=>{ls(w,new Gn(l.toString()+"/"+p),a)})}class Br{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),a=Object.assign({},l);return this.last_&&se(this.last_,(p,w)=>{a[p]=a[p]-w}),this.last_=l,a}}class Ns{constructor(l,a){this.server_=a,this.statsToReport_={},this.statsListener_=new Br(l);const p=1e4+2e4*Math.random();yr(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const l=this.statsListener_.get(),a={};let p=!1;se(l,(w,T)=>{T>0&&(0,ie.r3)(this.statsToReport_,w)&&(a[w]=T,p=!0)}),p&&this.server_.reportStats(a),yr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Jr=(()=>{return(h=Jr||(Jr={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Jr;var h})();function Pt(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Y1{constructor(l,a,p){this.path=l,this.affectedTree=a,this.revert=p,this.type=Jr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(K(this.path)){if(null!=this.affectedTree.value)return(0,ie.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new Gn(l));return new Y1(qn(),a,this.revert)}}return(0,ie.hu)(bn(this.path)===l,"operationForChild called for unrelated child."),new Y1(Xn(this.path),this.affectedTree,this.revert)}}class Qi{constructor(l,a){this.source=l,this.path=a,this.type=Jr.LISTEN_COMPLETE}operationForChild(l){return K(this.path)?new Qi(this.source,qn()):new Qi(this.source,Xn(this.path))}}class Ji{constructor(l,a,p){this.source=l,this.path=a,this.snap=p,this.type=Jr.OVERWRITE}operationForChild(l){return K(this.path)?new Ji(this.source,qn(),this.snap.getImmediateChild(l)):new Ji(this.source,Xn(this.path),this.snap)}}class A{constructor(l,a,p){this.source=l,this.path=a,this.children=p,this.type=Jr.MERGE}operationForChild(l){if(K(this.path)){const a=this.children.subtree(new Gn(l));return a.isEmpty()?null:a.value?new Ji(this.source,qn(),a.value):new A(this.source,qn(),a)}return(0,ie.hu)(bn(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new A(this.source,Xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class E{constructor(l,a,p){this.node_=l,this.fullyInitialized_=a,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(K(l))return this.isFullyInitialized()&&!this.filtered_;const a=bn(l);return this.isCompleteForChild(a)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class b{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function z(h,l,a,p,w,T){const H=p.filter(J=>J.type===a);H.sort((J,ae)=>function he(h,l,a){if(null==l.childName||null==a.childName)throw(0,ie.g5)("Should only compare child_ events.");const p=new P(l.childName,l.snapshotNode),w=new P(a.childName,a.snapshotNode);return h.index_.compare(p,w)}(h,J,ae)),H.forEach(J=>{const ae=function W(h,l,a){return"value"===l.type||"child_removed"===l.type||(l.prevName=a.getPredecessorChildName(l.childName,l.snapshotNode,h.index_)),l}(h,J,T);w.forEach(we=>{we.respondsTo(J.type)&&l.push(we.createEvent(ae,h.query_))})})}function Se(h,l){return{eventCache:h,serverCache:l}}function mt(h,l,a,p){return Se(new E(l,a,p),h.serverCache)}function rn(h,l,a,p){return Se(h.eventCache,new E(l,a,p))}function Qn(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function ln(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let P1;class o1{constructor(l,a=(()=>(P1||(P1=new sr(G1)),P1))()){this.value=l,this.children=a}static fromObject(l){let a=new o1(null);return se(l,(p,w)=>{a=a.set(new Gn(p),w)}),a}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,a){if(null!=this.value&&a(this.value))return{path:qn(),value:this.value};if(K(l))return null;{const p=bn(l),w=this.children.get(p);if(null!==w){const T=w.findRootMostMatchingPathAndValue(Xn(l),a);return null!=T?{path:R(new Gn(p),T.path),value:T.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(K(l))return this;{const a=bn(l),p=this.children.get(a);return null!==p?p.subtree(Xn(l)):new o1(null)}}set(l,a){if(K(l))return new o1(a,this.children);{const p=bn(l),T=(this.children.get(p)||new o1(null)).set(Xn(l),a),H=this.children.insert(p,T);return new o1(this.value,H)}}remove(l){if(K(l))return this.children.isEmpty()?new o1(null):new o1(null,this.children);{const a=bn(l),p=this.children.get(a);if(p){const w=p.remove(Xn(l));let T;return T=w.isEmpty()?this.children.remove(a):this.children.insert(a,w),null===this.value&&T.isEmpty()?new o1(null):new o1(this.value,T)}return this}}get(l){if(K(l))return this.value;{const a=bn(l),p=this.children.get(a);return p?p.get(Xn(l)):null}}setTree(l,a){if(K(l))return a;{const p=bn(l),T=(this.children.get(p)||new o1(null)).setTree(Xn(l),a);let H;return H=T.isEmpty()?this.children.remove(p):this.children.insert(p,T),new o1(this.value,H)}}fold(l){return this.fold_(qn(),l)}fold_(l,a){const p={};return this.children.inorderTraversal((w,T)=>{p[w]=T.fold_(R(l,w),a)}),a(l,this.value,p)}findOnPath(l,a){return this.findOnPath_(l,qn(),a)}findOnPath_(l,a,p){const w=!!this.value&&p(a,this.value);if(w)return w;if(K(l))return null;{const T=bn(l),H=this.children.get(T);return H?H.findOnPath_(Xn(l),R(a,T),p):null}}foreachOnPath(l,a){return this.foreachOnPath_(l,qn(),a)}foreachOnPath_(l,a,p){if(K(l))return this;{this.value&&p(a,this.value);const w=bn(l),T=this.children.get(w);return T?T.foreachOnPath_(Xn(l),R(a,w),p):new o1(null)}}foreach(l){this.foreach_(qn(),l)}foreach_(l,a){this.children.inorderTraversal((p,w)=>{w.foreach_(R(l,p),a)}),this.value&&a(l,this.value)}foreachChild(l){this.children.inorderTraversal((a,p)=>{p.value&&l(a,p.value)})}}class ui{constructor(l){this.writeTree_=l}static empty(){return new ui(new o1(null))}}function P2(h,l,a){if(K(l))return new ui(new o1(a));{const p=h.writeTree_.findRootMostValueAndPath(l);if(null!=p){const w=p.path;let T=p.value;const H=ye(w,l);return T=T.updateChild(H,a),new ui(h.writeTree_.set(w,T))}{const w=new o1(a),T=h.writeTree_.setTree(l,w);return new ui(T)}}}function ys(h,l,a){let p=h;return se(a,(w,T)=>{p=P2(p,R(l,w),T)}),p}function Dn(h,l){if(K(l))return ui.empty();{const a=h.writeTree_.setTree(l,new o1(null));return new ui(a)}}function h2(h,l){return null!=f2(h,l)}function f2(h,l){const a=h.writeTree_.findRootMostValueAndPath(l);return null!=a?h.writeTree_.get(a.path).getChild(ye(a.path,l)):null}function Mr(h){const l=[],a=h.writeTree_.value;return null!=a?a.isLeafNode()||a.forEachChild(oe,(p,w)=>{l.push(new P(p,w))}):h.writeTree_.children.inorderTraversal((p,w)=>{null!=w.value&&l.push(new P(p,w.value))}),l}function An(h,l){if(K(l))return h;{const a=f2(h,l);return new ui(null!=a?new o1(a):h.writeTree_.subtree(l))}}function Q2(h){return h.writeTree_.isEmpty()}function w1(h,l){return Fa(qn(),h.writeTree_,l)}function Fa(h,l,a){if(null!=l.value)return a.updateChild(h,l.value);{let p=null;return l.children.inorderTraversal((w,T)=>{".priority"===w?((0,ie.hu)(null!==T.value,"Priority writes must always be leaf nodes"),p=T.value):a=Fa(R(h,w),T,a)}),!a.getChild(h).isEmpty()&&null!==p&&(a=a.updateChild(R(h,".priority"),p)),a}}function a1(h,l){return ya(l,h)}function Wo(h,l){if(h.snap)return Kt(h.path,l);for(const a in h.children)if(h.children.hasOwnProperty(a)&&Kt(R(h.path,a),l))return!0;return!1}function s4(h){return h.visible}function uo(h,l,a){let p=ui.empty();for(let w=0;w<h.length;++w){const T=h[w];if(l(T)){const H=T.path;let J;if(T.snap)Kt(a,H)?(J=ye(a,H),p=P2(p,J,T.snap)):Kt(H,a)&&(J=ye(H,a),p=P2(p,qn(),T.snap.getChild(J)));else{if(!T.children)throw(0,ie.g5)("WriteRecord should have .snap or .children");if(Kt(a,H))J=ye(a,H),p=ys(p,J,T.children);else if(Kt(H,a))if(J=ye(H,a),K(J))p=ys(p,qn(),T.children);else{const ae=(0,ie.DV)(T.children,bn(J));if(ae){const we=ae.getChild(Xn(J));p=P2(p,qn(),we)}}}}}return p}function d2(h,l,a,p,w){if(p||w){const T=An(h.visibleWrites,l);return!w&&Q2(T)?a:w||null!=a||h2(T,qn())?w1(uo(h.allWrites,function(we){return(we.visible||w)&&(!p||!~p.indexOf(we.writeId))&&(Kt(we.path,l)||Kt(l,we.path))},l),a||Bt.EMPTY_NODE):null}{const T=f2(h.visibleWrites,l);if(null!=T)return T;{const H=An(h.visibleWrites,l);return Q2(H)?a:null!=a||h2(H,qn())?w1(H,a||Bt.EMPTY_NODE):null}}}function Si(h,l,a,p){return d2(h.writeTree,h.treePath,l,a,p)}function Xi(h,l){return function hi(h,l,a){let p=Bt.EMPTY_NODE;const w=f2(h.visibleWrites,l);if(w)return w.isLeafNode()||w.forEachChild(oe,(T,H)=>{p=p.updateImmediateChild(T,H)}),p;if(a){const T=An(h.visibleWrites,l);return a.forEachChild(oe,(H,J)=>{const ae=w1(An(T,new Gn(H)),J);p=p.updateImmediateChild(H,ae)}),Mr(T).forEach(H=>{p=p.updateImmediateChild(H.name,H.node)}),p}return Mr(An(h.visibleWrites,l)).forEach(H=>{p=p.updateImmediateChild(H.name,H.node)}),p}(h.writeTree,h.treePath,l)}function ho(h,l,a,p){return function xo(h,l,a,p,w){(0,ie.hu)(p||w,"Either existingEventSnap or existingServerSnap must exist");const T=R(l,a);if(h2(h.visibleWrites,T))return null;{const H=An(h.visibleWrites,T);return Q2(H)?w.getChild(a):w1(H,w.getChild(a))}}(h.writeTree,h.treePath,l,a,p)}function e2(h,l){return function zs(h,l){return f2(h.visibleWrites,l)}(h.writeTree,R(h.treePath,l))}function hs(h,l,a){return function Zo(h,l,a,p){const w=R(l,a),T=f2(h.visibleWrites,w);return null!=T?T:p.isCompleteForChild(a)?w1(An(h.visibleWrites,w),p.getNode().getImmediateChild(a)):null}(h.writeTree,h.treePath,l,a)}function J2(h,l){return ya(R(h.treePath,l),h.writeTree)}function ya(h,l){return{treePath:h,writeTree:l}}class _a{constructor(){this.changeMap=new Map}trackChildChange(l){const a=l.type,p=l.childName;(0,ie.hu)("child_added"===a||"child_changed"===a||"child_removed"===a,"Only child changes supported for tracking"),(0,ie.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const w=this.changeMap.get(p);if(w){const T=w.type;if("child_added"===a&&"child_removed"===T)this.changeMap.set(p,l2(p,l.snapshotNode,w.snapshotNode));else if("child_removed"===a&&"child_added"===T)this.changeMap.delete(p);else if("child_removed"===a&&"child_changed"===T)this.changeMap.set(p,ao(p,w.oldSnap));else if("child_changed"===a&&"child_added"===T)this.changeMap.set(p,N2(p,l.snapshotNode));else{if("child_changed"!==a||"child_changed"!==T)throw(0,ie.g5)("Illegal combination of changes: "+l+" occurred after "+w);this.changeMap.set(p,l2(p,l.snapshotNode,w.oldSnap))}}else this.changeMap.set(p,l)}getChanges(){return Array.from(this.changeMap.values())}}const m2=new class o4{getCompleteChild(l){return null}getChildAfterChild(l,a,p){return null}};class Oi{constructor(l,a,p=null){this.writes_=l,this.viewCache_=a,this.optCompleteServerCache_=p}getCompleteChild(l){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(l))return a.getNode().getImmediateChild(l);{const p=null!=this.optCompleteServerCache_?new E(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hs(this.writes_,l,p)}}getChildAfterChild(l,a,p){const w=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ln(this.viewCache_),T=function p2(h,l,a,p,w,T){return function Ba(h,l,a,p,w,T,H){let J;const ae=An(h.visibleWrites,l),we=f2(ae,qn());if(null!=we)J=we;else{if(null==a)return[];J=w1(ae,a)}if(J=J.withIndex(H),J.isEmpty()||J.isLeafNode())return[];{const lt=[],at=H.getCompare(),xt=T?J.getReverseIteratorFrom(p,H):J.getIteratorFrom(p,H);let Cn=xt.getNext();for(;Cn&&lt.length<w;)0!==at(Cn,p)&&lt.push(Cn),Cn=xt.getNext();return lt}}(h.writeTree,h.treePath,l,a,p,w,T)}(this.writes_,w,a,1,p,l);return 0===T.length?null:T[0]}}function po(h,l,a,p,w,T){const H=l.eventCache;if(null!=e2(p,a))return l;{let J,ae;if(K(a))if((0,ie.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const we=ln(l),at=Xi(p,we instanceof Bt?we:Bt.EMPTY_NODE);J=h.filter.updateFullNode(l.eventCache.getNode(),at,T)}else{const we=Si(p,ln(l));J=h.filter.updateFullNode(l.eventCache.getNode(),we,T)}else{const we=bn(a);if(".priority"===we){(0,ie.hu)(1===wr(a),"Can't have a priority with additional path components");const lt=H.getNode();ae=l.serverCache.getNode();const at=ho(p,a,lt,ae);J=null!=at?h.filter.updatePriority(lt,at):H.getNode()}else{const lt=Xn(a);let at;if(H.isCompleteForChild(we)){ae=l.serverCache.getNode();const xt=ho(p,a,H.getNode(),ae);at=null!=xt?H.getNode().getImmediateChild(we).updateChild(lt,xt):H.getNode().getImmediateChild(we)}else at=hs(p,we,l.serverCache);J=null!=at?h.filter.updateChild(H.getNode(),we,at,lt,w,T):H.getNode()}}return mt(l,J,H.isFullyInitialized()||K(a),h.filter.filtersNodes())}}function yi(h,l,a,p,w,T,H,J){const ae=l.serverCache;let we;const lt=H?h.filter:h.filter.getIndexedFilter();if(K(a))we=lt.updateFullNode(ae.getNode(),p,null);else if(lt.filtersNodes()&&!ae.isFiltered()){const Cn=ae.getNode().updateChild(a,p);we=lt.updateFullNode(ae.getNode(),Cn,null)}else{const Cn=bn(a);if(!ae.isCompleteForPath(a)&&wr(a)>1)return l;const Hn=Xn(a),T2=ae.getNode().getImmediateChild(Cn).updateChild(Hn,p);we=".priority"===Cn?lt.updatePriority(ae.getNode(),T2):lt.updateChild(ae.getNode(),Cn,T2,Hn,m2,null)}const at=rn(l,we,ae.isFullyInitialized()||K(a),lt.filtersNodes());return po(h,at,a,w,new Oi(w,at,T),J)}function T1(h,l,a,p,w,T,H){const J=l.eventCache;let ae,we;const lt=new Oi(w,l,T);if(K(a))we=h.filter.updateFullNode(l.eventCache.getNode(),p,H),ae=mt(l,we,!0,h.filter.filtersNodes());else{const at=bn(a);if(".priority"===at)we=h.filter.updatePriority(l.eventCache.getNode(),p),ae=mt(l,we,J.isFullyInitialized(),J.isFiltered());else{const xt=Xn(a),Cn=J.getNode().getImmediateChild(at);let Hn;if(K(xt))Hn=p;else{const pr=lt.getCompleteChild(at);Hn=null!=pr?".priority"===Li(xt)&&pr.getChild(Y(xt)).isEmpty()?pr:pr.updateChild(xt,p):Bt.EMPTY_NODE}ae=Cn.equals(Hn)?l:mt(l,h.filter.updateChild(J.getNode(),at,Hn,xt,lt,H),J.isFullyInitialized(),h.filter.filtersNodes())}}return ae}function qo(h,l){return h.eventCache.isCompleteForChild(l)}function Ti(h,l,a){return a.foreach((p,w)=>{l=l.updateChild(p,w)}),l}function Ko(h,l,a,p,w,T,H,J){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let we,ae=l;we=K(a)?p:new o1(null).setTree(a,p);const lt=l.serverCache.getNode();return we.children.inorderTraversal((at,xt)=>{if(lt.hasChild(at)){const Hn=Ti(0,l.serverCache.getNode().getImmediateChild(at),xt);ae=yi(h,ae,new Gn(at),Hn,w,T,H,J)}}),we.children.inorderTraversal((at,xt)=>{const Cn=!l.serverCache.isCompleteForChild(at)&&void 0===xt.value;if(!lt.hasChild(at)&&!Cn){const pr=Ti(0,l.serverCache.getNode().getImmediateChild(at),xt);ae=yi(h,ae,new Gn(at),pr,w,T,H,J)}}),ae}class zr{constructor(l,a){this.query_=l,this.eventRegistrations_=[];const p=this.query_._queryParams,w=new Z2(p.getIndex()),T=function Di(h){return h.loadsAllData()?new Z2(h.getIndex()):h.hasLimit()?new Eo(h):new v1(h)}(p);this.processor_=function fo(h){return{filter:h}}(T);const H=a.serverCache,J=a.eventCache,ae=w.updateFullNode(Bt.EMPTY_NODE,H.getNode(),null),we=T.updateFullNode(Bt.EMPTY_NODE,J.getNode(),null),lt=new E(ae,H.isFullyInitialized(),w.filtersNodes()),at=new E(we,J.isFullyInitialized(),T.filtersNodes());this.viewCache_=Se(at,lt),this.eventGenerator_=new b(this.query_)}get query(){return this.query_}}function X(h,l){const a=ln(h.viewCache_);return a&&(h.query._queryParams.loadsAllData()||!K(l)&&!a.getImmediateChild(bn(l)).isEmpty())?a.getChild(l):null}function ge(h){return 0===h.eventRegistrations_.length}function Qe(h,l,a){const p=[];if(a){(0,ie.hu)(null==l,"A cancel should cancel all event registrations.");const w=h.query._path;h.eventRegistrations_.forEach(T=>{const H=T.createCancelEvent(a,w);H&&p.push(H)})}if(l){let w=[];for(let T=0;T<h.eventRegistrations_.length;++T){const H=h.eventRegistrations_[T];if(H.matches(l)){if(l.hasAnyCallback()){w=w.concat(h.eventRegistrations_.slice(T+1));break}}else w.push(H)}h.eventRegistrations_=w}else h.eventRegistrations_=[];return p}function St(h,l,a,p){l.type===Jr.MERGE&&null!==l.source.queryId&&((0,ie.hu)(ln(h.viewCache_),"We should always have a full cache before handling merges"),(0,ie.hu)(Qn(h.viewCache_),"Missing event cache, even though we have a server cache"));const w=h.viewCache_,T=function _s(h,l,a,p,w){const T=new _a;let H,J;if(a.type===Jr.OVERWRITE){const we=a;we.source.fromUser?H=T1(h,l,we.path,we.snap,p,w,T):((0,ie.hu)(we.source.fromServer,"Unknown source."),J=we.source.tagged||l.serverCache.isFiltered()&&!K(we.path),H=yi(h,l,we.path,we.snap,p,w,J,T))}else if(a.type===Jr.MERGE){const we=a;we.source.fromUser?H=function O2(h,l,a,p,w,T,H){let J=l;return p.foreach((ae,we)=>{const lt=R(a,ae);qo(l,bn(lt))&&(J=T1(h,J,lt,we,w,T,H))}),p.foreach((ae,we)=>{const lt=R(a,ae);qo(l,bn(lt))||(J=T1(h,J,lt,we,w,T,H))}),J}(h,l,we.path,we.children,p,w,T):((0,ie.hu)(we.source.fromServer,"Unknown source."),J=we.source.tagged||l.serverCache.isFiltered(),H=Ko(h,l,we.path,we.children,p,w,J,T))}else if(a.type===Jr.ACK_USER_WRITE){const we=a;H=we.revert?function V2(h,l,a,p,w,T){let H;if(null!=e2(p,a))return l;{const J=new Oi(p,l,w),ae=l.eventCache.getNode();let we;if(K(a)||".priority"===bn(a)){let lt;if(l.serverCache.isFullyInitialized())lt=Si(p,ln(l));else{const at=l.serverCache.getNode();(0,ie.hu)(at instanceof Bt,"serverChildren would be complete if leaf node"),lt=Xi(p,at)}lt=lt,we=h.filter.updateFullNode(ae,lt,T)}else{const lt=bn(a);let at=hs(p,lt,l.serverCache);null==at&&l.serverCache.isCompleteForChild(lt)&&(at=ae.getImmediateChild(lt)),we=null!=at?h.filter.updateChild(ae,lt,at,Xn(a),J,T):l.eventCache.getNode().hasChild(lt)?h.filter.updateChild(ae,lt,Bt.EMPTY_NODE,Xn(a),J,T):ae,we.isEmpty()&&l.serverCache.isFullyInitialized()&&(H=Si(p,ln(l)),H.isLeafNode()&&(we=h.filter.updateFullNode(we,H,T)))}return H=l.serverCache.isFullyInitialized()||null!=e2(p,qn()),mt(l,we,H,h.filter.filtersNodes())}}(h,l,we.path,p,w,T):function Ni(h,l,a,p,w,T,H){if(null!=e2(w,a))return l;const J=l.serverCache.isFiltered(),ae=l.serverCache;if(null!=p.value){if(K(a)&&ae.isFullyInitialized()||ae.isCompleteForPath(a))return yi(h,l,a,ae.getNode().getChild(a),w,T,J,H);if(K(a)){let we=new o1(null);return ae.getNode().forEachChild(Dt,(lt,at)=>{we=we.set(new Gn(lt),at)}),Ko(h,l,a,we,w,T,J,H)}return l}{let we=new o1(null);return p.foreach((lt,at)=>{const xt=R(a,lt);ae.isCompleteForPath(xt)&&(we=we.set(lt,ae.getNode().getChild(xt)))}),Ko(h,l,a,we,w,T,J,H)}}(h,l,we.path,we.affectedTree,p,w,T)}else{if(a.type!==Jr.LISTEN_COMPLETE)throw(0,ie.g5)("Unknown operation type: "+a.type);H=function mo(h,l,a,p,w){const T=l.serverCache;return po(h,rn(l,T.getNode(),T.isFullyInitialized()||K(a),T.isFiltered()),a,p,m2,w)}(h,l,a.path,p,T)}const ae=T.getChanges();return function qr(h,l,a){const p=l.eventCache;if(p.isFullyInitialized()){const w=p.getNode().isLeafNode()||p.getNode().isEmpty(),T=Qn(h);(a.length>0||!h.eventCache.isFullyInitialized()||w&&!p.getNode().equals(T)||!p.getNode().getPriority().equals(T.getPriority()))&&a.push(W2(Qn(l)))}}(l,H,ae),{viewCache:H,changes:ae}}(h.processor_,w,l,a,p);return function Do(h,l){(0,ie.hu)(l.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,ie.hu)(l.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,T.viewCache),(0,ie.hu)(T.viewCache.serverCache.isFullyInitialized()||!w.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=T.viewCache,_n(h,T.changes,T.viewCache.eventCache.getNode(),null)}function _n(h,l,a,p){return function N(h,l,a,p){const w=[],T=[];return l.forEach(H=>{"child_changed"===H.type&&h.index_.indexedValueChanged(H.oldSnap,H.snapshotNode)&&T.push(function b2(h,l){return{type:"child_moved",snapshotNode:l,childName:h}}(H.childName,H.snapshotNode))}),z(h,w,"child_removed",l,p,a),z(h,w,"child_added",l,p,a),z(h,w,"child_moved",T,p,a),z(h,w,"child_changed",l,p,a),z(h,w,"value",l,p,a),w}(h.eventGenerator_,l,a,p?[p]:h.eventRegistrations_)}let jn,Ws;class H1{constructor(){this.views=new Map}}function g2(h,l,a,p){const w=l.source.queryId;if(null!==w){const T=h.views.get(w);return(0,ie.hu)(null!=T,"SyncTree gave us an op for an invalid query."),St(T,l,a,p)}{let T=[];for(const H of h.views.values())T=T.concat(St(H,l,a,p));return T}}function Cs(h,l,a,p,w){const H=h.views.get(l._queryIdentifier);if(!H){let J=Si(a,w?p:null),ae=!1;J?ae=!0:p instanceof Bt?(J=Xi(a,p),ae=!1):(J=Bt.EMPTY_NODE,ae=!1);const we=Se(new E(J,ae,!1),new E(p,w,!1));return new zr(l,we)}return H}function R2(h){const l=[];for(const a of h.views.values())a.query._queryParams.loadsAllData()||l.push(a);return l}function Vi(h,l){let a=null;for(const p of h.views.values())a=a||X(p,l);return a}function k2(h,l){return l._queryParams.loadsAllData()?$s(h):h.views.get(l._queryIdentifier)}function ws(h,l){return null!=k2(h,l)}function H2(h){return null!=$s(h)}function $s(h){for(const l of h.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let Ca=1;class Yo{constructor(l){this.listenProvider_=l,this.syncPointTree_=new o1(null),this.pendingWriteTree_=function Xe(){return{visibleWrites:ui.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wa(h,l,a,p,w){return function en(h,l,a,p,w){(0,ie.hu)(p>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===w&&(w=!0),h.allWrites.push({path:l,snap:a,writeId:p,visible:w}),w&&(h.visibleWrites=P2(h.visibleWrites,l,a)),h.lastWriteId=p}(h.pendingWriteTree_,l,a,p,w),w?zi(h,new Ji({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,a)):[]}function Zs(h,l,a=!1){const p=function Ua(h,l){for(let a=0;a<h.allWrites.length;a++){const p=h.allWrites[a];if(p.writeId===l)return p}return null}(h.pendingWriteTree_,l);if(function lo(h,l){const a=h.allWrites.findIndex(J=>J.writeId===l);(0,ie.hu)(a>=0,"removeWrite called with nonexistent writeId.");const p=h.allWrites[a];h.allWrites.splice(a,1);let w=p.visible,T=!1,H=h.allWrites.length-1;for(;w&&H>=0;){const J=h.allWrites[H];J.visible&&(H>=a&&Wo(J,p.path)?w=!1:Kt(p.path,J.path)&&(T=!0)),H--}return!!w&&(T?(function va(h){h.visibleWrites=uo(h.allWrites,s4,qn()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(p.snap?h.visibleWrites=Dn(h.visibleWrites,p.path):se(p.children,ae=>{h.visibleWrites=Dn(h.visibleWrites,R(p.path,ae))}),!0))}(h.pendingWriteTree_,l)){let T=new o1(null);return null!=p.snap?T=T.set(qn(),!0):se(p.children,H=>{T=T.set(new Gn(H),!0)}),zi(h,new Y1(p.path,T,a))}return[]}function dr(h,l,a){return zi(h,new Ji({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,a))}function a4(h,l,a,p){const w=l._path,T=h.syncPointTree_.get(w);let H=[];if(T&&("default"===l._queryIdentifier||ws(T,l))){const J=function Gs(h,l,a,p){const w=l._queryIdentifier,T=[];let H=[];const J=H2(h);if("default"===w)for(const[ae,we]of h.views.entries())H=H.concat(Qe(we,a,p)),ge(we)&&(h.views.delete(ae),we.query._queryParams.loadsAllData()||T.push(we.query));else{const ae=h.views.get(w);ae&&(H=H.concat(Qe(ae,a,p)),ge(ae)&&(h.views.delete(w),ae.query._queryParams.loadsAllData()||T.push(ae.query)))}return J&&!H2(h)&&T.push(new(function br(){return(0,ie.hu)(jn,"Reference.ts has not been loaded"),jn}())(l._repo,l._path)),{removed:T,events:H}}(T,l,a,p);(function ji(h){return 0===h.views.size})(T)&&(h.syncPointTree_=h.syncPointTree_.remove(w));const ae=J.removed;H=J.events;const we=-1!==ae.findIndex(at=>at._queryParams.loadsAllData()),lt=h.syncPointTree_.findOnPath(w,(at,xt)=>H2(xt));if(we&&!lt){const at=h.syncPointTree_.subtree(w);if(!at.isEmpty()){const xt=function To(h){return h.fold((l,a,p)=>{if(a&&H2(a))return[$s(a)];{let w=[];return a&&(w=R2(a)),se(p,(T,H)=>{w=w.concat(H)}),w}})}(at);for(let Cn=0;Cn<xt.length;++Cn){const Hn=xt[Cn],pr=Hn.query,T2=c4(h,Hn);h.listenProvider_.startListening(Ks(pr),ba(h,pr),T2.hashFn,T2.onComplete)}}}!lt&&ae.length>0&&!p&&(we?h.listenProvider_.stopListening(Ks(l),null):ae.forEach(at=>{const xt=h.queryToTagMap.get(Wa(at));h.listenProvider_.stopListening(Ks(at),xt)})),function I6(h,l){for(let a=0;a<l.length;++a){const p=l[a];if(!p._queryParams.loadsAllData()){const w=Wa(p),T=h.queryToTagMap.get(w);h.queryToTagMap.delete(w),h.tagToQueryMap.delete(T)}}}(h,ae)}return H}function qs(h,l,a){const p=l._path;let w=null,T=!1;h.syncPointTree_.foreachOnPath(p,(at,xt)=>{const Cn=ye(at,p);w=w||Vi(xt,Cn),T=T||H2(xt)});let J,H=h.syncPointTree_.get(p);H?(T=T||H2(H),w=w||Vi(H,qn())):(H=new H1,h.syncPointTree_=h.syncPointTree_.set(p,H)),null!=w?J=!0:(J=!1,w=Bt.EMPTY_NODE,h.syncPointTree_.subtree(p).foreachChild((xt,Cn)=>{const Hn=Vi(Cn,qn());Hn&&(w=w.updateImmediateChild(xt,Hn))}));const ae=ws(H,l);if(!ae&&!l._queryParams.loadsAllData()){const at=Wa(l);(0,ie.hu)(!h.queryToTagMap.has(at),"View does not exist, but we have a tag");const xt=function Ms(){return Ca++}();h.queryToTagMap.set(at,xt),h.tagToQueryMap.set(xt,at)}let lt=function t2(h,l,a,p,w,T){const H=Cs(h,l,p,w,T);return h.views.has(l._queryIdentifier)||h.views.set(l._queryIdentifier,H),function Ge(h,l){h.eventRegistrations_.push(l)}(H,a),function un(h,l){const a=h.viewCache_.eventCache,p=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(oe,(T,H)=>{p.push(N2(T,H))}),a.isFullyInitialized()&&p.push(W2(a.getNode())),_n(h,p,a.getNode(),l)}(H,a)}(H,l,a,a1(h.pendingWriteTree_,p),w,J);if(!ae&&!T){const at=k2(H,l);lt=lt.concat(function Xo(h,l,a){const p=l._path,w=ba(h,l),T=c4(h,a),H=h.listenProvider_.startListening(Ks(l),w,T.hashFn,T.onComplete),J=h.syncPointTree_.subtree(p);if(w)(0,ie.hu)(!H2(J.value),"If we're adding a query, it shouldn't be shadowed");else{const ae=J.fold((we,lt,at)=>{if(!K(we)&&lt&&H2(lt))return[$s(lt).query];{let xt=[];return lt&&(xt=xt.concat(R2(lt).map(Cn=>Cn.query))),se(at,(Cn,Hn)=>{xt=xt.concat(Hn)}),xt}});for(let we=0;we<ae.length;++we){const lt=ae[we];h.listenProvider_.stopListening(Ks(lt),ba(h,lt))}}return H}(h,l,at))}return lt}function Ga(h,l,a){const w=h.pendingWriteTree_,T=h.syncPointTree_.findOnPath(l,(H,J)=>{const we=Vi(J,ye(H,l));if(we)return we});return d2(w,l,T,a,!0)}function zi(h,l){return Jo(l,h.syncPointTree_,null,a1(h.pendingWriteTree_,qn()))}function Jo(h,l,a,p){if(K(h.path))return $a(h,l,a,p);{const w=l.get(qn());null==a&&null!=w&&(a=Vi(w,qn()));let T=[];const H=bn(h.path),J=h.operationForChild(H),ae=l.children.get(H);if(ae&&J){const we=a?a.getImmediateChild(H):null,lt=J2(p,H);T=T.concat(Jo(J,ae,we,lt))}return w&&(T=T.concat(g2(w,h,p,a))),T}}function $a(h,l,a,p){const w=l.get(qn());null==a&&null!=w&&(a=Vi(w,qn()));let T=[];return l.children.inorderTraversal((H,J)=>{const ae=a?a.getImmediateChild(H):null,we=J2(p,H),lt=h.operationForChild(H);lt&&(T=T.concat($a(lt,J,ae,we)))}),w&&(T=T.concat(g2(w,h,p,a))),T}function c4(h,l){const a=l.query,p=ba(h,a);return{hashFn:()=>(function O(h){return h.viewCache_.serverCache.getNode()}(l)||Bt.EMPTY_NODE).hash(),onComplete:w=>{if("ok"===w)return p?function Qo(h,l,a){const p=go(h,a);if(p){const w=wc(p),T=w.path,H=w.queryId,J=ye(T,l);return l4(h,T,new Qi(Pt(H),J))}return[]}(h,a._path,p):function ja(h,l){return zi(h,new Qi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(h,a._path);{const T=function yn(h,l){let a="Unknown Error";"too_big"===h?a="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?a="Client doesn't have permission to access the desired data.":"unavailable"===h&&(a="The service is unavailable");const p=new Error(h+" at "+l._path.toString()+": "+a);return p.code=h.toUpperCase(),p}(w,a);return a4(h,a,null,T)}}}}function ba(h,l){const a=Wa(l);return h.queryToTagMap.get(a)}function Wa(h){return h._path.toString()+"$"+h._queryIdentifier}function go(h,l){return h.tagToQueryMap.get(l)}function wc(h){const l=h.indexOf("$");return(0,ie.hu)(-1!==l&&l<h.length-1,"Bad queryKey."),{queryId:h.substr(l+1),path:new Gn(h.substr(0,l))}}function l4(h,l,a){const p=h.syncPointTree_.get(l);return(0,ie.hu)(p,"Missing sync point for query tag that we're tracking"),g2(p,a,a1(h.pendingWriteTree_,l),null)}function Ks(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function E6(){return(0,ie.hu)(Ws,"Reference.ts has not been loaded"),Ws}())(h._repo,h._path):h}class X2{constructor(l){this.node_=l}getImmediateChild(l){const a=this.node_.getImmediateChild(l);return new X2(a)}node(){return this.node_}}class Mc{constructor(l,a){this.syncTree_=l,this.path_=a}getImmediateChild(l){const a=R(this.path_,l);return new Mc(this.syncTree_,a)}node(){return Ga(this.syncTree_,this.path_)}}const R4=function(h,l,a){return h&&"object"==typeof h?((0,ie.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?Za(h[".sv"],l,a):"object"==typeof h[".sv"]?u4(h[".sv"],l):void(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},Za=function(h,l,a){if("timestamp"===h)return a.timestamp;(0,ie.hu)(!1,"Unexpected server value: "+h)},u4=function(h,l,a){h.hasOwnProperty("increment")||(0,ie.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const p=h.increment;"number"!=typeof p&&(0,ie.hu)(!1,"Unexpected increment value: "+p);const w=l.node();if((0,ie.hu)(null!=w,"Expected ChildrenNode.EMPTY_NODE for nulls"),!w.isLeafNode())return p;const H=w.getValue();return"number"!=typeof H?p:H+p},Ea=function(h,l,a,p){return es(l,new Mc(a,h),p)},vo=function(h,l,a){return es(h,new X2(l),a)};function es(h,l,a){const p=h.getPriority().val(),w=R4(p,l.getImmediateChild(".priority"),a);let T;if(h.isLeafNode()){const H=h,J=R4(H.getValue(),l,a);return J!==H.getValue()||w!==H.getPriority().val()?new Rr(J,d1(w)):h}{const H=h;return T=H,w!==H.getPriority().val()&&(T=T.updatePriority(new Rr(w))),H.forEachChild(oe,(J,ae)=>{const we=es(ae,l.getImmediateChild(J),a);we!==ae&&(T=T.updateImmediateChild(J,we))}),T}}class bc{constructor(l="",a=null,p={children:{},childCount:0}){this.name=l,this.parent=a,this.node=p}}function No(h,l){let a=l instanceof Gn?l:new Gn(l),p=h,w=bn(a);for(;null!==w;){const T=(0,ie.DV)(p.node.children,w)||{children:{},childCount:0};p=new bc(w,p,T),a=Xn(a),w=bn(a)}return p}function Ia(h){return h.node.value}function Ls(h,l){h.node.value=l,Ka(h)}function zo(h){return h.node.childCount>0}function I2(h,l){se(h.node.children,(a,p)=>{l(new bc(a,h,p))})}function Aa(h,l,a,p){a&&!p&&l(h),I2(h,w=>{Aa(w,l,!0,p)}),a&&p&&l(h)}function ta(h){return new Gn(null===h.parent?h.name:ta(h.parent)+"/"+h.name)}function Ka(h){null!==h.parent&&function Ya(h,l,a){const p=function h4(h){return void 0===Ia(h)&&!zo(h)}(a),w=(0,ie.r3)(h.node.children,l);p&&w?(delete h.node.children[l],h.node.childCount--,Ka(h)):!p&&!w&&(h.node.children[l]=a.node,h.node.childCount++,Ka(h))}(h.parent,h.name,h)}const l0=/[\[\].#$\/\u0000-\u001F\u007F]/,u0=/[\[\].#$\u0000-\u001F\u007F]/,Lo=10485760,Ps=function(h){return"string"==typeof h&&0!==h.length&&!l0.test(h)},Ys=function(h){return"string"==typeof h&&0!==h.length&&!u0.test(h)},Qs=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!tn(h)||h&&"object"==typeof h&&(0,ie.r3)(h,".sv")},bs=function(h,l,a,p){p&&void 0===l||Os((0,ie.gK)(h,"value"),l,a)},Os=function(h,l,a){const p=a instanceof Gn?new En(a,h):a;if(void 0===l)throw new Error(h+"contains undefined "+b1(p));if("function"==typeof l)throw new Error(h+"contains a function "+b1(p)+" with contents = "+l.toString());if(tn(l))throw new Error(h+"contains "+l.toString()+" "+b1(p));if("string"==typeof l&&l.length>Lo/3&&(0,ie.ug)(l)>Lo)throw new Error(h+"contains a string greater than "+Lo+" utf8 bytes "+b1(p)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let w=!1,T=!1;if(se(l,(H,J)=>{if(".value"===H)w=!0;else if(".priority"!==H&&".sv"!==H&&(T=!0,!Ps(H)))throw new Error(h+" contains an invalid key ("+H+") "+b1(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function u1(h,l){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(l),h.byteLength_+=(0,ie.ug)(l),$n(h)})(p,H),Os(h,J,p),function Ln(h){const l=h.parts_.pop();h.byteLength_-=(0,ie.ug)(l),h.parts_.length>0&&(h.byteLength_-=1)}(p)}),w&&T)throw new Error(h+' contains ".value" child '+b1(p)+" in addition to actual children.")}},f4=function(h,l,a,p){if(p&&void 0===l)return;const w=(0,ie.gK)(h,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(w+" must be an object containing the children to replace.");const T=[];se(l,(H,J)=>{const ae=new Gn(H);if(Os(w,J,R(a,ae)),".priority"===Li(ae)&&!Qs(J))throw new Error(w+"contains an invalid value for '"+ae.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");T.push(ae)}),function(h,l){let a,p;for(a=0;a<l.length;a++){p=l[a];const T=k(p);for(let H=0;H<T.length;H++)if((".priority"!==T[H]||H!==T.length-1)&&!Ps(T[H]))throw new Error(h+"contains an invalid key ("+T[H]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(st);let w=null;for(a=0;a<l.length;a++){if(p=l[a],null!==w&&Kt(w,p))throw new Error(h+"contains a path "+w.toString()+" that is ancestor of another path "+p.toString());w=p}}(w,T)},na=function(h,l,a){if(!a||void 0!==l){if(tn(l))throw new Error((0,ie.gK)(h,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Qs(l))throw new Error((0,ie.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Po=function(h,l,a,p){if(!(p&&void 0===a||Ps(a)))throw new Error((0,ie.gK)(h,l)+'was an invalid key = "'+a+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Js=function(h,l,a,p){if(!(p&&void 0===a||Ys(a)))throw new Error((0,ie.gK)(h,l)+'was an invalid path = "'+a+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},v2=function(h,l){if(".info"===bn(l))throw new Error(h+" failed = Can't modify data under /.info/")},Oo=function(h,l){const a=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!Ps(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==a.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Ys(h)}(a))throw new Error((0,ie.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class _i{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Qa(h,l){let a=null;for(let p=0;p<l.length;p++){const w=l[p],T=w.getPath();null!==a&&!bt(T,a.path)&&(h.eventLists_.push(a),a=null),null===a&&(a={events:[],path:T}),a.events.push(w)}a&&h.eventLists_.push(a)}function ra(h,l,a){Qa(h,a),Ic(h,p=>bt(p,l))}function F2(h,l,a){Qa(h,a),Ic(h,p=>Kt(p,l)||Kt(l,p))}function Ic(h,l){h.recursionDepth_++;let a=!0;for(let p=0;p<h.eventLists_.length;p++){const w=h.eventLists_[p];w&&(l(w.path)?(xa(h.eventLists_[p]),h.eventLists_[p]=null):a=!1)}a&&(h.eventLists_=[]),h.recursionDepth_--}function xa(h){for(let l=0;l<h.events.length;l++){const a=h.events[l];if(null!==a){h.events[l]=null;const p=a.getEventRunner();i1&&be("event: "+a.toString()),$1(p)}}}const Xs="repo_interrupt";class Da{constructor(l,a,p,w){this.repoInfo_=l,this.forceRestClient_=a,this.authTokenProvider_=p,this.appCheckProvider_=w,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _i,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Pi(),this.transactionQueueTree_=new bc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ia(h){const a=h.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+a}function Sa(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:ia(h)})}function Ta(h,l,a,p,w){h.dataUpdateCount++;const T=new Gn(l);a=h.interceptServerDataCallback_?h.interceptServerDataCallback_(l,a):a;let H=[];if(w)if(p){const ae=(0,ie.UI)(a,we=>d1(we));H=function Ma(h,l,a,p){const w=go(h,p);if(w){const T=wc(w),H=T.path,J=T.queryId,ae=ye(H,l),we=o1.fromObject(a);return l4(h,H,new A(Pt(J),ae,we))}return[]}(h.serverSyncTree_,T,ae,w)}else{const ae=d1(a);H=function So(h,l,a,p){const w=go(h,p);if(null!=w){const T=wc(w),H=T.path,J=T.queryId,ae=ye(H,l);return l4(h,H,new Ji(Pt(J),ae,a))}return[]}(h.serverSyncTree_,T,ae,w)}else if(p){const ae=(0,ie.UI)(a,we=>d1(we));H=function c0(h,l,a){const p=o1.fromObject(a);return zi(h,new A({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,p))}(h.serverSyncTree_,T,ae)}else{const ae=d1(a);H=dr(h.serverSyncTree_,T,ae)}let J=T;H.length>0&&(J=to(h,T)),F2(h.eventQueue_,J,H)}function Q1(h,l){Na(h,"connected",l),!1===l&&function Ac(h){yo(h,"onDisconnectEvents");const l=Sa(h),a=Pi();ls(h.onDisconnect_,qn(),(w,T)=>{const H=Ea(w,T,h.serverSyncTree_,l);Y2(a,w,H)});let p=[];ls(a,qn(),(w,T)=>{p=p.concat(dr(h.serverSyncTree_,w,T));const H=Is(h,w);to(h,H)}),h.onDisconnect_=Pi(),F2(h.eventQueue_,qn(),p)}(h)}function Na(h,l,a){const p=new Gn("/.info/"+l),w=d1(a);h.infoData_.updateSnapshot(p,w);const T=dr(h.infoSyncTree_,p,w);F2(h.eventQueue_,p,T)}function Vo(h){return h.nextWriteId_++}function Ro(h,l,a,p,w){yo(h,"set",{path:l.toString(),value:a,priority:p});const T=Sa(h),H=d1(a,p),J=Ga(h.serverSyncTree_,l),ae=vo(H,J,T),we=Vo(h),lt=wa(h.serverSyncTree_,l,ae,we,!0);Qa(h.eventQueue_,lt),h.server_.put(l.toString(),H.val(!0),(xt,Cn)=>{const Hn="ok"===xt;Hn||rt("set at "+l+" failed: "+xt);const pr=Zs(h.serverSyncTree_,we,!Hn);F2(h.eventQueue_,l,pr),Vs(0,w,xt,Cn)});const at=Is(h,l);to(h,at),F2(h.eventQueue_,at,[])}function Ja(h,l,a){h.server_.onDisconnectCancel(l.toString(),(p,w)=>{"ok"===p&&Io(h.onDisconnect_,l),Vs(0,a,p,w)})}function x2(h,l,a,p){const w=d1(a);h.server_.onDisconnectPut(l.toString(),w.val(!0),(T,H)=>{"ok"===T&&Y2(h.onDisconnect_,l,w),Vs(0,p,T,H)})}function za(h,l,a){let p;p=".info"===bn(l._path)?a4(h.infoSyncTree_,l,a):a4(h.serverSyncTree_,l,a),ra(h.eventQueue_,l._path,p)}function Dc(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Xs)}function yo(h,...l){let a="";h.persistentConnection_&&(a=h.persistentConnection_.id+":"),be(a,...l)}function Vs(h,l,a,p){l&&$1(()=>{if("ok"===a)l(null);else{const w=(a||"error").toUpperCase();let T=w;p&&(T+=": "+p);const H=new Error(T);H.code=w,l(H)}})}function eo(h,l,a){return Ga(h.serverSyncTree_,l,a)||Bt.EMPTY_NODE}function sa(h,l=h.transactionQueueTree_){if(l||Sc(h,l),Ia(l)){const a=ec(h,l);(0,ie.hu)(a.length>0,"Sending zero length transaction queue"),a.every(w=>0===w.status)&&function F4(h,l,a){const p=a.map(we=>we.currentWriteId),w=eo(h,l,p);let T=w;const H=w.hash();for(let we=0;we<a.length;we++){const lt=a[we];(0,ie.hu)(0===lt.status,"tryToSendTransactionQueue_: items in queue should all be run."),lt.status=1,lt.retryCount++;const at=ye(l,lt.path);T=T.updateChild(at,lt.currentOutputSnapshotRaw)}const J=T.val(!0),ae=l;h.server_.put(ae.toString(),J,we=>{yo(h,"transaction put response",{path:ae.toString(),status:we});let lt=[];if("ok"===we){const at=[];for(let xt=0;xt<a.length;xt++)a[xt].status=2,lt=lt.concat(Zs(h.serverSyncTree_,a[xt].currentWriteId)),a[xt].onComplete&&at.push(()=>a[xt].onComplete(null,!0,a[xt].currentOutputSnapshotResolved)),a[xt].unwatcher();Sc(h,No(h.transactionQueueTree_,l)),sa(h,h.transactionQueueTree_),F2(h.eventQueue_,l,lt);for(let xt=0;xt<at.length;xt++)$1(at[xt])}else{if("datastale"===we)for(let at=0;at<a.length;at++)a[at].status=3===a[at].status?4:0;else{rt("transaction at "+ae.toString()+" failed: "+we);for(let at=0;at<a.length;at++)a[at].status=4,a[at].abortReason=we}to(h,l)}},H)}(h,ta(l),a)}else zo(l)&&I2(l,a=>{sa(h,a)})}function to(h,l){const a=U2(h,l),p=ta(a);return function d4(h,l,a){if(0===l.length)return;const p=[];let w=[];const H=l.filter(J=>0===J.status).map(J=>J.currentWriteId);for(let J=0;J<l.length;J++){const ae=l[J],we=ye(a,ae.path);let at,lt=!1;if((0,ie.hu)(null!==we,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ae.status)lt=!0,at=ae.abortReason,w=w.concat(Zs(h.serverSyncTree_,ae.currentWriteId,!0));else if(0===ae.status)if(ae.retryCount>=25)lt=!0,at="maxretry",w=w.concat(Zs(h.serverSyncTree_,ae.currentWriteId,!0));else{const xt=eo(h,ae.path,H);ae.currentInputSnapshot=xt;const Cn=l[J].update(xt.val());if(void 0!==Cn){Os("transaction failed: Data returned ",Cn,ae.path);let Hn=d1(Cn);"object"==typeof Cn&&null!=Cn&&(0,ie.r3)(Cn,".priority")||(Hn=Hn.updatePriority(xt.getPriority()));const T2=ae.currentWriteId,ro=Sa(h),rs=vo(Hn,xt,ro);ae.currentOutputSnapshotRaw=Hn,ae.currentOutputSnapshotResolved=rs,ae.currentWriteId=Vo(h),H.splice(H.indexOf(T2),1),w=w.concat(wa(h.serverSyncTree_,ae.path,rs,ae.currentWriteId,ae.applyLocally)),w=w.concat(Zs(h.serverSyncTree_,T2,!0))}else lt=!0,at="nodata",w=w.concat(Zs(h.serverSyncTree_,ae.currentWriteId,!0))}F2(h.eventQueue_,a,w),w=[],lt&&(l[J].status=2,setTimeout(l[J].unwatcher,Math.floor(0)),l[J].onComplete&&p.push("nodata"===at?()=>l[J].onComplete(null,!1,l[J].currentInputSnapshot):()=>l[J].onComplete(new Error(at),!1,null)))}Sc(h,h.transactionQueueTree_);for(let J=0;J<p.length;J++)$1(p[J]);sa(h,h.transactionQueueTree_)}(h,ec(h,a),p),p}function U2(h,l){let a,p=h.transactionQueueTree_;for(a=bn(l);null!==a&&void 0===Ia(p);)p=No(p,a),a=bn(l=Xn(l));return p}function ec(h,l){const a=[];return tc(h,l,a),a.sort((p,w)=>p.order-w.order),a}function tc(h,l,a){const p=Ia(l);if(p)for(let w=0;w<p.length;w++)a.push(p[w]);I2(l,w=>{tc(h,w,a)})}function Sc(h,l){const a=Ia(l);if(a){let p=0;for(let w=0;w<a.length;w++)2!==a[w].status&&(a[p]=a[w],p++);a.length=p,Ls(l,a.length>0?a:void 0)}I2(l,p=>{Sc(h,p)})}function Is(h,l){const a=ta(U2(h,l)),p=No(h.transactionQueueTree_,l);return function qa(h,l,a){let p=a?h:h.parent;for(;null!==p;){if(l(p))return!0;p=p.parent}}(p,w=>{oa(h,w)}),oa(h,p),Aa(p,w=>{oa(h,w)}),a}function oa(h,l){const a=Ia(l);if(a){const p=[];let w=[],T=-1;for(let H=0;H<a.length;H++)3===a[H].status||(1===a[H].status?((0,ie.hu)(T===H-1,"All SENT items should be at beginning of queue."),T=H,a[H].status=3,a[H].abortReason="set"):((0,ie.hu)(0===a[H].status,"Unexpected transaction status in abort"),a[H].unwatcher(),w=w.concat(Zs(h.serverSyncTree_,a[H].currentWriteId,!0)),a[H].onComplete&&p.push(a[H].onComplete.bind(null,new Error("set"),!1,null))));-1===T?Ls(l,void 0):a.length=T+1,F2(h.eventQueue_,ta(l),w);for(let H=0;H<p.length;H++)$1(p[H])}}const m4=function(h,l){const a=Ri(h),p=a.namespace;return"firebase.com"===a.domain&&ke(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==a.domain&&ke("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ti(a.host,a.secure,p,"ws"===a.scheme||"wss"===a.scheme,l,"",p!==a.subdomain),path:new Gn(a.pathString)}},Ri=function(h){let l="",a="",p="",w="",T="",H=!0,J="https",ae=443;if("string"==typeof h){let we=h.indexOf("//");we>=0&&(J=h.substring(0,we-1),h=h.substring(we+2));let lt=h.indexOf("/");-1===lt&&(lt=h.length);let at=h.indexOf("?");-1===at&&(at=h.length),l=h.substring(0,Math.min(lt,at)),lt<at&&(w=function La(h){let l="";const a=h.split("/");for(let p=0;p<a.length;p++)if(a[p].length>0){let w=a[p];try{w=decodeURIComponent(w.replace(/\+/g," "))}catch(T){}l+="/"+w}return l}(h.substring(lt,at)));const xt=function p4(h){const l={};"?"===h.charAt(0)&&(h=h.substring(1));for(const a of h.split("&")){if(0===a.length)continue;const p=a.split("=");2===p.length?l[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):rt(`Invalid query segment '${a}' in query '${h}'`)}return l}(h.substring(Math.min(h.length,at)));we=l.indexOf(":"),we>=0?(H="https"===J||"wss"===J,ae=parseInt(l.substring(we+1),10)):we=l.length;const Cn=l.slice(0,we);if("localhost"===Cn.toLowerCase())a="localhost";else if(Cn.split(".").length<=2)a=Cn;else{const Hn=l.indexOf(".");p=l.substring(0,Hn).toLowerCase(),a=l.substring(Hn+1),T=p}"ns"in xt&&(T=xt.ns)}return{host:l,port:ae,domain:a,subdomain:p,secure:H,scheme:J,pathString:w,namespace:T}};class Tc{constructor(l,a,p,w){this.eventType=l,this.eventRegistration=a,this.snapshot=p,this.prevName=w}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ie.Pz)(this.snapshot.exportVal())}}class g4{constructor(l,a,p){this.eventRegistration=l,this.error=a,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Pa{constructor(l,a){this.snapshotCallback=l,this.cancelCallback=a}onValue(l,a){this.snapshotCallback.call(null,l,a)}onCancel(l){return(0,ie.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class D2{constructor(l,a){this._repo=l,this._path=a}cancel(){const l=new ie.BH;return Ja(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){v2("OnDisconnect.remove",this._path);const l=new ie.BH;return x2(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){v2("OnDisconnect.set",this._path),bs("OnDisconnect.set",l,this._path,!1);const a=new ie.BH;return x2(this._repo,this._path,l,a.wrapCallback(()=>{})),a.promise}setWithPriority(l,a){v2("OnDisconnect.setWithPriority",this._path),bs("OnDisconnect.setWithPriority",l,this._path,!1),na("OnDisconnect.setWithPriority",a,!1);const p=new ie.BH;return function ts(h,l,a,p,w){const T=d1(a,p);h.server_.onDisconnectPut(l.toString(),T.val(!0),(H,J)=>{"ok"===H&&Y2(h.onDisconnect_,l,T),Vs(0,w,H,J)})}(this._repo,this._path,l,a,p.wrapCallback(()=>{})),p.promise}update(l){v2("OnDisconnect.update",this._path),f4("OnDisconnect.update",l,this._path,!1);const a=new ie.BH;return function xc(h,l,a,p){if((0,ie.xb)(a))return be("onDisconnect().update() called with empty data.  Don't do anything."),void Vs(0,p,"ok",void 0);h.server_.onDisconnectMerge(l.toString(),a,(w,T)=>{"ok"===w&&se(a,(H,J)=>{const ae=d1(J);Y2(h.onDisconnect_,R(l,H),ae)}),Vs(0,p,w,T)})}(this._repo,this._path,l,a.wrapCallback(()=>{})),a.promise}}class C{constructor(l,a,p,w){this._repo=l,this._path=a,this._queryParams=p,this._orderByCalled=w}get key(){return K(this._path)?null:Li(this._path)}get ref(){return new $(this._repo,this._path)}get _queryIdentifier(){const l=li(this._queryParams),a=$e(l);return"{}"===a?"default":a}get _queryObject(){return li(this._queryParams)}isEqual(l){if(!((l=(0,ie.m9)(l))instanceof C))return!1;const a=this._repo===l._repo,p=bt(this._path,l._path);return a&&p&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function f1(h){let l="";for(let a=h.pieceNum_;a<h.pieces_.length;a++)""!==h.pieces_[a]&&(l+="/"+encodeURIComponent(String(h.pieces_[a])));return l||"/"}(this._path)}}function d(h,l){if(!0===h._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function g(h){let l=null,a=null;if(h.hasStart()&&(l=h.getIndexStartValue()),h.hasEnd()&&(a=h.getIndexEndValue()),h.getIndex()===Dt){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",w="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Zn)throw new Error(p);if("string"!=typeof l)throw new Error(w)}if(h.hasEnd()){if(h.getIndexEndName()!==Jt)throw new Error(p);if("string"!=typeof a)throw new Error(w)}}else if(h.getIndex()===oe){if(null!=l&&!Qs(l)||null!=a&&!Qs(a))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ie.hu)(h.getIndex()instanceof Zr||h.getIndex()===vi,"unknown index type."),null!=l&&"object"==typeof l||null!=a&&"object"==typeof a)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function I(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class $ extends C{constructor(l,a){super(l,a,new Bs,!1)}get parent(){const l=Y(this._path);return null===l?null:new $(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class ne{constructor(l,a,p){this._node=l,this.ref=a,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const a=new Gn(l),p=Ht(this.ref,l);return new ne(this._node.getChild(a),p,oe)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,w)=>l(new ne(w,Ht(this.ref,p),oe)))}hasChild(l){const a=new Gn(l);return!this._node.getChild(a).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Fe(h,l){return(h=(0,ie.m9)(h))._checkNotDeleted("ref"),void 0!==l?Ht(h._root,l):h._root}function gt(h,l){(h=(0,ie.m9)(h))._checkNotDeleted("refFromURL");const a=m4(l,h._repo.repoInfo_.nodeAdmin);Oo("refFromURL",a);const p=a.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&p.host!==h._repo.repoInfo_.host&&ke("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+h._repo.repoInfo_.host+")"),Fe(h,a.path.toString())}function Ht(h,l){return null===bn((h=(0,ie.m9)(h))._path)?(a=l,a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),Js("child","path",a,!1)):Js("child","path",l,!1),new $(h._repo,R(h._path,l));var a}function fi(h,l){h=(0,ie.m9)(h),v2("set",h._path),bs("set",l,h._path,!1);const a=new ie.BH;return Ro(h._repo,h._path,l,null,a.wrapCallback(()=>{})),a.promise}function Nc(h,l){f4("update",l,h._path,!1);const a=new ie.BH;return function A2(h,l,a,p){yo(h,"update",{path:l.toString(),value:a});let w=!0;const T=Sa(h),H={};if(se(a,(J,ae)=>{w=!1,H[J]=Ea(R(l,J),d1(ae),h.serverSyncTree_,T)}),w)be("update() called with empty data.  Don't do anything."),Vs(0,p,"ok",void 0);else{const J=Vo(h),ae=function E2(h,l,a,p){!function _c(h,l,a,p){(0,ie.hu)(p>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:l,children:a,writeId:p,visible:!0}),h.visibleWrites=ys(h.visibleWrites,l,a),h.lastWriteId=p}(h.pendingWriteTree_,l,a,p);const w=o1.fromObject(a);return zi(h,new A({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,w))}(h.serverSyncTree_,l,H,J);Qa(h.eventQueue_,ae),h.server_.merge(l.toString(),a,(we,lt)=>{const at="ok"===we;at||rt("update at "+l+" failed: "+we);const xt=Zs(h.serverSyncTree_,J,!at),Cn=xt.length>0?to(h,l):l;F2(h.eventQueue_,Cn,xt),Vs(0,p,we,lt)}),se(a,we=>{const lt=Is(h,R(l,we));to(h,lt)}),F2(h.eventQueue_,l,[])}}(h._repo,h._path,l,a.wrapCallback(()=>{})),a.promise}function U4(h){return function Kr(h,l){const a=function V4(h,l){const a=l._path;let p=null;h.syncPointTree_.foreachOnPath(a,(we,lt)=>{const at=ye(we,a);p=p||Vi(lt,at)});let w=h.syncPointTree_.get(a);w?p=p||Vi(w,qn()):(w=new H1,h.syncPointTree_=h.syncPointTree_.set(a,w));const T=null!=p,H=T?new E(p,!0,!1):null;return function F(h){return Qn(h.viewCache_)}(Cs(w,l,a1(h.pendingWriteTree_,l._path),T?H.getNode():Bt.EMPTY_NODE,T))}(h.serverSyncTree_,l);return null!=a?Promise.resolve(a):h.server_.get(l).then(p=>{const w=d1(p).withIndex(l._queryParams.getIndex()),T=dr(h.serverSyncTree_,l._path,w);return ra(h.eventQueue_,l._path,T),Promise.resolve(w)},p=>(yo(h,"get for query "+(0,ie.Pz)(l)+" failed: "+p),Promise.reject(new Error(p))))}((h=(0,ie.m9)(h))._repo,h).then(l=>new ne(l,new $(h._repo,h._path),h._queryParams.getIndex()))}class no{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,a){const p=a._queryParams.getIndex();return new Tc("value",this,new ne(l.snapshotNode,new $(a._repo,a._path),p))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,a){return this.callbackContext.hasCancelCallback?new g4(this,l,a):null}matches(l){return l instanceof no&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class As{constructor(l,a){this.eventType=l,this.callbackContext=a}respondsTo(l){let a="children_added"===l?"child_added":l;return a="children_removed"===a?"child_removed":a,this.eventType===a}createCancelEvent(l,a){return this.callbackContext.hasCancelCallback?new g4(this,l,a):null}createEvent(l,a){(0,ie.hu)(null!=l.childName,"Child events should have a childName.");const p=Ht(new $(a._repo,a._path),l.childName),w=a._queryParams.getIndex();return new Tc(l.type,this,new ne(l.snapshotNode,p,w),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof As&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fs(h,l,a,p,w){let T;if("object"==typeof p&&(T=void 0,w=p),"function"==typeof p&&(T=p),w&&w.onlyOnce){const ae=a,we=(lt,at)=>{za(h._repo,h,J),ae(lt,at)};we.userCallback=a.userCallback,we.context=a.context,a=we}const H=new Pa(a,T||void 0),J="value"===l?new no(H):new As(l,H);return function Xa(h,l,a){let p;p=".info"===bn(l._path)?qs(h.infoSyncTree_,l,a):qs(h.serverSyncTree_,l,a),ra(h.eventQueue_,l._path,p)}(h._repo,h,J),()=>za(h._repo,h,J)}function zc(h,l,a,p){return fs(h,"value",l,a,p)}function nc(h,l,a,p){return fs(h,"child_added",l,a,p)}function Lc(h,l,a,p){return fs(h,"child_changed",l,a,p)}function Pc(h,l,a,p){return fs(h,"child_moved",l,a,p)}function S2(h,l,a,p){return fs(h,"child_removed",l,a,p)}function Oc(h,l,a){let p=null;const w=a?new Pa(a):null;"value"===l?p=new no(w):l&&(p=new As(l,w)),za(h._repo,h,p)}class xs{}class _o extends xs{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){bs("endAt",this._value,l._path,!0);const a=K2(l._queryParams,this._value,this._key);if(I(a),g(a),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new C(l._repo,l._path,a,l._orderByCalled)}}class Vc extends xs{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){bs("endBefore",this._value,l._path,!1);const a=function u2(h,l,a){let p,w;return h.index_===Dt?("string"==typeof l&&(l=Go(l)),w=K2(h,l,a)):(p=null==a?Zn:Go(a),w=K2(h,l,p)),w.endBeforeSet_=!0,w}(l._queryParams,this._value,this._key);if(I(a),g(a),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new C(l._repo,l._path,a,l._orderByCalled)}}class B4 extends xs{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){bs("startAt",this._value,l._path,!0);const a=co(l._queryParams,this._value,this._key);if(I(a),g(a),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new C(l._repo,l._path,a,l._orderByCalled)}}class M3 extends xs{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){bs("startAfter",this._value,l._path,!1);const a=function L2(h,l,a){let p;if(h.index_===Dt)"string"==typeof l&&(l=bo(l)),p=co(h,l,a);else{let w;w=null==a?Jt:bo(a),p=co(h,l,w)}return p.startAfterSet_=!0,p}(l._queryParams,this._value,this._key);if(I(a),g(a),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new C(l._repo,l._path,a,l._orderByCalled)}}class f0 extends xs{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new C(l._repo,l._path,function q2(h,l){const a=h.copy();return a.limitSet_=!0,a.limit_=l,a.viewFrom_="l",a}(l._queryParams,this._limit),l._orderByCalled)}}class d0 extends xs{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new C(l._repo,l._path,function z2(h,l){const a=h.copy();return a.limitSet_=!0,a.limit_=l,a.viewFrom_="r",a}(l._queryParams,this._limit),l._orderByCalled)}}class b3 extends xs{constructor(l){super(),this._path=l}_apply(l){d(l,"orderByChild");const a=new Gn(this._path);if(K(a))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Zr(a),w=js(l._queryParams,p);return g(w),new C(l._repo,l._path,w,!0)}}class E3 extends xs{_apply(l){d(l,"orderByKey");const a=js(l._queryParams,Dt);return g(a),new C(l._repo,l._path,a,!0)}}class g0 extends xs{_apply(l){d(l,"orderByPriority");const a=js(l._queryParams,oe);return g(a),new C(l._repo,l._path,a,!0)}}class S6 extends xs{_apply(l){d(l,"orderByValue");const a=js(l._queryParams,vi);return g(a),new C(l._repo,l._path,a,!0)}}class G4 extends xs{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){if(bs("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _o(this._value,this._key)._apply(new B4(this._value,this._key)._apply(l))}}function Rs(h,...l){let a=(0,ie.m9)(h);for(const p of l)a=p._apply(a);return a}(function Tn(h){(0,ie.hu)(!jn,"__referenceConstructor has already been defined"),jn=h})($),function Cc(h){(0,ie.hu)(!Ws,"__referenceConstructor has already been defined"),Ws=h}($);const Rc={};function $4(h,l,a,p,w){let T=p||h.options.databaseURL;void 0===T&&(h.options.projectId||ke("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),be("Using default host for project ",h.options.projectId),T=`${h.options.projectId}-default-rtdb.firebaseio.com`);let ae,we,H=m4(T,w),J=H.repoInfo;"undefined"!=typeof process&&process.env&&(we=process.env.FIREBASE_DATABASE_EMULATOR_HOST),we?(ae=!0,T=`http://${we}?ns=${J.namespace}`,H=m4(T,w),J=H.repoInfo):ae=!H.repoInfo.secure;const lt=w&&ae?new Zt(Zt.OWNER):new Tt(h.name,h.options,l);Oo("Invalid Firebase Database URL",H),K(H.path)||ke("Database URL must point to the root of a Firebase Database (not including a child path).");const at=function Va(h,l,a,p){let w=Rc[l.name];w||(w={},Rc[l.name]=w);let T=w[h.toURLString()];return T&&ke("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),T=new Da(h,false,a,p),w[h.toURLString()]=T,T}(J,h,lt,new Yn(h.name,a));return new _0(at,h)}class _0{constructor(l,a){this._repoInternal=l,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function H4(h,l,a){if(h.stats_=s1(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new cs(h.repoInfo_,(p,w,T,H)=>{Ta(h,p,w,T,H)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>Q1(h,!0),0);else{if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ie.Pz)(a)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}h.persistentConnection_=new U(h.repoInfo_,l,(p,w,T,H)=>{Ta(h,p,w,T,H)},p=>{Q1(h,p)},p=>{!function F1(h,l){se(l,(a,p)=>{Na(h,a,p)})}(h,p)},h.authTokenProvider_,h.appCheckProvider_,a),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(p=>{h.server_.refreshAuthToken(p)}),h.appCheckProvider_.addTokenChangeListener(p=>{h.server_.refreshAppCheckToken(p.token)}),h.statsReporter_=function Yr(h,l){const a=h.toString();return R1[a]||(R1[a]=l()),R1[a]}(h.repoInfo_,()=>new Ns(h.stats_,h.server_)),h.infoData_=new Ts,h.infoSyncTree_=new Yo({startListening:(p,w,T,H)=>{let J=[];const ae=h.infoData_.getNode(p._path);return ae.isEmpty()||(J=dr(h.infoSyncTree_,p._path,ae),setTimeout(()=>{H("ok")},0)),J},stopListening:()=>{}}),Na(h,"connected",!1),h.serverSyncTree_=new Yo({startListening:(p,w,T,H)=>(h.server_.listen(p,T,w,(J,ae)=>{const we=H(J,ae);F2(h.eventQueue_,p._path,we)}),[]),stopListening:(p,w)=>{h.server_.unlisten(p,w)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new $(this._repo,qn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function W4(h,l){const a=Rc[l];(!a||a[h.key]!==h)&&ke(`Database ${l}(${h.repoInfo_}) has already been deleted.`),Dc(h),delete a[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&ke("Cannot call "+l+" on a deleted database.")}}function y4(){Vr.IS_TRANSPORT_INITIALIZED&&rt("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function _4(){y4(),Ut.forceDisallow()}function kc(){y4(),Fr.forceDisallow(),Ut.forceAllow()}function z6(h,l){Ne(h,l)}const w0={".sv":"timestamp"};class M0{constructor(l,a){this.committed=l,this.snapshot=a}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}U.prototype.simpleListen=function(h,l){this.sendRequest("q",{p:h},l)},U.prototype.echo=function(h,l){this.sendRequest("echo",{d:h},l)},function ks(h){N1(xn.SDK_VERSION),(0,xn._registerComponent)(new zn.wA("database",(l,{instanceIdentifier:a})=>$4(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),a),"PUBLIC").setMultipleInstances(!0)),(0,xn.registerVersion)(vr,"0.13.1",h),(0,xn.registerVersion)(vr,"0.13.1","esm2017")}();const E0=new gr.Yd("@firebase/database-compat"),y1=function(h){E0.warn("FIREBASE WARNING: "+h)};class Fc{constructor(l){this._delegate=l}cancel(l){(0,ie.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.cancel","onComplete",l,!0);const a=this._delegate.cancel();return l&&a.then(()=>l(null),p=>l(p)),a}remove(l){(0,ie.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ie.Wj)("OnDisconnect.remove","onComplete",l,!0);const a=this._delegate.remove();return l&&a.then(()=>l(null),p=>l(p)),a}set(l,a){(0,ie.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ie.Wj)("OnDisconnect.set","onComplete",a,!0);const p=this._delegate.set(l);return a&&p.then(()=>a(null),w=>a(w)),p}setWithPriority(l,a,p){(0,ie.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ie.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const w=this._delegate.setWithPriority(l,a);return p&&w.then(()=>p(null),T=>p(T)),w}update(l,a){if((0,ie.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){const w={};for(let T=0;T<l.length;++T)w[""+T]=l[T];l=w,y1("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ie.Wj)("OnDisconnect.update","onComplete",a,!0);const p=this._delegate.update(l);return a&&p.then(()=>a(null),w=>a(w)),p}}class ko{constructor(l,a){this.committed=l,this.snapshot=a}toJSON(){return(0,ie.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ci{constructor(l,a){this._database=l,this._delegate=a}val(){return(0,ie.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ie.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ie.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ie.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(l){return(0,ie.Dv)("DataSnapshot.child",0,1,arguments.length),l=String(l),Js("DataSnapshot.child","path",l,!1),new Ci(this._database,this._delegate.child(l))}hasChild(l){return(0,ie.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Js("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)}getPriority(){return(0,ie.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(l){return(0,ie.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ie.Wj)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(a=>l(new Ci(this._database,a)))}hasChildren(){return(0,ie.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ie.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ie.Dv)("DataSnapshot.ref",0,0,arguments.length),new Hs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class y2{constructor(l,a){this.database=l,this._delegate=a}on(l,a,p,w){var T;(0,ie.Dv)("Query.on",2,4,arguments.length),(0,ie.Wj)("Query.on","callback",a,!1);const H=y2.getCancelAndContextArgs_("Query.on",p,w),J=(we,lt)=>{a.call(H.context,new Ci(this.database,we),lt)};J.userCallback=a,J.context=H.context;const ae=null===(T=H.cancel)||void 0===T?void 0:T.bind(H.context);switch(l){case"value":return zc(this._delegate,J,ae),a;case"child_added":return nc(this._delegate,J,ae),a;case"child_removed":return S2(this._delegate,J,ae),a;case"child_changed":return Lc(this._delegate,J,ae),a;case"child_moved":return Pc(this._delegate,J,ae),a;default:throw new Error((0,ie.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(l,a,p){if((0,ie.Dv)("Query.off",0,3,arguments.length),function(h,l,a){if(void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ie.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,l),(0,ie.Wj)("Query.off","callback",a,!0),(0,ie.lb)("Query.off","context",p,!0),a){const w=()=>{};w.userCallback=a,w.context=p,Oc(this._delegate,l,w)}else Oc(this._delegate,l)}get(){return U4(this._delegate).then(l=>new Ci(this.database,l))}once(l,a,p,w){(0,ie.Dv)("Query.once",1,4,arguments.length),(0,ie.Wj)("Query.once","callback",a,!0);const T=y2.getCancelAndContextArgs_("Query.once",p,w),H=new ie.BH,J=(we,lt)=>{const at=new Ci(this.database,we);a&&a.call(T.context,at,lt),H.resolve(at)};J.userCallback=a,J.context=T.context;const ae=we=>{T.cancel&&T.cancel.call(T.context,we),H.reject(we)};switch(l){case"value":zc(this._delegate,J,ae,{onlyOnce:!0});break;case"child_added":nc(this._delegate,J,ae,{onlyOnce:!0});break;case"child_removed":S2(this._delegate,J,ae,{onlyOnce:!0});break;case"child_changed":Lc(this._delegate,J,ae,{onlyOnce:!0});break;case"child_moved":Pc(this._delegate,J,ae,{onlyOnce:!0});break;default:throw new Error((0,ie.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return H.promise}limitToFirst(l){return(0,ie.Dv)("Query.limitToFirst",1,1,arguments.length),new y2(this.database,Rs(this._delegate,function rc(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new f0(h)}(l)))}limitToLast(l){return(0,ie.Dv)("Query.limitToLast",1,1,arguments.length),new y2(this.database,Rs(this._delegate,function p0(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new d0(h)}(l)))}orderByChild(l){return(0,ie.Dv)("Query.orderByChild",1,1,arguments.length),new y2(this.database,Rs(this._delegate,function j4(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Js("orderByChild","path",h,!1),new b3(h)}(l)))}orderByKey(){return(0,ie.Dv)("Query.orderByKey",0,0,arguments.length),new y2(this.database,Rs(this._delegate,function m0(){return new E3}()))}orderByPriority(){return(0,ie.Dv)("Query.orderByPriority",0,0,arguments.length),new y2(this.database,Rs(this._delegate,function v0(){return new g0}()))}orderByValue(){return(0,ie.Dv)("Query.orderByValue",0,0,arguments.length),new y2(this.database,Rs(this._delegate,function T6(){return new S6}()))}startAt(l=null,a){return(0,ie.Dv)("Query.startAt",0,2,arguments.length),new y2(this.database,Rs(this._delegate,function w3(h=null,l){return Po("startAt","key",l,!0),new B4(h,l)}(l,a)))}startAfter(l=null,a){return(0,ie.Dv)("Query.startAfter",0,2,arguments.length),new y2(this.database,Rs(this._delegate,function h0(h,l){return Po("startAfter","key",l,!0),new M3(h,l)}(l,a)))}endAt(l=null,a){return(0,ie.Dv)("Query.endAt",0,2,arguments.length),new y2(this.database,Rs(this._delegate,function x6(h,l){return Po("endAt","key",l,!0),new _o(h,l)}(l,a)))}endBefore(l=null,a){return(0,ie.Dv)("Query.endBefore",0,2,arguments.length),new y2(this.database,Rs(this._delegate,function D6(h,l){return Po("endBefore","key",l,!0),new Vc(h,l)}(l,a)))}equalTo(l,a){return(0,ie.Dv)("Query.equalTo",1,2,arguments.length),new y2(this.database,Rs(this._delegate,function v4(h,l){return Po("equalTo","key",l,!0),new G4(h,l)}(l,a)))}toString(){return(0,ie.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ie.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(l){if((0,ie.Dv)("Query.isEqual",1,1,arguments.length),!(l instanceof y2))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)}static getCancelAndContextArgs_(l,a,p){const w={cancel:void 0,context:void 0};if(a&&p)w.cancel=a,(0,ie.Wj)(l,"cancel",w.cancel,!0),w.context=p,(0,ie.lb)(l,"context",w.context,!0);else if(a)if("object"==typeof a&&null!==a)w.context=a;else{if("function"!=typeof a)throw new Error((0,ie.gK)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");w.cancel=a}return w}get ref(){return new Hs(this.database,new $(this._delegate._repo,this._delegate._path))}}class Hs extends y2{constructor(l,a){super(l,new C(a._repo,a._path,new Bs,!1)),this.database=l,this._delegate=a}getKey(){return(0,ie.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(l){return(0,ie.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new Hs(this.database,Ht(this._delegate,l))}getParent(){(0,ie.Dv)("Reference.parent",0,0,arguments.length);const l=this._delegate.parent;return l?new Hs(this.database,l):null}getRoot(){return(0,ie.Dv)("Reference.root",0,0,arguments.length),new Hs(this.database,this._delegate.root)}set(l,a){(0,ie.Dv)("Reference.set",1,2,arguments.length),(0,ie.Wj)("Reference.set","onComplete",a,!0);const p=fi(this._delegate,l);return a&&p.then(()=>a(null),w=>a(w)),p}update(l,a){if((0,ie.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){const w={};for(let T=0;T<l.length;++T)w[""+T]=l[T];l=w,y1("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}v2("Reference.update",this._delegate._path),(0,ie.Wj)("Reference.update","onComplete",a,!0);const p=Nc(this._delegate,l);return a&&p.then(()=>a(null),w=>a(w)),p}setWithPriority(l,a,p){(0,ie.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ie.Wj)("Reference.setWithPriority","onComplete",p,!0);const w=function Oa(h,l,a){if(v2("setWithPriority",h._path),bs("setWithPriority",l,h._path,!1),na("setWithPriority",a,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const p=new ie.BH;return Ro(h._repo,h._path,l,a,p.wrapCallback(()=>{})),p.promise}(this._delegate,l,a);return p&&w.then(()=>p(null),T=>p(T)),w}remove(l){(0,ie.Dv)("Reference.remove",0,1,arguments.length),(0,ie.Wj)("Reference.remove","onComplete",l,!0);const a=function Pn(h){return v2("remove",h._path),fi(h,null)}(this._delegate);return l&&a.then(()=>l(null),p=>l(p)),a}transaction(l,a,p){(0,ie.Dv)("Reference.transaction",1,3,arguments.length),(0,ie.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,ie.Wj)("Reference.transaction","onComplete",a,!0),function(h,l,a,p){if(void 0!==a&&"boolean"!=typeof a)throw new Error((0,ie.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const w=function b0(h,l,a){var p;if(h=(0,ie.m9)(h),v2("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const w=null===(p=null==a?void 0:a.applyLocally)||void 0===p||p,T=new ie.BH,J=zc(h,()=>{});return function Es(h,l,a,p,w,T){yo(h,"transaction on "+l);const H={path:l,update:a,onComplete:p,status:null,order:kn(),applyLocally:T,retryCount:0,unwatcher:w,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},J=eo(h,l,void 0);H.currentInputSnapshot=J;const ae=H.update(J.val());if(void 0===ae)H.unwatcher(),H.currentOutputSnapshotRaw=null,H.currentOutputSnapshotResolved=null,H.onComplete&&H.onComplete(null,!1,H.currentInputSnapshot);else{Os("transaction failed: Data returned ",ae,H.path),H.status=0;const we=No(h.transactionQueueTree_,l),lt=Ia(we)||[];let at;lt.push(H),Ls(we,lt),"object"==typeof ae&&null!==ae&&(0,ie.r3)(ae,".priority")?(at=(0,ie.DV)(ae,".priority"),(0,ie.hu)(Qs(at),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):at=(Ga(h.serverSyncTree_,l)||Bt.EMPTY_NODE).getPriority().val();const xt=Sa(h),Cn=d1(ae,at),Hn=vo(Cn,J,xt);H.currentOutputSnapshotRaw=Cn,H.currentOutputSnapshotResolved=Hn,H.currentWriteId=Vo(h);const pr=wa(h.serverSyncTree_,l,Hn,H.currentWriteId,H.applyLocally);F2(h.eventQueue_,l,pr),sa(h,h.transactionQueueTree_)}}(h._repo,h._path,l,(ae,we,lt)=>{let at=null;ae?T.reject(ae):(at=new ne(lt,new $(h._repo,h._path),oe),T.resolve(new M0(we,at)))},J,w),T.promise}(this._delegate,l,{applyLocally:p}).then(T=>new ko(T.committed,new Ci(this.database,T.snapshot)));return a&&w.then(T=>a(null,T.committed,T.snapshot),T=>a(T,!1,null)),w}setPriority(l,a){(0,ie.Dv)("Reference.setPriority",1,2,arguments.length),(0,ie.Wj)("Reference.setPriority","onComplete",a,!0);const p=function ns(h,l){h=(0,ie.m9)(h),v2("setPriority",h._path),na("setPriority",l,!1);const a=new ie.BH;return Ro(h._repo,R(h._path,".priority"),l,null,a.wrapCallback(()=>{})),a.promise}(this._delegate,l);return a&&p.then(()=>a(null),w=>a(w)),p}push(l,a){(0,ie.Dv)("Reference.push",0,2,arguments.length),(0,ie.Wj)("Reference.push","onComplete",a,!0);const p=function Vn(h,l){h=(0,ie.m9)(h),v2("push",h._path),bs("push",l,h._path,!0);const a=ia(h._repo),p=xi(a),w=Ht(h,p),T=Ht(h,p);let H;return H=null!=l?fi(T,l).then(()=>T):Promise.resolve(T),w.then=H.then.bind(H),w.catch=H.then.bind(H,void 0),w}(this._delegate,l),w=p.then(H=>new Hs(this.database,H));a&&w.then(()=>a(null),H=>a(H));const T=new Hs(this.database,p);return T.then=w.then.bind(w),T.catch=w.catch.bind(w,void 0),T}onDisconnect(){return v2("Reference.onDisconnect",this._delegate._path),new Fc(new D2(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class cc{constructor(l,a){this._delegate=l,this.app=a,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:_4,forceLongPolling:kc}}useEmulator(l,a,p={}){!function oc(h,l,a,p={}){(h=(0,ie.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&ke("Cannot call useEmulator() after instance has already been initialized.");const w=h._repoInternal;let T;if(w.repoInfo_.nodeAdmin)p.mockUserToken&&ke('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),T=new Zt(Zt.OWNER);else if(p.mockUserToken){const H="string"==typeof p.mockUserToken?p.mockUserToken:(0,ie.Sg)(p.mockUserToken,h.app.options.projectId);T=new Zt(H)}!function ic(h,l,a,p){h.repoInfo_=new ti(`${l}:${a}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),p&&(h.authTokenProvider_=p)}(w,l,a,T)}(this._delegate,l,a,p)}ref(l){if((0,ie.Dv)("database.ref",0,1,arguments.length),l instanceof Hs){const a=gt(this._delegate,l.toString());return new Hs(this,a)}{const a=Fe(this._delegate,l);return new Hs(this,a)}}refFromURL(l){(0,ie.Dv)("database.refFromURL",1,1,arguments.length);const p=gt(this._delegate,l);return new Hs(this,p)}goOffline(){return(0,ie.Dv)("database.goOffline",0,0,arguments.length),function Hc(h){(h=(0,ie.m9)(h))._checkNotDeleted("goOffline"),Dc(h._repo)}(this._delegate)}goOnline(){return(0,ie.Dv)("database.goOnline",0,0,arguments.length),function C0(h){(h=(0,ie.m9)(h))._checkNotDeleted("goOnline"),function E1(h){h.persistentConnection_&&h.persistentConnection_.resume(Xs)}(h._repo)}(this._delegate)}}cc.ServerValue={TIMESTAMP:function L6(){return w0}(),increment:h=>function I3(h){return{".sv":{increment:h}}}(h)};var Uc=Object.freeze({__proto__:null,initStandalone:function Co({app:h,url:l,version:a,customAuthImpl:p,namespace:w,nodeAdmin:T=!1}){N1(a);const H=new zn.zt("auth-internal",new zn.H0("database-standalone"));return H.setComponent(new zn.wA("auth-internal",()=>p,"PRIVATE")),{instance:new cc($4(h,H,void 0,l,T),h),namespace:w}}});const x0=cc.ServerValue;!function Z4(h){h.INTERNAL.registerComponent(new zn.wA("database-compat",(l,{instanceIdentifier:a})=>{const p=l.getProvider("app-compat").getImmediate(),w=l.getProvider("database").getImmediate({identifier:a});return new cc(w,p)},"PUBLIC").setServiceProps({Reference:Hs,Query:y2,Database:cc,DataSnapshot:Ci,enableLogging:z6,INTERNAL:Uc,ServerValue:x0}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.2.1")}(dn.Z);var q4=B(440),w4=B(127);function Bc(h){return null==h}function B2(h){return"function"==typeof h.set}function b4(h,l){return B2(l)?l:h.ref(l)}function lc(h,l){if(function K4(h){return"string"==typeof h}(h))return l.stringCase();if(B2(h))return l.firebaseCase();if(function M4(h){return"function"==typeof h.exportVal}(h))return l.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function uc(h,l,a="on",p=Vt.z){return new Yt.y(w=>{let T=null;return T=h[a](l,(H,J)=>{p.schedule(()=>{w.next({snapshot:H,prevKey:J})}),"once"===a&&p.schedule(()=>w.complete())},H=>{p.schedule(()=>w.error(H))}),"on"===a?{unsubscribe(){null!=T&&h.off(l,T)}}:{unsubscribe(){}}}).pipe((0,sn.U)(w=>{const{snapshot:T,prevKey:H}=w;let J=null;return T.exists()&&(J=T.key),{type:l,payload:T,prevKey:H,key:J}}),(0,hn.B)())}function aa(h,l){const a=h.length;for(let p=0;p<a;p++)if(h[p].payload.key===l)return p;return-1}function S0(h,l){const{payload:a,prevKey:p,key:w}=l,T=aa(h,w),H=function jc(h,l){if(Bc(l))return 0;{const a=aa(h,l);return-1===a?h.length:a+1}}(h,p);switch(l.type){case"value":if(l.payload&&l.payload.exists()){let J=null;l.payload.forEach(ae=>{const we={payload:ae,type:"value",prevKey:J,key:ae.key};return J=ae.key,h=[...h,we],!1})}return h;case"child_added":if(T>-1){const J=h[T-1];(J&&J.key||null)!==p&&(h=h.filter(ae=>ae.payload.key!==a.key)).splice(H,0,l)}else{if(null==p)return[l,...h];(h=h.slice()).splice(H,0,l)}return h;case"child_removed":return h.filter(J=>J.payload.key!==a.key);case"child_changed":return h.map(J=>J.payload.key===w?l:J);case"child_moved":if(T>-1){const J=h.splice(T,1)[0];return(h=h.slice()).splice(H,0,J),h}return h;default:return h}}function ca(h){return(Bc(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function x3(h,l,a){return function D0(h,l,a){return uc(h,"value","once",a).pipe((0,fn.w)(p=>{const w=[(0,Qt.of)(p)];return l.forEach(T=>w.push(uc(h,T,"on",a))),(0,it.T)(...w).pipe((0,an.R)(S0,[]))}),(0,Rn.x)())}(h,l=ca(l),a)}function hc(h,l,a){const p=(l=ca(l)).map(w=>uc(h,w,"on",a));return(0,it.T)(...p)}function T0(h,l){return function(p,w){return lc(p,{stringCase:()=>h.child(p)[l](w),firebaseCase:()=>p[l](w),snapshotCase:()=>p.ref[l](w)})}}function V6(h){return function(a){return a?lc(a,{stringCase:()=>h.child(a).remove(),firebaseCase:()=>a.remove(),snapshotCase:()=>a.ref.remove()}):h.remove()}}function S3(h,l){return function(){return uc(h,"value","on",l)}}const T3=new D.OlP("angularfire2.realtimeDatabaseURL"),ql=new D.OlP("angularfire2.database.use-emulator");let N3=(()=>{class h{constructor(a,p,w,T,H,J,ae,we,lt,at,xt,Cn,Hn,pr,T2){this.schedulers=J;const ro=ae,rs=(0,Ze.on)(a,H,p);we&&(0,Et.nw)(rs,H,lt,xt,Cn,Hn,at,pr),this.database=(0,Ze.cc)(`${rs.name}.database.${w}`,"AngularFireDatabase",rs.name,()=>{const Ho=H.runOutsideAngular(()=>rs.database(w||void 0));return ro&&Ho.useEmulator(...ro),Ho},[ro])}list(a,p){const w=this.schedulers.ngZone.runOutsideAngular(()=>b4(this.database,a));let T=w;return p&&(T=p(w)),function Zl(h,l){const a=l.schedulers.outsideAngular,p=l.schedulers.ngZone.run(()=>h.ref);return{query:h,update:T0(p,"update"),set:T0(p,"set"),push:w=>p.push(w),remove:V6(p),snapshotChanges:w=>x3(h,w,a).pipe(r1.iC),stateChanges:w=>hc(h,w,a).pipe(r1.iC),auditTrail:w=>function D3(h,l,a){return function O6(h,l,a){return function la(h,l){return uc(h,"value","on",l).pipe((0,sn.U)(a=>{let p;return a.payload.forEach(w=>(p=w.key,!1)),{data:a,lastKeyToLoad:p}}))}(h,a).pipe(function U1(...h){const l=(0,p1.jO)(h);return(0,vn.e)((a,p)=>{const w=h.length,T=new Array(w);let H=h.map(()=>!1),J=!1;for(let ae=0;ae<w;ae++)(0,I1.Xf)(h[ae]).subscribe((0,Mn.x)(p,we=>{T[ae]=we,!J&&!H[ae]&&(H[ae]=!0,(J=H.every(c1.y))&&(H=null))},A1.Z));a.subscribe((0,Mn.x)(p,ae=>{if(J){const we=[ae,...T];p.next(l?l(...we):we)}}))})}(l),(0,sn.U)(([w,T])=>{const H=w.lastKeyToLoad,J=T.map(ae=>ae.key);return{actions:T,lastKeyToLoad:H,loadedKeys:J}}),function n1(h){return(0,vn.e)((l,a)=>{let p=!1,w=0;l.subscribe((0,Mn.x)(a,T=>(p||(p=!h(T,w++)))&&a.next(T)))})}(w=>-1===w.loadedKeys.indexOf(w.lastKeyToLoad)),(0,sn.U)(w=>w.actions))}(h,hc(h,l).pipe((0,an.R)((w,T)=>[...w,T],[])),a)}(h,w,a).pipe(r1.iC),valueChanges:(w,T)=>x3(h,w,a).pipe((0,sn.U)(J=>J.map(ae=>T&&T.idField?Object.assign(Object.assign({},ae.payload.val()),{[T.idField]:ae.key}):ae.payload.val())),r1.iC)}}(T,this)}object(a){return function R6(h,l){return{query:h,snapshotChanges:()=>S3(h,l.schedulers.outsideAngular)().pipe(r1.iC),update:a=>h.ref.update(a),set:a=>h.ref.set(a),remove:()=>h.ref.remove(),valueChanges:()=>S3(h,l.schedulers.outsideAngular)().pipe(r1.iC,(0,sn.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>b4(this.database,a)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(a){return new(a||h)(D.LFG(Ze.Dh),D.LFG(Ze.xv,8),D.LFG(T3,8),D.LFG(D.Lbi),D.LFG(D.R0b),D.LFG(r1.HU),D.LFG(ql,8),D.LFG(Et.zQ,8),D.LFG(Et.Qv,8),D.LFG(Et.L6,8),D.LFG(Et._Q,8),D.LFG(Et.rT,8),D.LFG(Et.lh,8),D.LFG(Et.f7,8),D.LFG(q4.nm,8))},h.\u0275prov=D.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),Kl=(()=>{class h{constructor(){w4.Z.registerVersion("angularfire",r1.q4.full,"rtdb-compat")}}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=D.oAB({type:h}),h.\u0275inj=D.cJS({providers:[N3]}),h})();var z3=B(4546);let Gc=(()=>{class h{}return h.\u0275fac=function(a){return new(a||h)},h.\u0275mod=D.oAB({type:h,bootstrap:[Ue]}),h.\u0275inj=D.cJS({providers:[],imports:[[y.b2,ot,Ze.hO.initializeApp(Ke_firebase),ue.uH,Et.ww,Kl,ze.u5,kt.yb,z3.O]]}),h})();y.q6().bootstrapModule(Gc).catch(h=>console.error(h))},5867:(jt,We,B)=>{B.d(We,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=B(9681);(0,y.registerVersion)("firebase","9.8.3","app")},127:(jt,We,B)=>{B.d(We,{Z:()=>y.Z});var y=B(3942);y.Z.registerVersion("firebase","9.8.3","app-compat")},9916:(jt,We,B)=>{B.r(We);var y=B(5861),D=B(3942),te=B(2090),Le=B(9681),De=B(655),Ae=B(1877),ue=B(4859);const vt=function Nt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},zt=function ht(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new te.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new Ae.Yd("@firebase/auth");function kt(C,...d){Oe.logLevel<=Ae.in.ERROR&&Oe.error(`Auth (${Le.SDK_VERSION}): ${C}`,...d)}function ft(C,...d){throw _t(C,...d)}function nt(C,...d){return _t(C,...d)}function qe(C,d,g){const I=Object.assign(Object.assign({},zt()),{[d]:g});return new te.LL("auth","Firebase",I).create(d,{appName:C.name})}function et(C,d,g){if(!(d instanceof g))throw g.name!==d.constructor.name&&ft(C,"argument-error"),qe(C,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _t(C,...d){if("string"!=typeof C){const g=d[0],I=[...d.slice(1)];return I[0]&&(I[0].appName=C.name),C._errorFactory.create(g,...I)}return tt.create(C,...d)}function le(C,d,...g){if(!C)throw _t(d,...g)}function ot(C){const d="INTERNAL ASSERTION FAILED: "+C;throw kt(d),new Error(d)}function me(C,d){C||ot(d)}const Pe=new Map;function Ue(C){me(C instanceof Function,"Expected a class definition");let d=Pe.get(C);return d?(me(d instanceof C,"Instance stored in cache mismatched with class"),d):(d=new C,Pe.set(C,d),d)}function Et(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Vt(){return"http:"===Yt()||"https:"===Yt()}function Yt(){var C;return"undefined"!=typeof self&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class sn{constructor(d,g){this.shortDelay=d,this.longDelay=g,me(g>d,"Short delay should be less than long delay!"),this.isMobile=(0,te.uI)()||(0,te.b$)()}get(){return function Qt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Vt()||(0,te.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function hn(C,d){me(C.emulator,"Emulator should always be set here");const{url:g}=C.emulator;return d?`${g}${d.startsWith("/")?d.slice(1):d}`:g}class fn{static initialize(d,g,I){this.fetchImpl=d,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const an={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rn=new sn(3e4,6e4);function vn(C,d){return C.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:C.tenantId}):d}function Mn(C,d,g,I){return I1.apply(this,arguments)}function I1(){return(I1=(0,y.Z)(function*(C,d,g,I,$={}){return c1(C,$,(0,y.Z)(function*(){let ne={},Fe={};I&&("GET"===d?Fe=I:ne={body:JSON.stringify(I)});const gt=(0,te.xO)(Object.assign({key:C.config.apiKey},Fe)).slice(1),Ht=yield C._getAdditionalHeaders();return Ht["Content-Type"]="application/json",C.languageCode&&(Ht["X-Firebase-Locale"]=C.languageCode),fn.fetch()(n1(C,C.config.apiHost,g,gt),Object.assign({method:d,headers:Ht,referrerPolicy:"no-referrer"},ne))}))})).apply(this,arguments)}function c1(C,d,g){return A1.apply(this,arguments)}function A1(){return(A1=(0,y.Z)(function*(C,d,g){C._canInitEmulator=!1;const I=Object.assign(Object.assign({},an),d);try{const $=new r1(C),ne=yield Promise.race([g(),$.promise]);$.clearNetworkTimeout();const Fe=yield ne.json();if("needConfirmation"in Fe)throw Wn(C,"account-exists-with-different-credential",Fe);if(ne.ok&&!("errorMessage"in Fe))return Fe;{const gt=ne.ok?Fe.errorMessage:Fe.error.message,[Ht,mn]=gt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ht)throw Wn(C,"credential-already-in-use",Fe);if("EMAIL_EXISTS"===Ht)throw Wn(C,"email-already-in-use",Fe);if("USER_DISABLED"===Ht)throw Wn(C,"user-disabled",Fe);const Vn=I[Ht]||Ht.toLowerCase().replace(/[_\s]+/g,"-");if(mn)throw qe(C,Vn,mn);ft(C,Vn)}}catch($){if($ instanceof te.ZR)throw $;ft(C,"network-request-failed")}})).apply(this,arguments)}function p1(C,d,g,I){return U1.apply(this,arguments)}function U1(){return(U1=(0,y.Z)(function*(C,d,g,I,$={}){const ne=yield Mn(C,d,g,I,$);return"mfaPendingCredential"in ne&&ft(C,"multi-factor-auth-required",{_serverResponse:ne}),ne})).apply(this,arguments)}function n1(C,d,g,I){const $=`${d}${g}?${I}`;return C.config.emulator?hn(C.config,$):`${C.config.apiScheme}://${$}`}class r1{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(nt(this.auth,"network-request-failed")),Rn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(C,d,g){const I={appName:C.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const $=nt(C,d,I);return $.customData._tokenResponse=g,$}function zn(){return(zn=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function xn(C,d){return ie.apply(this,arguments)}function ie(){return(ie=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function gr(C,d){return vr.apply(this,arguments)}function vr(){return(vr=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function B1(C){if(C)try{const d=new Date(Number(C));if(!isNaN(d.getTime()))return d.toUTCString()}catch(d){}}function Kn(){return(Kn=(0,y.Z)(function*(C,d=!1){const g=(0,te.m9)(C),I=yield g.getIdToken(d),$=nn(I);le($&&$.exp&&$.auth_time&&$.iat,g.auth,"internal-error");const ne="object"==typeof $.firebase?$.firebase:void 0,Fe=null==ne?void 0:ne.sign_in_provider;return{claims:$,token:I,authTime:B1(Gt($.auth_time)),issuedAtTime:B1(Gt($.iat)),expirationTime:B1(Gt($.exp)),signInProvider:Fe||null,signInSecondFactor:(null==ne?void 0:ne.sign_in_second_factor)||null}})).apply(this,arguments)}function Gt(C){return 1e3*Number(C)}function nn(C){const[d,g,I]=C.split(".");if(void 0===d||void 0===g||void 0===I)return kt("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,te.tV)(g);return $?JSON.parse($):(kt("Failed to decode base64 JWT payload"),null)}catch($){return kt("Caught error parsing JWT payload as JSON",$),null}}function j1(C,d){return x1.apply(this,arguments)}function x1(){return(x1=(0,y.Z)(function*(C,d,g=!1){if(g)return d;try{return yield d}catch(I){throw I instanceof te.ZR&&kn(I)&&C.auth.currentUser===C&&(yield C.auth.signOut()),I}})).apply(this,arguments)}function kn({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class Er{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var g;if(d){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const $=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(d=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(d);this.timerId=setTimeout((0,y.Z)(function*(){yield g.iteration()}),I)}iteration(){var d=this;return(0,y.Z)(function*(){try{yield d.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&d.schedule(!0))}d.schedule()})()}}class D1{constructor(d,g){this.createdAt=d,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=B1(this.lastLoginAt),this.creationTime=B1(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function i1(C){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,y.Z)(function*(C){var d;const g=C.auth,I=yield C.getIdToken(),$=yield j1(C,gr(g,{idToken:I}));le(null==$?void 0:$.users.length,g,"internal-error");const ne=$.users[0];C._notifyReloadListener(ne);const Fe=(null===(d=ne.providerUserInfo)||void 0===d?void 0:d.length)?Me(ne.providerUserInfo):[],gt=pt(C.providerData,Fe),Vn=!!C.isAnonymous&&!(C.email&&ne.passwordHash||(null==gt?void 0:gt.length)),Pn={uid:ne.localId,displayName:ne.displayName||null,photoURL:ne.photoUrl||null,email:ne.email||null,emailVerified:ne.emailVerified||!1,phoneNumber:ne.phoneNumber||null,tenantId:ne.tenantId||null,providerData:gt,metadata:new D1(ne.createdAt,ne.lastLoginAt),isAnonymous:Vn};Object.assign(C,Pn)})).apply(this,arguments)}function be(){return(be=(0,y.Z)(function*(C){const d=(0,te.m9)(C);yield i1(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function pt(C,d){return[...C.filter(I=>!d.some($=>$.providerId===I.providerId)),...d]}function Me(C){return C.map(d=>{var{providerId:g}=d,I=(0,De._T)(d,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function rt(){return(rt=(0,y.Z)(function*(C,d){const g=yield c1(C,{},(0,y.Z)(function*(){const I=(0,te.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:$,apiKey:ne}=C.config,Fe=n1(C,$,"/v1/token",`key=${ne}`),gt=yield C._getAdditionalHeaders();return gt["Content-Type"]="application/x-www-form-urlencoded",fn.fetch()(Fe,{method:"POST",headers:gt,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ft{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){le(d.idToken,"internal-error"),le(void 0!==d.idToken,"internal-error"),le(void 0!==d.refreshToken,"internal-error");const g="expiresIn"in d&&void 0!==d.expiresIn?Number(d.expiresIn):function Wt(C){const d=nn(C);return le(d,"internal-error"),le(void 0!==d.exp,"internal-error"),le(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,g)}getToken(d,g=!1){var I=this;return(0,y.Z)(function*(){return le(!I.accessToken||I.refreshToken,d,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(d,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,g){var I=this;return(0,y.Z)(function*(){const{accessToken:$,refreshToken:ne,expiresIn:Fe}=yield function ke(C,d){return rt.apply(this,arguments)}(d,g);I.updateTokensAndExpiration($,ne,Number(Fe))})()}updateTokensAndExpiration(d,g,I){this.refreshToken=g||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(d,g){const{refreshToken:I,accessToken:$,expirationTime:ne}=g,Fe=new Ft;return I&&(le("string"==typeof I,"internal-error",{appName:d}),Fe.refreshToken=I),$&&(le("string"==typeof $,"internal-error",{appName:d}),Fe.accessToken=$),ne&&(le("number"==typeof ne,"internal-error",{appName:d}),Fe.expirationTime=ne),Fe}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new Ft,this.toJSON())}_performRefresh(){return ot("not implemented")}}function tn(C,d){le("string"==typeof C||void 0===C,"internal-error",{appName:d})}class cn{constructor(d){var{uid:g,auth:I,stsTokenManager:$}=d,ne=(0,De._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Er(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=ne.displayName||null,this.email=ne.email||null,this.emailVerified=ne.emailVerified||!1,this.phoneNumber=ne.phoneNumber||null,this.photoURL=ne.photoURL||null,this.isAnonymous=ne.isAnonymous||!1,this.tenantId=ne.tenantId||null,this.providerData=ne.providerData?[...ne.providerData]:[],this.metadata=new D1(ne.createdAt||void 0,ne.lastLoginAt||void 0)}getIdToken(d){var g=this;return(0,y.Z)(function*(){const I=yield j1(g,g.stsTokenManager.getToken(g.auth,d));return le(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(d){return function N1(C){return Kn.apply(this,arguments)}(this,d)}reload(){return function Ne(C){return be.apply(this,arguments)}(this)}_assign(d){this!==d&&(le(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(g=>Object.assign({},g)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new cn(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,g=!1){var I=this;return(0,y.Z)(function*(){let $=!1;d.idToken&&d.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(d),$=!0),g&&(yield i1(I)),yield I.auth._persistUserIfCurrent(I),$&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var d=this;return(0,y.Z)(function*(){const g=yield d.getIdToken();return yield j1(d,function dn(C,d){return zn.apply(this,arguments)}(d.auth,{idToken:g})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,g){var I,$,ne,Fe,gt,Ht,mn,Vn;const Pn=null!==(I=g.displayName)&&void 0!==I?I:void 0,fi=null!==($=g.email)&&void 0!==$?$:void 0,ns=null!==(ne=g.phoneNumber)&&void 0!==ne?ne:void 0,Oa=null!==(Fe=g.photoURL)&&void 0!==Fe?Fe:void 0,Nc=null!==(gt=g.tenantId)&&void 0!==gt?gt:void 0,U4=null!==(Ht=g._redirectEventId)&&void 0!==Ht?Ht:void 0,no=null!==(mn=g.createdAt)&&void 0!==mn?mn:void 0,As=null!==(Vn=g.lastLoginAt)&&void 0!==Vn?Vn:void 0,{uid:fs,emailVerified:zc,isAnonymous:nc,providerData:Lc,stsTokenManager:Pc}=g;le(fs&&Pc,d,"internal-error");const S2=Ft.fromJSON(this.name,Pc);le("string"==typeof fs,d,"internal-error"),tn(Pn,d.name),tn(fi,d.name),le("boolean"==typeof zc,d,"internal-error"),le("boolean"==typeof nc,d,"internal-error"),tn(ns,d.name),tn(Oa,d.name),tn(Nc,d.name),tn(U4,d.name),tn(no,d.name),tn(As,d.name);const Oc=new cn({uid:fs,auth:d,email:fi,emailVerified:zc,displayName:Pn,isAnonymous:nc,photoURL:Oa,phoneNumber:ns,tenantId:Nc,stsTokenManager:S2,createdAt:no,lastLoginAt:As});return Lc&&Array.isArray(Lc)&&(Oc.providerData=Lc.map(xs=>Object.assign({},xs))),U4&&(Oc._redirectEventId=U4),Oc}static _fromIdTokenResponse(d,g,I=!1){return(0,y.Z)(function*(){const $=new Ft;$.updateFromServerResponse(g);const ne=new cn({uid:g.localId,auth:d,stsTokenManager:$,isAnonymous:I});return yield i1(ne),ne})()}}const Jt=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(g,I){var $=this;return(0,y.Z)(function*(){$.storage[g]=I})()}_get(g){var I=this;return(0,y.Z)(function*(){const $=I.storage[g];return void 0===$?null:$})()}_remove(g){var I=this;return(0,y.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return C.type="NONE",C})();function Jn(C,d,g){return`firebase:${C}:${d}:${g}`}class G1{constructor(d,g,I){this.persistence=d,this.auth=g,this.userKey=I;const{config:$,name:ne}=this.auth;this.fullUserKey=Jn(this.userKey,$.apiKey,ne),this.fullPersistenceKey=Jn("persistence",$.apiKey,ne),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,y.Z)(function*(){const g=yield d.persistence._get(d.fullUserKey);return g?cn._fromJSON(d.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var g=this;return(0,y.Z)(function*(){if(g.persistence===d)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=d,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,g,I="authUser"){return(0,y.Z)(function*(){if(!g.length)return new G1(Ue(Jt),d,I);const $=(yield Promise.all(g.map(function(){var mn=(0,y.Z)(function*(Vn){if(yield Vn._isAvailable())return Vn});return function(Vn){return mn.apply(this,arguments)}}()))).filter(mn=>mn);let ne=$[0]||Ue(Jt);const Fe=Jn(I,d.config.apiKey,d.name);let gt=null;for(const mn of g)try{const Vn=yield mn._get(Fe);if(Vn){const Pn=cn._fromJSON(d,Vn);mn!==ne&&(gt=Pn),ne=mn;break}}catch(Vn){}const Ht=$.filter(mn=>mn._shouldAllowMigration);return ne._shouldAllowMigration&&Ht.length?(ne=Ht[0],gt&&(yield ne._set(Fe,gt.toJSON())),yield Promise.all(g.map(function(){var mn=(0,y.Z)(function*(Vn){if(Vn!==ne)try{yield Vn._remove(Fe)}catch(Pn){}});return function(Vn){return mn.apply(this,arguments)}}())),new G1(ne,d,I)):new G1(ne,d,I)})()}}function Ir(C){const d=C.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(Re(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if($e(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(on(d))return"Blackberry";if(yn(d))return"Webos";if(xe(d))return"Safari";if((d.includes("chrome/")||se(d))&&!d.includes("edge/"))return"Chrome";if(yt(d))return"Android";{const I=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function $e(C=(0,te.z$)()){return/firefox\//i.test(C)}function xe(C=(0,te.z$)()){const d=C.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function se(C=(0,te.z$)()){return/crios\//i.test(C)}function Re(C=(0,te.z$)()){return/iemobile/i.test(C)}function yt(C=(0,te.z$)()){return/android/i.test(C)}function on(C=(0,te.z$)()){return/blackberry/i.test(C)}function yn(C=(0,te.z$)()){return/webos/i.test(C)}function _1(C=(0,te.z$)()){return/iphone|ipad|ipod/i.test(C)}function $1(C=(0,te.z$)()){return _1(C)||yt(C)||yn(C)||on(C)||/windows phone/i.test(C)||Re(C)}function yr(C,d=[]){let g;switch(C){case"Browser":g=Ir((0,te.z$)());break;case"Worker":g=`${Ir((0,te.z$)())}-${C}`;break;default:g=C}const I=d.length?d.join(","):"FirebaseCore-web";return`${g}/JsCore/${Le.SDK_VERSION}/${I}`}class Yn{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,g){const I=ne=>new Promise((Fe,gt)=>{try{Fe(d(ne))}catch(Ht){gt(Ht)}});I.onAbort=g,this.queue.push(I);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(d){var g=this;return(0,y.Z)(function*(){var I;if(g.auth.currentUser===d)return;const $=[];try{for(const ne of g.queue)yield ne(d),ne.onAbort&&$.push(ne.onAbort)}catch(ne){$.reverse();for(const Fe of $)try{Fe()}catch(gt){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=ne)||void 0===I?void 0:I.message})}})()}}class Tt{constructor(d,g,I){this.app=d,this.heartbeatServiceProvider=g,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Fn(this),this.idTokenSubscription=new Fn(this),this.beforeStateQueue=new Yn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(d,g){var I=this;return g&&(this._popupRedirectResolver=Ue(g)),this._initializationPromise=this.queue((0,y.Z)(function*(){var $,ne;if(!I._deleted&&(I.persistenceManager=yield G1.create(I,d),!I._deleted)){if(null===($=I._popupRedirectResolver)||void 0===$?void 0:$._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(Fe){}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(ne=I.currentUser)||void 0===ne?void 0:ne.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,y.Z)(function*(){if(d._deleted)return;const g=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||g){if(d.currentUser&&g&&d.currentUser.uid===g.uid)return d._currentUser._assign(g),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(g,!0)}})()}initializeCurrentUser(d){var g=this;return(0,y.Z)(function*(){var I;const $=yield g.assertedPersistence.getCurrentUser();let ne=$,Fe=!1;if(d&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const gt=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,Ht=null==ne?void 0:ne._redirectEventId,mn=yield g.tryRedirectSignIn(d);(!gt||gt===Ht)&&(null==mn?void 0:mn.user)&&(ne=mn.user,Fe=!0)}if(!ne)return g.directlySetCurrentUser(null);if(!ne._redirectEventId){if(Fe)try{yield g.beforeStateQueue.runMiddleware(ne)}catch(gt){ne=$,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(gt))}return ne?g.reloadAndSetCurrentUserOrClear(ne):g.directlySetCurrentUser(null)}return le(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===ne._redirectEventId?g.directlySetCurrentUser(ne):g.reloadAndSetCurrentUserOrClear(ne)})()}tryRedirectSignIn(d){var g=this;return(0,y.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,d,!0)}catch($){yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(d){var g=this;return(0,y.Z)(function*(){try{yield i1(d)}catch(I){if("auth/network-request-failed"!==I.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function it(){if("undefined"==typeof navigator)return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var d=this;return(0,y.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var g=this;return(0,y.Z)(function*(){const I=d?(0,te.m9)(d):null;return I&&le(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(d,g=!1){var I=this;return(0,y.Z)(function*(){if(!I._deleted)return d&&le(I.tenantId===d.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(d)),I.queue((0,y.Z)(function*(){yield I.directlySetCurrentUser(d),I.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,y.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var g=this;return this.queue((0,y.Z)(function*(){yield g.assertedPersistence.setPersistence(Ue(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new te.LL("auth","Firebase",d())}onAuthStateChanged(d,g,I){return this.registerStateListener(this.authStateSubscription,d,g,I)}beforeAuthStateChanged(d,g){return this.beforeStateQueue.pushCallback(d,g)}onIdTokenChanged(d,g,I){return this.registerStateListener(this.idTokenSubscription,d,g,I)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,g){var I=this;return(0,y.Z)(function*(){const $=yield I.getOrInitRedirectPersistenceManager(g);return null===d?$.removeCurrentUser():$.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var g=this;return(0,y.Z)(function*(){if(!g.redirectPersistenceManager){const I=d&&Ue(d)||g._popupRedirectResolver;le(I,g,"argument-error"),g.redirectPersistenceManager=yield G1.create(g,[Ue(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(d){var g=this;return(0,y.Z)(function*(){var I,$;return g._isInitialized&&(yield g.queue((0,y.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===d?g._currentUser:(null===($=g.redirectUser)||void 0===$?void 0:$._redirectEventId)===d?g.redirectUser:null})()}_persistUserIfCurrent(d){var g=this;return(0,y.Z)(function*(){if(d===g.currentUser)return g.queue((0,y.Z)(function*(){return g.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,g,I,$){if(this._deleted)return()=>{};const ne="function"==typeof g?g:g.next.bind(g),Fe=this._isInitialized?Promise.resolve():this._initializationPromise;return le(Fe,this,"internal-error"),Fe.then(()=>ne(this.currentUser)),"function"==typeof g?d.addObserver(g,I,$):d.addObserver(g)}directlySetCurrentUser(d){var g=this;return(0,y.Z)(function*(){g.currentUser&&g.currentUser!==d&&(g._currentUser._stopProactiveRefresh(),d&&g.isProactiveRefreshEnabled&&d._startProactiveRefresh()),g.currentUser=d,d?yield g.assertedPersistence.setCurrentUser(d):yield g.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=yr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,y.Z)(function*(){var g;const I={"X-Client-Version":d.clientVersion};d.app.options.appId&&(I["X-Firebase-gmpid"]=d.app.options.appId);const $=yield null===(g=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return $&&(I["X-Firebase-Client"]=$),I})()}}function Zt(C){return(0,te.m9)(C)}class Fn{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,te.ne)(g=>this.observer=g)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Lr(C){const d=C.indexOf(":");return d<0?"":C.substr(0,d+1)}function Pr(C){if(!C)return null;const d=Number(C);return isNaN(d)?null:d}class Ar{constructor(d,g){this.providerId=d,this.signInMethod=g}toJSON(){return ot("not implemented")}_getIdTokenResponse(d){return ot("not implemented")}_linkToIdToken(d,g){return ot("not implemented")}_getReauthenticationResolver(d){return ot("not implemented")}}function z1(C,d){return In.apply(this,arguments)}function In(){return(In=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:resetPassword",vn(C,d))})).apply(this,arguments)}function Or(C,d){return ei.apply(this,arguments)}function ei(){return(ei=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function ti(C,d){return ur.apply(this,arguments)}function ur(){return(ur=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:update",vn(C,d))})).apply(this,arguments)}function J1(){return(J1=(0,y.Z)(function*(C,d){return p1(C,"POST","/v1/accounts:signInWithPassword",vn(C,d))})).apply(this,arguments)}function X1(C,d){return R1.apply(this,arguments)}function R1(){return(R1=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:sendOobCode",vn(C,d))})).apply(this,arguments)}function s1(C,d){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,y.Z)(function*(C,d){return X1(C,d)})).apply(this,arguments)}function _r(C,d){return er.apply(this,arguments)}function er(){return(er=(0,y.Z)(function*(C,d){return X1(C,d)})).apply(this,arguments)}function Nr(C,d){return bi.apply(this,arguments)}function bi(){return(bi=(0,y.Z)(function*(C,d){return X1(C,d)})).apply(this,arguments)}function r2(C,d){return hr.apply(this,arguments)}function hr(){return(hr=(0,y.Z)(function*(C,d){return X1(C,d)})).apply(this,arguments)}function Ei(){return(Ei=(0,y.Z)(function*(C,d){return p1(C,"POST","/v1/accounts:signInWithEmailLink",vn(C,d))})).apply(this,arguments)}function C2(){return(C2=(0,y.Z)(function*(C,d){return p1(C,"POST","/v1/accounts:signInWithEmailLink",vn(C,d))})).apply(this,arguments)}class Z1 extends Ar{constructor(d,g,I,$=null){super("password",I),this._email=d,this._password=g,this._tenantId=$}static _fromEmailAndPassword(d,g){return new Z1(d,g,"password")}static _fromEmailAndCode(d,g,I=null){return new Z1(d,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(d){var g=this;return(0,y.Z)(function*(){switch(g.signInMethod){case"password":return function M1(C,d){return J1.apply(this,arguments)}(d,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Gr(C,d){return Ei.apply(this,arguments)}(d,{email:g._email,oobCode:g._password});default:ft(d,"internal-error")}})()}_linkToIdToken(d,g){var I=this;return(0,y.Z)(function*(){switch(I.signInMethod){case"password":return Or(d,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ni(C,d){return C2.apply(this,arguments)}(d,{idToken:g,email:I._email,oobCode:I._password});default:ft(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function Qr(C,d){return pi.apply(this,arguments)}function pi(){return(pi=(0,y.Z)(function*(C,d){return p1(C,"POST","/v1/accounts:signInWithIdp",vn(C,d))})).apply(this,arguments)}class Ie extends Ar{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const g=new Ie(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(g.idToken=d.idToken),d.accessToken&&(g.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(g.nonce=d.nonce),d.pendingToken&&(g.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(g.accessToken=d.oauthToken,g.secret=d.oauthTokenSecret):ft("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$}=g,ne=(0,De._T)(g,["providerId","signInMethod"]);if(!I||!$)return null;const Fe=new Ie(I,$);return Fe.idToken=ne.idToken||void 0,Fe.accessToken=ne.accessToken||void 0,Fe.secret=ne.secret,Fe.nonce=ne.nonce,Fe.pendingToken=ne.pendingToken||null,Fe}_getIdTokenResponse(d){return Qr(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,Qr(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,Qr(d,g)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),d.postBody=(0,te.xO)(g)}return d}}function Ye(C,d){return wt.apply(this,arguments)}function wt(){return(wt=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:sendVerificationCode",vn(C,d))})).apply(this,arguments)}function Ut(){return(Ut=(0,y.Z)(function*(C,d){return p1(C,"POST","/v1/accounts:signInWithPhoneNumber",vn(C,d))})).apply(this,arguments)}function nr(){return(nr=(0,y.Z)(function*(C,d){const g=yield p1(C,"POST","/v1/accounts:signInWithPhoneNumber",vn(C,d));if(g.temporaryProof)throw Wn(C,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const l1={USER_NOT_FOUND:"user-not-found"};function Fr(){return(Fr=(0,y.Z)(function*(C,d){return p1(C,"POST","/v1/accounts:signInWithPhoneNumber",vn(C,Object.assign(Object.assign({},d),{operation:"REAUTH"})),l1)})).apply(this,arguments)}class Vr extends Ar{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,g){return new Vr({verificationId:d,verificationCode:g})}static _fromTokenResponse(d,g){return new Vr({phoneNumber:d,temporaryProof:g})}_getIdTokenResponse(d){return function Lt(C,d){return Ut.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,g){return function h1(C,d){return nr.apply(this,arguments)}(d,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function rr(C,d){return Fr.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:g,verificationId:I,verificationCode:$}=this.params;return d&&g?{temporaryProof:d,phoneNumber:g}:{sessionInfo:I,code:$}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:ne}=d;return I||g||$||ne?new Vr({verificationId:g,verificationCode:I,phoneNumber:$,temporaryProof:ne}):null}}class mi{constructor(d){var g,I,$,ne,Fe,gt;const Ht=(0,te.zd)((0,te.pd)(d)),mn=null!==(g=Ht.apiKey)&&void 0!==g?g:null,Vn=null!==(I=Ht.oobCode)&&void 0!==I?I:null,Pn=function $r(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=Ht.mode)&&void 0!==$?$:null);le(mn&&Vn&&Pn,"argument-error"),this.apiKey=mn,this.operation=Pn,this.code=Vn,this.continueUrl=null!==(ne=Ht.continueUrl)&&void 0!==ne?ne:null,this.languageCode=null!==(Fe=Ht.languageCode)&&void 0!==Fe?Fe:null,this.tenantId=null!==(gt=Ht.tenantId)&&void 0!==gt?gt:null}static parseLink(d){const g=function xr(C){const d=(0,te.zd)((0,te.pd)(C)).link,g=d?(0,te.zd)((0,te.pd)(d)).deep_link_id:null,I=(0,te.zd)((0,te.pd)(C)).deep_link_id;return(I?(0,te.zd)((0,te.pd)(I)).link:null)||I||g||d||C}(d);try{return new mi(g)}catch(I){return null}}}let o2=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(g,I){return Z1._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const $=mi.parseLink(I);return le($,"argument-error"),Z1._fromEmailAndCode(g,$.code,$.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class tr{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class ri extends tr{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class ii extends ri{static credentialFromJSON(d){const g="string"==typeof d?JSON.parse(d):d;return le("providerId"in g&&"signInMethod"in g,"argument-error"),Ie._fromParams(g)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return le(d.idToken||d.accessToken,"argument-error"),Ie._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return ii.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return ii.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:$,pendingToken:ne,nonce:Fe,providerId:gt}=d;if(!I&&!$&&!g&&!ne||!gt)return null;try{return new ii(gt)._credential({idToken:g,accessToken:I,nonce:Fe,pendingToken:ne})}catch(Ht){return null}}}let qi=(()=>{class C extends ri{constructor(){super("facebook.com")}static credential(g){return Ie._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return C.credential(g.oauthAccessToken)}catch(I){return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),w2=(()=>{class C extends ri{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return Ie._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:$}=g;if(!I&&!$)return null;try{return C.credential(I,$)}catch(ne){return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Ii=(()=>{class C extends ri{constructor(){super("github.com")}static credential(g){return Ie._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return C.credential(g.oauthAccessToken)}catch(I){return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class K1 extends Ar{constructor(d,g){super(d,d),this.pendingToken=g}_getIdTokenResponse(d){return Qr(d,this.buildRequest())}_linkToIdToken(d,g){const I=this.buildRequest();return I.idToken=g,Qr(d,I)}_getReauthenticationResolver(d){const g=this.buildRequest();return g.autoCreate=!1,Qr(d,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const g="string"==typeof d?JSON.parse(d):d,{providerId:I,signInMethod:$,pendingToken:ne}=g;return I&&$&&ne&&I===$?new K1(I,ne):null}static _create(d,g){return new K1(d,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Dr extends tr{constructor(d){le(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Dr.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Dr.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const g=K1.fromJSON(d);return le(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:g,providerId:I}=d;if(!g||!I)return null;try{return K1._create(I,g)}catch($){return null}}}let Ki=(()=>{class C extends ri{constructor(){super("twitter.com")}static credential(g,I){return Ie._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:$}=g;if(!I||!$)return null;try{return C.credential(I,$)}catch(ne){return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function ir(C,d){return si.apply(this,arguments)}function si(){return(si=(0,y.Z)(function*(C,d){return p1(C,"POST","/v1/accounts:signUp",vn(C,d))})).apply(this,arguments)}class Cr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,g,I,$=!1){return(0,y.Z)(function*(){const ne=yield cn._fromIdTokenResponse(d,I,$),Fe=a2(I);return new Cr({user:ne,providerId:Fe,_tokenResponse:I,operationType:g})})()}static _forOperation(d,g,I){return(0,y.Z)(function*(){yield d._updateTokensIfNecessary(I,!0);const $=a2(I);return new Cr({user:d,providerId:$,_tokenResponse:I,operationType:g})})()}}function a2(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function qn(){return(qn=(0,y.Z)(function*(C){var d;const g=Zt(C);if(yield g._initializationPromise,null===(d=g.currentUser)||void 0===d?void 0:d.isAnonymous)return new Cr({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield ir(g,{returnSecureToken:!0}),$=yield Cr._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class bn extends te.ZR{constructor(d,g,I,$){var ne;super(g.code,g.message),this.operationType=I,this.user=$,Object.setPrototypeOf(this,bn.prototype),this.customData={appName:d.name,tenantId:null!==(ne=d.tenantId)&&void 0!==ne?ne:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(d,g,I,$){return new bn(d,g,I,$)}}function wr(C,d,g,I){return("reauthenticate"===d?g._getReauthenticationResolver(C):g._getIdTokenResponse(C)).catch(ne=>{throw"auth/multi-factor-auth-required"===ne.code?bn._fromErrorAndOperation(C,ne,d,I):ne})}function Xn(C){return new Set(C.map(({providerId:d})=>d).filter(d=>!!d))}function f1(){return(f1=(0,y.Z)(function*(C,d){const g=(0,te.m9)(C);yield R(!0,g,d);const{providerUserInfo:I}=yield xn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[d]}),$=Xn(I||[]);return g.providerData=g.providerData.filter(ne=>$.has(ne.providerId)),$.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function k(C,d){return Y.apply(this,arguments)}function Y(){return(Y=(0,y.Z)(function*(C,d,g=!1){const I=yield j1(C,d._linkToIdToken(C.auth,yield C.getIdToken()),g);return Cr._forOperation(C,"link",I)})).apply(this,arguments)}function R(C,d,g){return K.apply(this,arguments)}function K(){return(K=(0,y.Z)(function*(C,d,g){yield i1(d);const $=!1===C?"provider-already-linked":"no-such-provider";le(Xn(d.providerData).has(g)===C,d.auth,$)})).apply(this,arguments)}function ye(C,d){return st.apply(this,arguments)}function st(){return(st=(0,y.Z)(function*(C,d,g=!1){const{auth:I}=C,$="reauthenticate";try{const ne=yield j1(C,wr(I,$,d,C),g);le(ne.idToken,I,"internal-error");const Fe=nn(ne.idToken);le(Fe,I,"internal-error");const{sub:gt}=Fe;return le(C.uid===gt,I,"user-mismatch"),Cr._forOperation(C,$,ne)}catch(ne){throw"auth/user-not-found"===(null==ne?void 0:ne.code)&&ft(I,"user-mismatch"),ne}})).apply(this,arguments)}function bt(C,d){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,y.Z)(function*(C,d,g=!1){const I="signIn",$=yield wr(C,I,d),ne=yield Cr._fromIdTokenResponse(C,I,$);return g||(yield C._updateCurrentUser(ne.user)),ne})).apply(this,arguments)}function En(C,d){return u1.apply(this,arguments)}function u1(){return(u1=(0,y.Z)(function*(C,d){return bt(Zt(C),d)})).apply(this,arguments)}function Ln(C,d){return $n.apply(this,arguments)}function $n(){return($n=(0,y.Z)(function*(C,d){const g=(0,te.m9)(C);return yield R(!1,g,d.providerId),k(g,d)})).apply(this,arguments)}function b1(C,d){return S1.apply(this,arguments)}function S1(){return(S1=(0,y.Z)(function*(C,d){return ye((0,te.m9)(C),d)})).apply(this,arguments)}function L1(C,d){return oi.apply(this,arguments)}function oi(){return(oi=(0,y.Z)(function*(C,d){return p1(C,"POST","/v1/accounts:signInWithCustomToken",vn(C,d))})).apply(this,arguments)}function gn(){return(gn=(0,y.Z)(function*(C,d){const g=Zt(C),I=yield L1(g,{token:d,returnSecureToken:!0}),$=yield Cr._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser($.user),$})).apply(this,arguments)}class gi{constructor(d,g){this.factorId=d,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(d,g){return"phoneInfo"in g?G2._fromServerResponse(d,g):ft(d,"internal-error")}}class G2 extends gi{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,g){return new G2(g)}}function M2(C,d,g){var I;le((null===(I=g.url)||void 0===I?void 0:I.length)>0,C,"invalid-continue-uri"),le(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),d.continueUrl=g.url,d.dynamicLinkDomain=g.dynamicLinkDomain,d.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(le(g.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),d.iOSBundleId=g.iOS.bundleId),g.android&&(le(g.android.packageName.length>0,C,"missing-android-pkg-name"),d.androidInstallApp=g.android.installApp,d.androidMinimumVersionCode=g.android.minimumVersion,d.androidPackageName=g.android.packageName)}function U(){return(U=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C),$={requestType:"PASSWORD_RESET",email:d};g&&M2(I,$,g),yield _r(I,$)})).apply(this,arguments)}function V(){return(V=(0,y.Z)(function*(C,d,g){yield z1((0,te.m9)(C),{oobCode:d,newPassword:g})})).apply(this,arguments)}function Ee(){return(Ee=(0,y.Z)(function*(C,d){yield ti((0,te.m9)(C),{oobCode:d})})).apply(this,arguments)}function Dt(C,d){return C1.apply(this,arguments)}function C1(){return(C1=(0,y.Z)(function*(C,d){const g=(0,te.m9)(C),I=yield z1(g,{oobCode:d}),$=I.requestType;switch(le($,g,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(I.mfaInfo,g,"internal-error");default:le(I.email,g,"internal-error")}let ne=null;return I.mfaInfo&&(ne=gi._fromServerResponse(Zt(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:ne},operation:$}})).apply(this,arguments)}function ai(){return(ai=(0,y.Z)(function*(C,d){const{data:g}=yield Dt((0,te.m9)(C),d);return g.email})).apply(this,arguments)}function Wr(){return(Wr=(0,y.Z)(function*(C,d,g){const I=Zt(C),$=yield ir(I,{returnSecureToken:!0,email:d,password:g}),ne=yield Cr._fromIdTokenResponse(I,"signIn",$);return yield I._updateCurrentUser(ne.user),ne})).apply(this,arguments)}function Mo(){return(Mo=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C),$={requestType:"EMAIL_SIGNIN",email:d};le(g.handleCodeInApp,I,"argument-error"),g&&M2(I,$,g),yield Nr(I,$)})).apply(this,arguments)}function c2(){return(c2=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C),$=o2.credentialWithLink(d,g||Et());return le($._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),En(I,$)})).apply(this,arguments)}function Rr(C,d){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:createAuthUri",vn(C,d))})).apply(this,arguments)}function Yi(){return(Yi=(0,y.Z)(function*(C,d){const I={identifier:d,continueUri:Vt()?Et():"http://localhost"},{signinMethods:$}=yield Rr((0,te.m9)(C),I);return $||[]})).apply(this,arguments)}function ee(){return(ee=(0,y.Z)(function*(C,d){const g=(0,te.m9)(C),$={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};d&&M2(g.auth,$,d);const{email:ne}=yield s1(g.auth,$);ne!==C.email&&(yield C.reload())})).apply(this,arguments)}function de(){return(de=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C),ne={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:d};g&&M2(I.auth,ne,g);const{email:Fe}=yield r2(I.auth,ne);Fe!==C.email&&(yield C.reload())})).apply(this,arguments)}function Be(C,d){return ut.apply(this,arguments)}function ut(){return(ut=(0,y.Z)(function*(C,d){return Mn(C,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Ct(){return(Ct=(0,y.Z)(function*(C,{displayName:d,photoURL:g}){if(void 0===d&&void 0===g)return;const I=(0,te.m9)(C),ne={idToken:yield I.getIdToken(),displayName:d,photoUrl:g,returnSecureToken:!0},Fe=yield j1(I,Be(I.auth,ne));I.displayName=Fe.displayName||null,I.photoURL=Fe.photoUrl||null;const gt=I.providerData.find(({providerId:Ht})=>"password"===Ht);gt&&(gt.displayName=I.displayName,gt.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Fe)})).apply(this,arguments)}function Bt(C,d,g){return e1.apply(this,arguments)}function e1(){return(e1=(0,y.Z)(function*(C,d,g){const{auth:I}=C,ne={idToken:yield C.getIdToken(),returnSecureToken:!0};d&&(ne.email=d),g&&(ne.password=g);const Fe=yield j1(C,Or(I,ne));yield C._updateTokensIfNecessary(Fe,!0)})).apply(this,arguments)}class Ur{constructor(d,g,I={}){this.isNewUser=d,this.providerId=g,this.profile=I}}class d1 extends Ur{constructor(d,g,I,$){super(d,g,I),this.username=$}}class Zr extends Ur{constructor(d,g){super(d,"facebook.com",g)}}class fr extends d1{constructor(d,g){super(d,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class vi extends Ur{constructor(d,g){super(d,"google.com",g)}}class kr extends d1{constructor(d,g,I){super(d,"twitter.com",g,I)}}function cr(C){const{user:d,_tokenResponse:g}=C;return d.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function g1(C){var d,g;if(!C)return null;const{providerId:I}=C,$=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},ne=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!I&&(null==C?void 0:C.idToken)){const Fe=null===(g=null===(d=nn(C.idToken))||void 0===d?void 0:d.firebase)||void 0===g?void 0:g.sign_in_provider;if(Fe)return new Ur(ne,"anonymous"!==Fe&&"custom"!==Fe?Fe:null)}if(!I)return null;switch(I){case"facebook.com":return new Zr(ne,$);case"github.com":return new fr(ne,$);case"google.com":return new vi(ne,$);case"twitter.com":return new kr(ne,$,C.screenName||null);case"custom":case"anonymous":return new Ur(ne,null);default:return new Ur(ne,I,$)}}(g)}class b2{constructor(d,g){this.type=d,this.credential=g}static _fromIdtoken(d){return new b2("enroll",d)}static _fromMfaPendingCredential(d){return new b2("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var g,I;if(null==d?void 0:d.multiFactorSession){if(null===(g=d.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return b2._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null===(I=d.multiFactorSession)||void 0===I?void 0:I.idToken)return b2._fromIdtoken(d.multiFactorSession.idToken)}return null}}class Z2{constructor(d,g,I){this.session=d,this.hints=g,this.signInResolver=I}static _fromError(d,g){const I=Zt(d),$=g.customData._serverResponse,ne=($.mfaInfo||[]).map(gt=>gi._fromServerResponse(I,gt));le($.mfaPendingCredential,I,"internal-error");const Fe=b2._fromMfaPendingCredential($.mfaPendingCredential);return new Z2(Fe,ne,function(){var gt=(0,y.Z)(function*(Ht){const mn=yield Ht._process(I,Fe);delete $.mfaInfo,delete $.mfaPendingCredential;const Vn=Object.assign(Object.assign({},$),{idToken:mn.idToken,refreshToken:mn.refreshToken});switch(g.operationType){case"signIn":const Pn=yield Cr._fromIdTokenResponse(I,g.operationType,Vn);return yield I._updateCurrentUser(Pn.user),Pn;case"reauthenticate":return le(g.user,I,"internal-error"),Cr._forOperation(g.user,g.operationType,Vn);default:ft(I,"internal-error")}});return function(Ht){return gt.apply(this,arguments)}}())}resolveSignIn(d){var g=this;return(0,y.Z)(function*(){return g.signInResolver(d)})()}}function Eo(C,d){return Mn(C,"POST","/v2/accounts/mfaEnrollment:start",vn(C,d))}class q2{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>gi._fromServerResponse(d.auth,I)))})}static _fromUser(d){return new q2(d)}getSession(){var d=this;return(0,y.Z)(function*(){return b2._fromIdtoken(yield d.user.getIdToken())})()}enroll(d,g){var I=this;return(0,y.Z)(function*(){const $=d,ne=yield I.getSession(),Fe=yield j1(I.user,$._process(I.user.auth,ne,g));return yield I.user._updateTokensIfNecessary(Fe),I.user.reload()})()}unenroll(d){var g=this;return(0,y.Z)(function*(){const I="string"==typeof d?d:d.uid,$=yield g.user.getIdToken(),ne=yield j1(g.user,function Di(C,d){return Mn(C,"POST","/v2/accounts/mfaEnrollment:withdraw",vn(C,d))}(g.user.auth,{idToken:$,mfaEnrollmentId:I}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Fe})=>Fe!==I),yield g.user._updateTokensIfNecessary(ne);try{yield g.user.reload()}catch(Fe){if("auth/user-token-expired"!==Fe.code)throw Fe}})()}}const z2=new WeakMap,L2="__sak";class K2{constructor(d,g){this.storageRetriever=d,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(L2,"1"),this.storage.removeItem(L2),Promise.resolve(!0)):Promise.resolve(!1)}catch(d){return Promise.resolve(!1)}}_set(d,g){return this.storage.setItem(d,JSON.stringify(g)),Promise.resolve()}_get(d){const g=this.storage.getItem(d);return Promise.resolve(g?JSON.parse(g):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const cs=(()=>{class C extends K2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function u2(){const C=(0,te.z$)();return xe(C)||_1(C)}()&&function k1(){try{return!(!window||window===window.top)}catch(C){return!1}}(),this.fallbackToPolling=$1(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const $=this.storage.getItem(I),ne=this.localCache[I];$!==ne&&g(I,ne,$)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((gt,Ht,mn)=>{this.notifyListeners(gt,mn)});const $=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const gt=this.storage.getItem($);if(g.newValue!==gt)null!==g.newValue?this.storage.setItem($,g.newValue):this.storage.removeItem($);else if(this.localCache[$]===g.newValue&&!I)return}const ne=()=>{const gt=this.storage.getItem($);!I&&this.localCache[$]===gt||this.notifyListeners($,gt)},Fe=this.storage.getItem($);!function lr(){return(0,te.w1)()&&10===document.documentMode}()||Fe===g.newValue||g.newValue===g.oldValue?ne():setTimeout(ne,10)}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const ne of Array.from($))ne(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var $=()=>super._set,ne=this;return(0,y.Z)(function*(){yield $().call(ne,g,I),ne.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,$=this;return(0,y.Z)(function*(){const ne=yield I().call($,g);return $.localCache[g]=JSON.stringify(ne),ne})()}_remove(g){var I=()=>super._remove,$=this;return(0,y.Z)(function*(){yield I().call($,g),delete $.localCache[g]})()}}return C.type="LOCAL",C})(),Pi=(()=>{class C extends K2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return C.type="SESSION",C})();let Io=(()=>{class C{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(ne=>ne.isListeningto(g));if(I)return I;const $=new C(g);return this.receivers.push($),$}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,y.Z)(function*(){const $=g,{eventId:ne,eventType:Fe,data:gt}=$.data,Ht=I.handlersMap[Fe];if(!(null==Ht?void 0:Ht.size))return;$.ports[0].postMessage({status:"ack",eventId:ne,eventType:Fe});const mn=Array.from(Ht).map(function(){var Pn=(0,y.Z)(function*(fi){return fi($.origin,gt)});return function(fi){return Pn.apply(this,arguments)}}()),Vn=yield function Y2(C){return Promise.all(C.map(function(){var d=(0,y.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return d.apply(this,arguments)}}()))}(mn);$.ports[0].postMessage({status:"done",eventId:ne,eventType:Fe,response:Vn})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function ls(C="",d=10){let g="";for(let I=0;I<d;I++)g+=Math.floor(10*Math.random());return C+g}class ms{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,g,I=50){var $=this;return(0,y.Z)(function*(){const ne="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ne)throw new Error("connection_unavailable");let Fe,gt;return new Promise((Ht,mn)=>{const Vn=ls("",20);ne.port1.start();const Pn=setTimeout(()=>{mn(new Error("unsupported_event"))},I);gt={messageChannel:ne,onMessage(fi){const ns=fi;if(ns.data.eventId===Vn)switch(ns.data.status){case"ack":clearTimeout(Pn),Fe=setTimeout(()=>{mn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Fe),Ht(ns.data.response);break;default:clearTimeout(Pn),clearTimeout(Fe),mn(new Error("invalid_response"))}}},$.handlers.add(gt),ne.port1.addEventListener("message",gt.onMessage),$.target.postMessage({eventType:d,eventId:Vn,data:g},[ne.port2])}).finally(()=>{gt&&$.removeMessageHandler(gt)})})()}}function Br(){return window}function gs(){return void 0!==Br().WorkerGlobalScope&&"function"==typeof Br().importScripts}function Ns(){return(Ns=(0,y.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(C){return null}})).apply(this,arguments)}const Ao="firebaseLocalStorageDb",Y1="firebaseLocalStorage",Qi="fbase_key";class Ji{constructor(d){this.request=d}toPromise(){return new Promise((d,g)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function A(C,d){return C.transaction([Y1],d?"readwrite":"readonly").objectStore(Y1)}function b(){const C=indexedDB.open(Ao,1);return new Promise((d,g)=>{C.addEventListener("error",()=>{g(C.error)}),C.addEventListener("upgradeneeded",()=>{const I=C.result;try{I.createObjectStore(Y1,{keyPath:Qi})}catch($){g($)}}),C.addEventListener("success",(0,y.Z)(function*(){const I=C.result;I.objectStoreNames.contains(Y1)?d(I):(I.close(),yield function E(){const C=indexedDB.deleteDatabase(Ao);return new Ji(C).toPromise()}(),d(yield b()))}))})}function N(C,d,g){return z.apply(this,arguments)}function z(){return(z=(0,y.Z)(function*(C,d,g){const I=A(C,!0).put({[Qi]:d,value:g});return new Ji(I).toPromise()})).apply(this,arguments)}function he(){return(he=(0,y.Z)(function*(C,d){const g=A(C,!1).get(d),I=yield new Ji(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Se(C,d){const g=A(C,!0).delete(d);return new Ji(g).toPromise()}const ln=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,y.Z)(function*(){return g.db||(g.db=yield b()),g.db})()}_withRetries(g){var I=this;return(0,y.Z)(function*(){let $=0;for(;;)try{const ne=yield I._openDb();return yield g(ne)}catch(ne){if($++>3)throw ne;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,y.Z)(function*(){return gs()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,y.Z)(function*(){g.receiver=Io._getInstance(function vs(){return gs()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,y.Z)(function*($,ne){return{keyProcessed:(yield g._poll()).includes(ne.key)}});return function($,ne){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,y.Z)(function*($,ne){return["keyChanged"]});return function($,ne){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,y.Z)(function*(){var I,$;if(g.activeServiceWorker=yield function Hr(){return Ns.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new ms(g.activeServiceWorker);const ne=yield g.sender._send("ping",{},800);!ne||(null===(I=ne[0])||void 0===I?void 0:I.fulfilled)&&(null===($=ne[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,y.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Jr(){var C;return(null===(C=null==navigator?void 0:navigator.serviceWorker)||void 0===C?void 0:C.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch($){}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const g=yield b();return yield N(g,L2,"1"),yield Se(g,L2),!0}catch(g){}return!1})()}_withPendingWrite(g){var I=this;return(0,y.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var $=this;return(0,y.Z)(function*(){return $._withPendingWrite((0,y.Z)(function*(){return yield $._withRetries(ne=>N(ne,g,I)),$.localCache[g]=I,$.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,y.Z)(function*(){const $=yield I._withRetries(ne=>function W(C,d){return he.apply(this,arguments)}(ne,g));return I.localCache[g]=$,$})()}_remove(g){var I=this;return(0,y.Z)(function*(){return I._withPendingWrite((0,y.Z)(function*(){return yield I._withRetries($=>Se($,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,y.Z)(function*(){const I=yield g._withRetries(Fe=>{const gt=A(Fe,!1).getAll();return new Ji(gt).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const $=[],ne=new Set;for(const{fbase_key:Fe,value:gt}of I)ne.add(Fe),JSON.stringify(g.localCache[Fe])!==JSON.stringify(gt)&&(g.notifyListeners(Fe,gt),$.push(Fe));for(const Fe of Object.keys(g.localCache))g.localCache[Fe]&&!ne.has(Fe)&&(g.notifyListeners(Fe,null),$.push(Fe));return $})()}notifyListeners(g,I){this.localCache[g]=I;const $=this.listeners[g];if($)for(const ne of Array.from($))ne(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function P1(C,d){return Mn(C,"POST","/v2/accounts/mfaSignIn:start",vn(C,d))}function ui(){return(ui=(0,y.Z)(function*(C){return(yield Mn(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ys(C){return new Promise((d,g)=>{const I=document.createElement("script");I.setAttribute("src",C),I.onload=d,I.onerror=$=>{const ne=nt("internal-error");ne.customData=$,g(ne)},I.type="text/javascript",I.charset="UTF-8",function P2(){var C,d;return null!==(d=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==d?d:document}().appendChild(I)})}function Dn(C){return`__${C}${Math.floor(1e6*Math.random())}`}const Mr=1e12;class An{constructor(d){this.auth=d,this.counter=Mr,this._widgets=new Map}render(d,g){const I=this.counter;return this._widgets.set(I,new Q2(d,this.auth.name,g||{})),this.counter++,I}reset(d){var g;const I=d||Mr;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(d){var g;return(null===(g=this._widgets.get(d||Mr))||void 0===g?void 0:g.getResponse())||""}execute(d){var g=this;return(0,y.Z)(function*(){var I;return null===(I=g._widgets.get(d||Mr))||void 0===I||I.execute(),""})()}}class Q2{constructor(d,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof d?document.getElementById(d):d;le($,"argument-error",{appName:g}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function w1(C){const d=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<C;I++)d.push(g.charAt(Math.floor(Math.random()*g.length)));return d.join("")}(50);const{callback:d,"expired-callback":g}=this.params;if(d)try{d(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Fa=Dn("rcb"),a1=new sn(3e4,6e4);class _c{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Br().grecaptcha}load(d,g=""){return le(function Ua(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(g),d,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Br().grecaptcha):new Promise((I,$)=>{const ne=Br().setTimeout(()=>{$(nt(d,"network-request-failed"))},a1.get());Br()[Fa]=()=>{Br().clearTimeout(ne),delete Br()[Fa];const gt=Br().grecaptcha;if(!gt)return void $(nt(d,"internal-error"));const Ht=gt.render;gt.render=(mn,Vn)=>{const Pn=Ht(mn,Vn);return this.counter++,Pn},this.hostLanguage=g,I(gt)},ys(`https://www.google.com/recaptcha/api.js??${(0,te.xO)({onload:Fa,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(ne),$(nt(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){return!!Br().grecaptcha&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class lo{load(d){return(0,y.Z)(function*(){return new An(d)})()}clearedOneInstance(){}}const Wo="recaptcha",va={theme:"light",type:"image"};class s4{constructor(d,g=Object.assign({},va),I){this.parameters=g,this.type=Wo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Zt(I),this.isInvisible="invisible"===this.parameters.size,le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof d?document.getElementById(d):d;le($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new lo:new _c,this.validateStartingState()}verify(){var d=this;return(0,y.Z)(function*(){d.assertNotDestroyed();const g=yield d.render(),I=d.getAssertedRecaptcha();return I.getResponse(g)||new Promise(ne=>{const Fe=gt=>{!gt||(d.tokenChangeListeners.delete(Fe),ne(gt))};d.tokenChangeListeners.add(Fe),d.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof d)d(g);else if("string"==typeof d){const I=Br()[d];"function"==typeof I&&I(g)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,y.Z)(function*(){if(yield d.init(),!d.widgetId){let g=d.container;if(!d.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}d.widgetId=d.getAssertedRecaptcha().render(g,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,y.Z)(function*(){le(Vt()&&!gs(),d.auth,"internal-error"),yield function uo(){let C=null;return new Promise(d=>{"complete"!==document.readyState?(C=()=>d(),window.addEventListener("load",C)):d()}).catch(d=>{throw C&&window.removeEventListener("load",C),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const g=yield function o1(C){return ui.apply(this,arguments)}(d.auth);le(g,d.auth,"internal-error"),d.parameters.sitekey=g})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class d2{constructor(d,g){this.verificationId=d,this.onConfirmation=g}confirm(d){const g=Vr._fromVerification(this.verificationId,d);return this.onConfirmation(g)}}function xo(){return(xo=(0,y.Z)(function*(C,d,g){const I=Zt(C),$=yield Si(I,d,(0,te.m9)(g));return new d2($,ne=>En(I,ne))})).apply(this,arguments)}function zs(){return(zs=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C);yield R(!1,I,"phone");const $=yield Si(I.auth,d,(0,te.m9)(g));return new d2($,ne=>Ln(I,ne))})).apply(this,arguments)}function Xe(){return(Xe=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C),$=yield Si(I.auth,d,(0,te.m9)(g));return new d2($,ne=>b1(I,ne))})).apply(this,arguments)}function Si(C,d,g){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,y.Z)(function*(C,d,g){var I;const $=yield g.verify();try{let ne;if(le("string"==typeof $,C,"argument-error"),le(g.type===Wo,C,"argument-error"),ne="string"==typeof d?{phoneNumber:d}:d,"session"in ne){const Fe=ne.session;if("phoneNumber"in ne)return le("enroll"===Fe.type,C,"internal-error"),(yield Eo(C,{idToken:Fe.credential,phoneEnrollmentInfo:{phoneNumber:ne.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{le("signin"===Fe.type,C,"internal-error");const gt=(null===(I=ne.multiFactorHint)||void 0===I?void 0:I.uid)||ne.multiFactorUid;return le(gt,C,"missing-multi-factor-info"),(yield P1(C,{mfaPendingCredential:Fe.credential,mfaEnrollmentId:gt,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Fe}=yield Ye(C,{phoneNumber:ne.phoneNumber,recaptchaToken:$});return Fe}}finally{g._reset()}})).apply(this,arguments)}function e2(){return(e2=(0,y.Z)(function*(C,d){yield k((0,te.m9)(C),d)})).apply(this,arguments)}let p2=(()=>{class C{constructor(g){this.providerId=C.PROVIDER_ID,this.auth=Zt(g)}verifyPhoneNumber(g,I){return Si(this.auth,g,(0,te.m9)(I))}static credential(g,I){return Vr._fromVerification(g,I)}static credentialFromResult(g){return C.credentialFromTaggedObject(g)}static credentialFromError(g){return C.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:$}=g;return I&&$?Vr._fromTokenResponse(I,$):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function hs(C,d){return d?Ue(d):(le(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class J2 extends Ar{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return Qr(d,this._buildIdpRequest())}_linkToIdToken(d,g){return Qr(d,this._buildIdpRequest(g))}_getReauthenticationResolver(d){return Qr(d,this._buildIdpRequest())}_buildIdpRequest(d){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(g.idToken=d),g}}function ya(C){return bt(C.auth,new J2(C),C.bypassAuthState)}function _a(C){const{auth:d,user:g}=C;return le(g,d,"internal-error"),ye(g,new J2(C),C.bypassAuthState)}function o4(C){return m2.apply(this,arguments)}function m2(){return(m2=(0,y.Z)(function*(C){const{auth:d,user:g}=C;return le(g,d,"internal-error"),k(g,new J2(C),C.bypassAuthState)})).apply(this,arguments)}class Oi{constructor(d,g,I,$,ne=!1){this.auth=d,this.resolver=I,this.user=$,this.bypassAuthState=ne,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var d=this;return new Promise(function(){var g=(0,y.Z)(function*(I,$){d.pendingPromise={resolve:I,reject:$};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(ne){d.reject(ne)}});return function(I,$){return g.apply(this,arguments)}}())}onAuthEvent(d){var g=this;return(0,y.Z)(function*(){const{urlResponse:I,sessionId:$,postBody:ne,tenantId:Fe,error:gt,type:Ht}=d;if(gt)return void g.reject(gt);const mn={auth:g.auth,requestUri:I,sessionId:$,tenantId:Fe||void 0,postBody:ne||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ht)(mn))}catch(Vn){g.reject(Vn)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return ya;case"linkViaPopup":case"linkViaRedirect":return o4;case"reauthViaPopup":case"reauthViaRedirect":return _a;default:ft(this.auth,"internal-error")}}resolve(d){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){me(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fo=new sn(2e3,1e4);function _s(){return(_s=(0,y.Z)(function*(C,d,g){const I=Zt(C);et(C,d,tr);const $=hs(I,g);return new qo(I,"signInViaPopup",d,$).executeNotNull()})).apply(this,arguments)}function po(){return(po=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C);et(I.auth,d,tr);const $=hs(I.auth,g);return new qo(I.auth,"reauthViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}function T1(){return(T1=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C);et(I.auth,d,tr);const $=hs(I.auth,g);return new qo(I.auth,"linkViaPopup",d,$,I).executeNotNull()})).apply(this,arguments)}let qo=(()=>{class C extends Oi{constructor(g,I,$,ne,Fe){super(g,I,ne,Fe),this.provider=$,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var g=this;return(0,y.Z)(function*(){const I=yield g.execute();return le(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,y.Z)(function*(){me(1===g.filter.length,"Popup operations only handle one event");const I=ls();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch($=>{g.reject($)}),g.resolver._isIframeWebStorageSupported(g.auth,$=>{$||g.reject(nt(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(nt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,$;this.pollId=(null===($=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===$?void 0:$.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(nt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,fo.get())};g()}}return C.currentPopupAction=null,C})();const Ti=new Map;class Ko extends Oi{constructor(d,g,I=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var d=()=>super.execute,g=this;return(0,y.Z)(function*(){let I=Ti.get(g.auth._key());if(!I){try{const ne=(yield function Ni(C,d){return mo.apply(this,arguments)}(g.resolver,g.auth))?yield d().call(g):null;I=()=>Promise.resolve(ne)}catch($){I=()=>Promise.reject($)}Ti.set(g.auth._key(),I)}return g.bypassAuthState||Ti.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(d){var g=()=>super.onAuthEvent,I=this;return(0,y.Z)(function*(){if("signInViaRedirect"===d.type)return g().call(I,d);if("unknown"!==d.type){if(d.eventId){const $=yield I.auth._redirectUserForId(d.eventId);if($)return I.user=$,g().call(I,d);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function mo(){return(mo=(0,y.Z)(function*(C,d){const g=ge(d),I=X(C);if(!(yield I._isAvailable()))return!1;const $="true"===(yield I._get(g));return yield I._remove(g),$})).apply(this,arguments)}function V2(C,d){return zr.apply(this,arguments)}function zr(){return(zr=(0,y.Z)(function*(C,d){return X(C)._set(ge(d),"true")})).apply(this,arguments)}function F(C,d){Ti.set(C._key(),d)}function X(C){return Ue(C._redirectPersistence)}function ge(C){return Jn("pendingRedirect",C.config.apiKey,C.name)}function St(){return(St=(0,y.Z)(function*(C,d,g){const I=Zt(C);et(C,d,tr);const $=hs(I,g);return yield V2($,I),$._openRedirect(I,d,"signInViaRedirect")})).apply(this,arguments)}function jn(){return(jn=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C);et(I.auth,d,tr);const $=hs(I.auth,g);yield V2($,I.auth);const ne=yield Gs(I);return $._openRedirect(I.auth,d,"reauthViaRedirect",ne)})).apply(this,arguments)}function br(){return(br=(0,y.Z)(function*(C,d,g){const I=(0,te.m9)(C);et(I.auth,d,tr);const $=hs(I.auth,g);yield R(!1,I,d.providerId),yield V2($,I.auth);const ne=yield Gs(I);return $._openRedirect(I.auth,d,"linkViaRedirect",ne)})).apply(this,arguments)}function g2(){return(g2=(0,y.Z)(function*(C,d){return yield Zt(C)._initializationPromise,Cs(C,d,!1)})).apply(this,arguments)}function Cs(C,d){return t2.apply(this,arguments)}function t2(){return(t2=(0,y.Z)(function*(C,d,g=!1){const I=Zt(C),$=hs(I,d),Fe=yield new Ko(I,$,g).execute();return Fe&&!g&&(delete Fe.user._redirectEventId,yield I._persistUserIfCurrent(Fe.user),yield I._setRedirectUser(null,d)),Fe})).apply(this,arguments)}function Gs(C){return R2.apply(this,arguments)}function R2(){return(R2=(0,y.Z)(function*(C){const d=ls(`${C.uid}:::`);return C._redirectEventId=d,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),d})).apply(this,arguments)}class k2{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(d,I)&&(g=!0,this.sendToConsumer(d,I),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function $s(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H2(C);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=d,g=!0)),g}sendToConsumer(d,g){var I;if(d.error&&!H2(d)){const $=(null===(I=d.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(nt(this.auth,$))}else g.onAuthEvent(d)}isEventForConsumer(d,g){const I=null===g.eventId||!!d.eventId&&d.eventId===g.eventId;return g.filter.includes(d.type)&&I}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ws(d))}saveEventToCache(d){this.cachedEventUids.add(ws(d)),this.lastProcessedEventTime=Date.now()}}function ws(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(d=>d).join("-")}function H2({type:C,error:d}){return"unknown"===C&&"auth/no-auth-event"===(null==d?void 0:d.code)}function Ws(C){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,y.Z)(function*(C,d={}){return Mn(C,"GET","/v1/projects",d)})).apply(this,arguments)}const E6=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ca=/^https?/;function wa(){return(wa=(0,y.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:d}=yield Ws(C);for(const g of d)try{if(E2(g))return}catch(I){}ft(C,"unauthorized-domain")})).apply(this,arguments)}function E2(C){const d=Et(),{protocol:g,hostname:I}=new URL(d);if(C.startsWith("chrome-extension://")){const Fe=new URL(C);return""===Fe.hostname&&""===I?"chrome-extension:"===g&&C.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===g&&Fe.hostname===I}if(!Ca.test(g))return!1;if(E6.test(C))return I===C;const $=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(I)}const Zs=new sn(3e4,6e4);function dr(){const C=Br().___jsl;if(null==C?void 0:C.H)for(const d of Object.keys(C.H))if(C.H[d].r=C.H[d].r||[],C.H[d].L=C.H[d].L||[],C.H[d].r=[...C.H[d].L],C.CP)for(let g=0;g<C.CP.length;g++)C.CP[g]=null}let ja=null;function Qo(C){return ja=ja||function c0(C){return new Promise((d,g)=>{var I,$,ne;function Fe(){dr(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{dr(),g(nt(C,"network-request-failed"))},timeout:Zs.get()})}if(null===($=null===(I=Br().gapi)||void 0===I?void 0:I.iframes)||void 0===$?void 0:$.Iframe)d(gapi.iframes.getContext());else{if(!(null===(ne=Br().gapi)||void 0===ne?void 0:ne.load)){const gt=Dn("iframefcb");return Br()[gt]=()=>{gapi.load?Fe():g(nt(C,"network-request-failed"))},ys(`https://apis.google.com/js/api.js?onload=${gt}`).catch(Ht=>g(Ht))}Fe()}}).catch(d=>{throw ja=null,d})}(C),ja}const a4=new sn(5e3,15e3),qs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ga=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V4(C){const d=C.config;le(d.authDomain,C,"auth-domain-config-required");const g=d.emulator?hn(d,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,I={apiKey:d.apiKey,appName:C.name,v:Le.SDK_VERSION},$=Ga.get(C.config.apiHost);$&&(I.eid=$);const ne=C._getFrameworks();return ne.length&&(I.fw=ne.join(",")),`${g}?${(0,te.xO)(I).slice(1)}`}function Jo(){return Jo=(0,y.Z)(function*(C){const d=yield Qo(C),g=Br().gapi;return le(g,C,"internal-error"),d.open({where:document.body,url:V4(C),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qs,dontclear:!0},I=>new Promise(function(){var $=(0,y.Z)(function*(ne,Fe){yield I.restyle({setHideOnLeave:!1});const gt=nt(C,"network-request-failed"),Ht=Br().setTimeout(()=>{Fe(gt)},a4.get());function mn(){Br().clearTimeout(Ht),ne(I)}I.ping(mn).then(mn,()=>{Fe(gt)})});return function(ne,Fe){return $.apply(this,arguments)}}()))}),Jo.apply(this,arguments)}const $a={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wc{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(d){}}}function Ms(C,d,g,I,$,ne){le(C.config.authDomain,C,"auth-domain-config-required"),le(C.config.apiKey,C,"invalid-api-key");const Fe={apiKey:C.config.apiKey,appName:C.name,authType:g,redirectUrl:I,v:Le.SDK_VERSION,eventId:$};if(d instanceof tr){d.setDefaultLanguage(C.languageCode),Fe.providerId=d.providerId||"",(0,te.xb)(d.getCustomParameters())||(Fe.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Ht,mn]of Object.entries(ne||{}))Fe[Ht]=mn}if(d instanceof ri){const Ht=d.getScopes().filter(mn=>""!==mn);Ht.length>0&&(Fe.scopes=Ht.join(","))}C.tenantId&&(Fe.tid=C.tenantId);const gt=Fe;for(const Ht of Object.keys(gt))void 0===gt[Ht]&&delete gt[Ht];return`${function Xo({config:C}){return C.emulator?hn(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}(C)}?${(0,te.xO)(gt).slice(1)}`}const X2="webStorageSupport";class Za extends class R4{constructor(d){this.factorId=d}_process(d,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(d,g.credential,I);case"signin":return this._finalizeSignIn(d,g.credential);default:return ot("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Za(d)}_finalizeEnroll(d,g,I){return function Bs(C,d){return Mn(C,"POST","/v2/accounts/mfaEnrollment:finalize",vn(C,d))}(d,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,g){return function q1(C,d){return Mn(C,"POST","/v2/accounts/mfaSignIn:finalize",vn(C,d))}(d,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let u4=(()=>{class C{constructor(){}static assertion(g){return Za._fromCredential(g)}}return C.FACTOR_ID="phone",C})();var Ea="@firebase/auth";class es{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var g=this;return(0,y.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const g=this.auth.onIdTokenChanged(I=>{var $;d((null===($=I)||void 0===$?void 0:$.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,g),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const g=this.internalListeners.get(d);!g||(this.internalListeners.delete(d),g(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ls(){return window}function I2(){return(I2=(0,y.Z)(function*(C,d,g){var I;const{BuildInfo:$}=Ls();me(d.sessionId,"AuthEvent did not contain a session ID");const ne=yield u0(d.sessionId),Fe={};return _1()?Fe.ibi=$.packageName:yt()?Fe.apn=$.packageName:ft(C,"operation-not-supported-in-this-environment"),$.displayName&&(Fe.appDisplayName=$.displayName),Fe.sessionId=ne,Ms(C,g,d.type,void 0,null!==(I=d.eventId)&&void 0!==I?I:void 0,Fe)})).apply(this,arguments)}function qa(){return(qa=(0,y.Z)(function*(C){const{BuildInfo:d}=Ls(),g={};_1()?g.iosBundleId=d.packageName:yt()?g.androidPackageName=d.packageName:ft(C,"operation-not-supported-in-this-environment"),yield Ws(C,g)})).apply(this,arguments)}function Ya(){return(Ya=(0,y.Z)(function*(C,d,g){const{cordova:I}=Ls();let $=()=>{};try{yield new Promise((ne,Fe)=>{let gt=null;function Ht(){var Pn;ne();const fi=null===(Pn=I.plugins.browsertab)||void 0===Pn?void 0:Pn.close;"function"==typeof fi&&fi(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function mn(){gt||(gt=window.setTimeout(()=>{Fe(nt(C,"redirect-cancelled-by-user"))},2e3))}function Vn(){"visible"===(null==document?void 0:document.visibilityState)&&mn()}d.addPassiveListener(Ht),document.addEventListener("resume",mn,!1),yt()&&document.addEventListener("visibilitychange",Vn,!1),$=()=>{d.removePassiveListener(Ht),document.removeEventListener("resume",mn,!1),document.removeEventListener("visibilitychange",Vn,!1),gt&&window.clearTimeout(gt)}})}finally{$()}})).apply(this,arguments)}function u0(C){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,y.Z)(function*(C){const d=Ps(C),g=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(g)).map($=>$.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ps(C){if(me(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(C);const d=new ArrayBuffer(C.length),g=new Uint8Array(d);for(let I=0;I<C.length;I++)g[I]=C.charCodeAt(I);return g}!function No(C){(0,Le._registerComponent)(new ue.wA("auth",(d,{options:g})=>{const I=d.getProvider("app").getImmediate(),$=d.getProvider("heartbeat"),{apiKey:ne,authDomain:Fe}=I.options;return((gt,Ht)=>{le(ne&&!ne.includes(":"),"invalid-api-key",{appName:gt.name}),le(!(null==Fe?void 0:Fe.includes(":")),"argument-error",{appName:gt.name});const mn={apiKey:ne,authDomain:Fe,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yr(C)},Vn=new Tt(gt,Ht,mn);return function Ke(C,d){const g=(null==d?void 0:d.persistence)||[],I=(Array.isArray(g)?g:[g]).map(Ue);(null==d?void 0:d.errorMap)&&C._updateErrorMap(d.errorMap),C._initializeWithPersistence(I,null==d?void 0:d.popupRedirectResolver)}(Vn,g),Vn})(I,$)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,g,I)=>{d.getProvider("auth-internal").initialize()})),(0,Le._registerComponent)(new ue.wA("auth-internal",d=>{const g=Zt(d.getProvider("auth").getImmediate());return new es(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Le.registerVersion)(Ea,"0.20.3",function bc(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,Le.registerVersion)(Ea,"0.20.3","esm2017")}("Browser");class A6 extends k2{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(d)),super.onEvent(d)}initialized(){var d=this;return(0,y.Z)(function*(){yield d.initPromise})()}}function Os(C){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,y.Z)(function*(C){const d=yield Po()._get(Js(C));return d&&(yield Po()._remove(Js(C))),d})).apply(this,arguments)}function na(){const C=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const I=Math.floor(Math.random()*d.length);C.push(d.charAt(I))}return C.join("")}function Po(){return Ue(cs)}function Js(C){return Jn("authEvent",C.config.apiKey,C.name)}function Oo(C){if(!(null==C?void 0:C.includes("?")))return{};const[d,...g]=C.split("?");return(0,te.zd)(g.join("?"))}function F2(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:nt("no-auth-event")}}function Da(){var C;return(null===(C=null==self?void 0:self.location)||void 0===C?void 0:C.protocol)||null}function ia(C=(0,te.z$)()){return!("file:"!==Da()&&"ionic:"!==Da()&&"capacitor:"!==Da()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function Na(){try{const C=self.localStorage,d=ls();if(C)return C.setItem(d,"1"),C.removeItem(d),!function F1(C=(0,te.z$)()){return function Ta(){return(0,te.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Q1(C=(0,te.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,te.hl)()}catch(C){return Vo()&&(0,te.hl)()}return!1}function Vo(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Kr(){return(function H4(){return"http:"===Da()||"https:"===Da()}()||(0,te.ru)()||ia())&&!function Sa(){return(0,te.b$)()||(0,te.UG)()}()&&Na()&&!Vo()}function Ro(){return ia()&&"undefined"!=typeof document}function Ac(){return(Ac=(0,y.Z)(function*(){return!!Ro()&&new Promise(C=>{const d=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),C(!0)})})})).apply(this,arguments)}const x2={LOCAL:"local",NONE:"none",SESSION:"session"},ts=le,xc="persistence";function za(C){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,y.Z)(function*(C){yield C._initializationPromise;const d=yo(),g=Jn(xc,C.config.apiKey,C.name);d&&d.setItem(g,C._getPersistence())})).apply(this,arguments)}function yo(){var C;try{return(null===(C=function Ja(){return"undefined"!=typeof window?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch(d){return null}}const Vs=le;class Es{constructor(){this.browserResolver=Ue(class Mc{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pi,this._completeRedirectFn=Cs,this._overrideRedirectResult=F}_openPopup(d,g,I,$){var ne=this;return(0,y.Z)(function*(){var Fe;me(null===(Fe=ne.eventManagers[d._key()])||void 0===Fe?void 0:Fe.manager,"_initialize() not called before _openPopup()");const gt=Ms(d,g,I,Et(),$);return function l4(C,d,g,I=500,$=600){const ne=Math.max((window.screen.availHeight-$)/2,0).toString(),Fe=Math.max((window.screen.availWidth-I)/2,0).toString();let gt="";const Ht=Object.assign(Object.assign({},$a),{width:I.toString(),height:$.toString(),top:ne,left:Fe}),mn=(0,te.z$)().toLowerCase();g&&(gt=se(mn)?"_blank":g),$e(mn)&&(d=d||"http://localhost",Ht.scrollbars="yes");const Vn=Object.entries(Ht).reduce((fi,[ns,Oa])=>`${fi}${ns}=${Oa},`,"");if(function ar(C=(0,te.z$)()){var d;return _1(C)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(mn)&&"_self"!==gt)return function To(C,d){const g=document.createElement("a");g.href=C,g.target=d;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(d||"",gt),new wc(null);const Pn=window.open(d||"",gt,Vn);le(Pn,C,"popup-blocked");try{Pn.focus()}catch(fi){}return new wc(Pn)}(d,gt,ls())})()}_openRedirect(d,g,I,$){var ne=this;return(0,y.Z)(function*(){return yield ne._originValidation(d),function us(C){Br().location.href=C}(Ms(d,g,I,Et(),$)),new Promise(()=>{})})()}_initialize(d){const g=d._key();if(this.eventManagers[g]){const{manager:$,promise:ne}=this.eventManagers[g];return $?Promise.resolve($):(me(ne,"If manager is not set, promise should be"),ne)}const I=this.initAndGetManager(d);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(d){var g=this;return(0,y.Z)(function*(){const I=yield function zi(C){return Jo.apply(this,arguments)}(d),$=new k2(d);return I.register("authEvent",ne=>(le(null==ne?void 0:ne.authEvent,d,"invalid-auth-event"),{status:$.onEvent(ne.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[d._key()]={manager:$},g.iframes[d._key()]=I,$})()}_isIframeWebStorageSupported(d,g){this.iframes[d._key()].send(X2,{type:X2},$=>{var ne;const Fe=null===(ne=null==$?void 0:$[0])||void 0===ne?void 0:ne[X2];void 0!==Fe&&g(!!Fe),ft(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Yo(C){return wa.apply(this,arguments)}(d)),this.originValidationPromises[g]}get _shouldInitProactively(){return $1()||xe()||_1()}}),this.cordovaResolver=Ue(class Qa{constructor(){this._redirectPersistence=Pi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Cs,this._overrideRedirectResult=F}_initialize(d){var g=this;return(0,y.Z)(function*(){const I=d._key();let $=g.eventManagers.get(I);return $||($=new A6(d),g.eventManagers.set(I,$),g.attachCallbackListeners(d,$)),$})()}_openPopup(d){ft(d,"operation-not-supported-in-this-environment")}_openRedirect(d,g,I,$){var ne=this;return(0,y.Z)(function*(){!function l0(C){var d,g,I,$,ne,Fe,gt,Ht,mn,Vn;const Pn=Ls();le("function"==typeof(null===(d=null==Pn?void 0:Pn.universalLinks)||void 0===d?void 0:d.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(void 0!==(null===(g=null==Pn?void 0:Pn.BuildInfo)||void 0===g?void 0:g.packageName),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(ne=null===($=null===(I=null==Pn?void 0:Pn.cordova)||void 0===I?void 0:I.plugins)||void 0===$?void 0:$.browsertab)||void 0===ne?void 0:ne.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Ht=null===(gt=null===(Fe=null==Pn?void 0:Pn.cordova)||void 0===Fe?void 0:Fe.plugins)||void 0===gt?void 0:gt.browsertab)||void 0===Ht?void 0:Ht.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Vn=null===(mn=null==Pn?void 0:Pn.cordova)||void 0===mn?void 0:mn.InAppBrowser)||void 0===Vn?void 0:Vn.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const Fe=yield ne._initialize(d);yield Fe.initialized(),Fe.resetRedirect(),function O(){Ti.clear()}(),yield ne._originValidation(d);const gt=function Qs(C,d,g=null){return{type:d,eventId:g,urlResponse:null,sessionId:na(),postBody:null,tenantId:C.tenantId,error:nt(C,"no-auth-event")}}(d,I,$);yield function bs(C,d){return Po()._set(Js(C),d)}(d,gt);const Ht=yield function h4(C,d,g){return I2.apply(this,arguments)}(d,gt,g),mn=yield function ta(C){const{cordova:d}=Ls();return new Promise(g=>{d.plugins.browsertab.isAvailable(I=>{let $=null;I?d.plugins.browsertab.openUrl(C):$=d.InAppBrowser.open(C,function O1(C=(0,te.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),g($)})})}(Ht);return function Ka(C,d,g){return Ya.apply(this,arguments)}(d,Fe,mn)})()}_isIframeWebStorageSupported(d,g){throw new Error("Method not implemented.")}_originValidation(d){const g=d._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Aa(C){return qa.apply(this,arguments)}(d)),this.originValidationPromises[g]}attachCallbackListeners(d,g){const{universalLinks:I,handleOpenURL:$,BuildInfo:ne}=Ls(),Fe=setTimeout((0,y.Z)(function*(){yield Os(d),g.onEvent(F2())}),500),gt=function(){var Vn=(0,y.Z)(function*(Pn){clearTimeout(Fe);const fi=yield Os(d);let ns=null;fi&&(null==Pn?void 0:Pn.url)&&(ns=function f4(C,d){var g,I;const $=function v2(C){const d=Oo(C),g=d.link?decodeURIComponent(d.link):void 0,I=Oo(g).link,$=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Oo($).link||$||I||g||C}(d);if($.includes("/__/auth/callback")){const ne=Oo($),Fe=ne.firebaseError?function Xr(C){try{return JSON.parse(C)}catch(d){return null}}(decodeURIComponent(ne.firebaseError)):null,gt=null===(I=null===(g=null==Fe?void 0:Fe.code)||void 0===g?void 0:g.split("auth/"))||void 0===I?void 0:I[1],Ht=gt?nt(gt):null;return Ht?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:Ht,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:$,postBody:null}}return null}(fi,Pn.url)),g.onEvent(ns||F2())});return function(fi){return Vn.apply(this,arguments)}}();void 0!==I&&"function"==typeof I.subscribe&&I.subscribe(null,gt);const Ht=$,mn=`${ne.packageName.toLowerCase()}://`;Ls().handleOpenURL=function(){var Vn=(0,y.Z)(function*(Pn){if(Pn.toLowerCase().startsWith(mn)&&gt({url:Pn}),"function"==typeof Ht)try{Ht(Pn)}catch(fi){console.error(fi)}});return function(Pn){return Vn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Pi,this._completeRedirectFn=Cs,this._overrideRedirectResult=F}_initialize(d){var g=this;return(0,y.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,g,I,$){var ne=this;return(0,y.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._openPopup(d,g,I,$)})()}_openRedirect(d,g,I,$){var ne=this;return(0,y.Z)(function*(){return yield ne.selectUnderlyingResolver(),ne.assertedUnderlyingResolver._openRedirect(d,g,I,$)})()}_isIframeWebStorageSupported(d,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,g)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Ro()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vs(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,y.Z)(function*(){if(d.underlyingResolver)return;const g=yield function A2(){return Ac.apply(this,arguments)}();d.underlyingResolver=g?d.cordovaResolver:d.browserResolver})()}}function eo(C){return C.unwrap()}function F4(C){return d4(C)}function d4(C){const{_tokenResponse:d}=C instanceof te.ZR?C.customData:C;if(!d)return null;if(!(C instanceof te.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return p2.credentialFromResult(C);const g=d.providerId;if(!g||"password"===g)return null;let I;switch(g){case"google.com":I=w2;break;case"facebook.com":I=qi;break;case"github.com":I=Ii;break;case"twitter.com":I=Ki;break;default:const{oauthIdToken:$,oauthAccessToken:ne,oauthTokenSecret:Fe,pendingToken:gt,nonce:Ht}=d;return ne||Fe||$||gt?gt?g.startsWith("saml.")?K1._create(g,gt):Ie._fromParams({providerId:g,signInMethod:g,pendingToken:gt,idToken:$,accessToken:ne}):new ii(g).credential({idToken:$,accessToken:ne,rawNonce:Ht}):null}return C instanceof te.ZR?I.credentialFromError(C):I.credentialFromResult(C)}function U2(C,d){return d.catch(g=>{throw g instanceof te.ZR&&function to(C,d){var g;const I=null===(g=d.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===d.code)d.resolver=new Sc(C,function v1(C,d){var g;const I=(0,te.m9)(C),$=d;return le(d.customData.operationType,I,"argument-error"),le(null===(g=$.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),Z2._fromError(I,$)}(C,d));else if(I){const $=d4(d),ne=d;$&&(ne.credential=$,ne.tenantId=I.tenantId||void 0,ne.email=I.email||void 0,ne.phoneNumber=I.phoneNumber||void 0)}}(C,g),g}).then(g=>{const $=g.user;return{operationType:g.operationType,credential:F4(g),additionalUserInfo:cr(g),user:Is.getOrCreate($)}})}function ec(C,d){return tc.apply(this,arguments)}function tc(){return(tc=(0,y.Z)(function*(C,d){const g=yield d;return{verificationId:g.verificationId,confirm:I=>U2(C,g.confirm(I))}})).apply(this,arguments)}class Sc{constructor(d,g){this.resolver=g,this.auth=function sa(C){return C.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return U2(eo(this.auth),this.resolver.resolveSignIn(d))}}class Is{constructor(d){this._delegate=d,this.multiFactor=function co(C){const d=(0,te.m9)(C);return z2.has(d)||z2.set(d,q2._fromUser(d)),z2.get(d)}(d)}static getOrCreate(d){return Is.USER_MAP.has(d)||Is.USER_MAP.set(d,new Is(d)),Is.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var g=this;return(0,y.Z)(function*(){return U2(g.auth,Ln(g._delegate,d))})()}linkWithPhoneNumber(d,g){var I=this;return(0,y.Z)(function*(){return ec(I.auth,function Zo(C,d,g){return zs.apply(this,arguments)}(I._delegate,d,g))})()}linkWithPopup(d){var g=this;return(0,y.Z)(function*(){return U2(g.auth,function yi(C,d,g){return T1.apply(this,arguments)}(g._delegate,d,Es))})()}linkWithRedirect(d){var g=this;return(0,y.Z)(function*(){return yield za(Zt(g.auth)),function H1(C,d,g){return function Tn(C,d,g){return br.apply(this,arguments)}(C,d,g)}(g._delegate,d,Es)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var g=this;return(0,y.Z)(function*(){return U2(g.auth,b1(g._delegate,d))})()}reauthenticateWithPhoneNumber(d,g){return ec(this.auth,function Ba(C,d,g){return Xe.apply(this,arguments)}(this._delegate,d,g))}reauthenticateWithPopup(d){return U2(this.auth,function qr(C,d,g){return po.apply(this,arguments)}(this._delegate,d,Es))}reauthenticateWithRedirect(d){var g=this;return(0,y.Z)(function*(){return yield za(Zt(g.auth)),function un(C,d,g){return function _n(C,d,g){return jn.apply(this,arguments)}(C,d,g)}(g._delegate,d,Es)})()}sendEmailVerification(d){return function G(C,d){return ee.apply(this,arguments)}(this._delegate,d)}unlink(d){var g=this;return(0,y.Z)(function*(){return yield function Li(C,d){return f1.apply(this,arguments)}(g._delegate,d),g})()}updateEmail(d){return function $t(C,d){return Bt((0,te.m9)(C),d,null)}(this._delegate,d)}updatePassword(d){return function On(C,d){return Bt((0,te.m9)(C),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ho(C,d){return e2.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Mt(C,d){return Ct.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,g){return function oe(C,d,g){return de.apply(this,arguments)}(this._delegate,d,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Is.USER_MAP=new WeakMap;const oa=le;let La=(()=>{class C{constructor(g,I){if(this.app=g,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$}=g.options;oa($,"invalid-api-key",{appName:g.name}),oa($,"invalid-api-key",{appName:g.name});const ne="undefined"!=typeof window?Es:void 0;this._delegate=I.initialize({options:{persistence:m4($,g.name),popupRedirectResolver:ne}}),this._delegate._updateErrorMap(vt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Is.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,I){!function W1(C,d,g){const I=Zt(C);le(I._canInitEmulator,I,"emulator-config-failed"),le(/^https?:\/\//.test(d),I,"invalid-emulator-scheme");const $=!!(null==g?void 0:g.disableWarnings),ne=Lr(d),{host:Fe,port:gt}=function V1(C){const d=Lr(C),g=/(\/\/)?([^?#/]+)/.exec(C.substr(d.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(I);if($){const ne=$[1];return{host:ne,port:Pr(I.substr(ne.length+1))}}{const[ne,Fe]=I.split(":");return{host:ne,port:Pr(Fe)}}}(d);I.config.emulator={url:`${ne}//${Fe}${null===gt?"":`:${gt}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Fe,port:gt,protocol:ne.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function m1(){function C(){const d=document.createElement("p"),g=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,g,I)}applyActionCode(g){return function re(C,d){return Ee.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Dt(this._delegate,g)}confirmPasswordReset(g,I){return function P(C,d,g){return V.apply(this,arguments)}(this._delegate,g,I)}createUserWithEmailAndPassword(g,I){var $=this;return(0,y.Z)(function*(){return U2($._delegate,function sr(C,d,g){return Wr.apply(this,arguments)}($._delegate,g,I))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function $2(C,d){return Yi.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function ps(C,d){const g=mi.parseLink(d);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,y.Z)(function*(){oa(Kr(),g._delegate,"operation-not-supported-in-this-environment");const I=yield function ji(C,d){return g2.apply(this,arguments)}(g._delegate,Es);return I?U2(g._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Ic(C,d){Zt(C)._logFramework(d)}(this._delegate,g)}onAuthStateChanged(g,I,$){const{next:ne,error:Fe,complete:gt}=p4(g,I,$);return this._delegate.onAuthStateChanged(ne,Fe,gt)}onIdTokenChanged(g,I,$){const{next:ne,error:Fe,complete:gt}=p4(g,I,$);return this._delegate.onIdTokenChanged(ne,Fe,gt)}sendSignInLinkToEmail(g,I){return function as(C,d,g){return Mo.apply(this,arguments)}(this._delegate,g,I)}sendPasswordResetEmail(g,I){return function Fi(C,d,g){return U.apply(this,arguments)}(this._delegate,g,I||void 0)}setPersistence(g){var I=this;return(0,y.Z)(function*(){let $;switch(function Xa(C,d){ts(Object.values(x2).includes(d),C,"invalid-persistence-type"),(0,te.b$)()?ts(d!==x2.SESSION,C,"unsupported-persistence-type"):(0,te.UG)()?ts(d===x2.NONE,C,"unsupported-persistence-type"):Vo()?ts(d===x2.NONE||d===x2.LOCAL&&(0,te.hl)(),C,"unsupported-persistence-type"):ts(d===x2.NONE||Na(),C,"unsupported-persistence-type")}(I._delegate,g),g){case x2.SESSION:$=Pi;break;case x2.LOCAL:$=(yield Ue(ln)._isAvailable())?ln:cs;break;case x2.NONE:$=Jt;break;default:return ft("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence($)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return U2(this._delegate,function Gn(C){return qn.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return U2(this._delegate,En(this._delegate,g))}signInWithCustomToken(g){return U2(this._delegate,function Sr(C,d){return gn.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,I){return U2(this._delegate,function Ui(C,d,g){return En((0,te.m9)(C),o2.credential(d,g))}(this._delegate,g,I))}signInWithEmailLink(g,I){return U2(this._delegate,function Us(C,d,g){return c2.apply(this,arguments)}(this._delegate,g,I))}signInWithPhoneNumber(g,I){return ec(this._delegate,function hi(C,d,g){return xo.apply(this,arguments)}(this._delegate,g,I))}signInWithPopup(g){var I=this;return(0,y.Z)(function*(){return oa(Kr(),I._delegate,"operation-not-supported-in-this-environment"),U2(I._delegate,function Do(C,d,g){return _s.apply(this,arguments)}(I._delegate,g,Es))})()}signInWithRedirect(g){var I=this;return(0,y.Z)(function*(){return oa(Kr(),I._delegate,"operation-not-supported-in-this-environment"),yield za(I._delegate),function Ge(C,d,g){return function Qe(C,d,g){return St.apply(this,arguments)}(C,d,g)}(I._delegate,g,Es)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Bn(C,d){return ai.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=x2,C})();function p4(C,d,g){let I=C;"function"!=typeof C&&({next:I,error:d,complete:g}=C);const $=I;return{next:Fe=>$(Fe&&Is.getOrCreate(Fe)),error:d,complete:g}}function m4(C,d){const g=function E1(C,d){const g=yo();if(!g)return[];const I=Jn(xc,C,d);switch(g.getItem(I)){case x2.NONE:return[Jt];case x2.LOCAL:return[ln,Pi];case x2.SESSION:return[Pi];default:return[]}}(C,d);if("undefined"!=typeof self&&!g.includes(ln)&&g.push(ln),"undefined"!=typeof window)for(const I of[cs,Pi])g.includes(I)||g.push(I);return g.includes(Jt)||g.push(Jt),g}class Ri{constructor(){this.providerId="phone",this._delegate=new p2(eo(D.Z.auth()))}static credential(d,g){return p2.credential(d,g)}verifyPhoneNumber(d,g){return this._delegate.verifyPhoneNumber(d,g)}unwrap(){return this._delegate}}Ri.PHONE_SIGN_IN_METHOD=p2.PHONE_SIGN_IN_METHOD,Ri.PROVIDER_ID=p2.PROVIDER_ID;const Tc=le;class g4{constructor(d,g,I=D.Z.app()){var $;Tc(null===($=I.options)||void 0===$?void 0:$.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new s4(d,g,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function D2(C){C.INTERNAL.registerComponent(new ue.wA("auth-compat",d=>{const g=d.getProvider("app-compat").getImmediate(),I=d.getProvider("auth");return new La(g,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:o2,FacebookAuthProvider:qi,GithubAuthProvider:Ii,GoogleAuthProvider:w2,OAuthProvider:ii,SAMLAuthProvider:Dr,PhoneAuthProvider:Ri,PhoneMultiFactorGenerator:u4,RecaptchaVerifier:g4,TwitterAuthProvider:Ki,Auth:La,AuthCredential:Ar,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.2.16")}(D.Z)},8306:(jt,We,B)=>{B.d(We,{y:()=>_e});var y=B(930),D=B(727),te=B(8822),Le=B(4671);var ue=B(2416),ve=B(576),ze=B(2806);let _e=(()=>{class ht{constructor(zt){zt&&(this._subscribe=zt)}lift(zt){const tt=new ht;return tt.source=this,tt.operator=zt,tt}subscribe(zt,tt,dt){const Oe=function Nt(ht){return ht&&ht instanceof y.Lv||function je(ht){return ht&&(0,ve.m)(ht.next)&&(0,ve.m)(ht.error)&&(0,ve.m)(ht.complete)}(ht)&&(0,D.Nn)(ht)}(zt)?zt:new y.Hp(zt,tt,dt);return(0,ze.x)(()=>{const{operator:kt,source:ft}=this;Oe.add(kt?kt.call(Oe,ft):ft?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(zt){try{return this._subscribe(zt)}catch(tt){zt.error(tt)}}forEach(zt,tt){return new(tt=pe(tt))((dt,Oe)=>{const kt=new y.Hp({next:ft=>{try{zt(ft)}catch(nt){Oe(nt),kt.unsubscribe()}},error:Oe,complete:dt});this.subscribe(kt)})}_subscribe(zt){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(zt)}[te.L](){return this}pipe(...zt){return function Ae(ht){return 0===ht.length?Le.y:1===ht.length?ht[0]:function(zt){return ht.reduce((tt,dt)=>dt(tt),zt)}}(zt)(this)}toPromise(zt){return new(zt=pe(zt))((tt,dt)=>{let Oe;this.subscribe(kt=>Oe=kt,kt=>dt(kt),()=>tt(Oe))})}}return ht.create=vt=>new ht(vt),ht})();function pe(ht){var vt;return null!==(vt=null!=ht?ht:ue.v.Promise)&&void 0!==vt?vt:Promise}},7579:(jt,We,B)=>{B.d(We,{x:()=>ue});var y=B(8306),D=B(727);const Le=(0,B(3888).d)(ze=>function(){ze(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=B(8737),Ae=B(2806);let ue=(()=>{class ze extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pe){const je=new ve(this,this);return je.operator=pe,je}_throwIfClosed(){if(this.closed)throw new Le}next(pe){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const je of this.currentObservers)je.next(pe)}})}error(pe){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pe;const{observers:je}=this;for(;je.length;)je.shift().error(pe)}})}complete(){(0,Ae.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pe}=this;for(;pe.length;)pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var pe;return(null===(pe=this.observers)||void 0===pe?void 0:pe.length)>0}_trySubscribe(pe){return this._throwIfClosed(),super._trySubscribe(pe)}_subscribe(pe){return this._throwIfClosed(),this._checkFinalizedStatuses(pe),this._innerSubscribe(pe)}_innerSubscribe(pe){const{hasError:je,isStopped:Nt,observers:ht}=this;return je||Nt?D.Lc:(this.currentObservers=null,ht.push(pe),new D.w0(()=>{this.currentObservers=null,(0,De.P)(ht,pe)}))}_checkFinalizedStatuses(pe){const{hasError:je,thrownError:Nt,isStopped:ht}=this;je?pe.error(Nt):ht&&pe.complete()}asObservable(){const pe=new y.y;return pe.source=this,pe}}return ze.create=(_e,pe)=>new ve(_e,pe),ze})();class ve extends ue{constructor(_e,pe){super(),this.destination=_e,this.source=pe}next(_e){var pe,je;null===(je=null===(pe=this.destination)||void 0===pe?void 0:pe.next)||void 0===je||je.call(pe,_e)}error(_e){var pe,je;null===(je=null===(pe=this.destination)||void 0===pe?void 0:pe.error)||void 0===je||je.call(pe,_e)}complete(){var _e,pe;null===(pe=null===(_e=this.destination)||void 0===_e?void 0:_e.complete)||void 0===pe||pe.call(_e)}_subscribe(_e){var pe,je;return null!==(je=null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(_e))&&void 0!==je?je:D.Lc}}},930:(jt,We,B)=>{B.d(We,{Hp:()=>zt,Lv:()=>je});var y=B(576),D=B(727),te=B(2416),Le=B(7849),De=B(5032);const Ae=ze("C",void 0,void 0);function ze(ft,nt,qe){return{kind:ft,value:nt,error:qe}}var _e=B(3410),pe=B(2806);class je extends D.w0{constructor(nt){super(),this.isStopped=!1,nt?(this.destination=nt,(0,D.Nn)(nt)&&nt.add(this)):this.destination=kt}static create(nt,qe,et){return new zt(nt,qe,et)}next(nt){this.isStopped?Oe(function ve(ft){return ze("N",ft,void 0)}(nt),this):this._next(nt)}error(nt){this.isStopped?Oe(function ue(ft){return ze("E",void 0,ft)}(nt),this):(this.isStopped=!0,this._error(nt))}complete(){this.isStopped?Oe(Ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(nt){this.destination.next(nt)}_error(nt){try{this.destination.error(nt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Nt=Function.prototype.bind;function ht(ft,nt){return Nt.call(ft,nt)}class vt{constructor(nt){this.partialObserver=nt}next(nt){const{partialObserver:qe}=this;if(qe.next)try{qe.next(nt)}catch(et){tt(et)}}error(nt){const{partialObserver:qe}=this;if(qe.error)try{qe.error(nt)}catch(et){tt(et)}else tt(nt)}complete(){const{partialObserver:nt}=this;if(nt.complete)try{nt.complete()}catch(qe){tt(qe)}}}class zt extends je{constructor(nt,qe,et){let _t;if(super(),(0,y.m)(nt)||!nt)_t={next:null!=nt?nt:void 0,error:null!=qe?qe:void 0,complete:null!=et?et:void 0};else{let le;this&&te.v.useDeprecatedNextContext?(le=Object.create(nt),le.unsubscribe=()=>this.unsubscribe(),_t={next:nt.next&&ht(nt.next,le),error:nt.error&&ht(nt.error,le),complete:nt.complete&&ht(nt.complete,le)}):_t=nt}this.destination=new vt(_t)}}function tt(ft){te.v.useDeprecatedSynchronousErrorHandling?(0,pe.O)(ft):(0,Le.h)(ft)}function Oe(ft,nt){const{onStoppedNotification:qe}=te.v;qe&&_e.z.setTimeout(()=>qe(ft,nt))}const kt={closed:!0,next:De.Z,error:function dt(ft){throw ft},complete:De.Z}},727:(jt,We,B)=>{B.d(We,{Lc:()=>Ae,w0:()=>De,Nn:()=>ue});var y=B(576);const te=(0,B(3888).d)(ze=>function(pe){ze(this),this.message=pe?`${pe.length} errors occurred during unsubscription:\n${pe.map((je,Nt)=>`${Nt+1}) ${je.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pe});var Le=B(8737);class De{constructor(_e){this.initialTeardown=_e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _e;if(!this.closed){this.closed=!0;const{_parentage:pe}=this;if(pe)if(this._parentage=null,Array.isArray(pe))for(const ht of pe)ht.remove(this);else pe.remove(this);const{initialTeardown:je}=this;if((0,y.m)(je))try{je()}catch(ht){_e=ht instanceof te?ht.errors:[ht]}const{_finalizers:Nt}=this;if(Nt){this._finalizers=null;for(const ht of Nt)try{ve(ht)}catch(vt){_e=null!=_e?_e:[],vt instanceof te?_e=[..._e,...vt.errors]:_e.push(vt)}}if(_e)throw new te(_e)}}add(_e){var pe;if(_e&&_e!==this)if(this.closed)ve(_e);else{if(_e instanceof De){if(_e.closed||_e._hasParent(this))return;_e._addParent(this)}(this._finalizers=null!==(pe=this._finalizers)&&void 0!==pe?pe:[]).push(_e)}}_hasParent(_e){const{_parentage:pe}=this;return pe===_e||Array.isArray(pe)&&pe.includes(_e)}_addParent(_e){const{_parentage:pe}=this;this._parentage=Array.isArray(pe)?(pe.push(_e),pe):pe?[pe,_e]:_e}_removeParent(_e){const{_parentage:pe}=this;pe===_e?this._parentage=null:Array.isArray(pe)&&(0,Le.P)(pe,_e)}remove(_e){const{_finalizers:pe}=this;pe&&(0,Le.P)(pe,_e),_e instanceof De&&_e._removeParent(this)}}De.EMPTY=(()=>{const ze=new De;return ze.closed=!0,ze})();const Ae=De.EMPTY;function ue(ze){return ze instanceof De||ze&&"closed"in ze&&(0,y.m)(ze.remove)&&(0,y.m)(ze.add)&&(0,y.m)(ze.unsubscribe)}function ve(ze){(0,y.m)(ze)?ze():ze.unsubscribe()}},2416:(jt,We,B)=>{B.d(We,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(jt,We,B)=>{B.d(We,{z:()=>De});var y=B(8189),te=B(7669),Le=B(8996);function De(...Ae){return function D(){return(0,y.J)(1)}()((0,Le.D)(Ae,(0,te.yG)(Ae)))}},515:(jt,We,B)=>{B.d(We,{E:()=>D});const D=new(B(8306).y)(De=>De.complete())},8996:(jt,We,B)=>{B.d(We,{D:()=>nt});var y=B(8421),D=B(5363),te=B(9468),Ae=B(8306),ve=B(2202),ze=B(576),_e=B(9672);function je(qe,et){if(!qe)throw new Error("Iterable cannot be null");return new Ae.y(_t=>{(0,_e.f)(_t,et,()=>{const le=qe[Symbol.asyncIterator]();(0,_e.f)(_t,et,()=>{le.next().then(ot=>{ot.done?_t.complete():_t.next(ot.value)})},0,!0)})})}var Nt=B(3670),ht=B(8239),vt=B(1144),zt=B(6495),tt=B(2206),dt=B(4532),Oe=B(3260);function nt(qe,et){return et?function ft(qe,et){if(null!=qe){if((0,Nt.c)(qe))return function Le(qe,et){return(0,y.Xf)(qe).pipe((0,te.R)(et),(0,D.Q)(et))}(qe,et);if((0,vt.z)(qe))return function ue(qe,et){return new Ae.y(_t=>{let le=0;return et.schedule(function(){le===qe.length?_t.complete():(_t.next(qe[le++]),_t.closed||this.schedule())})})}(qe,et);if((0,ht.t)(qe))return function De(qe,et){return(0,y.Xf)(qe).pipe((0,te.R)(et),(0,D.Q)(et))}(qe,et);if((0,tt.D)(qe))return je(qe,et);if((0,zt.T)(qe))return function pe(qe,et){return new Ae.y(_t=>{let le;return(0,_e.f)(_t,et,()=>{le=qe[ve.h](),(0,_e.f)(_t,et,()=>{let ot,me;try{({value:ot,done:me}=le.next())}catch(Pe){return void _t.error(Pe)}me?_t.complete():_t.next(ot)},0,!0)}),()=>(0,ze.m)(null==le?void 0:le.return)&&le.return()})}(qe,et);if((0,Oe.L)(qe))return function kt(qe,et){return je((0,Oe.Q)(qe),et)}(qe,et)}throw(0,dt.z)(qe)}(qe,et):(0,y.Xf)(qe)}},8421:(jt,We,B)=>{B.d(We,{Xf:()=>Nt});var y=B(655),D=B(1144),te=B(8239),Le=B(8306),De=B(3670),Ae=B(2206),ue=B(4532),ve=B(6495),ze=B(3260),_e=B(576),pe=B(7849),je=B(8822);function Nt(ft){if(ft instanceof Le.y)return ft;if(null!=ft){if((0,De.c)(ft))return function ht(ft){return new Le.y(nt=>{const qe=ft[je.L]();if((0,_e.m)(qe.subscribe))return qe.subscribe(nt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ft);if((0,D.z)(ft))return function vt(ft){return new Le.y(nt=>{for(let qe=0;qe<ft.length&&!nt.closed;qe++)nt.next(ft[qe]);nt.complete()})}(ft);if((0,te.t)(ft))return function zt(ft){return new Le.y(nt=>{ft.then(qe=>{nt.closed||(nt.next(qe),nt.complete())},qe=>nt.error(qe)).then(null,pe.h)})}(ft);if((0,Ae.D)(ft))return dt(ft);if((0,ve.T)(ft))return function tt(ft){return new Le.y(nt=>{for(const qe of ft)if(nt.next(qe),nt.closed)return;nt.complete()})}(ft);if((0,ze.L)(ft))return function Oe(ft){return dt((0,ze.Q)(ft))}(ft)}throw(0,ue.z)(ft)}function dt(ft){return new Le.y(nt=>{(function kt(ft,nt){var qe,et,_t,le;return(0,y.mG)(this,void 0,void 0,function*(){try{for(qe=(0,y.KL)(ft);!(et=yield qe.next()).done;)if(nt.next(et.value),nt.closed)return}catch(ot){_t={error:ot}}finally{try{et&&!et.done&&(le=qe.return)&&(yield le.call(qe))}finally{if(_t)throw _t.error}}nt.complete()})})(ft,nt).catch(qe=>nt.error(qe))})}},6451:(jt,We,B)=>{B.d(We,{T:()=>Ae});var y=B(8189),D=B(8421),te=B(515),Le=B(7669),De=B(8996);function Ae(...ue){const ve=(0,Le.yG)(ue),ze=(0,Le._6)(ue,1/0),_e=ue;return _e.length?1===_e.length?(0,D.Xf)(_e[0]):(0,y.J)(ze)((0,De.D)(_e,ve)):te.E}},9646:(jt,We,B)=>{B.d(We,{of:()=>te});var y=B(7669),D=B(8996);function te(...Le){const De=(0,y.yG)(Le);return(0,D.D)(Le,De)}},5403:(jt,We,B)=>{B.d(We,{x:()=>D});var y=B(930);function D(Le,De,Ae,ue,ve){return new te(Le,De,Ae,ue,ve)}class te extends y.Lv{constructor(De,Ae,ue,ve,ze,_e){super(De),this.onFinalize=ze,this.shouldUnsubscribe=_e,this._next=Ae?function(pe){try{Ae(pe)}catch(je){De.error(je)}}:super._next,this._error=ve?function(pe){try{ve(pe)}catch(je){De.error(je)}finally{this.unsubscribe()}}:super._error,this._complete=ue?function(){try{ue()}catch(pe){De.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ae}=this;super.unsubscribe(),!Ae&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},6590:(jt,We,B)=>{B.d(We,{d:()=>te});var y=B(4482),D=B(5403);function te(Le){return(0,y.e)((De,Ae)=>{let ue=!1;De.subscribe((0,D.x)(Ae,ve=>{ue=!0,Ae.next(ve)},()=>{ue||Ae.next(Le),Ae.complete()}))})}},1884:(jt,We,B)=>{B.d(We,{x:()=>Le});var y=B(4671),D=B(4482),te=B(5403);function Le(Ae,ue=y.y){return Ae=null!=Ae?Ae:De,(0,D.e)((ve,ze)=>{let _e,pe=!0;ve.subscribe((0,te.x)(ze,je=>{const Nt=ue(je);(pe||!Ae(_e,Nt))&&(pe=!1,_e=Nt,ze.next(je))}))})}function De(Ae,ue){return Ae===ue}},9300:(jt,We,B)=>{B.d(We,{h:()=>te});var y=B(4482),D=B(5403);function te(Le,De){return(0,y.e)((Ae,ue)=>{let ve=0;Ae.subscribe((0,D.x)(ue,ze=>Le.call(De,ze,ve++)&&ue.next(ze)))})}},590:(jt,We,B)=>{B.d(We,{P:()=>ue});var y=B(6805),D=B(9300),te=B(5698),Le=B(6590),De=B(8068),Ae=B(4671);function ue(ve,ze){const _e=arguments.length>=2;return pe=>pe.pipe(ve?(0,D.h)((je,Nt)=>ve(je,Nt,pe)):Ae.y,(0,te.q)(1),_e?(0,Le.d)(ze):(0,De.T)(()=>new y.K))}},4004:(jt,We,B)=>{B.d(We,{U:()=>te});var y=B(4482),D=B(5403);function te(Le,De){return(0,y.e)((Ae,ue)=>{let ve=0;Ae.subscribe((0,D.x)(ue,ze=>{ue.next(Le.call(De,ze,ve++))}))})}},8189:(jt,We,B)=>{B.d(We,{J:()=>te});var y=B(5577),D=B(4671);function te(Le=1/0){return(0,y.z)(D.y,Le)}},5577:(jt,We,B)=>{B.d(We,{z:()=>ve});var y=B(4004),D=B(8421),te=B(4482),Le=B(9672),De=B(5403),ue=B(576);function ve(ze,_e,pe=1/0){return(0,ue.m)(_e)?ve((je,Nt)=>(0,y.U)((ht,vt)=>_e(je,ht,Nt,vt))((0,D.Xf)(ze(je,Nt))),pe):("number"==typeof _e&&(pe=_e),(0,te.e)((je,Nt)=>function Ae(ze,_e,pe,je,Nt,ht,vt,zt){const tt=[];let dt=0,Oe=0,kt=!1;const ft=()=>{kt&&!tt.length&&!dt&&_e.complete()},nt=et=>dt<je?qe(et):tt.push(et),qe=et=>{ht&&_e.next(et),dt++;let _t=!1;(0,D.Xf)(pe(et,Oe++)).subscribe((0,De.x)(_e,le=>{null==Nt||Nt(le),ht?nt(le):_e.next(le)},()=>{_t=!0},void 0,()=>{if(_t)try{for(dt--;tt.length&&dt<je;){const le=tt.shift();vt?(0,Le.f)(_e,vt,()=>qe(le)):qe(le)}ft()}catch(le){_e.error(le)}}))};return ze.subscribe((0,De.x)(_e,nt,()=>{kt=!0,ft()})),()=>{null==zt||zt()}}(je,Nt,ze,pe)))}},5363:(jt,We,B)=>{B.d(We,{Q:()=>Le});var y=B(9672),D=B(4482),te=B(5403);function Le(De,Ae=0){return(0,D.e)((ue,ve)=>{ue.subscribe((0,te.x)(ve,ze=>(0,y.f)(ve,De,()=>ve.next(ze),Ae),()=>(0,y.f)(ve,De,()=>ve.complete(),Ae),ze=>(0,y.f)(ve,De,()=>ve.error(ze),Ae)))})}},5026:(jt,We,B)=>{B.d(We,{R:()=>Le});var y=B(4482),D=B(5403);function te(De,Ae,ue,ve,ze){return(_e,pe)=>{let je=ue,Nt=Ae,ht=0;_e.subscribe((0,D.x)(pe,vt=>{const zt=ht++;Nt=je?De(Nt,vt,zt):(je=!0,vt),ve&&pe.next(Nt)},ze&&(()=>{je&&pe.next(Nt),pe.complete()})))}}function Le(De,Ae){return(0,y.e)(te(De,Ae,arguments.length>=2,!0))}},3099:(jt,We,B)=>{B.d(We,{B:()=>Ae});var y=B(8996),D=B(5698),te=B(7579),Le=B(930),De=B(4482);function Ae(ve={}){const{connector:ze=(()=>new te.x),resetOnError:_e=!0,resetOnComplete:pe=!0,resetOnRefCountZero:je=!0}=ve;return Nt=>{let ht=null,vt=null,zt=null,tt=0,dt=!1,Oe=!1;const kt=()=>{null==vt||vt.unsubscribe(),vt=null},ft=()=>{kt(),ht=zt=null,dt=Oe=!1},nt=()=>{const qe=ht;ft(),null==qe||qe.unsubscribe()};return(0,De.e)((qe,et)=>{tt++,!Oe&&!dt&&kt();const _t=zt=null!=zt?zt:ze();et.add(()=>{tt--,0===tt&&!Oe&&!dt&&(vt=ue(nt,je))}),_t.subscribe(et),ht||(ht=new Le.Hp({next:le=>_t.next(le),error:le=>{Oe=!0,kt(),vt=ue(ft,_e,le),_t.error(le)},complete:()=>{dt=!0,kt(),vt=ue(ft,pe),_t.complete()}}),(0,y.D)(qe).subscribe(ht))})(Nt)}}function ue(ve,ze,..._e){return!0===ze?(ve(),null):!1===ze?null:ze(..._e).pipe((0,D.q)(1)).subscribe(()=>ve())}},8675:(jt,We,B)=>{B.d(We,{O:()=>Le});var y=B(7272),D=B(7669),te=B(4482);function Le(...De){const Ae=(0,D.yG)(De);return(0,te.e)((ue,ve)=>{(Ae?(0,y.z)(De,ue,Ae):(0,y.z)(De,ue)).subscribe(ve)})}},9468:(jt,We,B)=>{B.d(We,{R:()=>D});var y=B(4482);function D(te,Le=0){return(0,y.e)((De,Ae)=>{Ae.add(te.schedule(()=>De.subscribe(Ae),Le))})}},3900:(jt,We,B)=>{B.d(We,{w:()=>Le});var y=B(8421),D=B(4482),te=B(5403);function Le(De,Ae){return(0,D.e)((ue,ve)=>{let ze=null,_e=0,pe=!1;const je=()=>pe&&!ze&&ve.complete();ue.subscribe((0,te.x)(ve,Nt=>{null==ze||ze.unsubscribe();let ht=0;const vt=_e++;(0,y.Xf)(De(Nt,vt)).subscribe(ze=(0,te.x)(ve,zt=>ve.next(Ae?Ae(Nt,zt,vt,ht++):zt),()=>{ze=null,je()}))},()=>{pe=!0,je()}))})}},5698:(jt,We,B)=>{B.d(We,{q:()=>Le});var y=B(515),D=B(4482),te=B(5403);function Le(De){return De<=0?()=>y.E:(0,D.e)((Ae,ue)=>{let ve=0;Ae.subscribe((0,te.x)(ue,ze=>{++ve<=De&&(ue.next(ze),De<=ve&&ue.complete())}))})}},8505:(jt,We,B)=>{B.d(We,{b:()=>De});var y=B(576),D=B(4482),te=B(5403),Le=B(4671);function De(Ae,ue,ve){const ze=(0,y.m)(Ae)||ue||ve?{next:Ae,error:ue,complete:ve}:Ae;return ze?(0,D.e)((_e,pe)=>{var je;null===(je=ze.subscribe)||void 0===je||je.call(ze);let Nt=!0;_e.subscribe((0,te.x)(pe,ht=>{var vt;null===(vt=ze.next)||void 0===vt||vt.call(ze,ht),pe.next(ht)},()=>{var ht;Nt=!1,null===(ht=ze.complete)||void 0===ht||ht.call(ze),pe.complete()},ht=>{var vt;Nt=!1,null===(vt=ze.error)||void 0===vt||vt.call(ze,ht),pe.error(ht)},()=>{var ht,vt;Nt&&(null===(ht=ze.unsubscribe)||void 0===ht||ht.call(ze)),null===(vt=ze.finalize)||void 0===vt||vt.call(ze)}))}):Le.y}},8068:(jt,We,B)=>{B.d(We,{T:()=>Le});var y=B(6805),D=B(4482),te=B(5403);function Le(Ae=De){return(0,D.e)((ue,ve)=>{let ze=!1;ue.subscribe((0,te.x)(ve,_e=>{ze=!0,ve.next(_e)},()=>ze?ve.complete():ve.error(Ae())))})}function De(){return new y.K}},4408:(jt,We,B)=>{B.d(We,{o:()=>De});var y=B(727);class D extends y.w0{constructor(ue,ve){super()}schedule(ue,ve=0){return this}}const te={setInterval(Ae,ue,...ve){const{delegate:ze}=te;return(null==ze?void 0:ze.setInterval)?ze.setInterval(Ae,ue,...ve):setInterval(Ae,ue,...ve)},clearInterval(Ae){const{delegate:ue}=te;return((null==ue?void 0:ue.clearInterval)||clearInterval)(Ae)},delegate:void 0};var Le=B(8737);class De extends D{constructor(ue,ve){super(ue,ve),this.scheduler=ue,this.work=ve,this.pending=!1}schedule(ue,ve=0){if(this.closed)return this;this.state=ue;const ze=this.id,_e=this.scheduler;return null!=ze&&(this.id=this.recycleAsyncId(_e,ze,ve)),this.pending=!0,this.delay=ve,this.id=this.id||this.requestAsyncId(_e,this.id,ve),this}requestAsyncId(ue,ve,ze=0){return te.setInterval(ue.flush.bind(ue,this),ze)}recycleAsyncId(ue,ve,ze=0){if(null!=ze&&this.delay===ze&&!1===this.pending)return ve;te.clearInterval(ve)}execute(ue,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ze=this._execute(ue,ve);if(ze)return ze;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,ve){let _e,ze=!1;try{this.work(ue)}catch(pe){ze=!0,_e=pe||new Error("Scheduled action threw falsy error")}if(ze)return this.unsubscribe(),_e}unsubscribe(){if(!this.closed){const{id:ue,scheduler:ve}=this,{actions:ze}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Le.P)(ze,this),null!=ue&&(this.id=this.recycleAsyncId(ve,ue,null)),this.delay=null,super.unsubscribe()}}}},7565:(jt,We,B)=>{B.d(We,{v:()=>te});var y=B(6063);class D{constructor(De,Ae=D.now){this.schedulerActionCtor=De,this.now=Ae}schedule(De,Ae=0,ue){return new this.schedulerActionCtor(this,De).schedule(ue,Ae)}}D.now=y.l.now;class te extends D{constructor(De,Ae=D.now){super(De,Ae),this.actions=[],this._active=!1,this._scheduled=void 0}flush(De){const{actions:Ae}=this;if(this._active)return void Ae.push(De);let ue;this._active=!0;do{if(ue=De.execute(De.state,De.delay))break}while(De=Ae.shift());if(this._active=!1,ue){for(;De=Ae.shift();)De.unsubscribe();throw ue}}}},4986:(jt,We,B)=>{B.d(We,{z:()=>te});var y=B(4408);const te=new(B(7565).v)(y.o)},6063:(jt,We,B)=>{B.d(We,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(jt,We,B)=>{B.d(We,{z:()=>y});const y={setTimeout(D,te,...Le){const{delegate:De}=y;return(null==De?void 0:De.setTimeout)?De.setTimeout(D,te,...Le):setTimeout(D,te,...Le)},clearTimeout(D){const{delegate:te}=y;return((null==te?void 0:te.clearTimeout)||clearTimeout)(D)},delegate:void 0}},2202:(jt,We,B)=>{B.d(We,{h:()=>D});const D=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(jt,We,B)=>{B.d(We,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(jt,We,B)=>{B.d(We,{K:()=>D});const D=(0,B(3888).d)(te=>function(){te(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(jt,We,B)=>{B.d(We,{_6:()=>Ae,jO:()=>Le,yG:()=>De});var y=B(576);function te(ue){return ue[ue.length-1]}function Le(ue){return(0,y.m)(te(ue))?ue.pop():void 0}function De(ue){return function D(ue){return ue&&(0,y.m)(ue.schedule)}(te(ue))?ue.pop():void 0}function Ae(ue,ve){return"number"==typeof te(ue)?ue.pop():ve}},4742:(jt,We,B)=>{B.d(We,{D:()=>De});const{isArray:y}=Array,{getPrototypeOf:D,prototype:te,keys:Le}=Object;function De(ue){if(1===ue.length){const ve=ue[0];if(y(ve))return{args:ve,keys:null};if(function Ae(ue){return ue&&"object"==typeof ue&&D(ue)===te}(ve)){const ze=Le(ve);return{args:ze.map(_e=>ve[_e]),keys:ze}}}return{args:ue,keys:null}}},8737:(jt,We,B)=>{function y(D,te){if(D){const Le=D.indexOf(te);0<=Le&&D.splice(Le,1)}}B.d(We,{P:()=>y})},3888:(jt,We,B)=>{function y(D){const Le=D(De=>{Error.call(De),De.stack=(new Error).stack});return Le.prototype=Object.create(Error.prototype),Le.prototype.constructor=Le,Le}B.d(We,{d:()=>y})},1810:(jt,We,B)=>{function y(D,te){return D.reduce((Le,De,Ae)=>(Le[De]=te[Ae],Le),{})}B.d(We,{n:()=>y})},2806:(jt,We,B)=>{B.d(We,{O:()=>Le,x:()=>te});var y=B(2416);let D=null;function te(De){if(y.v.useDeprecatedSynchronousErrorHandling){const Ae=!D;if(Ae&&(D={errorThrown:!1,error:null}),De(),Ae){const{errorThrown:ue,error:ve}=D;if(D=null,ue)throw ve}}else De()}function Le(De){y.v.useDeprecatedSynchronousErrorHandling&&D&&(D.errorThrown=!0,D.error=De)}},9672:(jt,We,B)=>{function y(D,te,Le,De=0,Ae=!1){const ue=te.schedule(function(){Le(),Ae?D.add(this.schedule(null,De)):this.unsubscribe()},De);if(D.add(ue),!Ae)return ue}B.d(We,{f:()=>y})},4671:(jt,We,B)=>{function y(D){return D}B.d(We,{y:()=>y})},1144:(jt,We,B)=>{B.d(We,{z:()=>y});const y=D=>D&&"number"==typeof D.length&&"function"!=typeof D},2206:(jt,We,B)=>{B.d(We,{D:()=>D});var y=B(576);function D(te){return Symbol.asyncIterator&&(0,y.m)(null==te?void 0:te[Symbol.asyncIterator])}},576:(jt,We,B)=>{function y(D){return"function"==typeof D}B.d(We,{m:()=>y})},3670:(jt,We,B)=>{B.d(We,{c:()=>te});var y=B(8822),D=B(576);function te(Le){return(0,D.m)(Le[y.L])}},6495:(jt,We,B)=>{B.d(We,{T:()=>te});var y=B(2202),D=B(576);function te(Le){return(0,D.m)(null==Le?void 0:Le[y.h])}},8239:(jt,We,B)=>{B.d(We,{t:()=>D});var y=B(576);function D(te){return(0,y.m)(null==te?void 0:te.then)}},3260:(jt,We,B)=>{B.d(We,{L:()=>Le,Q:()=>te});var y=B(655),D=B(576);function te(De){return(0,y.FC)(this,arguments,function*(){const ue=De.getReader();try{for(;;){const{value:ve,done:ze}=yield(0,y.qq)(ue.read());if(ze)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(ve)}}finally{ue.releaseLock()}})}function Le(De){return(0,D.m)(null==De?void 0:De.getReader)}},4482:(jt,We,B)=>{B.d(We,{A:()=>D,e:()=>te});var y=B(576);function D(Le){return(0,y.m)(null==Le?void 0:Le.lift)}function te(Le){return De=>{if(D(De))return De.lift(function(Ae){try{return Le(Ae,this)}catch(ue){this.error(ue)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(jt,We,B)=>{B.d(We,{Z:()=>Le});var y=B(4004);const{isArray:D}=Array;function Le(De){return(0,y.U)(Ae=>function te(De,Ae){return D(Ae)?De(...Ae):De(Ae)}(De,Ae))}},5032:(jt,We,B)=>{function y(){}B.d(We,{Z:()=>y})},7849:(jt,We,B)=>{B.d(We,{h:()=>te});var y=B(2416),D=B(3410);function te(Le){D.z.setTimeout(()=>{const{onUnhandledError:De}=y.v;if(!De)throw Le;De(Le)})}},4532:(jt,We,B)=>{function y(D){return new TypeError(`You provided ${null!==D&&"object"==typeof D?"an invalid object":`'${D}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(We,{z:()=>y})},655:(jt,We,B)=>{function Le(me,Pe){var Ue={};for(var Ze in me)Object.prototype.hasOwnProperty.call(me,Ze)&&Pe.indexOf(Ze)<0&&(Ue[Ze]=me[Ze]);if(null!=me&&"function"==typeof Object.getOwnPropertySymbols){var Ke=0;for(Ze=Object.getOwnPropertySymbols(me);Ke<Ze.length;Ke++)Pe.indexOf(Ze[Ke])<0&&Object.prototype.propertyIsEnumerable.call(me,Ze[Ke])&&(Ue[Ze[Ke]]=me[Ze[Ke]])}return Ue}function ve(me,Pe,Ue,Ze){return new(Ue||(Ue=Promise))(function(Et,Vt){function Yt(sn){try{it(Ze.next(sn))}catch(hn){Vt(hn)}}function Qt(sn){try{it(Ze.throw(sn))}catch(hn){Vt(hn)}}function it(sn){sn.done?Et(sn.value):function Ke(Et){return Et instanceof Ue?Et:new Ue(function(Vt){Vt(Et)})}(sn.value).then(Yt,Qt)}it((Ze=Ze.apply(me,Pe||[])).next())})}function tt(me){return this instanceof tt?(this.v=me,this):new tt(me)}function dt(me,Pe,Ue){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,Ze=Ue.apply(me,Pe||[]),Et=[];return Ke={},Vt("next"),Vt("throw"),Vt("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke;function Vt(fn){Ze[fn]&&(Ke[fn]=function(an){return new Promise(function(Rn,vn){Et.push([fn,an,Rn,vn])>1||Yt(fn,an)})})}function Yt(fn,an){try{!function Qt(fn){fn.value instanceof tt?Promise.resolve(fn.value.v).then(it,sn):hn(Et[0][2],fn)}(Ze[fn](an))}catch(Rn){hn(Et[0][3],Rn)}}function it(fn){Yt("next",fn)}function sn(fn){Yt("throw",fn)}function hn(fn,an){fn(an),Et.shift(),Et.length&&Yt(Et[0][0],Et[0][1])}}function kt(me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,Pe=me[Symbol.asyncIterator];return Pe?Pe.call(me):(me=function je(me){var Pe="function"==typeof Symbol&&Symbol.iterator,Ue=Pe&&me[Pe],Ze=0;if(Ue)return Ue.call(me);if(me&&"number"==typeof me.length)return{next:function(){return me&&Ze>=me.length&&(me=void 0),{value:me&&me[Ze++],done:!me}}};throw new TypeError(Pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(me),Ue={},Ze("next"),Ze("throw"),Ze("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue);function Ze(Et){Ue[Et]=me[Et]&&function(Vt){return new Promise(function(Yt,Qt){!function Ke(Et,Vt,Yt,Qt){Promise.resolve(Qt).then(function(it){Et({value:it,done:Yt})},Vt)}(Yt,Qt,(Vt=me[Et](Vt)).done,Vt.value)})}}}B.d(We,{FC:()=>dt,KL:()=>kt,_T:()=>Le,mG:()=>ve,qq:()=>tt})},9808:(jt,We,B)=>{B.d(We,{Do:()=>ft,EM:()=>qn,H9:()=>ri,HT:()=>De,JF:()=>f1,K0:()=>ue,Mx:()=>Or,O5:()=>R1,PM:()=>si,S$:()=>tt,V_:()=>_e,Ye:()=>nt,b0:()=>kt,bD:()=>K1,ez:()=>os,lw:()=>ve,mr:()=>Oe,q:()=>te,sg:()=>M1,w_:()=>Ae});var y=B(5e3);let D=null;function te(){return D}function De(k){D||(D=k)}class Ae{}const ue=new y.OlP("DocumentToken");let ve=(()=>{class k{historyGo(R){throw new Error("Not implemented")}}return k.\u0275fac=function(R){return new(R||k)},k.\u0275prov=y.Yz7({token:k,factory:function(){return function ze(){return(0,y.LFG)(pe)}()},providedIn:"platform"}),k})();const _e=new y.OlP("Location Initialized");let pe=(()=>{class k extends ve{constructor(R){super(),this._doc=R,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(R){const K=te().getGlobalEventTarget(this._doc,"window");return K.addEventListener("popstate",R,!1),()=>K.removeEventListener("popstate",R)}onHashChange(R){const K=te().getGlobalEventTarget(this._doc,"window");return K.addEventListener("hashchange",R,!1),()=>K.removeEventListener("hashchange",R)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(R){this.location.pathname=R}pushState(R,K,ye){je()?this._history.pushState(R,K,ye):this.location.hash=ye}replaceState(R,K,ye){je()?this._history.replaceState(R,K,ye):this.location.hash=ye}forward(){this._history.forward()}back(){this._history.back()}historyGo(R=0){this._history.go(R)}getState(){return this._history.state}}return k.\u0275fac=function(R){return new(R||k)(y.LFG(ue))},k.\u0275prov=y.Yz7({token:k,factory:function(){return function Nt(){return new pe((0,y.LFG)(ue))}()},providedIn:"platform"}),k})();function je(){return!!window.history.pushState}function ht(k,Y){if(0==k.length)return Y;if(0==Y.length)return k;let R=0;return k.endsWith("/")&&R++,Y.startsWith("/")&&R++,2==R?k+Y.substring(1):1==R?k+Y:k+"/"+Y}function vt(k){const Y=k.match(/#|\?|$/),R=Y&&Y.index||k.length;return k.slice(0,R-("/"===k[R-1]?1:0))+k.slice(R)}function zt(k){return k&&"?"!==k[0]?"?"+k:k}let tt=(()=>{class k{historyGo(R){throw new Error("Not implemented")}}return k.\u0275fac=function(R){return new(R||k)},k.\u0275prov=y.Yz7({token:k,factory:function(){return function dt(k){const Y=(0,y.LFG)(ue).location;return new kt((0,y.LFG)(ve),Y&&Y.origin||"")}()},providedIn:"root"}),k})();const Oe=new y.OlP("appBaseHref");let kt=(()=>{class k extends tt{constructor(R,K){if(super(),this._platformLocation=R,this._removeListenerFns=[],null==K&&(K=this._platformLocation.getBaseHrefFromDOM()),null==K)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=K}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}prepareExternalUrl(R){return ht(this._baseHref,R)}path(R=!1){const K=this._platformLocation.pathname+zt(this._platformLocation.search),ye=this._platformLocation.hash;return ye&&R?`${K}${ye}`:K}pushState(R,K,ye,st){const bt=this.prepareExternalUrl(ye+zt(st));this._platformLocation.pushState(R,K,bt)}replaceState(R,K,ye,st){const bt=this.prepareExternalUrl(ye+zt(st));this._platformLocation.replaceState(R,K,bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(R=0){var K,ye;null===(ye=(K=this._platformLocation).historyGo)||void 0===ye||ye.call(K,R)}}return k.\u0275fac=function(R){return new(R||k)(y.LFG(ve),y.LFG(Oe,8))},k.\u0275prov=y.Yz7({token:k,factory:k.\u0275fac}),k})(),ft=(()=>{class k extends tt{constructor(R,K){super(),this._platformLocation=R,this._baseHref="",this._removeListenerFns=[],null!=K&&(this._baseHref=K)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(R){this._removeListenerFns.push(this._platformLocation.onPopState(R),this._platformLocation.onHashChange(R))}getBaseHref(){return this._baseHref}path(R=!1){let K=this._platformLocation.hash;return null==K&&(K="#"),K.length>0?K.substring(1):K}prepareExternalUrl(R){const K=ht(this._baseHref,R);return K.length>0?"#"+K:K}pushState(R,K,ye,st){let bt=this.prepareExternalUrl(ye+zt(st));0==bt.length&&(bt=this._platformLocation.pathname),this._platformLocation.pushState(R,K,bt)}replaceState(R,K,ye,st){let bt=this.prepareExternalUrl(ye+zt(st));0==bt.length&&(bt=this._platformLocation.pathname),this._platformLocation.replaceState(R,K,bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(R=0){var K,ye;null===(ye=(K=this._platformLocation).historyGo)||void 0===ye||ye.call(K,R)}}return k.\u0275fac=function(R){return new(R||k)(y.LFG(ve),y.LFG(Oe,8))},k.\u0275prov=y.Yz7({token:k,factory:k.\u0275fac}),k})(),nt=(()=>{class k{constructor(R,K){this._subject=new y.vpe,this._urlChangeListeners=[],this._platformStrategy=R;const ye=this._platformStrategy.getBaseHref();this._platformLocation=K,this._baseHref=vt(_t(ye)),this._platformStrategy.onPopState(st=>{this._subject.emit({url:this.path(!0),pop:!0,state:st.state,type:st.type})})}path(R=!1){return this.normalize(this._platformStrategy.path(R))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(R,K=""){return this.path()==this.normalize(R+zt(K))}normalize(R){return k.stripTrailingSlash(function et(k,Y){return k&&Y.startsWith(k)?Y.substring(k.length):Y}(this._baseHref,_t(R)))}prepareExternalUrl(R){return R&&"/"!==R[0]&&(R="/"+R),this._platformStrategy.prepareExternalUrl(R)}go(R,K="",ye=null){this._platformStrategy.pushState(ye,"",R,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+zt(K)),ye)}replaceState(R,K="",ye=null){this._platformStrategy.replaceState(ye,"",R,K),this._notifyUrlChangeListeners(this.prepareExternalUrl(R+zt(K)),ye)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(R=0){var K,ye;null===(ye=(K=this._platformStrategy).historyGo)||void 0===ye||ye.call(K,R)}onUrlChange(R){this._urlChangeListeners.push(R),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(K=>{this._notifyUrlChangeListeners(K.url,K.state)}))}_notifyUrlChangeListeners(R="",K){this._urlChangeListeners.forEach(ye=>ye(R,K))}subscribe(R,K,ye){return this._subject.subscribe({next:R,error:K,complete:ye})}}return k.normalizeQueryParams=zt,k.joinWithSlash=ht,k.stripTrailingSlash=vt,k.\u0275fac=function(R){return new(R||k)(y.LFG(tt),y.LFG(ve))},k.\u0275prov=y.Yz7({token:k,factory:function(){return function qe(){return new nt((0,y.LFG)(tt),(0,y.LFG)(ve))}()},providedIn:"root"}),k})();function _t(k){return k.replace(/\/index.html$/,"")}const le={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var ot=(()=>((ot=ot||{})[ot.Decimal=0]="Decimal",ot[ot.Percent=1]="Percent",ot[ot.Currency=2]="Currency",ot[ot.Scientific=3]="Scientific",ot))(),Ke=(()=>((Ke=Ke||{})[Ke.Decimal=0]="Decimal",Ke[Ke.Group=1]="Group",Ke[Ke.List=2]="List",Ke[Ke.PercentSign=3]="PercentSign",Ke[Ke.PlusSign=4]="PlusSign",Ke[Ke.MinusSign=5]="MinusSign",Ke[Ke.Exponential=6]="Exponential",Ke[Ke.SuperscriptingExponent=7]="SuperscriptingExponent",Ke[Ke.PerMille=8]="PerMille",Ke[Ke.Infinity=9]="Infinity",Ke[Ke.NaN=10]="NaN",Ke[Ke.TimeSeparator=11]="TimeSeparator",Ke[Ke.CurrencyDecimal=12]="CurrencyDecimal",Ke[Ke.CurrencyGroup=13]="CurrencyGroup",Ke))();function Mn(k,Y){const R=(0,y.cg1)(k),K=R[y.wAp.NumberSymbols][Y];if(void 0===K){if(Y===Ke.CurrencyDecimal)return R[y.wAp.NumberSymbols][Ke.Decimal];if(Y===Ke.CurrencyGroup)return R[y.wAp.NumberSymbols][Ke.Group]}return K}const yt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Yn(k,Y,R,K,ye){const bt=function Fn(k,Y="-"){const R={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},K=k.split(";"),ye=K[0],st=K[1],bt=-1!==ye.indexOf(".")?ye.split("."):[ye.substring(0,ye.lastIndexOf("0")+1),ye.substring(ye.lastIndexOf("0")+1)],Kt=bt[0],En=bt[1]||"";R.posPre=Kt.substr(0,Kt.indexOf("#"));for(let Ln=0;Ln<En.length;Ln++){const $n=En.charAt(Ln);"0"===$n?R.minFrac=R.maxFrac=Ln+1:"#"===$n?R.maxFrac=Ln+1:R.posSuf+=$n}const u1=Kt.split(",");if(R.gSize=u1[1]?u1[1].length:0,R.lgSize=u1[2]||u1[1]?(u1[2]||u1[1]).length:0,st){const Ln=ye.length-R.posPre.length-R.posSuf.length,$n=st.indexOf("#");R.negPre=st.substr(0,$n).replace(/'/g,""),R.negSuf=st.substr($n+Ln).replace(/'/g,"")}else R.negPre=Y+R.posPre,R.negSuf=R.posSuf;return R}(function I1(k,Y){return(0,y.cg1)(k)[y.wAp.NumberFormats][Y]}(Y,ot.Currency),Mn(Y,Ke.MinusSign));return bt.minFrac=function B1(k){let Y;const R=le[k];return R&&(Y=R[2]),"number"==typeof Y?Y:2}(K),bt.maxFrac=bt.minFrac,function yr(k,Y,R,K,ye,st,bt=!1){let Kt="",En=!1;if(isFinite(k)){let u1=function Lr(k){let K,ye,st,bt,Kt,Y=Math.abs(k)+"",R=0;for((ye=Y.indexOf("."))>-1&&(Y=Y.replace(".","")),(st=Y.search(/e/i))>0?(ye<0&&(ye=st),ye+=+Y.slice(st+1),Y=Y.substring(0,st)):ye<0&&(ye=Y.length),st=0;"0"===Y.charAt(st);st++);if(st===(Kt=Y.length))K=[0],ye=1;else{for(Kt--;"0"===Y.charAt(Kt);)Kt--;for(ye-=st,K=[],bt=0;st<=Kt;st++,bt++)K[bt]=Number(Y.charAt(st))}return ye>22&&(K=K.splice(0,21),R=ye-1,ye=1),{digits:K,exponent:R,integerLen:ye}}(k);bt&&(u1=function W1(k){if(0===k.digits[0])return k;const Y=k.digits.length-k.integerLen;return k.exponent?k.exponent+=2:(0===Y?k.digits.push(0,0):1===Y&&k.digits.push(0),k.integerLen+=2),k}(u1));let Ln=Y.minInt,$n=Y.minFrac,b1=Y.maxFrac;if(st){const gi=st.match(yt);if(null===gi)throw new Error(`${st} is not a valid digit info`);const G2=gi[1],M2=gi[3],Fi=gi[5];null!=G2&&(Ln=Pr(G2)),null!=M2&&($n=Pr(M2)),null!=Fi?b1=Pr(Fi):null!=M2&&$n>b1&&(b1=$n)}!function V1(k,Y,R){if(Y>R)throw new Error(`The minimum number of digits after fraction (${Y}) is higher than the maximum (${R}).`);let K=k.digits,ye=K.length-k.integerLen;const st=Math.min(Math.max(Y,ye),R);let bt=st+k.integerLen,Kt=K[bt];if(bt>0){K.splice(Math.max(k.integerLen,bt));for(let $n=bt;$n<K.length;$n++)K[$n]=0}else{ye=Math.max(0,ye),k.integerLen=1,K.length=Math.max(1,bt=st+1),K[0]=0;for(let $n=1;$n<bt;$n++)K[$n]=0}if(Kt>=5)if(bt-1<0){for(let $n=0;$n>bt;$n--)K.unshift(0),k.integerLen++;K.unshift(1),k.integerLen++}else K[bt-1]++;for(;ye<Math.max(0,st);ye++)K.push(0);let En=0!==st;const u1=Y+k.integerLen,Ln=K.reduceRight(function($n,b1,S1,L1){return L1[S1]=(b1+=$n)<10?b1:b1-10,En&&(0===L1[S1]&&S1>=u1?L1.pop():En=!1),b1>=10?1:0},0);Ln&&(K.unshift(Ln),k.integerLen++)}(u1,$n,b1);let S1=u1.digits,L1=u1.integerLen;const oi=u1.exponent;let Sr=[];for(En=S1.every(gi=>!gi);L1<Ln;L1++)S1.unshift(0);for(;L1<0;L1++)S1.unshift(0);L1>0?Sr=S1.splice(L1,S1.length):(Sr=S1,S1=[0]);const gn=[];for(S1.length>=Y.lgSize&&gn.unshift(S1.splice(-Y.lgSize,S1.length).join(""));S1.length>Y.gSize;)gn.unshift(S1.splice(-Y.gSize,S1.length).join(""));S1.length&&gn.unshift(S1.join("")),Kt=gn.join(Mn(R,K)),Sr.length&&(Kt+=Mn(R,ye)+Sr.join("")),oi&&(Kt+=Mn(R,Ke.Exponential)+"+"+oi)}else Kt=Mn(R,Ke.Infinity);return Kt=k<0&&!En?Y.negPre+Kt+Y.negSuf:Y.posPre+Kt+Y.posSuf,Kt}(k,bt,Y,Ke.CurrencyGroup,Ke.CurrencyDecimal,ye).replace("\xa4",R).replace("\xa4","").trim()}function Pr(k){const Y=parseInt(k);if(isNaN(Y))throw new Error("Invalid integer literal when parsing "+k);return Y}function Or(k,Y){Y=encodeURIComponent(Y);for(const R of k.split(";")){const K=R.indexOf("="),[ye,st]=-1==K?[R,""]:[R.slice(0,K),R.slice(K+1)];if(ye.trim()===Y)return decodeURIComponent(st)}return null}class ur{constructor(Y,R,K,ye){this.$implicit=Y,this.ngForOf=R,this.index=K,this.count=ye}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let M1=(()=>{class k{constructor(R,K,ye){this._viewContainer=R,this._template=K,this._differs=ye,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(R){this._ngForOf=R,this._ngForOfDirty=!0}set ngForTrackBy(R){this._trackByFn=R}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(R){R&&(this._template=R)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const R=this._ngForOf;!this._differ&&R&&(this._differ=this._differs.find(R).create(this.ngForTrackBy))}if(this._differ){const R=this._differ.diff(this._ngForOf);R&&this._applyChanges(R)}}_applyChanges(R){const K=this._viewContainer;R.forEachOperation((ye,st,bt)=>{if(null==ye.previousIndex)K.createEmbeddedView(this._template,new ur(ye.item,this._ngForOf,-1,-1),null===bt?void 0:bt);else if(null==bt)K.remove(null===st?void 0:st);else if(null!==st){const Kt=K.get(st);K.move(Kt,bt),J1(Kt,ye)}});for(let ye=0,st=K.length;ye<st;ye++){const Kt=K.get(ye).context;Kt.index=ye,Kt.count=st,Kt.ngForOf=this._ngForOf}R.forEachIdentityChange(ye=>{J1(K.get(ye.currentIndex),ye)})}static ngTemplateContextGuard(R,K){return!0}}return k.\u0275fac=function(R){return new(R||k)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},k.\u0275dir=y.lG2({type:k,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),k})();function J1(k,Y){k.context.$implicit=Y.item}let R1=(()=>{class k{constructor(R,K){this._viewContainer=R,this._context=new s1,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=K}set ngIf(R){this._context.$implicit=this._context.ngIf=R,this._updateView()}set ngIfThen(R){Yr("ngIfThen",R),this._thenTemplateRef=R,this._thenViewRef=null,this._updateView()}set ngIfElse(R){Yr("ngIfElse",R),this._elseTemplateRef=R,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(R,K){return!0}}return k.\u0275fac=function(R){return new(R||k)(y.Y36(y.s_b),y.Y36(y.Rgc))},k.\u0275dir=y.lG2({type:k,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),k})();class s1{constructor(){this.$implicit=null,this.ngIf=null}}function Yr(k,Y){if(Y&&!Y.createEmbeddedView)throw new Error(`${k} must be a TemplateRef, but received '${(0,y.AaK)(Y)}'.`)}let ri=(()=>{class k{constructor(R,K="USD"){this._locale=R,this._defaultCurrencyCode=K}transform(R,K=this._defaultCurrencyCode,ye="symbol",st,bt){if(!function ii(k){return!(null==k||""===k||k!=k)}(R))return null;bt=bt||this._locale,"boolean"==typeof ye&&(ye=ye?"symbol":"code");let Kt=K||this._defaultCurrencyCode;"code"!==ye&&(Kt="symbol"===ye||"symbol-narrow"===ye?function gr(k,Y,R="en"){const K=function U1(k){return(0,y.cg1)(k)[y.wAp.Currencies]}(R)[k]||le[k]||[],ye=K[1];return"narrow"===Y&&"string"==typeof ye?ye:K[0]||k}(Kt,"symbol"===ye?"wide":"narrow",bt):ye);try{return Yn(function qi(k){if("string"==typeof k&&!isNaN(Number(k)-parseFloat(k)))return Number(k);if("number"!=typeof k)throw new Error(`${k} is not a number`);return k}(R),bt,Kt,K,st)}catch(En){throw function Z1(k,Y){return new y.vHH(2100,"")}()}}}return k.\u0275fac=function(R){return new(R||k)(y.Y36(y.soG,16),y.Y36(y.EJc,16))},k.\u0275pipe=y.Yjl({name:"currency",type:k,pure:!0}),k})();let os=(()=>{class k{}return k.\u0275fac=function(R){return new(R||k)},k.\u0275mod=y.oAB({type:k}),k.\u0275inj=y.cJS({}),k})();const K1="browser";function si(k){return"server"===k}let qn=(()=>{class k{}return k.\u0275prov=(0,y.Yz7)({token:k,providedIn:"root",factory:()=>new bn((0,y.LFG)(ue),window)}),k})();class bn{constructor(Y,R){this.document=Y,this.window=R,this.offset=()=>[0,0]}setOffset(Y){this.offset=Array.isArray(Y)?()=>Y:Y}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Y){this.supportsScrolling()&&this.window.scrollTo(Y[0],Y[1])}scrollToAnchor(Y){if(!this.supportsScrolling())return;const R=function Xn(k,Y){const R=k.getElementById(Y)||k.getElementsByName(Y)[0];if(R)return R;if("function"==typeof k.createTreeWalker&&k.body&&(k.body.createShadowRoot||k.body.attachShadow)){const K=k.createTreeWalker(k.body,NodeFilter.SHOW_ELEMENT);let ye=K.currentNode;for(;ye;){const st=ye.shadowRoot;if(st){const bt=st.getElementById(Y)||st.querySelector(`[name="${Y}"]`);if(bt)return bt}ye=K.nextNode()}}return null}(this.document,Y);R&&(this.scrollToElement(R),R.focus())}setHistoryScrollRestoration(Y){if(this.supportScrollRestoration()){const R=this.window.history;R&&R.scrollRestoration&&(R.scrollRestoration=Y)}}scrollToElement(Y){const R=Y.getBoundingClientRect(),K=R.left+this.window.pageXOffset,ye=R.top+this.window.pageYOffset,st=this.offset();this.window.scrollTo(K-st[0],ye-st[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Y=wr(this.window.history)||wr(Object.getPrototypeOf(this.window.history));return!(!Y||!Y.writable&&!Y.set)}catch(Y){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Y){return!1}}}function wr(k){return Object.getOwnPropertyDescriptor(k,"scrollRestoration")}class f1{}},5e3:(jt,We,B)=>{B.d(We,{$8M:()=>ys,$Z:()=>Q8,AFp:()=>gf,ALo:()=>H7,AaK:()=>ve,AsE:()=>p3,CHM:()=>C1,CRH:()=>q7,CZH:()=>Uh,CqO:()=>vl,DdM:()=>z7,Dn7:()=>F7,EJc:()=>E9,EiD:()=>Xr,EpF:()=>ml,F$t:()=>Ha,F4k:()=>tu,FYo:()=>b7,FiY:()=>Gs,G48:()=>Z9,GfV:()=>E7,Gpc:()=>pe,Hsn:()=>d5,Ikx:()=>g3,JOm:()=>ne,JVY:()=>Mc,L6k:()=>ea,LAX:()=>Za,LFG:()=>_n,LSH:()=>F2,Lbi:()=>w9,MAs:()=>Z6,NdJ:()=>yl,OlP:()=>a1,Oqu:()=>d3,PXZ:()=>H9,Q6J:()=>d6,QGY:()=>gl,Qsj:()=>yd,R0b:()=>O4,RDi:()=>wr,Rgc:()=>W5,SBq:()=>B5,Sil:()=>A9,Suo:()=>Z7,TTD:()=>ii,TgZ:()=>l3,VKq:()=>L7,VLi:()=>V9,X6Q:()=>W9,XFs:()=>dn,Xpm:()=>tn,Y36:()=>f6,YKP:()=>D7,YNc:()=>i3,Yjl:()=>se,Yz7:()=>an,ZZ4:()=>t7,_Bn:()=>C7,_UZ:()=>pl,_Vd:()=>lh,_c5:()=>lp,_uU:()=>zl,aQg:()=>n7,c2e:()=>M9,cJS:()=>vn,cg1:()=>C6,dDg:()=>Mf,deG:()=>en,dqk:()=>kn,eBb:()=>R4,eFA:()=>If,ekj:()=>m6,g9A:()=>yf,h0i:()=>Ou,hGG:()=>up,hij:()=>n0,iGM:()=>W7,ifc:()=>Gt,ip1:()=>mf,kL8:()=>kl,lG2:()=>xe,mCW:()=>zo,n5z:()=>ui,oAB:()=>G1,oJD:()=>Qa,oxw:()=>iu,pB0:()=>u4,q3G:()=>_i,q4F:()=>I7,qLn:()=>to,qOj:()=>J3,qZA:()=>p6,qzn:()=>Xo,sBO:()=>q9,sIi:()=>x4,s_b:()=>fh,soG:()=>jh,tBr:()=>t2,tb:()=>_f,tp0:()=>Vi,uIk:()=>ol,vHH:()=>vt,vpe:()=>b6,wAp:()=>Sn,xp6:()=>I0,yhl:()=>X2,z2F:()=>Kh,z3N:()=>Ms,zSh:()=>G0,zs3:()=>ka});var y=B(7579),D=B(727),te=B(8306),Le=B(6451),De=B(3099);function Ae(n){for(let r in n)if(n[r]===Ae)return r;throw Error("Could not find renamed property on target object.")}function ue(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function ve(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ve).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function ze(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const _e=Ae({__forward_ref__:Ae});function pe(n){return n.__forward_ref__=pe,n.toString=function(){return ve(this())},n}function je(n){return Nt(n)?n():n}function Nt(n){return"function"==typeof n&&n.hasOwnProperty(_e)&&n.__forward_ref__===pe}class vt extends Error{constructor(r,o){super(function zt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,o)),this.code=r}}function tt(n){return"string"==typeof n?n:null==n?"":String(n)}function dt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tt(n)}function nt(n,r){const o=r?` in ${r}`:"";throw new vt(-201,`No provider for ${dt(n)} found${o}`)}function Qt(n,r){null==n&&function it(n,r,o,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${o} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function an(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Mn(n){return I1(n,U1)||I1(n,r1)}function I1(n,r){return n.hasOwnProperty(r)?n[r]:null}function p1(n){return n&&(n.hasOwnProperty(n1)||n.hasOwnProperty(Wn))?n[n1]:null}const U1=Ae({\u0275prov:Ae}),n1=Ae({\u0275inj:Ae}),r1=Ae({ngInjectableDef:Ae}),Wn=Ae({ngInjectorDef:Ae});var dn=(()=>((dn=dn||{})[dn.Default=0]="Default",dn[dn.Host=1]="Host",dn[dn.Self=2]="Self",dn[dn.SkipSelf=4]="SkipSelf",dn[dn.Optional=8]="Optional",dn))();let zn;function ie(n){const r=zn;return zn=n,r}function gr(n,r,o){const c=Mn(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:o&dn.Optional?null:void 0!==r?r:void nt(ve(n),"Injector")}function B1(n){return{toString:n}.toString()}var Xt=(()=>((Xt=Xt||{})[Xt.OnPush=0]="OnPush",Xt[Xt.Default=1]="Default",Xt))(),Gt=(()=>{return(n=Gt||(Gt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Gt;var n})();const nn="undefined"!=typeof globalThis&&globalThis,Wt="undefined"!=typeof window&&window,j1="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,kn=nn||"undefined"!=typeof global&&global||Wt||j1,i1={},Ce=[],Ne=Ae({\u0275cmp:Ae}),be=Ae({\u0275dir:Ae}),pt=Ae({\u0275pipe:Ae}),Me=Ae({\u0275mod:Ae}),ke=Ae({\u0275fac:Ae}),rt=Ae({__NG_ELEMENT_ID__:Ae});let Ft=0;function tn(n){return B1(()=>{const o={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Xt.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Ce,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Gt.Emulated,id:"c",styles:n.styles||Ce,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,v=n.features,M=n.pipes;return c.id+=Ft++,c.inputs=$e(n.inputs,o),c.outputs=$e(n.outputs),v&&v.forEach(x=>x(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Zn):null,c.pipeDefs=M?()=>("function"==typeof M?M():M).map(Jt):null,c})}function Zn(n){return Re(n)||function yt(n){return n[be]||null}(n)}function Jt(n){return function on(n){return n[pt]||null}(n)}const Jn={};function G1(n){return B1(()=>{const r={type:n.type,bootstrap:n.bootstrap||Ce,declarations:n.declarations||Ce,imports:n.imports||Ce,exports:n.exports||Ce,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(Jn[n.id]=n.type),r})}function $e(n,r){if(null==n)return i1;const o={};for(const c in n)if(n.hasOwnProperty(c)){let f=n[c],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),o[f]=c,r&&(r[f]=v)}return o}const xe=tn;function se(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Re(n){return n[Ne]||null}function yn(n,r){const o=n[Me]||null;if(!o&&!0===r)throw new Error(`Type ${ve(n)} does not have '\u0275mod' property.`);return o}function er(n){return Array.isArray(n)&&"object"==typeof n[1]}function Nr(n){return Array.isArray(n)&&!0===n[1]}function bi(n){return 0!=(8&n.flags)}function r2(n){return 2==(2&n.flags)}function hr(n){return 1==(1&n.flags)}function Gr(n){return null!==n.template}function Ei(n){return 0!=(512&n[2])}function tr(n,r){return n.hasOwnProperty(ke)?n[ke]:null}class ri{constructor(r,o,c){this.previousValue=r,this.currentValue=o,this.firstChange=c}isFirstChange(){return this.firstChange}}function ii(){return qi}function qi(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ii),w2}function w2(){const n=K1(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===i1)n.previous=r;else for(let c in r)o[c]=r[c];n.current=null,this.ngOnChanges(r)}}function Ii(n,r,o,c){const f=K1(n)||function Ai(n,r){return n[os]=r}(n,{previous:i1,current:null}),v=f.current||(f.current={}),M=f.previous,x=this.declaredInputs[o],L=M[x];v[x]=new ri(L&&L.currentValue,r,M===i1),n[c]=r}ii.ngInherit=!0;const os="__ngSimpleChanges__";function K1(n){return n[os]||null}let bn;function wr(n){bn=n}function Xn(){return void 0!==bn?bn:"undefined"!=typeof document?document:void 0}function f1(n){return!!n.listen}const k={createRenderer:(n,r)=>Xn()};function R(n){for(;Array.isArray(n);)n=n[0];return n}function st(n,r){return R(r[n])}function bt(n,r){return R(r[n.index])}function En(n,r){return n.data[r]}function u1(n,r){return n[r]}function Ln(n,r){const o=r[n];return er(o)?o:o[0]}function $n(n){return 4==(4&n[2])}function b1(n){return 128==(128&n[2])}function L1(n,r){return null==r?null:n[r]}function oi(n){n[18]=0}function Sr(n,r){n[5]+=r;let o=n,c=n[3];for(;null!==c&&(1===r&&1===o[5]||-1===r&&0===o[5]);)c[5]+=r,o=c,c=c[3]}const gn={lFrame:Ur(null),bindingsEnabled:!0};function P(){return gn.bindingsEnabled}function Ee(){return gn.lFrame.lView}function Dt(){return gn.lFrame.tView}function C1(n){return gn.lFrame.contextLView=n,n[8]}function Bn(){let n=ai();for(;null!==n&&64===n.type;)n=n.parent;return n}function ai(){return gn.lFrame.currentTNode}function Wr(n,r){const o=gn.lFrame;o.currentTNode=n,o.isParent=r}function Ui(){return gn.lFrame.isParent}function as(){gn.lFrame.isParent=!1}function Rr(){const n=gn.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Yi(){return gn.lFrame.bindingIndex++}function G(n){const r=gn.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}function de(n,r){const o=gn.lFrame;o.bindingIndex=o.bindingRootIndex=n,ut(r)}function ut(n){gn.lFrame.currentDirectiveIndex=n}function Ct(){return gn.lFrame.currentQueryIndex}function $t(n){gn.lFrame.currentQueryIndex=n}function On(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Bt(n,r,o){if(o&dn.SkipSelf){let f=r,v=n;for(;!(f=f.parent,null!==f||o&dn.Host||(f=On(v),null===f||(v=v[15],10&f.type))););if(null===f)return!1;r=f,n=v}const c=gn.lFrame=g1();return c.currentTNode=r,c.lView=n,!0}function e1(n){const r=g1(),o=n[1];gn.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function g1(){const n=gn.lFrame,r=null===n?null:n.child;return null===r?Ur(n):r}function Ur(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function d1(){const n=gn.lFrame;return gn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Zr=d1;function fr(){const n=d1();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function cr(){return gn.lFrame.selectedIndex}function ci(n){gn.lFrame.selectedIndex=n}function or(){const n=gn.lFrame;return En(n.tView,n.selectedIndex)}function l2(n,r){for(let o=r.directiveStart,c=r.directiveEnd;o<c;o++){const v=n.data[o].type.prototype,{ngAfterContentInit:M,ngAfterContentChecked:x,ngAfterViewInit:L,ngAfterViewChecked:Z,ngOnDestroy:Q}=v;M&&(n.contentHooks||(n.contentHooks=[])).push(-o,M),x&&((n.contentHooks||(n.contentHooks=[])).push(o,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,x)),L&&(n.viewHooks||(n.viewHooks=[])).push(-o,L),Z&&((n.viewHooks||(n.viewHooks=[])).push(o,Z),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,Z)),null!=Q&&(n.destroyHooks||(n.destroyHooks=[])).push(o,Q)}}function b2(n,r,o){Eo(n,r,3,o)}function Z2(n,r,o,c){(3&n[2])===o&&Eo(n,r,o,c)}function v1(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function Eo(n,r,o,c){const v=null!=c?c:-1,M=r.length-1;let x=0;for(let L=void 0!==c?65535&n[18]:0;L<M;L++)if("number"==typeof r[L+1]){if(x=r[L],null!=c&&x>=c)break}else r[L]<0&&(n[18]+=65536),(x<v||-1==v)&&(Bs(n,o,r,L),n[18]=(4294901760&n[18])+L+2),L++}function Bs(n,r,o,c){const f=o[c]<0,v=o[c+1],x=n[f?-o[c]:o[c]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{v.call(x)}finally{}}}else try{v.call(x)}finally{}}class q2{constructor(r,o,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=c}}function cs(n,r,o){const c=f1(n);let f=0;for(;f<o.length;){const v=o[f];if("number"==typeof v){if(0!==v)break;f++;const M=o[f++],x=o[f++],L=o[f++];c?n.setAttribute(r,x,L,M):r.setAttributeNS(M,x,L)}else{const M=v,x=o[++f];Pi(M)?c&&n.setProperty(r,M,x):c?n.setAttribute(r,M,x):r.setAttribute(M,x),f++}}return f}function Ts(n){return 3===n||4===n||6===n}function Pi(n){return 64===n.charCodeAt(0)}function Y2(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let c=0;c<r.length;c++){const f=r[c];"number"==typeof f?o=f:0===o||Io(n,o,f,null,-1===o||2===o?r[++c]:null)}}return n}function Io(n,r,o,c,f){let v=0,M=n.length;if(-1===r)M=-1;else for(;v<n.length;){const x=n[v++];if("number"==typeof x){if(x===r){M=-1;break}if(x>r){M=v-1;break}}}for(;v<n.length;){const x=n[v];if("number"==typeof x)break;if(x===o){if(null===c)return void(null!==f&&(n[v+1]=f));if(c===n[v+1])return void(n[v+2]=f)}v++,null!==c&&v++,null!==f&&v++}-1!==M&&(n.splice(M,0,r),v=M+1),n.splice(v++,0,o),null!==c&&n.splice(v++,0,c),null!==f&&n.splice(v++,0,f)}function ls(n){return-1!==n}function ms(n){return 32767&n}function us(n,r){let o=function Br(n){return n>>16}(n),c=r;for(;o>0;)c=c[15],o--;return c}let gs=!0;function Hr(n){const r=gs;return gs=n,r}let Ao=0;function Y1(n,r){const o=Ji(n,r);if(-1!==o)return o;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,Qi(c.data,n),Qi(r,null),Qi(c.blueprint,null));const f=A(n,r),v=n.injectorIndex;if(ls(f)){const M=ms(f),x=us(f,r),L=x[1].data;for(let Z=0;Z<8;Z++)r[v+Z]=x[M+Z]|L[M+Z]}return r[v+8]=f,v}function Qi(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ji(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function A(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,c=null,f=r;for(;null!==f;){const v=f[1],M=v.type;if(c=2===M?v.declTNode:1===M?f[6]:null,null===c)return-1;if(o++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|o<<16}return-1}function E(n,r,o){!function Pt(n,r,o){let c;"string"==typeof o?c=o.charCodeAt(0)||0:o.hasOwnProperty(rt)&&(c=o[rt]),null==c&&(c=o[rt]=Ao++);const f=255&c;r.data[n+(f>>5)]|=1<<f}(n,r,o)}function N(n,r,o){if(o&dn.Optional)return n;nt(r,"NodeInjector")}function z(n,r,o,c){if(o&dn.Optional&&void 0===c&&(c=null),0==(o&(dn.Self|dn.Host))){const f=n[9],v=ie(void 0);try{return f?f.get(r,c,o&dn.Optional):gr(r,c,o&dn.Optional)}finally{ie(v)}}return N(c,r,o)}function W(n,r,o,c=dn.Default,f){if(null!==n){const v=function ln(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(rt)?n[rt]:void 0;return"number"==typeof r?r>=0?255&r:Se:r}(o);if("function"==typeof v){if(!Bt(r,n,c))return c&dn.Host?N(f,o,c):z(r,o,c,f);try{const M=v(c);if(null!=M||c&dn.Optional)return M;nt(o)}finally{Zr()}}else if("number"==typeof v){let M=null,x=Ji(n,r),L=-1,Z=c&dn.Host?r[16][6]:null;for((-1===x||c&dn.SkipSelf)&&(L=-1===x?A(n,r):r[x+8],-1!==L&&q1(c,!1)?(M=r[1],x=ms(L),r=us(L,r)):x=-1);-1!==x;){const Q=r[1];if(P1(v,x,Q.data)){const fe=mt(x,r,o,M,c,Z);if(fe!==he)return fe}L=r[x+8],-1!==L&&q1(c,r[1].data[x+8]===Z)&&P1(v,x,r)?(M=Q,x=ms(L),r=us(L,r)):x=-1}}}return z(r,o,c,f)}const he={};function Se(){return new o1(Bn(),Ee())}function mt(n,r,o,c,f,v){const M=r[1],x=M.data[n+8],Q=rn(x,M,o,null==c?r2(x)&&gs:c!=M&&0!=(3&x.type),f&dn.Host&&v===x);return null!==Q?Qn(r,M,Q,x):he}function rn(n,r,o,c,f){const v=n.providerIndexes,M=r.data,x=1048575&v,L=n.directiveStart,Q=v>>20,Ve=f?x+Q:n.directiveEnd;for(let Je=c?x:x+Q;Je<Ve;Je++){const It=M[Je];if(Je<L&&o===It||Je>=L&&It.type===o)return Je}if(f){const Je=M[L];if(Je&&Gr(Je)&&Je.type===o)return L}return null}function Qn(n,r,o,c){let f=n[o];const v=r.data;if(function z2(n){return n instanceof q2}(f)){const M=f;M.resolving&&function Oe(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new vt(-200,`Circular dependency in DI detected for ${n}${o}`)}(dt(v[o]));const x=Hr(M.canSeeViewProviders);M.resolving=!0;const L=M.injectImpl?ie(M.injectImpl):null;Bt(n,c,dn.Default);try{f=n[o]=M.factory(void 0,v,n,c),r.firstCreatePass&&o>=c.directiveStart&&function ao(n,r,o){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:v}=r.type.prototype;if(c){const M=qi(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,M),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,M)}f&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,f),v&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,v),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,v))}(o,v[o],r)}finally{null!==L&&ie(L),Hr(x),M.resolving=!1,Zr()}}return f}function P1(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function q1(n,r){return!(n&dn.Self||n&dn.Host&&r)}class o1{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,c){return W(this._tNode,this._lView,r,c,o)}}function ui(n){return B1(()=>{const r=n.prototype.constructor,o=r[ke]||P2(r),c=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==c;){const v=f[ke]||P2(f);if(v&&v!==o)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function P2(n){return Nt(n)?()=>{const r=P2(je(n));return r&&r()}:tr(n)}function ys(n){return function b(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const c=o.length;let f=0;for(;f<c;){const v=o[f];if(Ts(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<c&&"string"==typeof o[f];)f++;else{if(v===r)return o[f+1];f+=2}}}return null}(Bn(),n)}const h2="__parameters__";function Q2(n,r,o){return B1(()=>{const c=function An(n){return function(...o){if(n){const c=n(...o);for(const f in c)this[f]=c[f]}}}(r);function f(...v){if(this instanceof f)return c.apply(this,v),this;const M=new f(...v);return x.annotation=M,x;function x(L,Z,Q){const fe=L.hasOwnProperty(h2)?L[h2]:Object.defineProperty(L,h2,{value:[]})[h2];for(;fe.length<=Q;)fe.push(null);return(fe[Q]=fe[Q]||[]).push(M),L}}return o&&(f.prototype=Object.create(o.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class a1{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=an({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const en=new a1("AnalyzeForEntryComponents");function Xe(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let c=n[o];Array.isArray(c)?(r===n&&(r=n.slice(0,o)),Xe(c,r)):r!==n&&r.push(c)}return r}function Si(n,r){n.forEach(o=>Array.isArray(o)?Si(o,r):r(o))}function Xi(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function ho(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function e2(n,r){const o=[];for(let c=0;c<n;c++)o.push(r);return o}function m2(n,r,o){let c=fo(n,r);return c>=0?n[1|c]=o:(c=~c,function J2(n,r,o,c){let f=n.length;if(f==r)n.push(o,c);else if(1===f)n.push(c,n[0]),n[0]=o;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=o,n[r+1]=c}}(n,c,r,o)),c}function Oi(n,r){const o=fo(n,r);if(o>=0)return n[1|o]}function fo(n,r){return function _s(n,r,o){let c=0,f=n.length>>o;for(;f!==c;){const v=c+(f-c>>1),M=n[v<<o];if(r===M)return v<<o;M>r?f=v:c=v+1}return~(f<<o)}(n,r,1)}const mo={},V2="__NG_DI_FLAG__",zr="ngTempTokenPath",F=/\n/gm,ge="__source",Ge=Ae({provide:String,useValue:Ae});let Qe;function St(n){const r=Qe;return Qe=n,r}function un(n,r=dn.Default){if(void 0===Qe)throw new vt(203,"");return null===Qe?gr(n,void 0,r):Qe.get(n,r&dn.Optional?null:void 0,r)}function _n(n,r=dn.Default){return(function xn(){return zn}()||un)(je(n),r)}const H1=_n;function Tn(n){const r=[];for(let o=0;o<n.length;o++){const c=je(n[o]);if(Array.isArray(c)){if(0===c.length)throw new vt(900,"");let f,v=dn.Default;for(let M=0;M<c.length;M++){const x=c[M],L=ji(x);"number"==typeof L?-1===L?f=x.token:v|=L:f=x}r.push(_n(f,v))}else r.push(_n(c))}return r}function br(n,r){return n[V2]=r,n.prototype[V2]=r,n}function ji(n){return n[V2]}const t2=br(Q2("Inject",n=>({token:n})),-1),Gs=br(Q2("Optional"),8),Vi=br(Q2("SkipSelf"),4);let So,Jo;function qs(n){var r;return(null===(r=function Ma(){if(void 0===So&&(So=null,kn.trustedTypes))try{So=kn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return So}())||void 0===r?void 0:r.createHTML(n))||n}function c4(n){var r;return(null===(r=function $a(){if(void 0===Jo&&(Jo=null,kn.trustedTypes))try{Jo=kn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Jo}())||void 0===r?void 0:r.createHTML(n))||n}class go{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class wc extends go{getTypeName(){return"HTML"}}class l4 extends go{getTypeName(){return"Style"}}class To extends go{getTypeName(){return"Script"}}class Ks extends go{getTypeName(){return"URL"}}class I6 extends go{getTypeName(){return"ResourceURL"}}function Ms(n){return n instanceof go?n.changingThisBreaksApplicationSecurity:n}function Xo(n,r){const o=X2(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}function X2(n){return n instanceof go&&n.getTypeName()||null}function Mc(n){return new wc(n)}function ea(n){return new l4(n)}function R4(n){return new To(n)}function Za(n){return new Ks(n)}function u4(n){return new I6(n)}class vo{constructor(r){this.inertDocumentHelper=r}getInertBodyElement(r){r="<body><remove></remove>"+r;try{const o=(new window.DOMParser).parseFromString(qs(r),"text/html").body;return null===o?this.inertDocumentHelper.getInertBodyElement(r):(o.removeChild(o.firstChild),o)}catch(o){return null}}}class es{constructor(r){if(this.defaultDoc=r,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const o=this.inertDocument.createElement("html");this.inertDocument.appendChild(o);const c=this.inertDocument.createElement("body");o.appendChild(c)}}getInertBodyElement(r){const o=this.inertDocument.createElement("template");if("content"in o)return o.innerHTML=qs(r),o;const c=this.inertDocument.createElement("body");return c.innerHTML=qs(r),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(r){const o=r.attributes;for(let f=o.length-1;0<f;f--){const M=o.item(f).name;("xmlns:ns1"===M||0===M.indexOf("ns1:"))&&r.removeAttribute(M)}let c=r.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const No=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Ls=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zo(n){return(n=String(n)).match(No)||n.match(Ls)?n:"unsafe:"+n}function I2(n){const r={};for(const o of n.split(","))r[o]=!0;return r}function Aa(...n){const r={};for(const o of n)for(const c in o)o.hasOwnProperty(c)&&(r[c]=!0);return r}const qa=I2("area,br,col,hr,img,wbr"),ta=I2("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ka=I2("rp,rt"),Lo=Aa(qa,Aa(ta,I2("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Aa(Ka,I2("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Aa(Ka,ta)),Ps=I2("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ys=I2("srcset"),bs=Aa(Ps,Ys,I2("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),I2("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Os=I2("script,style,template");class Ec{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(r){let o=r.firstChild,c=!0;for(;o;)if(o.nodeType===Node.ELEMENT_NODE?c=this.startElement(o):o.nodeType===Node.TEXT_NODE?this.chars(o.nodeValue):this.sanitizedSomething=!0,c&&o.firstChild)o=o.firstChild;else for(;o;){o.nodeType===Node.ELEMENT_NODE&&this.endElement(o);let f=this.checkClobberedElement(o,o.nextSibling);if(f){o=f;break}o=this.checkClobberedElement(o,o.parentNode)}return this.buf.join("")}startElement(r){const o=r.nodeName.toLowerCase();if(!Lo.hasOwnProperty(o))return this.sanitizedSomething=!0,!Os.hasOwnProperty(o);this.buf.push("<"),this.buf.push(o);const c=r.attributes;for(let f=0;f<c.length;f++){const v=c.item(f),M=v.name,x=M.toLowerCase();if(!bs.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let L=v.value;Ps[x]&&(L=zo(L)),Ys[x]&&(n=L,L=(n=String(n)).split(",").map(r=>zo(r.trim())).join(", ")),this.buf.push(" ",M,'="',Po(L),'"')}var n;return this.buf.push(">"),!0}endElement(r){const o=r.nodeName.toLowerCase();Lo.hasOwnProperty(o)&&!qa.hasOwnProperty(o)&&(this.buf.push("</"),this.buf.push(o),this.buf.push(">"))}chars(r){this.buf.push(Po(r))}checkClobberedElement(r,o){if(o&&(r.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${r.outerHTML}`);return o}}const f4=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,na=/([^\#-~ |!])/g;function Po(n){return n.replace(/&/g,"&amp;").replace(f4,function(r){return"&#"+(1024*(r.charCodeAt(0)-55296)+(r.charCodeAt(1)-56320)+65536)+";"}).replace(na,function(r){return"&#"+r.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Js;function Xr(n,r){let o=null;try{Js=Js||function Ea(n){const r=new es(n);return function bc(){try{return!!(new window.DOMParser).parseFromString(qs(""),"text/html")}catch(n){return!1}}()?new vo(r):r}(n);let c=r?String(r):"";o=Js.getInertBodyElement(c);let f=5,v=c;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,c=v,v=o.innerHTML,o=Js.getInertBodyElement(c)}while(c!==v);return qs((new Ec).sanitizeChildren(v2(o)||o))}finally{if(o){const c=v2(o)||o;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function v2(n){return"content"in n&&function Oo(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var _i=(()=>((_i=_i||{})[_i.NONE=0]="NONE",_i[_i.HTML=1]="HTML",_i[_i.STYLE=2]="STYLE",_i[_i.SCRIPT=3]="SCRIPT",_i[_i.URL=4]="URL",_i[_i.RESOURCE_URL=5]="RESOURCE_URL",_i))();function Qa(n){const r=Ta();return r?c4(r.sanitize(_i.HTML,n)||""):Xo(n,"HTML")?c4(Ms(n)):Xr(Xn(),tt(n))}function F2(n){const r=Ta();return r?r.sanitize(_i.URL,n)||"":Xo(n,"URL")?Ms(n):zo(tt(n))}function Ta(){const n=Ee();return n&&n[12]}const Vo="__ngContext__";function Kr(n,r){n[Vo]=r}function A2(n){const r=function Ro(n){return n[Vo]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function eo(n){return n.ngOriginalError}function F4(n,...r){n.error(...r)}class to{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),c=function sa(n){return n&&n.ngErrorLogger||F4}(r);c(this._console,"ERROR",r),o&&c(this._console,"ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&eo(r);for(;o&&eo(o);)o=eo(o);return o||null}}const Ri=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(kn))();function C(n){return n instanceof Function?n():n}var ne=(()=>((ne=ne||{})[ne.Important=1]="Important",ne[ne.DashCase=2]="DashCase",ne))();function gt(n,r){return undefined(n,r)}function Vn(n){const r=n[3];return Nr(r)?r[3]:r}function ns(n){return Nc(n[13])}function Oa(n){return Nc(n[4])}function Nc(n){for(;null!==n&&!Nr(n);)n=n[4];return n}function no(n,r,o,c,f){if(null!=c){let v,M=!1;Nr(c)?v=c:er(c)&&(M=!0,c=c[0]);const x=R(c);0===n&&null!==o?null==f?d0(r,o,x):rc(r,o,x,f||null,!0):1===n&&null!==o?rc(r,o,x,f||null,!0):2===n?function Rc(n,r,o){const c=j4(n,r);c&&function b3(n,r,o,c){f1(n)?n.removeChild(r,o,c):r.removeChild(o)}(n,c,r,o)}(r,x,M):3===n&&r.destroyNode(x),null!=v&&function Va(n,r,o,c,f){const v=o[7];v!==R(o)&&no(r,n,c,v,f);for(let x=10;x<o.length;x++){const L=o[x];ic(L[1],L,n,r,c,v)}}(r,n,v,o,f)}}function nc(n,r,o){if(f1(n))return n.createElement(r,o);{const c=null!==o?function qn(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(o):null;return null===c?n.createElement(r):n.createElementNS(c,r)}}function x6(n,r){const o=n[9],c=o.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,Sr(f,-1)),o.splice(c,1)}function Vc(n,r){if(n.length<=10)return;const o=10+r,c=n[o];if(c){const f=c[17];null!==f&&f!==n&&x6(f,c),r>0&&(n[o-1][4]=c[4]);const v=ho(n,10+r);!function Lc(n,r){ic(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const M=v[19];null!==M&&M.detachView(v[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function D6(n,r){if(!(256&r[2])){const o=r[11];f1(o)&&o.destroyNode&&ic(n,r,o,3,null,null),function Oc(n){let r=n[13];if(!r)return B4(n[1],n);for(;r;){let o=null;if(er(r))o=r[13];else{const c=r[10];c&&(o=c)}if(!o){for(;r&&!r[4]&&r!==n;)er(r)&&B4(r[1],r),r=r[3];null===r&&(r=n),er(r)&&B4(r[1],r),o=r&&r[4]}r=o}}(r)}}function B4(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function M3(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let c=0;c<o.length;c+=2){const f=r[o[c]];if(!(f instanceof q2)){const v=o[c+1];if(Array.isArray(v))for(let M=0;M<v.length;M+=2){const x=f[v[M]],L=v[M+1];try{L.call(x)}finally{}}else try{v.call(f)}finally{}}}}(n,r),function w3(n,r){const o=n.cleanup,c=r[7];let f=-1;if(null!==o)for(let v=0;v<o.length-1;v+=2)if("string"==typeof o[v]){const M=o[v+1],x="function"==typeof M?M(r):R(r[M]),L=c[f=o[v+2]],Z=o[v+3];"boolean"==typeof Z?x.removeEventListener(o[v],L,Z):Z>=0?c[f=Z]():c[f=-Z].unsubscribe(),v+=2}else{const M=c[f=o[v+1]];o[v].call(M)}if(null!==c){for(let v=f+1;v<c.length;v++)c[v]();r[7]=null}}(n,r),1===r[1].type&&f1(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&Nr(r[3])){o!==r[3]&&x6(o,r);const c=r[19];null!==c&&c.detachView(n)}}}function h0(n,r,o){return function f0(n,r,o){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return o[0];if(2&c.flags){const f=n.data[c.directiveStart].encapsulation;if(f===Gt.None||f===Gt.Emulated)return null}return bt(c,o)}(n,r.parent,o)}function rc(n,r,o,c,f){f1(n)?n.insertBefore(r,o,c,f):r.insertBefore(o,c,f)}function d0(n,r,o){f1(n)?n.appendChild(r,o):r.appendChild(o)}function p0(n,r,o,c,f){null!==c?rc(n,r,o,c,f):d0(n,r,o)}function j4(n,r){return f1(n)?n.parentNode(r):r.parentNode}function m0(n,r,o){return v0(n,r,o)}let v0=function g0(n,r,o){return 40&n.type?bt(n,o):null};function G4(n,r,o,c){const f=h0(n,c,r),v=r[11],x=m0(c.parent||r[6],c,r);if(null!=f)if(Array.isArray(o))for(let L=0;L<o.length;L++)p0(v,f,o[L],x,!1);else p0(v,f,o,x,!1)}function v4(n,r){if(null!==r){const o=r.type;if(3&o)return bt(r,n);if(4&o)return N6(-1,n[r.index]);if(8&o){const c=r.child;if(null!==c)return v4(n,c);{const f=n[r.index];return Nr(f)?N6(-1,f):R(f)}}if(32&o)return gt(r,n)()||R(n[r.index]);{const c=Rs(n,r);return null!==c?Array.isArray(c)?c[0]:v4(Vn(n[16]),c):v4(n,r.next)}}return null}function Rs(n,r){return null!==r?n[16][6].projection[r.projection]:null}function N6(n,r){const o=10+n+1;if(o<r.length){const c=r[o],f=c[1].firstChild;if(null!==f)return v4(c,f)}return r[7]}function Gi(n,r,o,c,f,v,M){for(;null!=o;){const x=c[o.index],L=o.type;if(M&&0===r&&(x&&Kr(R(x),c),o.flags|=4),64!=(64&o.flags))if(8&L)Gi(n,r,o.child,c,f,v,!1),no(r,n,f,x,v);else if(32&L){const Z=gt(o,c);let Q;for(;Q=Z();)no(r,n,f,Q,v);no(r,n,f,x,v)}else 16&L?W4(n,r,c,o,f,v):no(r,n,f,x,v);o=M?o.projectionNext:o.next}}function ic(n,r,o,c,f,v){Gi(o,c,n.firstChild,r,f,v,!1)}function W4(n,r,o,c,f,v){const M=o[16],L=M[6].projection[c.projection];if(Array.isArray(L))for(let Z=0;Z<L.length;Z++)no(r,n,f,L[Z],v);else Gi(n,r,L,M[3],f,v,!0)}function _0(n,r,o){f1(n)?n.setAttribute(r,"style",o):r.style.cssText=o}function y4(n,r,o){f1(n)?""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o):r.className=o}function _4(n,r,o){let c=n.length;for(;;){const f=n.indexOf(r,o);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=r.length;if(f+v===c||n.charCodeAt(f+v)<=32)return f}o=f+1}}const sc="ng-template";function oc(n,r,o){let c=0;for(;c<n.length;){let f=n[c++];if(o&&"class"===f){if(f=n[c],-1!==_4(f.toLowerCase(),r,0))return!0}else if(1===f){for(;c<n.length&&"string"==typeof(f=n[c++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function Hc(n){return 4===n.type&&n.value!==sc}function C0(n,r,o){return r===(4!==n.type||o?n.value:sc)}function z6(n,r,o){let c=4;const f=n.attrs||[],v=function M0(n){for(let r=0;r<n.length;r++)if(Ts(n[r]))return r;return n.length}(f);let M=!1;for(let x=0;x<r.length;x++){const L=r[x];if("number"!=typeof L){if(!M)if(4&c){if(c=2|1&c,""!==L&&!C0(n,L,o)||""===L&&1===r.length){if(ks(c))return!1;M=!0}}else{const Z=8&c?L:r[++x];if(8&c&&null!==n.attrs){if(!oc(n.attrs,Z,o)){if(ks(c))return!1;M=!0}continue}const fe=w0(8&c?"class":L,f,Hc(n),o);if(-1===fe){if(ks(c))return!1;M=!0;continue}if(""!==Z){let Ve;Ve=fe>v?"":f[fe+1].toLowerCase();const Je=8&c?Ve:null;if(Je&&-1!==_4(Je,Z,0)||2&c&&Z!==Ve){if(ks(c))return!1;M=!0}}}}else{if(!M&&!ks(c)&&!ks(L))return!1;if(M&&ks(L))continue;M=!1,c=L|1&c}}return ks(c)||M}function ks(n){return 0==(1&n)}function w0(n,r,o,c){if(null===r)return-1;let f=0;if(c||!o){let v=!1;for(;f<r.length;){const M=r[f];if(M===n)return f;if(3===M||6===M)v=!0;else{if(1===M||2===M){let x=r[++f];for(;"string"==typeof x;)x=r[++f];continue}if(4===M)break;if(0===M){f+=4;continue}}f+=v?1:2}return-1}return function b0(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const c=n[o];if("number"==typeof c)return-1;if(c===r)return o;o++}return-1}(r,n)}function L6(n,r,o=!1){for(let c=0;c<r.length;c++)if(z6(n,r[c],o))return!0;return!1}function P6(n,r){e:for(let o=0;o<r.length;o++){const c=r[o];if(n.length===c.length){for(let f=0;f<n.length;f++)if(n[f]!==c[f])continue e;return!0}}return!1}function C4(n,r){return n?":not("+r.trim()+")":r}function ac(n){let r=n[0],o=1,c=2,f="",v=!1;for(;o<n.length;){let M=n[o];if("string"==typeof M)if(2&c){const x=n[++o];f+="["+M+(x.length>0?'="'+x+'"':"")+"]"}else 8&c?f+="."+M:4&c&&(f+=" "+M);else""!==f&&!ks(M)&&(r+=C4(v,f),f=""),c=M,v=v||!ks(c);o++}return""!==f&&(r+=C4(v,f)),r}const y1={};function I0(n){A0(Dt(),Ee(),cr()+n,!1)}function A0(n,r,o,c){if(!c)if(3==(3&r[2])){const v=n.preOrderCheckHooks;null!==v&&b2(r,v,o)}else{const v=n.preOrderHooks;null!==v&&Z2(r,v,0,o)}ci(o)}function ko(n,r){return n<<17|r<<2}function Ci(n){return n>>17&32767}function cc(n){return 2|n}function Co(n){return(131068&n)>>2}function Uc(n,r){return-131069&n|r<<2}function Z4(n){return 1|n}function Hn(n,r){const o=n.contentQueries;if(null!==o)for(let c=0;c<o.length;c+=2){const f=o[c],v=o[c+1];if(-1!==v){const M=n.data[v];$t(f),M.contentQueries(2,r[v],v)}}}function ro(n,r,o,c,f,v,M,x,L,Z){const Q=r.blueprint.slice();return Q[0]=f,Q[2]=140|c,oi(Q),Q[3]=Q[15]=n,Q[8]=o,Q[10]=M||n&&n[10],Q[11]=x||n&&n[11],Q[12]=L||n&&n[12]||null,Q[9]=Z||n&&n[9]||null,Q[6]=v,Q[16]=2==r.type?n[16]:Q,Q}function rs(n,r,o,c,f){let v=n.data[r];if(null===v)v=function Ho(n,r,o,c,f){const v=ai(),M=Ui(),L=n.data[r]=function I4(n,r,o,c,f,v){return{type:o,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,M?v:v&&v.parent,o,r,c,f);return null===n.firstChild&&(n.firstChild=L),null!==v&&(M?null==v.child&&null!==L.parent&&(v.child=L):null===v.next&&(v.next=L)),L}(n,r,o,c,f),function ee(){return gn.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=o,v.value=c,v.attrs=f;const M=function sr(){const n=gn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();v.injectorIndex=null===M?-1:M.injectorIndex}return Wr(v,!0),v}function Fo(n,r,o,c){if(0===o)return-1;const f=r.length;for(let v=0;v<o;v++)r.push(c),n.blueprint.push(c),n.data.push(null);return f}function $c(n,r,o){e1(r);try{const c=n.viewQuery;null!==c&&Ra(1,c,o);const f=n.template;null!==f&&P3(n,r,f,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Hn(n,r),n.staticViewQueries&&Ra(2,n.viewQuery,o);const v=n.components;null!==v&&function T2(n,r){for(let o=0;o<r.length;o++)U6(n,r[o])}(r,v)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,fr()}}function Wc(n,r,o,c){const f=r[2];if(256!=(256&f)){e1(r);try{oi(r),function $2(n){return gn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&P3(n,r,o,2,c);const M=3==(3&f);if(M){const Z=n.preOrderCheckHooks;null!==Z&&b2(r,Z,null)}else{const Z=n.preOrderHooks;null!==Z&&Z2(r,Z,0,null),v1(r,0)}if(function $u(n){for(let r=ns(n);null!==r;r=Oa(r)){if(!r[2])continue;const o=r[9];for(let c=0;c<o.length;c++){const f=o[c],v=f[3];0==(1024&f[2])&&Sr(v,1),f[2]|=1024}}}(r),function Gu(n){for(let r=ns(n);null!==r;r=Oa(r))for(let o=10;o<r.length;o++){const c=r[o],f=c[1];b1(c)&&Wc(f,c,f.template,c[8])}}(r),null!==n.contentQueries&&Hn(n,r),M){const Z=n.contentCheckHooks;null!==Z&&b2(r,Z)}else{const Z=n.contentHooks;null!==Z&&Z2(r,Z,1),v1(r,1)}!function Cn(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let c=0;c<o.length;c++){const f=o[c];if(f<0)ci(~f);else{const v=f,M=o[++c],x=o[++c];de(M,v),x(2,r[v])}}}finally{ci(-1)}}(n,r);const x=n.components;null!==x&&function pr(n,r){for(let o=0;o<r.length;o++)Wu(n,r[o])}(r,x);const L=n.viewQuery;if(null!==L&&Ra(2,L,c),M){const Z=n.viewCheckHooks;null!==Z&&b2(r,Z)}else{const Z=n.viewHooks;null!==Z&&Z2(r,Z,2),v1(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,Sr(r[3],-1))}finally{fr()}}}function L3(n,r,o,c){const f=r[10],M=$n(r);try{!M&&f.begin&&f.begin(),M&&$c(n,r,c),Wc(n,r,o,c)}finally{!M&&f.end&&f.end()}}function P3(n,r,o,c,f){const v=cr(),M=2&c;try{ci(-1),M&&r.length>20&&A0(n,r,20,!1),o(c,f)}finally{ci(v)}}function N0(n,r,o){!P()||(function k0(n,r,o,c){const f=o.directiveStart,v=o.directiveEnd;n.firstCreatePass||Y1(o,r),Kr(c,r);const M=o.initialInputs;for(let x=f;x<v;x++){const L=n.data[x],Z=Gr(L);Z&&Bu(r,o,L);const Q=Qn(r,n,x,o);Kr(Q,r),null!==M&&F6(0,x-f,Q,L,0,M),Z&&(Ln(o.index,r)[8]=Q)}}(n,r,o,bt(o,r)),128==(128&o.flags)&&function O3(n,r,o){const c=o.directiveStart,f=o.directiveEnd,M=o.index,x=function Be(){return gn.lFrame.currentDirectiveIndex}();try{ci(M);for(let L=c;L<f;L++){const Z=n.data[L],Q=r[L];ut(L),(null!==Z.hostBindings||0!==Z.hostVars||null!==Z.hostAttrs)&&H0(Z,Q)}}finally{ci(-1),ut(x)}}(n,r,o))}function z0(n,r,o=bt){const c=r.localNames;if(null!==c){let f=r.index+1;for(let v=0;v<c.length;v+=2){const M=c[v+1],x=-1===M?o(r,n):n[M];n[f++]=x}}}function L0(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=P0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function P0(n,r,o,c,f,v,M,x,L,Z){const Q=20+c,fe=Q+f,Ve=function Ql(n,r){const o=[];for(let c=0;c<r;c++)o.push(c<n?null:y1);return o}(Q,fe),Je="function"==typeof Z?Z():Z;return Ve[1]={type:n,blueprint:Ve,template:o,queries:null,viewQuery:x,declTNode:r,data:Ve.slice().fill(null,Q),bindingStartIndex:Q,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof M?M():M,firstChild:null,schemas:L,consts:Je,incompleteFirstPass:!1}}function E4(n,r,o,c){const f=U0(r);null===o?f.push(c):(f.push(o),n.firstCreatePass&&u8(n).push(c,f.length-1))}function O0(n,r,o){for(let c in n)if(n.hasOwnProperty(c)){const f=n[c];(o=null===o?{}:o).hasOwnProperty(c)?o[c].push(r,f):o[c]=[r,f]}return o}function io(n,r,o,c,f,v,M,x){const L=bt(r,o);let Q,Z=r.inputs;!x&&null!=Z&&(Q=Z[c])?(j0(n,o,Q,c,f),r2(r)&&function t8(n,r){const o=Ln(r,n);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(c=function e8(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),f=null!=M?M(f,r.value||"",c):f,f1(v)?v.setProperty(L,c,f):Pi(c)||(L.setProperty?L.setProperty(c,f):L[c]=f))}function k6(n,r,o,c){let f=!1;if(P()){const v=function V3(n,r,o){const c=n.directiveRegistry;let f=null;if(c)for(let v=0;v<c.length;v++){const M=c[v];L6(o,M.selectors,!1)&&(f||(f=[]),E(Y1(o,r),n,M.type),Gr(M)?(R3(n,o),f.unshift(M)):f.push(M))}return f}(n,r,o),M=null===c?null:{"":-1};if(null!==v){f=!0,s8(o,n.data.length,v.length);for(let Q=0;Q<v.length;Q++){const fe=v[Q];fe.providersResolver&&fe.providersResolver(fe)}let x=!1,L=!1,Z=Fo(n,r,v.length,null);for(let Q=0;Q<v.length;Q++){const fe=v[Q];o.mergedAttrs=Y2(o.mergedAttrs,fe.hostAttrs),o8(n,o,r,Z,fe),i8(Z,fe,M),null!==fe.contentQueries&&(o.flags|=8),(null!==fe.hostBindings||null!==fe.hostAttrs||0!==fe.hostVars)&&(o.flags|=128);const Ve=fe.type.prototype;!x&&(Ve.ngOnChanges||Ve.ngOnInit||Ve.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),x=!0),!L&&(Ve.ngOnChanges||Ve.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),L=!0),Z++}!function V0(n,r){const c=r.directiveEnd,f=n.data,v=r.attrs,M=[];let x=null,L=null;for(let Z=r.directiveStart;Z<c;Z++){const Q=f[Z],fe=Q.inputs,Ve=null===v||Hc(r)?null:k3(fe,v);M.push(Ve),x=O0(fe,Z,x),L=O0(Q.outputs,Z,L)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=M,r.inputs=x,r.outputs=L}(n,o)}M&&function Uu(n,r,o){if(r){const c=n.localNames=[];for(let f=0;f<r.length;f+=2){const v=o[r[f+1]];if(null==v)throw new vt(-301,!1);c.push(r[f],v)}}}(o,c,M)}return o.mergedAttrs=Y2(o.mergedAttrs,o.attrs),f}function Y4(n,r,o,c,f,v){const M=v.hostBindings;if(M){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const L=~r.index;(function H6(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(x)!=L&&x.push(L),x.push(c,f,M)}}function H0(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function R3(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function i8(n,r,o){if(o){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)o[r.exportAs[c]]=n;Gr(r)&&(o[""]=n)}}function s8(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function o8(n,r,o,c,f){n.data[c]=f;const v=f.factory||(f.factory=tr(f.type)),M=new q2(v,Gr(f),null);n.blueprint[c]=M,o[c]=M,Y4(n,r,0,c,Fo(n,o,f.hostVars,y1),f)}function Bu(n,r,o){const c=bt(r,n),f=L0(o),v=n[10],M=fc(n,ro(n,f,null,o.onPush?64:16,c,r,v,v.createRenderer(c,o),null,null));n[r.index]=M}function ua(n,r,o,c,f,v){const M=bt(n,r);!function Q4(n,r,o,c,f,v,M){if(null==v)f1(n)?n.removeAttribute(r,f,o):r.removeAttribute(f);else{const x=null==M?tt(v):M(v,c||"",f);f1(n)?n.setAttribute(r,f,x,o):o?r.setAttributeNS(o,f,x):r.setAttribute(f,x)}}(r[11],M,v,n.value,o,c,f)}function F6(n,r,o,c,f,v){const M=v[r];if(null!==M){const x=c.setInput;for(let L=0;L<M.length;){const Z=M[L++],Q=M[L++],fe=M[L++];null!==x?c.setInput(o,fe,Z,Q):o[Q]=fe}}}function k3(n,r){let o=null,c=0;for(;c<r.length;){const f=r[c];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===o&&(o=[]),o.push(f,n[f],r[c+1])),c+=2}else c+=2;else c+=4}return o}function a8(n,r,o,c){return new Array(n,!0,!1,r,null,0,c,o,null,null)}function Wu(n,r){const o=Ln(r,n);if(b1(o)){const c=o[1];80&o[2]?Wc(c,o,c.template,o[8]):o[5]>0&&H3(o)}}function H3(n){for(let c=ns(n);null!==c;c=Oa(c))for(let f=10;f<c.length;f++){const v=c[f];if(1024&v[2]){const M=v[1];Wc(M,v,M.template,v[8])}else v[5]>0&&H3(v)}const o=n[1].components;if(null!==o)for(let c=0;c<o.length;c++){const f=Ln(o[c],n);b1(f)&&f[5]>0&&H3(f)}}function U6(n,r){const o=Ln(r,n),c=o[1];(function F3(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(c,o),$c(c,o,o[8])}function fc(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function B6(n){for(;n;){n[2]|=64;const r=Vn(n);if(Ei(n)&&!r)return n;n=r}return null}function U3(n){!function A4(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],c=A2(o),f=c[1];L3(f,c,f.template,o)}}(n[8])}function Ra(n,r,o){$t(0),r(n,o)}const qu=(()=>Promise.resolve(null))();function U0(n){return n[7]||(n[7]=[])}function u8(n){return n.cleanup||(n.cleanup=[])}function h8(n,r){const o=n[9],c=o?o.get(to,null):null;c&&c.handleError(r)}function j0(n,r,o,c,f){for(let v=0;v<o.length;){const M=o[v++],x=o[v++],L=r[M],Z=n.data[M];null!==Z.setInput?Z.setInput(L,f,c,x):L[x]=f}}function Uo(n,r,o){const c=st(r,n);!function fs(n,r,o){f1(n)?n.setValue(r,o):r.textContent=o}(n[11],c,o)}function J4(n,r,o){let c=o?n.styles:null,f=o?n.classes:null,v=0;if(null!==r)for(let M=0;M<r.length;M++){const x=r[M];"number"==typeof x?v=x:1==v?f=ze(f,x):2==v&&(c=ze(c,x+": "+r[++M]+";"))}o?n.styles=c:n.stylesWithoutHost=c,o?n.classes=f:n.classesWithoutHost=f}const B3=new a1("INJECTOR",-1);class p8{get(r,o=mo){if(o===mo){const c=new Error(`NullInjectorError: No provider for ${ve(r)}!`);throw c.name="NullInjectorError",c}return o}}const G0=new a1("Set Injector scope."),e6={},Ku={};let G6;function m8(){return void 0===G6&&(G6=new p8),G6}function $0(n,r=null,o=null,c){const f=g8(n,r,o,c);return f._resolveInjectorDefTypes(),f}function g8(n,r=null,o=null,c){return new j3(n,o,r||m8(),c)}class j3{constructor(r,o,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const v=[];o&&Si(o,x=>this.processProvider(x,r,o)),Si([r],x=>this.processInjectorType(x,[],v)),this.records.set(B3,Zc(void 0,this));const M=this.records.get(G0);this.scope=null!=M?M.value:null,this.source=f||("object"==typeof r?null:ve(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=mo,c=dn.Default){this.assertNotDestroyed();const f=St(this),v=ie(void 0);try{if(!(c&dn.SkipSelf)){let x=this.records.get(r);if(void 0===x){const L=function i6(n){return"function"==typeof n||"object"==typeof n&&n instanceof a1}(r)&&Mn(r);x=L&&this.injectableDefInScope(L)?Zc(G3(r),e6):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(c&dn.Self?m8():this.parent).get(r,o=c&dn.Optional&&o===mo?null:o)}catch(M){if("NullInjectorError"===M.name){if((M[zr]=M[zr]||[]).unshift(ve(r)),f)throw M;return function g2(n,r,o,c){const f=n[zr];throw r[ge]&&f.unshift(r[ge]),n.message=function Cs(n,r,o,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=ve(r);if(Array.isArray(r))f=r.map(ve).join(" -> ");else if("object"==typeof r){let v=[];for(let M in r)if(r.hasOwnProperty(M)){let x=r[M];v.push(M+":"+("string"==typeof x?JSON.stringify(x):ve(x)))}f=`{${v.join(", ")}}`}return`${o}${c?"("+c+")":""}[${f}]: ${n.replace(F,"\n  ")}`}("\n"+n.message,f,o,c),n.ngTokenPath=f,n[zr]=null,n}(M,r,"R3InjectorError",this.source)}throw M}finally{ie(v),St(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((c,f)=>r.push(ve(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new vt(205,!1)}processInjectorType(r,o,c){if(!(r=je(r)))return!1;let f=p1(r);const v=null==f&&r.ngModule||void 0,M=void 0===v?r:v,x=-1!==c.indexOf(M);if(void 0!==v&&(f=p1(v)),null==f)return!1;if(null!=f.imports&&!x){let Q;c.push(M);try{Si(f.imports,fe=>{this.processInjectorType(fe,o,c)&&(void 0===Q&&(Q=[]),Q.push(fe))})}finally{}if(void 0!==Q)for(let fe=0;fe<Q.length;fe++){const{ngModule:Ve,providers:Je}=Q[fe];Si(Je,It=>this.processProvider(It,Ve,Je||Ce))}}this.injectorDefTypes.add(M);const L=tr(M)||(()=>new M);this.records.set(M,Zc(L,e6));const Z=f.providers;if(null!=Z&&!x){const Q=r;Si(Z,fe=>this.processProvider(fe,Q,Z))}return void 0!==v&&void 0!==r.providers}processProvider(r,o,c){let f=Kc(r=je(r))?r:je(r&&r.provide);const v=function v8(n,r,o){return Z0(n)?Zc(void 0,n.useValue):Zc(W0(n),e6)}(r);if(Kc(r)||!0!==r.multi)this.records.get(f);else{let M=this.records.get(f);M||(M=Zc(void 0,e6,!0),M.factory=()=>Tn(M.multi),this.records.set(f,M)),f=r,M.multi.push(r)}this.records.set(f,v)}hydrate(r,o){return o.value===e6&&(o.value=Ku,o.value=o.factory()),"object"==typeof o.value&&o.value&&function y8(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=je(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function G3(n){const r=Mn(n),o=null!==r?r.factory:tr(n);if(null!==o)return o;if(n instanceof a1)throw new vt(204,!1);if(n instanceof Function)return function $3(n){const r=n.length;if(r>0)throw e2(r,"?"),new vt(204,!1);const o=function c1(n){const r=n&&(n[U1]||n[r1]);if(r){const o=function A1(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new vt(204,!1)}function W0(n,r,o){let c;if(Kc(n)){const f=je(n);return tr(f)||G3(f)}if(Z0(n))c=()=>je(n.useValue);else if(function qc(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...Tn(n.deps||[]));else if(function t6(n){return!(!n||!n.useExisting)}(n))c=()=>_n(je(n.useExisting));else{const f=je(n&&(n.useClass||n.provide));if(!function r6(n){return!!n.deps}(n))return tr(f)||G3(f);c=()=>new f(...Tn(n.deps))}return c}function Zc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Z0(n){return null!==n&&"object"==typeof n&&Ge in n}function Kc(n){return"function"==typeof n}let ka=(()=>{class n{static create(o,c){var f;if(Array.isArray(o))return $0({name:""},c,o,"");{const v=null!==(f=o.name)&&void 0!==f?f:"";return $0({name:v},o.parent,o.providers,v)}}}return n.THROW_IF_NOT_FOUND=mo,n.NULL=new p8,n.\u0275prov=an({token:n,providedIn:"any",factory:()=>_n(B3)}),n.__NG_ELEMENT_ID__=-1,n})();function Y3(n,r){l2(A2(n)[1],Bn())}function J3(n){let r=function Q3(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const c=[n];for(;r;){let f;if(Gr(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new vt(903,"");f=r.\u0275dir}if(f){if(o){c.push(f);const M=n;M.inputs=el(n.inputs),M.declaredInputs=el(n.declaredInputs),M.outputs=el(n.outputs);const x=f.hostBindings;x&&nl(n,x);const L=f.viewQuery,Z=f.contentQueries;if(L&&tl(n,L),Z&&n5(n,Z),ue(n.inputs,f.inputs),ue(n.declaredInputs,f.declaredInputs),ue(n.outputs,f.outputs),Gr(f)&&f.data.animation){const Q=n.data;Q.animation=(Q.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let M=0;M<v.length;M++){const x=v[M];x&&x.ngInherit&&x(n),x===J3&&(o=!1)}}r=Object.getPrototypeOf(r)}!function X3(n){let r=0,o=null;for(let c=n.length-1;c>=0;c--){const f=n[c];f.hostVars=r+=f.hostVars,f.hostAttrs=Y2(f.hostAttrs,o=Y2(o,f.hostAttrs))}}(c)}function el(n){return n===i1?{}:n===Ce?[]:n}function tl(n,r){const o=n.viewQuery;n.viewQuery=o?(c,f)=>{r(c,f),o(c,f)}:r}function n5(n,r){const o=n.contentQueries;n.contentQueries=o?(c,f,v)=>{r(c,f,v),o(c,f,v)}:r}function nl(n,r){const o=n.hostBindings;n.hostBindings=o?(c,f)=>{r(c,f),o(c,f)}:r}let s6=null;function ha(){if(!s6){const n=kn.Symbol;if(n&&n.iterator)s6=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const c=r[o];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(s6=c)}}}return s6}function x4(n){return!!fa(n)&&(Array.isArray(n)||!(n instanceof Map)&&ha()in n)}function fa(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Bo(n,r,o){return n[r]=o}function is(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function D4(n,r,o,c){const f=is(n,r,o);return is(n,r+1,c)||f}function ol(n,r,o,c){const f=Ee();return is(f,Yi(),r)&&(Dt(),ua(or(),f,n,r,o,c)),ol}function Qc(n,r,o,c,f,v){const x=D4(n,function Bi(){return gn.lFrame.bindingIndex}(),o,f);return G(2),x?r+tt(o)+c+tt(f)+v:y1}function i3(n,r,o,c,f,v,M,x){const L=Ee(),Z=Dt(),Q=n+20,fe=Z.firstCreatePass?function s5(n,r,o,c,f,v,M,x,L){const Z=r.consts,Q=rs(r,n,4,M||null,L1(Z,x));k6(r,o,Q,L1(Z,L)),l2(r,Q);const fe=Q.tViews=P0(2,Q,c,f,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Z);return null!==r.queries&&(r.queries.template(r,Q),fe.queries=r.queries.embeddedTView(Q)),Q}(Q,Z,L,r,o,c,f,v,M):Z.data[Q];Wr(fe,!1);const Ve=L[11].createComment("");G4(Z,L,Ve,fe),Kr(Ve,L),fc(L,L[Q]=a8(Ve,L,Ve,fe)),hr(fe)&&N0(Z,L,fe),null!=M&&z0(L,fe,x)}function Z6(n){return u1(function ps(){return gn.lFrame.contextLView}(),20+n)}function f6(n,r=dn.Default){const o=Ee();return null===o?_n(n,r):W(Bn(),o,je(n),r)}function Q8(){throw new Error("invalid")}function d6(n,r,o){const c=Ee();return is(c,Yi(),r)&&io(Dt(),or(),c,n,r,c[11],o,!1),d6}function c3(n,r,o,c,f){const M=f?"class":"style";j0(n,o,r.inputs[M],M,c)}function l3(n,r,o,c){const f=Ee(),v=Dt(),M=20+n,x=f[11],L=f[M]=nc(x,r,function N2(){return gn.lFrame.currentNamespace}()),Z=v.firstCreatePass?function J8(n,r,o,c,f,v,M){const x=r.consts,Z=rs(r,n,2,f,L1(x,v));return k6(r,o,Z,L1(x,M)),null!==Z.attrs&&J4(Z,Z.attrs,!1),null!==Z.mergedAttrs&&J4(Z,Z.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Z),Z}(M,v,f,0,r,o,c):v.data[M];Wr(Z,!0);const Q=Z.mergedAttrs;null!==Q&&cs(x,L,Q);const fe=Z.classes;null!==fe&&y4(x,L,fe);const Ve=Z.styles;return null!==Ve&&_0(x,L,Ve),64!=(64&Z.flags)&&G4(v,f,L,Z),0===function M2(){return gn.lFrame.elementDepthCount}()&&Kr(L,f),function Fi(){gn.lFrame.elementDepthCount++}(),hr(Z)&&(N0(v,f,Z),function Yl(n,r,o){if(bi(r)){const f=r.directiveEnd;for(let v=r.directiveStart;v<f;v++){const M=n.data[v];M.contentQueries&&M.contentQueries(1,o[v],v)}}}(v,Z,f)),null!==c&&z0(f,Z),l3}function p6(){let n=Bn();Ui()?as():(n=n.parent,Wr(n,!1));const r=n;!function U(){gn.lFrame.elementDepthCount--}();const o=Dt();return o.firstCreatePass&&(l2(o,n),bi(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function u2(n){return 0!=(16&n.flags)}(r)&&c3(o,r,Ee(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function js(n){return 0!=(32&n.flags)}(r)&&c3(o,r,Ee(),r.stylesWithoutHost,!1),p6}function pl(n,r,o,c){return l3(n,r,o,c),p6(),pl}function ml(){return Ee()}function gl(n){return!!n&&"function"==typeof n.then}function tu(n){return!!n&&"function"==typeof n.subscribe}const vl=tu;function yl(n,r,o,c){const f=Ee(),v=Dt(),M=Bn();return function ru(n,r,o,c,f,v,M,x){const L=hr(c),Q=n.firstCreatePass&&u8(n),fe=r[8],Ve=U0(r);let Je=!0;if(3&c.type||x){const pn=bt(c,r),Nn=x?x(pn):pn,Ot=Ve.length,t1=x?Tr=>x(R(Tr[c.index])):c.index;if(f1(o)){let Tr=null;if(!x&&L&&(Tr=function h5(n,r,o,c){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const M=f[v];if(M===o&&f[v+1]===c){const x=r[7],L=f[v+2];return x.length>L?x[L]:null}"string"==typeof M&&(v+=2)}return null}(n,r,f,c.index)),null!==Tr)(Tr.__ngLastListenerFn__||Tr).__ngNextListenerFn__=v,Tr.__ngLastListenerFn__=v,Je=!1;else{v=_l(c,r,fe,v,!1);const Mi=o.listen(Nn,f,v);Ve.push(v,Mi),Q&&Q.push(f,t1,Ot,Ot+1)}}else v=_l(c,r,fe,v,!0),Nn.addEventListener(f,v,M),Ve.push(v),Q&&Q.push(f,t1,Ot,M)}else v=_l(c,r,fe,v,!1);const It=c.outputs;let qt;if(Je&&null!==It&&(qt=It[f])){const pn=qt.length;if(pn)for(let Nn=0;Nn<pn;Nn+=2){const yc=r[qt[Nn]][qt[Nn+1]].subscribe(v),Wl=Ve.length;Ve.push(v,yc),Q&&Q.push(f,c.index,Wl,-(Wl+1))}}}(v,f,f[11],M,n,r,!!o,c),yl}function f5(n,r,o,c){try{return!1!==o(c)}catch(f){return h8(n,f),!1}}function _l(n,r,o,c,f){return function v(M){if(M===Function)return c;const x=2&n.flags?Ln(n.index,r):r;0==(32&r[2])&&B6(x);let L=f5(r,0,c,M),Z=v.__ngNextListenerFn__;for(;Z;)L=f5(r,0,Z,M)&&L,Z=Z.__ngNextListenerFn__;return f&&!1===L&&(M.preventDefault(),M.returnValue=!1),L}}function iu(n=1){return function vi(n){return(gn.lFrame.contextLView=function kr(n,r){for(;n>0;)r=r[15],n--;return r}(n,gn.lFrame.contextLView))[8]}(n)}function su(n,r){let o=null;const c=function I3(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(0==(1&o))return r[o+1]}return null}(n);for(let f=0;f<r.length;f++){const v=r[f];if("*"!==v){if(null===c?L6(n,v,!0):P6(c,v))return f}else o=f}return o}function Ha(n){const r=Ee()[16][6];if(!r.projection){const c=r.projection=e2(n?n.length:1,null),f=c.slice();let v=r.child;for(;null!==v;){const M=n?su(v,n):0;null!==M&&(f[M]?f[M].projectionNext=v:c[M]=v,f[M]=v),v=v.next}}}function d5(n,r=0,o){const c=Ee(),f=Dt(),v=rs(f,20+n,16,null,o||null);null===v.projection&&(v.projection=r),as(),64!=(64&v.flags)&&function $4(n,r,o){W4(r[11],0,r,o,h0(n,o,r),m0(o.parent||r[6],o,r))}(f,c,v)}function u3(n,r,o,c,f){const v=n[o+1],M=null===r;let x=c?Ci(v):Co(v),L=!1;for(;0!==x&&(!1===L||M);){const Q=n[x+1];p5(n[x],r)&&(L=!0,n[x+1]=c?Z4(Q):cc(Q)),x=c?Ci(Q):Co(Q)}L&&(n[o+1]=c?cc(v):Z4(v))}function p5(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&fo(n,r)>=0}function m6(n,r){return function pa(n,r,o,c){const f=Ee(),v=Dt(),M=G(2);v.firstUpdatePass&&function g6(n,r,o,c){const f=n.data;if(null===f[o+1]){const v=f[cr()],M=function Tl(n,r){return r>=n.expandoStartIndex}(n,o);(function gu(n,r){return 0!=(n.flags&(r?16:32))})(v,c)&&null===r&&!M&&(r=!1),r=function n4(n,r,o,c){const f=function Mt(n){const r=gn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let v=c?r.residualClasses:r.residualStyles;if(null===f)0===(c?r.classBindings:r.styleBindings)&&(o=v6(o=Nl(null,n,r,o,c),r.attrs,c),v=null);else{const M=r.directiveStylingLast;if(-1===M||n[M]!==f)if(o=Nl(f,n,r,o,c),null===v){let L=function g5(n,r,o){const c=o?r.classBindings:r.styleBindings;if(0!==Co(c))return n[Ci(c)]}(n,r,c);void 0!==L&&Array.isArray(L)&&(L=Nl(null,n,r,L[1],c),L=v6(L,r.attrs,c),function v5(n,r,o,c){n[Ci(o?r.classBindings:r.styleBindings)]=c}(n,r,c,L))}else v=function y5(n,r,o){let c;const f=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<f;v++)c=v6(c,n[v].hostAttrs,o);return v6(c,r.attrs,o)}(n,r,c)}return void 0!==v&&(c?r.residualClasses=v:r.residualStyles=v),o}(f,v,r,c),function J6(n,r,o,c,f,v){let M=v?r.classBindings:r.styleBindings,x=Ci(M),L=Co(M);n[c]=o;let Q,Z=!1;if(Array.isArray(o)){const fe=o;Q=fe[1],(null===Q||fo(fe,Q)>0)&&(Z=!0)}else Q=o;if(f)if(0!==L){const Ve=Ci(n[x+1]);n[c+1]=ko(Ve,x),0!==Ve&&(n[Ve+1]=Uc(n[Ve+1],c)),n[x+1]=function Hs(n,r){return 131071&n|r<<17}(n[x+1],c)}else n[c+1]=ko(x,0),0!==x&&(n[x+1]=Uc(n[x+1],c)),x=c;else n[c+1]=ko(L,0),0===x?x=c:n[L+1]=Uc(n[L+1],c),L=c;Z&&(n[c+1]=cc(n[c+1])),u3(n,Q,c,!0),u3(n,Q,c,!1),function lu(n,r,o,c,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof r&&fo(v,r)>=0&&(o[c+1]=Z4(o[c+1]))}(r,Q,n,c,v),M=ko(x,L),v?r.classBindings=M:r.styleBindings=M}(f,v,r,o,M,c)}}(v,n,M,c),r!==y1&&is(f,M,r)&&function pu(n,r,o,c,f,v,M,x){if(!(3&r.type))return;const L=n.data,Z=L[x+1];t0(function x0(n){return 1==(1&n)}(Z)?mu(L,r,o,f,Co(Z),M):void 0)||(t0(v)||function y2(n){return 2==(2&n)}(Z)&&(v=mu(L,null,o,f,x,M)),function y0(n,r,o,c,f){const v=f1(n);if(r)f?v?n.addClass(o,c):o.classList.add(c):v?n.removeClass(o,c):o.classList.remove(c);else{let M=-1===c.indexOf("-")?void 0:ne.DashCase;if(null==f)v?n.removeStyle(o,c,M):o.style.removeProperty(c);else{const x="string"==typeof f&&f.endsWith("!important");x&&(f=f.slice(0,-10),M|=ne.Important),v?n.setStyle(o,c,f,M):o.style.setProperty(c,f,x?"important":"")}}}(c,M,st(cr(),o),f,v))}(v,v.data[cr()],f,f[11],n,f[M+1]=function C5(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=ve(Ms(n)))),n}(r,o),c,M)}(n,r,null,!0),m6}function Nl(n,r,o,c,f){let v=null;const M=o.directiveEnd;let x=o.directiveStylingLast;for(-1===x?x=o.directiveStart:x++;x<M&&(v=r[x],c=v6(c,v.hostAttrs,f),v!==n);)x++;return null!==n&&(o.directiveStylingLast=x),c}function v6(n,r,o){const c=o?1:2;let f=-1;if(null!==r)for(let v=0;v<r.length;v++){const M=r[v];"number"==typeof M?f=M:f===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),m2(n,M,!!o||r[++v]))}return void 0===n?null:n}function mu(n,r,o,c,f,v){const M=null===r;let x;for(;f>0;){const L=n[f],Z=Array.isArray(L),Q=Z?L[1]:L,fe=null===Q;let Ve=o[f+1];Ve===y1&&(Ve=fe?Ce:void 0);let Je=fe?Oi(Ve,c):Q===c?Ve:void 0;if(Z&&!t0(Je)&&(Je=Oi(L,c)),t0(Je)&&(x=Je,M))return x;const It=n[f+1];f=M?Ci(It):Co(It)}if(null!==r){let L=v?r.residualClasses:r.residualStyles;null!=L&&(x=Oi(L,c))}return x}function t0(n){return void 0!==n}function zl(n,r=""){const o=Ee(),c=Dt(),f=n+20,v=c.firstCreatePass?rs(c,f,1,r,null):c.data[f],M=o[f]=function As(n,r){return f1(n)?n.createText(r):n.createTextNode(r)}(o[11],r);G4(c,o,M,v),Wr(v,!1)}function d3(n){return n0("",n,""),d3}function n0(n,r,o){const c=Ee(),f=function o6(n,r,o,c){return is(n,Yi(),o)?r+tt(o)+c:y1}(c,n,r,o);return f!==y1&&Uo(c,cr(),f),n0}function p3(n,r,o,c,f){const v=Ee(),M=Qc(v,n,r,o,c,f);return M!==y1&&Uo(v,cr(),M),p3}function g3(n,r,o){const c=Ee();return is(c,Yi(),r)&&io(Dt(),or(),c,n,r,c[11],o,!0),g3}const ma=void 0;var O5=["en",[["a","p"],["AM","PM"],ma],[["AM","PM"],ma,ma],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ma,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ma,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ma,"{1} 'at' {0}",ma],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Rl(n){const o=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===c?1:5}];let _6={};function C6(n){const r=function Fs(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=Hl(r);if(o)return o;const c=r.split("-")[0];if(o=Hl(c),o)return o;if("en"===c)return O5;throw new Error(`Missing locale data for the locale "${n}".`)}function kl(n){return C6(n)[Sn.PluralCase]}function Hl(n){return n in _6||(_6[n]=kn.ng&&kn.ng.common&&kn.ng.common.locales&&kn.ng.common.locales[n]),_6[n]}var Sn=(()=>((Sn=Sn||{})[Sn.LocaleId=0]="LocaleId",Sn[Sn.DayPeriodsFormat=1]="DayPeriodsFormat",Sn[Sn.DayPeriodsStandalone=2]="DayPeriodsStandalone",Sn[Sn.DaysFormat=3]="DaysFormat",Sn[Sn.DaysStandalone=4]="DaysStandalone",Sn[Sn.MonthsFormat=5]="MonthsFormat",Sn[Sn.MonthsStandalone=6]="MonthsStandalone",Sn[Sn.Eras=7]="Eras",Sn[Sn.FirstDayOfWeek=8]="FirstDayOfWeek",Sn[Sn.WeekendRange=9]="WeekendRange",Sn[Sn.DateFormat=10]="DateFormat",Sn[Sn.TimeFormat=11]="TimeFormat",Sn[Sn.DateTimeFormat=12]="DateTimeFormat",Sn[Sn.NumberSymbols=13]="NumberSymbols",Sn[Sn.NumberFormats=14]="NumberFormats",Sn[Sn.CurrencyCode=15]="CurrencyCode",Sn[Sn.CurrencySymbol=16]="CurrencySymbol",Sn[Sn.CurrencyName=17]="CurrencyName",Sn[Sn.Currencies=18]="Currencies",Sn[Sn.Directionality=19]="Directionality",Sn[Sn.PluralCase=20]="PluralCase",Sn[Sn.ExtraData=21]="ExtraData",Sn))();const r4="en-US";let i4=r4;function wh(n,r,o,c,f){if(n=je(n),Array.isArray(n))for(let v=0;v<n.length;v++)wh(n[v],r,o,c,f);else{const v=Dt(),M=Ee();let x=Kc(n)?n:je(n.provide),L=W0(n);const Z=Bn(),Q=1048575&Z.providerIndexes,fe=Z.directiveStart,Ve=Z.providerIndexes>>20;if(Kc(n)||!n.multi){const Je=new q2(L,f,f6),It=bh(x,r,f?Q:Q+Ve,fe);-1===It?(E(Y1(Z,M),v,x),Mh(v,n,r.length),r.push(x),Z.directiveStart++,Z.directiveEnd++,f&&(Z.providerIndexes+=1048576),o.push(Je),M.push(Je)):(o[It]=Je,M[It]=Je)}else{const Je=bh(x,r,Q+Ve,fe),It=bh(x,r,Q,Q+Ve),qt=Je>=0&&o[Je],pn=It>=0&&o[It];if(f&&!pn||!f&&!qt){E(Y1(Z,M),v,x);const Nn=function fd(n,r,o,c,f){const v=new q2(n,o,f6);return v.multi=[],v.index=r,v.componentProviders=0,_7(v,f,c&&!o),v}(f?hd:ud,o.length,f,c,L);!f&&pn&&(o[It].providerFactory=Nn),Mh(v,n,r.length,0),r.push(x),Z.directiveStart++,Z.directiveEnd++,f&&(Z.providerIndexes+=1048576),o.push(Nn),M.push(Nn)}else Mh(v,n,Je>-1?Je:It,_7(o[f?It:Je],L,!f&&c));!f&&c&&pn&&o[It].componentProviders++}}}function Mh(n,r,o,c){const f=Kc(r),v=function n6(n){return!!n.useClass}(r);if(f||v){const L=(v?je(r.useClass):r).prototype.ngOnDestroy;if(L){const Z=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const Q=Z.indexOf(o);-1===Q?Z.push(o,[c,L]):Z[Q+1].push(c,L)}else Z.push(o,L)}}}function _7(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function bh(n,r,o,c){for(let f=o;f<c;f++)if(r[f]===n)return f;return-1}function ud(n,r,o,c){return Eh(this.multi,[])}function hd(n,r,o,c){const f=this.multi;let v;if(this.providerFactory){const M=this.providerFactory.componentProviders,x=Qn(o,o[1],this.providerFactory.index,c);v=x.slice(0,M),Eh(f,v);for(let L=M;L<x.length;L++)v.push(x[L])}else v=[],Eh(f,v);return v}function Eh(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function C7(n,r=[]){return o=>{o.providersResolver=(c,f)=>function ld(n,r,o){const c=Dt();if(c.firstCreatePass){const f=Gr(n);wh(o,c.data,c.blueprint,f,!0),wh(r,c.data,c.blueprint,f,!1)}}(c,f?f(n):n,r)}}class w7{}class md{resolveComponentFactory(r){throw function pd(n){const r=Error(`No component factory found for ${ve(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let lh=(()=>{class n{}return n.NULL=new md,n})();function gd(){return Pu(Bn(),Ee())}function Pu(n,r){return new B5(bt(n,r))}let B5=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=gd,n})();function vd(n){return n instanceof B5?n.nativeElement:n}class b7{}let yd=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Cd(){const n=Ee(),o=Ln(Bn().index,n);return function _d(n){return n[11]}(er(o)?o:n)}(),n})(),wd=(()=>{class n{}return n.\u0275prov=an({token:n,providedIn:"root",factory:()=>null}),n})();class E7{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const I7=new E7("13.3.11"),Ih={};function uh(n,r,o,c,f=!1){for(;null!==o;){const v=r[o.index];if(null!==v&&c.push(R(v)),Nr(v))for(let x=10;x<v.length;x++){const L=v[x],Z=L[1].firstChild;null!==Z&&uh(L[1],L,Z,c)}const M=o.type;if(8&M)uh(n,r,o.child,c);else if(32&M){const x=gt(o,r);let L;for(;L=x();)c.push(L)}else if(16&M){const x=Rs(r,o);if(Array.isArray(x))c.push(...x);else{const L=Vn(r[16]);uh(L[1],L,x,c,!0)}}o=f?o.projectionNext:o.next}return c}class j5{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return uh(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Nr(r)){const o=r[8],c=o?o.indexOf(this):-1;c>-1&&(Vc(r,c),ho(o,c))}this._attachedToViewContainer=!1}D6(this._lView[1],this._lView)}onDestroy(r){E4(this._lView[1],this._lView,null,r)}markForCheck(){B6(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function j6(n,r,o){const c=r[10];c.begin&&c.begin();try{Wc(n,r,n.template,o)}catch(f){throw h8(r,f),f}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new vt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function S2(n,r){ic(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new vt(902,"");this._appRef=r}}class Md extends j5{constructor(r){super(r),this._view=r}detectChanges(){U3(this._view)}checkNoChanges(){}get context(){return null}}class A7 extends lh{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Re(r);return new Ah(o,this.ngModule)}}function x7(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class Ah extends w7{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function A3(n){return n.map(ac).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return x7(this.componentDef.inputs)}get outputs(){return x7(this.componentDef.outputs)}create(r,o,c,f){const v=(f=f||this.ngModule)?function Ed(n,r){return{get:(o,c,f)=>{const v=n.get(o,Ih,f);return v!==Ih||c===Ih?v:r.get(o,c,f)}}}(r,f.injector):r,M=v.get(b7,k),x=v.get(wd,null),L=M.createRenderer(null,this.componentDef),Z=this.componentDef.selectors[0][0]||"div",Q=c?function Xl(n,r,o){if(f1(n))return n.selectRootElement(r,o===Gt.ShadowDom);let c="string"==typeof r?n.querySelector(r):r;return c.textContent="",c}(L,c,this.componentDef.encapsulation):nc(M.createRenderer(null,this.componentDef),Z,function bd(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Z)),fe=this.componentDef.onPush?576:528,Ve=function J0(n,r){return{components:[],scheduler:n||Ri,clean:qu,playerHandler:r||null,flags:0}}(),Je=P0(0,null,null,1,0,null,null,null,null,null),It=ro(null,Je,Ve,fe,null,null,M,L,x,v);let qt,pn;e1(It);try{const Nn=function Q0(n,r,o,c,f,v){const M=o[1];o[20]=n;const L=rs(M,20,2,"#host",null),Z=L.mergedAttrs=r.hostAttrs;null!==Z&&(J4(L,Z,!0),null!==n&&(cs(f,n,Z),null!==L.classes&&y4(f,n,L.classes),null!==L.styles&&_0(f,n,L.styles)));const Q=c.createRenderer(n,r),fe=ro(o,L0(r),null,r.onPush?64:16,o[20],L,c,Q,v||null,null);return M.firstCreatePass&&(E(Y1(L,o),M,r.type),R3(M,L),s8(L,o.length,1)),fc(o,fe),o[20]=fe}(Q,this.componentDef,It,M,L);if(Q)if(c)cs(L,Q,["ng-version",I7.full]);else{const{attrs:Ot,classes:t1}=function E0(n){const r=[],o=[];let c=1,f=2;for(;c<n.length;){let v=n[c];if("string"==typeof v)2===f?""!==v&&r.push(v,n[++c]):8===f&&o.push(v);else{if(!ks(f))break;f=v}c++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);Ot&&cs(L,Q,Ot),t1&&t1.length>0&&y4(L,Q,t1.join(" "))}if(pn=En(Je,20),void 0!==o){const Ot=pn.projection=[];for(let t1=0;t1<this.ngContentSelectors.length;t1++){const Tr=o[t1];Ot.push(null!=Tr?Array.from(Tr):null)}}qt=function x8(n,r,o,c,f){const v=o[1],M=function r8(n,r,o){const c=Bn();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),o8(n,c,r,Fo(n,r,1,null),o));const f=Qn(r,n,c.directiveStart,c);Kr(f,r);const v=bt(c,r);return v&&Kr(v,r),f}(v,o,r);if(c.components.push(M),n[8]=M,f&&f.forEach(L=>L(M,r)),r.contentQueries){const L=Bn();r.contentQueries(1,M,L.directiveStart)}const x=Bn();return!v.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(ci(x.index),Y4(o[1],x,0,x.directiveStart,x.directiveEnd,r),H0(r,M)),M}(Nn,this.componentDef,It,Ve,[Y3]),$c(Je,It,null)}finally{fr()}return new Ad(this.componentType,qt,Pu(pn,It),It,pn)}}class Ad extends class dd{}{constructor(r,o,c,f,v){super(),this.location=c,this._rootLView=f,this._tNode=v,this.instance=o,this.hostView=this.changeDetectorRef=new Md(f),this.componentType=r}get injector(){return new o1(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Ou{}class D7{}const Vu=new Map;class N7 extends Ou{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new A7(this);const c=yn(r);this._bootstrapComponents=C(c.bootstrap),this._r3Injector=g8(r,o,[{provide:Ou,useValue:this},{provide:lh,useValue:this.componentFactoryResolver}],ve(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=ka.THROW_IF_NOT_FOUND,c=dn.Default){return r===ka||r===Ou||r===B3?this:this._r3Injector.get(r,o,c)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class xh extends D7{constructor(r){super(),this.moduleType=r,null!==yn(r)&&function Dd(n){const r=new Set;!function o(c){const f=yn(c,!0),v=f.id;null!==v&&(function S7(n,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${n} - ${ve(r)} vs ${ve(r.name)}`)}(v,Vu.get(v),c),Vu.set(v,c));const M=C(f.imports);for(const x of M)r.has(x)||(r.add(x),o(x))}(n)}(r)}create(r){return new N7(this.moduleType,r)}}function z7(n,r,o){const c=Rr()+n,f=Ee();return f[c]===y1?Bo(f,c,o?r.call(o):r()):function W6(n,r){return n[r]}(f,c)}function L7(n,r,o,c){return function P7(n,r,o,c,f,v){const M=r+o;return is(n,M,f)?Bo(n,M+1,v?c.call(v,f):c(f)):G5(n,M+1)}(Ee(),Rr(),n,r,o,c)}function G5(n,r){const o=n[r];return o===y1?void 0:o}function V7(n,r,o,c,f,v,M,x){const L=r+o;return function X0(n,r,o,c,f){const v=D4(n,r,o,c);return is(n,r+2,f)||v}(n,L,f,v,M)?Bo(n,L+3,x?c.call(x,f,v,M):c(f,v,M)):G5(n,L+3)}function H7(n,r){const o=Dt();let c;const f=n+20;o.firstCreatePass?(c=function Rd(n,r){if(r)for(let o=r.length-1;o>=0;o--){const c=r[o];if(n===c.name)return c}}(r,o.pipeRegistry),o.data[f]=c,c.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(f,c.onDestroy)):c=o.data[f];const v=c.factory||(c.factory=tr(c.type)),M=ie(f6);try{const x=Hr(!1),L=v();return Hr(x),function L8(n,r,o,c){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=c}(o,Ee(),f,L),L}finally{ie(M)}}function F7(n,r,o,c,f){const v=n+20,M=Ee(),x=u1(M,v);return function $5(n,r){return n[1].data[r].pure}(M,v)?V7(M,Rr(),r,x.transform,o,c,f,x):x.transform(o,c,f)}function Dh(n){return r=>{setTimeout(n,void 0,r)}}const b6=class Bd extends y.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,c){var f,v,M;let x=r,L=o||(()=>null),Z=c;if(r&&"object"==typeof r){const fe=r;x=null===(f=fe.next)||void 0===f?void 0:f.bind(fe),L=null===(v=fe.error)||void 0===v?void 0:v.bind(fe),Z=null===(M=fe.complete)||void 0===M?void 0:M.bind(fe)}this.__isAsync&&(L=Dh(L),x&&(x=Dh(x)),Z&&(Z=Dh(Z)));const Q=super.subscribe({next:x,error:L,complete:Z});return r instanceof D.w0&&r.add(Q),Q}};function jd(){return this._results[ha()]()}class Sh{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=ha(),c=Sh.prototype;c[o]||(c[o]=jd)}get changes(){return this._changes||(this._changes=new b6)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const c=this;c.dirty=!1;const f=Xe(r);(this._changesDetected=!function Ba(n,r,o){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let f=n[c],v=r[c];if(o&&(f=o(f),v=o(v)),v!==f)return!1}return!0}(c._results,f,o))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let W5=(()=>{class n{}return n.__NG_ELEMENT_ID__=Wd,n})();const Gd=W5,$d=class extends Gd{constructor(r,o,c){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=c}createEmbeddedView(r){const o=this._declarationTContainer.tViews,c=ro(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(c[19]=v.createEmbeddedView(o)),$c(o,c,r),new j5(c)}};function Wd(){return hh(Bn(),Ee())}function hh(n,r){return 4&n.type?new $d(r,n,Pu(n,r)):null}let fh=(()=>{class n{}return n.__NG_ELEMENT_ID__=Zd,n})();function Zd(){return j7(Bn(),Ee())}const qd=fh,U7=class extends qd{constructor(r,o,c){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=c}get element(){return Pu(this._hostTNode,this._hostLView)}get injector(){return new o1(this._hostTNode,this._hostLView)}get parentInjector(){const r=A(this._hostTNode,this._hostLView);if(ls(r)){const o=us(r,this._hostLView),c=ms(r);return new o1(o[1].data[c+8],o)}return new o1(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=B7(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,c){const f=r.createEmbeddedView(o||{});return this.insert(f,c),f}createComponent(r,o,c,f,v){const M=r&&!function Zo(n){return"function"==typeof n}(r);let x;if(M)x=o;else{const fe=o||{};x=fe.index,c=fe.injector,f=fe.projectableNodes,v=fe.ngModuleRef}const L=M?r:new Ah(Re(r)),Z=c||this.parentInjector;if(!v&&null==L.ngModule){const Ve=(M?Z:this.parentInjector).get(Ou,null);Ve&&(v=Ve)}const Q=L.create(Z,f,void 0,v);return this.insert(Q.hostView,x),Q}insert(r,o){const c=r._lView,f=c[1];if(function S1(n){return Nr(n[3])}(c)){const Q=this.indexOf(r);if(-1!==Q)this.detach(Q);else{const fe=c[3],Ve=new U7(fe,fe[6],fe[3]);Ve.detach(Ve.indexOf(r))}}const v=this._adjustIndex(o),M=this._lContainer;!function xs(n,r,o,c){const f=10+c,v=o.length;c>0&&(o[f-1][4]=r),c<v-10?(r[4]=o[f],Xi(o,10+c,r)):(o.push(r),r[4]=null),r[3]=o;const M=r[17];null!==M&&o!==M&&function _o(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(M,r);const x=r[19];null!==x&&x.insertView(n),r[2]|=128}(f,c,M,v);const x=N6(v,M),L=c[11],Z=j4(L,M[7]);return null!==Z&&function Pc(n,r,o,c,f,v){c[0]=f,c[6]=r,ic(n,c,o,1,f,v)}(f,M[6],L,c,Z,x),r.attachToViewContainerRef(),Xi(Th(M),v,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=B7(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),c=Vc(this._lContainer,o);c&&(ho(Th(this._lContainer),o),D6(c[1],c))}detach(r){const o=this._adjustIndex(r,-1),c=Vc(this._lContainer,o);return c&&null!=ho(Th(this._lContainer),o)?new j5(c):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function B7(n){return n[8]}function Th(n){return n[8]||(n[8]=[])}function j7(n,r){let o;const c=r[n.index];if(Nr(c))o=c;else{let f;if(8&n.type)f=R(c);else{const v=r[11];f=v.createComment("");const M=bt(n,r);rc(v,j4(v,M),f,function E3(n,r){return f1(n)?n.nextSibling(r):r.nextSibling}(v,M),!1)}r[n.index]=o=a8(c,r,f,n),fc(r,o)}return new U7(o,n,r)}class Nh{constructor(r){this.queryList=r,this.matches=null}clone(){return new Nh(this.queryList)}setDirty(){this.queryList.setDirty()}}class zh{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const c=null!==r.contentQueries?r.contentQueries[0]:o.length,f=[];for(let v=0;v<c;v++){const M=o.getByIndex(v);f.push(this.queries[M.indexInDeclarationView].clone())}return new zh(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==Q7(r,o).matches&&this.queries[o].setDirty()}}class G7{constructor(r,o,c=null){this.predicate=r,this.flags=o,this.read=c}}class Lh{constructor(r=[]){this.queries=r}elementStart(r,o){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let c=0;c<this.length;c++){const f=null!==o?o.length:0,v=this.getByIndex(c).embeddedTView(r,f);v&&(v.indexInDeclarationView=c,null!==o?o.push(v):o=[v])}return null!==o?new Lh(o):null}template(r,o){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Ph{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new Ph(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==o;)c=c.parent;return o===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const v=c[f];this.matchTNodeWithReadOption(r,o,Qd(o,v)),this.matchTNodeWithReadOption(r,o,rn(o,r,v,!1,!1))}else c===W5?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,rn(o,r,c,!1,!1))}matchTNodeWithReadOption(r,o,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===B5||f===fh||f===W5&&4&o.type)this.addMatch(o.index,-2);else{const v=rn(o,r,f,!1,!1);null!==v&&this.addMatch(o.index,v)}else this.addMatch(o.index,c)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function Qd(n,r){const o=n.localNames;if(null!==o)for(let c=0;c<o.length;c+=2)if(o[c]===r)return o[c+1];return null}function Xd(n,r,o,c){return-1===o?function Jd(n,r){return 11&n.type?Pu(n,r):4&n.type?hh(n,r):null}(r,n):-2===o?function e9(n,r,o){return o===B5?Pu(r,n):o===W5?hh(r,n):o===fh?j7(r,n):void 0}(n,r,c):Qn(n,n[1],o,r)}function $7(n,r,o,c){const f=r[19].queries[c];if(null===f.matches){const v=n.data,M=o.matches,x=[];for(let L=0;L<M.length;L+=2){const Z=M[L];x.push(Z<0?null:Xd(r,v[Z],M[L+1],o.metadata.read))}f.matches=x}return f.matches}function Oh(n,r,o,c){const f=n.queries.getByIndex(o),v=f.matches;if(null!==v){const M=$7(n,r,f,o);for(let x=0;x<v.length;x+=2){const L=v[x];if(L>0)c.push(M[x/2]);else{const Z=v[x+1],Q=r[-L];for(let fe=10;fe<Q.length;fe++){const Ve=Q[fe];Ve[17]===Ve[3]&&Oh(Ve[1],Ve,Z,c)}if(null!==Q[9]){const fe=Q[9];for(let Ve=0;Ve<fe.length;Ve++){const Je=fe[Ve];Oh(Je[1],Je,Z,c)}}}}}return c}function W7(n){const r=Ee(),o=Dt(),c=Ct();$t(c+1);const f=Q7(o,c);if(n.dirty&&$n(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?Oh(o,r,c,[]):$7(o,r,f,c);n.reset(v,vd),n.notifyOnChanges()}return!0}return!1}function Z7(n,r,o,c){const f=Dt();if(f.firstCreatePass){const v=Bn();(function Y7(n,r,o){null===n.queries&&(n.queries=new Lh),n.queries.track(new Ph(r,o))})(f,new G7(r,o,c),v.index),function r9(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(f,n),2==(2&o)&&(f.staticContentQueries=!0)}!function K7(n,r,o){const c=new Sh(4==(4&o));E4(n,r,c,c.destroy),null===r[19]&&(r[19]=new zh),r[19].queries.push(new Nh(c))}(f,Ee(),o)}function q7(){return function n9(n,r){return n[19].queries[r].queryList}(Ee(),Ct())}function Q7(n,r){return n.queries.getByIndex(r)}function mh(...n){}const mf=new a1("Application Initializer");let Uh=(()=>{class n{constructor(o){this.appInits=o,this.resolve=mh,this.reject=mh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const o=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(gl(v))o.push(v);else if(vl(v)){const M=new Promise((x,L)=>{v.subscribe({complete:x,error:L})});o.push(M)}}Promise.all(o).then(()=>{c()}).catch(f=>{this.reject(f)}),0===o.length&&c(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(_n(mf,8))},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const gf=new a1("AppId",{providedIn:"root",factory:function vf(){return`${Bh()}${Bh()}${Bh()}`}});function Bh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yf=new a1("Platform Initializer"),w9=new a1("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_f=new a1("appBootstrapListener");let M9=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const jh=new a1("LocaleId",{providedIn:"root",factory:()=>H1(jh,dn.Optional|dn.SkipSelf)||function b9(){return"undefined"!=typeof $localize&&$localize.locale||r4}()}),E9=new a1("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class I9{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let A9=(()=>{class n{compileModuleSync(o){return new xh(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const c=this.compileModuleSync(o),v=C(yn(o).declarations).reduce((M,x)=>{const L=Re(x);return L&&M.push(new Ah(L)),M},[]);return new I9(c,v)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const D9=(()=>Promise.resolve(0))();function Gh(n){"undefined"==typeof Zone?D9.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class O4{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new b6(!1),this.onMicrotaskEmpty=new b6(!1),this.onStable=new b6(!1),this.onError=new b6(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&o,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function S9(){let n=kn.requestAnimationFrame,r=kn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function z9(n){const r=()=>{!function N9(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(kn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Wh(n),n.isCheckStableRunning=!0,$h(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Wh(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,c,f,v,M,x)=>{try{return Cf(n),o.invokeTask(f,v,M,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&r(),wf(n)}},onInvoke:(o,c,f,v,M,x,L)=>{try{return Cf(n),o.invoke(f,v,M,x,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),wf(n)}},onHasTask:(o,c,f,v)=>{o.hasTask(f,v),c===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,Wh(n),$h(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(o,c,f,v)=>(o.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!O4.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(O4.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,c){return this._inner.run(r,o,c)}runTask(r,o,c,f){const v=this._inner,M=v.scheduleEventTask("NgZoneEvent: "+f,r,T9,mh,mh);try{return v.runTask(M,o,c)}finally{v.cancelTask(M)}}runGuarded(r,o,c){return this._inner.runGuarded(r,o,c)}runOutsideAngular(r){return this._outer.run(r)}}const T9={};function $h(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Wh(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Cf(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function wf(n){n._nesting--,$h(n)}class L9{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new b6,this.onMicrotaskEmpty=new b6,this.onStable=new b6,this.onError=new b6}run(r,o,c){return r.apply(o,c)}runGuarded(r,o,c){return r.apply(o,c)}runOutsideAngular(r){return r()}runTask(r,o,c,f){return r.apply(o,c)}}let Mf=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{O4.assertNotInAngularZone(),Gh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Gh(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(o)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,c,f){let v=-1;c&&c>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(M=>M.timeoutId!==v),o(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:o,timeoutId:v,updateCb:f})}whenStable(o,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,c,f){return[]}}return n.\u0275fac=function(o){return new(o||n)(_n(O4))},n.\u0275prov=an({token:n,factory:n.\u0275fac}),n})(),P9=(()=>{class n{constructor(){this._applications=new Map,Zh.addToWindow(this)}registerApplication(o,c){this._applications.set(o,c)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,c=!0){return Zh.findTestabilityInTree(this,o,c)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();class O9{addToWindow(r){}findTestabilityInTree(r,o,c){return null}}function V9(n){Zh=n}let Zh=new O9,Gl=null;const bf=new a1("AllowMultipleToken"),Ef=new a1("PlatformOnDestroy");class H9{constructor(r,o){this.name=r,this.token=o}}function If(n,r,o=[]){const c=`Platform: ${r}`,f=new a1(c);return(v=[])=>{let M=qh();if(!M||M.injector.get(bf,!1)){const x=[...o,...v,{provide:f,useValue:!0}];n?n(x):function F9(n){if(Gl&&!Gl.get(bf,!1))throw new vt(400,"");Gl=n;const r=n.get(Af),o=n.get(yf,null);o&&o.forEach(c=>c())}(function B9(n=[],r){return ka.create({name:r,providers:[{provide:G0,useValue:"platform"},{provide:Ef,useValue:()=>Gl=null},...n]})}(x,c))}return function U9(n){const r=qh();if(!r)throw new vt(401,"");return r}()}}function qh(){var n;return null!==(n=null==Gl?void 0:Gl.get(Af))&&void 0!==n?n:null}let Af=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,c){const x=function j9(n,r){let o;return o="noop"===n?new L9:("zone.js"===n?void 0:n)||new O4({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),L=[{provide:O4,useValue:x}];return x.run(()=>{const Z=ka.create({providers:L,parent:this.injector,name:o.moduleType.name}),Q=o.create(Z),fe=Q.injector.get(to,null);if(!fe)throw new vt(402,"");return x.runOutsideAngular(()=>{const Ve=x.onError.subscribe({next:Je=>{fe.handleError(Je)}});Q.onDestroy(()=>{Yh(this._modules,Q),Ve.unsubscribe()})}),function G9(n,r,o){try{const c=o();return gl(c)?c.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(fe,x,()=>{const Ve=Q.injector.get(Uh);return Ve.runInitializers(),Ve.donePromise.then(()=>(function Fl(n){Qt(n,"Expected localeId to be defined"),"string"==typeof n&&(i4=n.toLowerCase().replace(/_/g,"-"))}(Q.injector.get(jh,r4)||r4),this._moduleDoBootstrap(Q),Q))})})}bootstrapModule(o,c=[]){const f=xf({},c);return function R9(n,r,o){const c=new xh(o);return Promise.resolve(c)}(0,0,o).then(v=>this.bootstrapModuleFactory(v,f))}_moduleDoBootstrap(o){const c=o.injector.get(Kh);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!o.instance.ngDoBootstrap)throw new vt(403,"");o.instance.ngDoBootstrap(c)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new vt(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const o=this._injector.get(Ef,null);null==o||o(),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(_n(ka))},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function xf(n,r){return Array.isArray(r)?r.reduce(xf,n):Object.assign(Object.assign({},n),r)}let Kh=(()=>{class n{constructor(o,c,f,v){this._zone=o,this._injector=c,this._exceptionHandler=f,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const M=new te.y(L=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{L.next(this._stable),L.complete()})}),x=new te.y(L=>{let Z;this._zone.runOutsideAngular(()=>{Z=this._zone.onStable.subscribe(()=>{O4.assertNotInAngularZone(),Gh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,L.next(!0))})})});const Q=this._zone.onUnstable.subscribe(()=>{O4.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{L.next(!1)}))});return()=>{Z.unsubscribe(),Q.unsubscribe()}});this.isStable=(0,Le.T)(M,x.pipe((0,De.B)()))}bootstrap(o,c){if(!this._initStatus.done)throw new vt(405,"");let f;f=o instanceof w7?o:this._injector.get(lh).resolveComponentFactory(o),this.componentTypes.push(f.componentType);const v=function k9(n){return n.isBoundToModule}(f)?void 0:this._injector.get(Ou),x=f.create(ka.NULL,[],c||f.selector,v),L=x.location.nativeElement,Z=x.injector.get(Mf,null),Q=Z&&x.injector.get(P9);return Z&&Q&&Q.registerApplication(L,Z),x.onDestroy(()=>{this.detachView(x.hostView),Yh(this.components,x),Q&&Q.unregisterApplication(L)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new vt(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const c=o;this._views.push(c),c.attachToAppRef(this)}detachView(o){const c=o;Yh(this._views,c),c.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(_f,[]).concat(this._bootstrapListeners).forEach(f=>f(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(_n(O4),_n(ka),_n(to),_n(Uh))},n.\u0275prov=an({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Yh(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let Sf=!0,Tf=!1;function W9(){return Tf=!0,Sf}function Z9(){if(Tf)throw new Error("Cannot enable prod mode after platform setup.");Sf=!1}let q9=(()=>{class n{}return n.__NG_ELEMENT_ID__=K9,n})();function K9(n){return function Y9(n,r,o){if(r2(n)&&!o){const c=Ln(n.index,r);return new j5(c,c)}return 47&n.type?new j5(r[16],r):null}(Bn(),Ee(),16==(16&n))}class Pf{constructor(){}supports(r){return x4(r)}create(r){return new np(r)}}const tp=(n,r)=>r;class np{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||tp}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,c=this._removalsHead,f=0,v=null;for(;o||c;){const M=!c||o&&o.currentIndex<Vf(c,f,v)?o:c,x=Vf(M,f,v),L=M.currentIndex;if(M===c)f--,c=c._nextRemoved;else if(o=o._next,null==M.previousIndex)f++;else{v||(v=[]);const Z=x-f,Q=L-f;if(Z!=Q){for(let Ve=0;Ve<Z;Ve++){const Je=Ve<v.length?v[Ve]:v[Ve]=0,It=Je+Ve;Q<=It&&It<Z&&(v[Ve]=Je+1)}v[M.previousIndex]=Q-Z}}x!==L&&r(M,x,L)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!x4(r))throw new vt(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,v,M,o=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)v=r[x],M=this._trackByFn(x,v),null!==o&&Object.is(o.trackById,M)?(c&&(o=this._verifyReinsertion(o,v,M,x)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,M,x),c=!0),o=o._next}else f=0,function sl(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[ha()]();let c;for(;!(c=o.next()).done;)r(c.value)}}(r,x=>{M=this._trackByFn(f,x),null!==o&&Object.is(o.trackById,M)?(c&&(o=this._verifyReinsertion(o,x,M,f)),Object.is(o.item,x)||this._addIdentityChange(o,x)):(o=this._mismatch(o,x,M,f),c=!0),o=o._next,f++}),this.length=f;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,c,f){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,v,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,v,f)):r=this._addAfter(new rp(o,c),v,f),r}_verifyReinsertion(r,o,c,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==v?r=this._reinsertAfter(v,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,v=r._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(r,o,c),this._addToMoves(r,c),r}_moveAfter(r,o,c){return this._unlink(r),this._insertAfter(r,o,c),this._addToMoves(r,c),r}_addAfter(r,o,c){return this._insertAfter(r,o,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,c){const f=null===o?this._itHead:o._next;return r._next=f,r._prev=o,null===f?this._itTail=r:f._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new Of),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,c=r._next;return null===o?this._itHead=c:o._next=c,null===c?this._itTail=o:c._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Of),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class rp{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ip{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===o||o<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const o=r._prevDup,c=r._nextDup;return null===o?this._head=c:o._nextDup=c,null===c?this._tail=o:c._prevDup=o,null===this._head}}class Of{constructor(){this.map=new Map}put(r){const o=r.trackById;let c=this.map.get(o);c||(c=new ip,this.map.set(o,c)),c.add(r)}get(r,o){const f=this.map.get(r);return f?f.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Vf(n,r,o){const c=n.previousIndex;if(null===c)return c;let f=0;return o&&c<o.length&&(f=o[c]),c+r+f}class Rf{constructor(){}supports(r){return r instanceof Map||fa(r)}create(){return new sp}}class sp{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||fa(r)))throw new vt(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,f)=>{if(o&&o.key===f)this._maybeAddToChanges(o,c),this._appendAfter=o,o=o._next;else{const v=this._getOrCreateRecordForKey(f,c);o=this._insertBeforeOrAppend(o,v)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let c=o;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const c=r._prev;return o._next=r,o._prev=c,r._prev=o,c&&(c._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,o);const v=f._prev,M=f._next;return v&&(v._next=M),M&&(M._prev=v),f._next=null,f._prev=null,f}const c=new op(r);return this._records.set(r,c),c.currentValue=o,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(c=>o(r[c],c))}}class op{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function kf(){return new t7([new Pf])}let t7=(()=>{class n{constructor(o){this.factories=o}static create(o,c){if(null!=c){const f=c.factories.slice();o=o.concat(f)}return new n(o)}static extend(o){return{provide:n,useFactory:c=>n.create(o,c||kf()),deps:[[n,new Vi,new Gs]]}}find(o){const c=this.factories.find(f=>f.supports(o));if(null!=c)return c;throw new vt(901,"")}}return n.\u0275prov=an({token:n,providedIn:"root",factory:kf}),n})();function Hf(){return new n7([new Rf])}let n7=(()=>{class n{constructor(o){this.factories=o}static create(o,c){if(c){const f=c.factories.slice();o=o.concat(f)}return new n(o)}static extend(o){return{provide:n,useFactory:c=>n.create(o,c||Hf()),deps:[[n,new Vi,new Gs]]}}find(o){const c=this.factories.find(v=>v.supports(o));if(c)return c;throw new vt(901,"")}}return n.\u0275prov=an({token:n,providedIn:"root",factory:Hf}),n})();const lp=If(null,"core",[]);let up=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(_n(Kh))},n.\u0275mod=G1({type:n}),n.\u0275inj=vn({}),n})()},2382:(jt,We,B)=>{B.d(We,{Fj:()=>ft,u5:()=>gn,JJ:()=>Xt,JL:()=>N1,F:()=>er,On:()=>Qr,YN:()=>Ai,wV:()=>Ie,Q7:()=>K,EJ:()=>K1,K7:()=>Cr,_Y:()=>pi,Kr:()=>a2});var y=B(5e3),D=B(9808),te=B(8306),Le=B(4742),De=B(8421),Ae=B(7669),ue=B(5403),ve=B(3268),ze=B(1810),pe=B(8996),je=B(4004);let Nt=(()=>{class U{constructor(V,re){this._renderer=V,this._elementRef=re,this.onChange=Ee=>{},this.onTouched=()=>{}}setProperty(V,re){this._renderer.setProperty(this._elementRef.nativeElement,V,re)}registerOnTouched(V){this.onTouched=V}registerOnChange(V){this.onChange=V}setDisabledState(V){this.setProperty("disabled",V)}}return U.\u0275fac=function(V){return new(V||U)(y.Y36(y.Qsj),y.Y36(y.SBq))},U.\u0275dir=y.lG2({type:U}),U})(),ht=(()=>{class U extends Nt{}return U.\u0275fac=function(){let P;return function(re){return(P||(P=y.n5z(U)))(re||U)}}(),U.\u0275dir=y.lG2({type:U,features:[y.qOj]}),U})();const vt=new y.OlP("NgValueAccessor"),dt={provide:vt,useExisting:(0,y.Gpc)(()=>ft),multi:!0},kt=new y.OlP("CompositionEventMode");let ft=(()=>{class U extends Nt{constructor(V,re,Ee){super(V,re),this._compositionMode=Ee,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Oe(){const U=(0,D.q)()?(0,D.q)().getUserAgent():"";return/android (\d+)/.test(U.toLowerCase())}())}writeValue(V){this.setProperty("value",null==V?"":V)}_handleInput(V){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(V)}_compositionStart(){this._composing=!0}_compositionEnd(V){this._composing=!1,this._compositionMode&&this.onChange(V)}}return U.\u0275fac=function(V){return new(V||U)(y.Y36(y.Qsj),y.Y36(y.SBq),y.Y36(kt,8))},U.\u0275dir=y.lG2({type:U,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(V,re){1&V&&y.NdJ("input",function(Dt){return re._handleInput(Dt.target.value)})("blur",function(){return re.onTouched()})("compositionstart",function(){return re._compositionStart()})("compositionend",function(Dt){return re._compositionEnd(Dt.target.value)})},features:[y._Bn([dt]),y.qOj]}),U})();const et=new y.OlP("NgValidators"),_t=new y.OlP("NgAsyncValidators");function Ue(U){return function nt(U){return null==U||0===U.length}(U.value)?{required:!0}:null}function Qt(U){return null}function it(U){return null!=U}function sn(U){const P=(0,y.QGY)(U)?(0,pe.D)(U):U;return(0,y.CqO)(P),P}function hn(U){let P={};return U.forEach(V=>{P=null!=V?Object.assign(Object.assign({},P),V):P}),0===Object.keys(P).length?null:P}function fn(U,P){return P.map(V=>V(U))}function Rn(U){return U.map(P=>function an(U){return!U.validate}(P)?P:V=>P.validate(V))}function Mn(U){return null!=U?function vn(U){if(!U)return null;const P=U.filter(it);return 0==P.length?null:function(V){return hn(fn(V,P))}}(Rn(U)):null}function c1(U){return null!=U?function I1(U){if(!U)return null;const P=U.filter(it);return 0==P.length?null:function(V){return function _e(...U){const P=(0,Ae.jO)(U),{args:V,keys:re}=(0,Le.D)(U),Ee=new te.y(Dt=>{const{length:C1}=V;if(!C1)return void Dt.complete();const Bn=new Array(C1);let ai=C1,sr=C1;for(let Wr=0;Wr<C1;Wr++){let Ui=!1;(0,De.Xf)(V[Wr]).subscribe((0,ue.x)(Dt,as=>{Ui||(Ui=!0,sr--),Bn[Wr]=as},()=>ai--,void 0,()=>{(!ai||!Ui)&&(sr||Dt.next(re?(0,ze.n)(re,Bn):Bn),Dt.complete())}))}});return P?Ee.pipe((0,ve.Z)(P)):Ee}(fn(V,P).map(sn)).pipe((0,je.U)(hn))}}(Rn(U)):null}function A1(U,P){return null===U?[P]:Array.isArray(U)?[...U,P]:[U,P]}function n1(U){return U?Array.isArray(U)?U:[U]:[]}function r1(U,P){return Array.isArray(U)?U.includes(P):U===P}function Wn(U,P){const V=n1(P);return n1(U).forEach(Ee=>{r1(V,Ee)||V.push(Ee)}),V}function dn(U,P){return n1(P).filter(V=>!r1(U,V))}class zn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(P){this._rawValidators=P||[],this._composedValidatorFn=Mn(this._rawValidators)}_setAsyncValidators(P){this._rawAsyncValidators=P||[],this._composedAsyncValidatorFn=c1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(P){this._onDestroyCallbacks.push(P)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(P=>P()),this._onDestroyCallbacks=[]}reset(P){this.control&&this.control.reset(P)}hasError(P,V){return!!this.control&&this.control.hasError(P,V)}getError(P,V){return this.control?this.control.getError(P,V):null}}class xn extends zn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ie extends zn{get formDirective(){return null}get path(){return null}}class gr{constructor(P){this._cd=P}is(P){var V,re,Ee;return"submitted"===P?!!(null===(V=this._cd)||void 0===V?void 0:V.submitted):!!(null===(Ee=null===(re=this._cd)||void 0===re?void 0:re.control)||void 0===Ee?void 0:Ee[P])}}let Xt=(()=>{class U extends gr{constructor(V){super(V)}}return U.\u0275fac=function(V){return new(V||U)(y.Y36(xn,2))},U.\u0275dir=y.lG2({type:U,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(V,re){2&V&&y.ekj("ng-untouched",re.is("untouched"))("ng-touched",re.is("touched"))("ng-pristine",re.is("pristine"))("ng-dirty",re.is("dirty"))("ng-valid",re.is("valid"))("ng-invalid",re.is("invalid"))("ng-pending",re.is("pending"))},features:[y.qOj]}),U})(),N1=(()=>{class U extends gr{constructor(V){super(V)}}return U.\u0275fac=function(V){return new(V||U)(y.Y36(ie,10))},U.\u0275dir=y.lG2({type:U,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(V,re){2&V&&y.ekj("ng-untouched",re.is("untouched"))("ng-touched",re.is("touched"))("ng-pristine",re.is("pristine"))("ng-dirty",re.is("dirty"))("ng-valid",re.is("valid"))("ng-invalid",re.is("invalid"))("ng-pending",re.is("pending"))("ng-submitted",re.is("submitted"))},features:[y.qOj]}),U})();function Ft(U,P){Jt(U,P),P.valueAccessor.writeValue(U.value),function G1(U,P){P.valueAccessor.registerOnChange(V=>{U._pendingValue=V,U._pendingChange=!0,U._pendingDirty=!0,"change"===U.updateOn&&$e(U,P)})}(U,P),function xe(U,P){const V=(re,Ee)=>{P.valueAccessor.writeValue(re),Ee&&P.viewToModelUpdate(re)};U.registerOnChange(V),P._registerOnDestroy(()=>{U._unregisterOnChange(V)})}(U,P),function Ir(U,P){P.valueAccessor.registerOnTouched(()=>{U._pendingTouched=!0,"blur"===U.updateOn&&U._pendingChange&&$e(U,P),"submit"!==U.updateOn&&U.markAsTouched()})}(U,P),function Zn(U,P){if(P.valueAccessor.setDisabledState){const V=re=>{P.valueAccessor.setDisabledState(re)};U.registerOnDisabledChange(V),P._registerOnDestroy(()=>{U._unregisterOnDisabledChange(V)})}}(U,P)}function cn(U,P){U.forEach(V=>{V.registerOnValidatorChange&&V.registerOnValidatorChange(P)})}function Jt(U,P){const V=function p1(U){return U._rawValidators}(U);null!==P.validator?U.setValidators(A1(V,P.validator)):"function"==typeof V&&U.setValidators([V]);const re=function U1(U){return U._rawAsyncValidators}(U);null!==P.asyncValidator?U.setAsyncValidators(A1(re,P.asyncValidator)):"function"==typeof re&&U.setAsyncValidators([re]);const Ee=()=>U.updateValueAndValidity();cn(P._rawValidators,Ee),cn(P._rawAsyncValidators,Ee)}function $e(U,P){U._pendingDirty&&U.markAsDirty(),U.setValue(U._pendingValue,{emitModelToViewChange:!1}),P.viewToModelUpdate(U._pendingValue),U._pendingChange=!1}function k1(U,P){const V=U.indexOf(P);V>-1&&U.splice(V,1)}const Tt="VALID",Zt="INVALID",Fn="PENDING",W1="DISABLED";function V1(U){return(z1(U)?U.validators:U)||null}function Pr(U){return Array.isArray(U)?Mn(U):U||null}function m1(U,P){return(z1(P)?P.asyncValidators:U)||null}function Ar(U){return Array.isArray(U)?c1(U):U||null}function z1(U){return null!=U&&!Array.isArray(U)&&"object"==typeof U}const Or=U=>U instanceof R1;function ti(U){return(U=>U instanceof X1)(U)?U.value:U.getRawValue()}function ur(U,P){const V=Or(U),re=U.controls;if(!(V?Object.keys(re):re).length)throw new y.vHH(1e3,"");if(!re[P])throw new y.vHH(1001,"")}function M1(U,P){Or(U),U._forEachChild((re,Ee)=>{if(void 0===P[Ee])throw new y.vHH(1002,"")})}class J1{constructor(P,V){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=P,this._rawAsyncValidators=V,this._composedValidatorFn=Pr(this._rawValidators),this._composedAsyncValidatorFn=Ar(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(P){this._rawValidators=this._composedValidatorFn=P}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(P){this._rawAsyncValidators=this._composedAsyncValidatorFn=P}get parent(){return this._parent}get valid(){return this.status===Tt}get invalid(){return this.status===Zt}get pending(){return this.status==Fn}get disabled(){return this.status===W1}get enabled(){return this.status!==W1}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(P){this._rawValidators=P,this._composedValidatorFn=Pr(P)}setAsyncValidators(P){this._rawAsyncValidators=P,this._composedAsyncValidatorFn=Ar(P)}addValidators(P){this.setValidators(Wn(P,this._rawValidators))}addAsyncValidators(P){this.setAsyncValidators(Wn(P,this._rawAsyncValidators))}removeValidators(P){this.setValidators(dn(P,this._rawValidators))}removeAsyncValidators(P){this.setAsyncValidators(dn(P,this._rawAsyncValidators))}hasValidator(P){return r1(this._rawValidators,P)}hasAsyncValidator(P){return r1(this._rawAsyncValidators,P)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(P={}){this.touched=!0,this._parent&&!P.onlySelf&&this._parent.markAsTouched(P)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(P=>P.markAllAsTouched())}markAsUntouched(P={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(V=>{V.markAsUntouched({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}markAsDirty(P={}){this.pristine=!1,this._parent&&!P.onlySelf&&this._parent.markAsDirty(P)}markAsPristine(P={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(V=>{V.markAsPristine({onlySelf:!0})}),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}markAsPending(P={}){this.status=Fn,!1!==P.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!P.onlySelf&&this._parent.markAsPending(P)}disable(P={}){const V=this._parentMarkedDirty(P.onlySelf);this.status=W1,this.errors=null,this._forEachChild(re=>{re.disable(Object.assign(Object.assign({},P),{onlySelf:!0}))}),this._updateValue(),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},P),{skipPristineCheck:V})),this._onDisabledChange.forEach(re=>re(!0))}enable(P={}){const V=this._parentMarkedDirty(P.onlySelf);this.status=Tt,this._forEachChild(re=>{re.enable(Object.assign(Object.assign({},P),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},P),{skipPristineCheck:V})),this._onDisabledChange.forEach(re=>re(!1))}_updateAncestors(P){this._parent&&!P.onlySelf&&(this._parent.updateValueAndValidity(P),P.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(P){this._parent=P}updateValueAndValidity(P={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tt||this.status===Fn)&&this._runAsyncValidator(P.emitEvent)),!1!==P.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!P.onlySelf&&this._parent.updateValueAndValidity(P)}_updateTreeValidity(P={emitEvent:!0}){this._forEachChild(V=>V._updateTreeValidity(P)),this.updateValueAndValidity({onlySelf:!0,emitEvent:P.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?W1:Tt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(P){if(this.asyncValidator){this.status=Fn,this._hasOwnPendingAsyncValidator=!0;const V=sn(this.asyncValidator(this));this._asyncValidationSubscription=V.subscribe(re=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(re,{emitEvent:P})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(P,V={}){this.errors=P,this._updateControlsErrors(!1!==V.emitEvent)}get(P){return function Lr(U,P,V){if(null==P||(Array.isArray(P)||(P=P.split(V)),Array.isArray(P)&&0===P.length))return null;let re=U;return P.forEach(Ee=>{re=Or(re)?re.controls.hasOwnProperty(Ee)?re.controls[Ee]:null:(U=>U instanceof s1)(re)&&re.at(Ee)||null}),re}(this,P,".")}getError(P,V){const re=V?this.get(V):this;return re&&re.errors?re.errors[P]:null}hasError(P,V){return!!this.getError(P,V)}get root(){let P=this;for(;P._parent;)P=P._parent;return P}_updateControlsErrors(P){this.status=this._calculateStatus(),P&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(P)}_initObservables(){this.valueChanges=new y.vpe,this.statusChanges=new y.vpe}_calculateStatus(){return this._allControlsDisabled()?W1:this.errors?Zt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fn)?Fn:this._anyControlsHaveStatus(Zt)?Zt:Tt}_anyControlsHaveStatus(P){return this._anyControls(V=>V.status===P)}_anyControlsDirty(){return this._anyControls(P=>P.dirty)}_anyControlsTouched(){return this._anyControls(P=>P.touched)}_updatePristine(P={}){this.pristine=!this._anyControlsDirty(),this._parent&&!P.onlySelf&&this._parent._updatePristine(P)}_updateTouched(P={}){this.touched=this._anyControlsTouched(),this._parent&&!P.onlySelf&&this._parent._updateTouched(P)}_isBoxedValue(P){return"object"==typeof P&&null!==P&&2===Object.keys(P).length&&"value"in P&&"disabled"in P}_registerOnCollectionChange(P){this._onCollectionChange=P}_setUpdateStrategy(P){z1(P)&&null!=P.updateOn&&(this._updateOn=P.updateOn)}_parentMarkedDirty(P){return!P&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class X1 extends J1{constructor(P=null,V,re){super(V1(V),m1(re,V)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(P),this._setUpdateStrategy(V),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),z1(V)&&V.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(P)?P.value:P)}setValue(P,V={}){this.value=this._pendingValue=P,this._onChange.length&&!1!==V.emitModelToViewChange&&this._onChange.forEach(re=>re(this.value,!1!==V.emitViewToModelChange)),this.updateValueAndValidity(V)}patchValue(P,V={}){this.setValue(P,V)}reset(P=this.defaultValue,V={}){this._applyFormState(P),this.markAsPristine(V),this.markAsUntouched(V),this.setValue(this.value,V),this._pendingChange=!1}_updateValue(){}_anyControls(P){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(P){this._onChange.push(P)}_unregisterOnChange(P){k1(this._onChange,P)}registerOnDisabledChange(P){this._onDisabledChange.push(P)}_unregisterOnDisabledChange(P){k1(this._onDisabledChange,P)}_forEachChild(P){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(P){this._isBoxedValue(P)?(this.value=this._pendingValue=P.value,P.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=P}}class R1 extends J1{constructor(P,V,re){super(V1(V),m1(re,V)),this.controls=P,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(P,V){return this.controls[P]?this.controls[P]:(this.controls[P]=V,V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange),V)}addControl(P,V,re={}){this.registerControl(P,V),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}removeControl(P,V={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}setControl(P,V,re={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),delete this.controls[P],V&&this.registerControl(P,V),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}contains(P){return this.controls.hasOwnProperty(P)&&this.controls[P].enabled}setValue(P,V={}){M1(this,P),Object.keys(P).forEach(re=>{ur(this,re),this.controls[re].setValue(P[re],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(P,V={}){null!=P&&(Object.keys(P).forEach(re=>{this.controls[re]&&this.controls[re].patchValue(P[re],{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(P={},V={}){this._forEachChild((re,Ee)=>{re.reset(P[Ee],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this._reduceChildren({},(P,V,re)=>(P[re]=ti(V),P))}_syncPendingControls(){let P=this._reduceChildren(!1,(V,re)=>!!re._syncPendingControls()||V);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){Object.keys(this.controls).forEach(V=>{const re=this.controls[V];re&&P(re,V)})}_setUpControls(){this._forEachChild(P=>{P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(P){for(const V of Object.keys(this.controls)){const re=this.controls[V];if(this.contains(V)&&P(re))return!0}return!1}_reduceValue(){return this._reduceChildren({},(P,V,re)=>((V.enabled||this.disabled)&&(P[re]=V.value),P))}_reduceChildren(P,V){let re=P;return this._forEachChild((Ee,Dt)=>{re=V(re,Ee,Dt)}),re}_allControlsDisabled(){for(const P of Object.keys(this.controls))if(this.controls[P].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class s1 extends J1{constructor(P,V,re){super(V1(V),m1(re,V)),this.controls=P,this._initObservables(),this._setUpdateStrategy(V),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(P){return this.controls[P]}push(P,V={}){this.controls.push(P),this._registerControl(P),this.updateValueAndValidity({emitEvent:V.emitEvent}),this._onCollectionChange()}insert(P,V,re={}){this.controls.splice(P,0,V),this._registerControl(V),this.updateValueAndValidity({emitEvent:re.emitEvent})}removeAt(P,V={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),this.updateValueAndValidity({emitEvent:V.emitEvent})}setControl(P,V,re={}){this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),V&&(this.controls.splice(P,0,V),this._registerControl(V)),this.updateValueAndValidity({emitEvent:re.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(P,V={}){M1(this,P),P.forEach((re,Ee)=>{ur(this,Ee),this.at(Ee).setValue(re,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V)}patchValue(P,V={}){null!=P&&(P.forEach((re,Ee)=>{this.at(Ee)&&this.at(Ee).patchValue(re,{onlySelf:!0,emitEvent:V.emitEvent})}),this.updateValueAndValidity(V))}reset(P=[],V={}){this._forEachChild((re,Ee)=>{re.reset(P[Ee],{onlySelf:!0,emitEvent:V.emitEvent})}),this._updatePristine(V),this._updateTouched(V),this.updateValueAndValidity(V)}getRawValue(){return this.controls.map(P=>ti(P))}clear(P={}){this.controls.length<1||(this._forEachChild(V=>V._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:P.emitEvent}))}_syncPendingControls(){let P=this.controls.reduce((V,re)=>!!re._syncPendingControls()||V,!1);return P&&this.updateValueAndValidity({onlySelf:!0}),P}_forEachChild(P){this.controls.forEach((V,re)=>{P(V,re)})}_updateValue(){this.value=this.controls.filter(P=>P.enabled||this.disabled).map(P=>P.value)}_anyControls(P){return this.controls.some(V=>V.enabled&&P(V))}_setUpControls(){this._forEachChild(P=>this._registerControl(P))}_allControlsDisabled(){for(const P of this.controls)if(P.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(P){P.setParent(this),P._registerOnCollectionChange(this._onCollectionChange)}}const Yr={provide:ie,useExisting:(0,y.Gpc)(()=>er)},_r=(()=>Promise.resolve(null))();let er=(()=>{class U extends ie{constructor(V,re){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new y.vpe,this.form=new R1({},Mn(V),c1(re))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(V){_r.then(()=>{const re=this._findContainer(V.path);V.control=re.registerControl(V.name,V.control),Ft(V.control,V),V.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(V)})}getControl(V){return this.form.get(V.path)}removeControl(V){_r.then(()=>{const re=this._findContainer(V.path);re&&re.removeControl(V.name),this._directives.delete(V)})}addFormGroup(V){_r.then(()=>{const re=this._findContainer(V.path),Ee=new R1({});(function se(U,P){Jt(U,P)})(Ee,V),re.registerControl(V.name,Ee),Ee.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(V){_r.then(()=>{const re=this._findContainer(V.path);re&&re.removeControl(V.name)})}getFormGroup(V){return this.form.get(V.path)}updateModel(V,re){_r.then(()=>{this.form.get(V.path).setValue(re)})}setValue(V){this.control.setValue(V)}onSubmit(V){return this.submitted=!0,function lr(U,P){U._syncPendingControls(),P.forEach(V=>{const re=V.control;"submit"===re.updateOn&&re._pendingChange&&(V.viewToModelUpdate(re._pendingValue),re._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(V),!1}onReset(){this.resetForm()}resetForm(V){this.form.reset(V),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(V){return V.pop(),V.length?this.form.get(V):this.form}}return U.\u0275fac=function(V){return new(V||U)(y.Y36(et,10),y.Y36(_t,10))},U.\u0275dir=y.lG2({type:U,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(V,re){1&V&&y.NdJ("submit",function(Dt){return re.onSubmit(Dt)})("reset",function(){return re.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[y._Bn([Yr]),y.qOj]}),U})();const C2={provide:xn,useExisting:(0,y.Gpc)(()=>Qr)},Z1=(()=>Promise.resolve(null))();let Qr=(()=>{class U extends xn{constructor(V,re,Ee,Dt,C1){super(),this._changeDetectorRef=C1,this.control=new X1,this._registered=!1,this.update=new y.vpe,this._parent=V,this._setValidators(re),this._setAsyncValidators(Ee),this.valueAccessor=function $1(U,P){if(!P)return null;let V,re,Ee;return Array.isArray(P),P.forEach(Dt=>{Dt.constructor===ft?V=Dt:function ar(U){return Object.getPrototypeOf(U.constructor)===ht}(Dt)?re=Dt:Ee=Dt}),Ee||re||V||null}(0,Dt)}ngOnChanges(V){if(this._checkForErrors(),!this._registered||"name"in V){if(this._registered&&(this._checkName(),this.formDirective)){const re=V.name.previousValue;this.formDirective.removeControl({name:re,path:this._getPath(re)})}this._setUpControl()}"isDisabled"in V&&this._updateDisabled(V),function O1(U,P){if(!U.hasOwnProperty("model"))return!1;const V=U.model;return!!V.isFirstChange()||!Object.is(P,V.currentValue)}(V,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(V){this.viewModel=V,this.update.emit(V)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ft(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(V){Z1.then(()=>{var re;this.control.setValue(V,{emitViewToModelChange:!1}),null===(re=this._changeDetectorRef)||void 0===re||re.markForCheck()})}_updateDisabled(V){const re=V.isDisabled.currentValue,Ee=""===re||re&&"false"!==re;Z1.then(()=>{var Dt;Ee&&!this.control.disabled?this.control.disable():!Ee&&this.control.disabled&&this.control.enable(),null===(Dt=this._changeDetectorRef)||void 0===Dt||Dt.markForCheck()})}_getPath(V){return this._parent?function rt(U,P){return[...P.path,U]}(V,this._parent):[V]}}return U.\u0275fac=function(V){return new(V||U)(y.Y36(ie,9),y.Y36(et,10),y.Y36(_t,10),y.Y36(vt,10),y.Y36(y.sBO,8))},U.\u0275dir=y.lG2({type:U,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[y._Bn([C2]),y.qOj,y.TTD]}),U})(),pi=(()=>{class U{}return U.\u0275fac=function(V){return new(V||U)},U.\u0275dir=y.lG2({type:U,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),U})();const He={provide:vt,useExisting:(0,y.Gpc)(()=>Ie),multi:!0};let Ie=(()=>{class U extends ht{writeValue(V){this.setProperty("value",null==V?"":V)}registerOnChange(V){this.onChange=re=>{V(""==re?null:parseFloat(re))}}}return U.\u0275fac=function(){let P;return function(re){return(P||(P=y.n5z(U)))(re||U)}}(),U.\u0275dir=y.lG2({type:U,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(V,re){1&V&&y.NdJ("input",function(Dt){return re.onChange(Dt.target.value)})("blur",function(){return re.onTouched()})},features:[y._Bn([He]),y.qOj]}),U})(),Lt=(()=>{class U{}return U.\u0275fac=function(V){return new(V||U)},U.\u0275mod=y.oAB({type:U}),U.\u0275inj=y.cJS({}),U})();const w2={provide:vt,useExisting:(0,y.Gpc)(()=>K1),multi:!0};function Ii(U,P){return null==U?`${P}`:(P&&"object"==typeof P&&(P="Object"),`${U}: ${P}`.slice(0,50))}let K1=(()=>{class U extends ht{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(V){this._compareWith=V}writeValue(V){this.value=V;const Ee=Ii(this._getOptionId(V),V);this.setProperty("value",Ee)}registerOnChange(V){this.onChange=re=>{this.value=this._getOptionValue(re),V(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(V){for(const re of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(re),V))return re;return null}_getOptionValue(V){const re=function os(U){return U.split(":")[0]}(V);return this._optionMap.has(re)?this._optionMap.get(re):V}}return U.\u0275fac=function(){let P;return function(re){return(P||(P=y.n5z(U)))(re||U)}}(),U.\u0275dir=y.lG2({type:U,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(V,re){1&V&&y.NdJ("change",function(Dt){return re.onChange(Dt.target.value)})("blur",function(){return re.onTouched()})},inputs:{compareWith:"compareWith"},features:[y._Bn([w2]),y.qOj]}),U})(),Ai=(()=>{class U{constructor(V,re,Ee){this._element=V,this._renderer=re,this._select=Ee,this._select&&(this.id=this._select._registerOption())}set ngValue(V){null!=this._select&&(this._select._optionMap.set(this.id,V),this._setElementValue(Ii(this.id,V)),this._select.writeValue(this._select.value))}set value(V){this._setElementValue(V),this._select&&this._select.writeValue(this._select.value)}_setElementValue(V){this._renderer.setProperty(this._element.nativeElement,"value",V)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return U.\u0275fac=function(V){return new(V||U)(y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(K1,9))},U.\u0275dir=y.lG2({type:U,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),U})();const Dr={provide:vt,useExisting:(0,y.Gpc)(()=>Cr),multi:!0};function Ki(U,P){return null==U?`${P}`:("string"==typeof P&&(P=`'${P}'`),P&&"object"==typeof P&&(P="Object"),`${U}: ${P}`.slice(0,50))}let Cr=(()=>{class U extends ht{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(V){this._compareWith=V}writeValue(V){let re;if(this.value=V,Array.isArray(V)){const Ee=V.map(Dt=>this._getOptionId(Dt));re=(Dt,C1)=>{Dt._setSelected(Ee.indexOf(C1.toString())>-1)}}else re=(Ee,Dt)=>{Ee._setSelected(!1)};this._optionMap.forEach(re)}registerOnChange(V){this.onChange=re=>{const Ee=[],Dt=re.selectedOptions;if(void 0!==Dt){const C1=Dt;for(let Bn=0;Bn<C1.length;Bn++){const sr=this._getOptionValue(C1[Bn].value);Ee.push(sr)}}else{const C1=re.options;for(let Bn=0;Bn<C1.length;Bn++){const ai=C1[Bn];if(ai.selected){const sr=this._getOptionValue(ai.value);Ee.push(sr)}}}this.value=Ee,V(Ee)}}_registerOption(V){const re=(this._idCounter++).toString();return this._optionMap.set(re,V),re}_getOptionId(V){for(const re of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(re)._value,V))return re;return null}_getOptionValue(V){const re=function ir(U){return U.split(":")[0]}(V);return this._optionMap.has(re)?this._optionMap.get(re)._value:V}}return U.\u0275fac=function(){let P;return function(re){return(P||(P=y.n5z(U)))(re||U)}}(),U.\u0275dir=y.lG2({type:U,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(V,re){1&V&&y.NdJ("change",function(Dt){return re.onChange(Dt.target)})("blur",function(){return re.onTouched()})},inputs:{compareWith:"compareWith"},features:[y._Bn([Dr]),y.qOj]}),U})(),a2=(()=>{class U{constructor(V,re,Ee){this._element=V,this._renderer=re,this._select=Ee,this._select&&(this.id=this._select._registerOption(this))}set ngValue(V){null!=this._select&&(this._value=V,this._setElementValue(Ki(this.id,V)),this._select.writeValue(this._select.value))}set value(V){this._select?(this._value=V,this._setElementValue(Ki(this.id,V)),this._select.writeValue(this._select.value)):this._setElementValue(V)}_setElementValue(V){this._renderer.setProperty(this._element.nativeElement,"value",V)}_setSelected(V){this._renderer.setProperty(this._element.nativeElement,"selected",V)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return U.\u0275fac=function(V){return new(V||U)(y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(Cr,9))},U.\u0275dir=y.lG2({type:U,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),U})(),wr=(()=>{class U{constructor(){this._validator=Qt}ngOnChanges(V){if(this.inputName in V){const re=this.normalizeInput(V[this.inputName].currentValue);this._enabled=this.enabled(re),this._validator=this._enabled?this.createValidator(re):Qt,this._onChange&&this._onChange()}}validate(V){return this._validator(V)}registerOnValidatorChange(V){this._onChange=V}enabled(V){return null!=V}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275dir=y.lG2({type:U,features:[y.TTD]}),U})();const Y={provide:et,useExisting:(0,y.Gpc)(()=>K),multi:!0};let K=(()=>{class U extends wr{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=V=>function qn(U){return null!=U&&!1!==U&&"false"!=`${U}`}(V),this.createValidator=V=>Ue}enabled(V){return V}}return U.\u0275fac=function(){let P;return function(re){return(P||(P=y.n5z(U)))(re||U)}}(),U.\u0275dir=y.lG2({type:U,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(V,re){2&V&&y.uIk("required",re._enabled?"":null)},inputs:{required:"required"},features:[y._Bn([Y]),y.qOj]}),U})(),Sr=(()=>{class U{}return U.\u0275fac=function(V){return new(V||U)},U.\u0275mod=y.oAB({type:U}),U.\u0275inj=y.cJS({imports:[[Lt]]}),U})(),gn=(()=>{class U{}return U.\u0275fac=function(V){return new(V||U)},U.\u0275mod=y.oAB({type:U}),U.\u0275inj=y.cJS({imports:[Sr]}),U})()},2313:(jt,We,B)=>{B.d(We,{H7:()=>Jt,b2:()=>r1,q6:()=>U1});var y=B(9808),D=B(5e3);class te extends y.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Le extends te{static makeCurrent(){(0,y.HT)(new Le)}onAndCancel(xe,se,Re){return xe.addEventListener(se,Re,!1),()=>{xe.removeEventListener(se,Re,!1)}}dispatchEvent(xe,se){xe.dispatchEvent(se)}remove(xe){xe.parentNode&&xe.parentNode.removeChild(xe)}createElement(xe,se){return(se=se||this.getDefaultDocument()).createElement(xe)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(xe){return xe.nodeType===Node.ELEMENT_NODE}isShadowRoot(xe){return xe instanceof DocumentFragment}getGlobalEventTarget(xe,se){return"window"===se?window:"document"===se?xe:"body"===se?xe.body:null}getBaseHref(xe){const se=function Ae(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==se?null:function ve($e){ue=ue||document.createElement("a"),ue.setAttribute("href",$e);const xe=ue.pathname;return"/"===xe.charAt(0)?xe:`/${xe}`}(se)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(xe){return(0,y.Mx)(document.cookie,xe)}}let ue,De=null;const ze=new D.OlP("TRANSITION_ID"),pe=[{provide:D.ip1,useFactory:function _e($e,xe,se){return()=>{se.get(D.CZH).donePromise.then(()=>{const Re=(0,y.q)(),yt=xe.querySelectorAll(`style[ng-transition="${$e}"]`);for(let on=0;on<yt.length;on++)Re.remove(yt[on])})}},deps:[ze,y.K0,D.zs3],multi:!0}];class je{static init(){(0,D.VLi)(new je)}addToWindow(xe){D.dqk.getAngularTestability=(Re,yt=!0)=>{const on=xe.findTestabilityInTree(Re,yt);if(null==on)throw new Error("Could not find testability for element.");return on},D.dqk.getAllAngularTestabilities=()=>xe.getAllTestabilities(),D.dqk.getAllAngularRootElements=()=>xe.getAllRootElements(),D.dqk.frameworkStabilizers||(D.dqk.frameworkStabilizers=[]),D.dqk.frameworkStabilizers.push(Re=>{const yt=D.dqk.getAllAngularTestabilities();let on=yt.length,yn=!1;const _1=function(O1){yn=yn||O1,on--,0==on&&Re(yn)};yt.forEach(function(O1){O1.whenStable(_1)})})}findTestabilityInTree(xe,se,Re){if(null==se)return null;const yt=xe.getTestability(se);return null!=yt?yt:Re?(0,y.q)().isShadowRoot(se)?this.findTestabilityInTree(xe,se.host,!0):this.findTestabilityInTree(xe,se.parentElement,!0):null}}let Nt=(()=>{class $e{build(){return new XMLHttpRequest}}return $e.\u0275fac=function(se){return new(se||$e)},$e.\u0275prov=D.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const ht=new D.OlP("EventManagerPlugins");let vt=(()=>{class $e{constructor(se,Re){this._zone=Re,this._eventNameToPlugin=new Map,se.forEach(yt=>yt.manager=this),this._plugins=se.slice().reverse()}addEventListener(se,Re,yt){return this._findPluginFor(Re).addEventListener(se,Re,yt)}addGlobalEventListener(se,Re,yt){return this._findPluginFor(Re).addGlobalEventListener(se,Re,yt)}getZone(){return this._zone}_findPluginFor(se){const Re=this._eventNameToPlugin.get(se);if(Re)return Re;const yt=this._plugins;for(let on=0;on<yt.length;on++){const yn=yt[on];if(yn.supports(se))return this._eventNameToPlugin.set(se,yn),yn}throw new Error(`No event manager plugin found for event ${se}`)}}return $e.\u0275fac=function(se){return new(se||$e)(D.LFG(ht),D.LFG(D.R0b))},$e.\u0275prov=D.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class zt{constructor(xe){this._doc=xe}addGlobalEventListener(xe,se,Re){const yt=(0,y.q)().getGlobalEventTarget(this._doc,xe);if(!yt)throw new Error(`Unsupported event target ${yt} for event ${se}`);return this.addEventListener(yt,se,Re)}}let tt=(()=>{class $e{constructor(){this._stylesSet=new Set}addStyles(se){const Re=new Set;se.forEach(yt=>{this._stylesSet.has(yt)||(this._stylesSet.add(yt),Re.add(yt))}),this.onStylesAdded(Re)}onStylesAdded(se){}getAllStyles(){return Array.from(this._stylesSet)}}return $e.\u0275fac=function(se){return new(se||$e)},$e.\u0275prov=D.Yz7({token:$e,factory:$e.\u0275fac}),$e})(),dt=(()=>{class $e extends tt{constructor(se){super(),this._doc=se,this._hostNodes=new Map,this._hostNodes.set(se.head,[])}_addStylesToHost(se,Re,yt){se.forEach(on=>{const yn=this._doc.createElement("style");yn.textContent=on,yt.push(Re.appendChild(yn))})}addHost(se){const Re=[];this._addStylesToHost(this._stylesSet,se,Re),this._hostNodes.set(se,Re)}removeHost(se){const Re=this._hostNodes.get(se);Re&&Re.forEach(Oe),this._hostNodes.delete(se)}onStylesAdded(se){this._hostNodes.forEach((Re,yt)=>{this._addStylesToHost(se,yt,Re)})}ngOnDestroy(){this._hostNodes.forEach(se=>se.forEach(Oe))}}return $e.\u0275fac=function(se){return new(se||$e)(D.LFG(y.K0))},$e.\u0275prov=D.Yz7({token:$e,factory:$e.\u0275fac}),$e})();function Oe($e){(0,y.q)().remove($e)}const kt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ft=/%COMP%/g;function me($e,xe,se){for(let Re=0;Re<xe.length;Re++){let yt=xe[Re];Array.isArray(yt)?me($e,yt,se):(yt=yt.replace(ft,$e),se.push(yt))}return se}function Pe($e){return xe=>{if("__ngUnwrap__"===xe)return $e;!1===$e(xe)&&(xe.preventDefault(),xe.returnValue=!1)}}let Ze=(()=>{class $e{constructor(se,Re,yt){this.eventManager=se,this.sharedStylesHost=Re,this.appId=yt,this.rendererByCompId=new Map,this.defaultRenderer=new Ke(se)}createRenderer(se,Re){if(!se||!Re)return this.defaultRenderer;switch(Re.encapsulation){case D.ifc.Emulated:{let yt=this.rendererByCompId.get(Re.id);return yt||(yt=new Yt(this.eventManager,this.sharedStylesHost,Re,this.appId),this.rendererByCompId.set(Re.id,yt)),yt.applyToHost(se),yt}case 1:case D.ifc.ShadowDom:return new Qt(this.eventManager,this.sharedStylesHost,se,Re);default:if(!this.rendererByCompId.has(Re.id)){const yt=me(Re.id,Re.styles,[]);this.sharedStylesHost.addStyles(yt),this.rendererByCompId.set(Re.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return $e.\u0275fac=function(se){return new(se||$e)(D.LFG(vt),D.LFG(dt),D.LFG(D.AFp))},$e.\u0275prov=D.Yz7({token:$e,factory:$e.\u0275fac}),$e})();class Ke{constructor(xe){this.eventManager=xe,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(xe,se){return se?document.createElementNS(kt[se]||se,xe):document.createElement(xe)}createComment(xe){return document.createComment(xe)}createText(xe){return document.createTextNode(xe)}appendChild(xe,se){xe.appendChild(se)}insertBefore(xe,se,Re){xe&&xe.insertBefore(se,Re)}removeChild(xe,se){xe&&xe.removeChild(se)}selectRootElement(xe,se){let Re="string"==typeof xe?document.querySelector(xe):xe;if(!Re)throw new Error(`The selector "${xe}" did not match any elements`);return se||(Re.textContent=""),Re}parentNode(xe){return xe.parentNode}nextSibling(xe){return xe.nextSibling}setAttribute(xe,se,Re,yt){if(yt){se=yt+":"+se;const on=kt[yt];on?xe.setAttributeNS(on,se,Re):xe.setAttribute(se,Re)}else xe.setAttribute(se,Re)}removeAttribute(xe,se,Re){if(Re){const yt=kt[Re];yt?xe.removeAttributeNS(yt,se):xe.removeAttribute(`${Re}:${se}`)}else xe.removeAttribute(se)}addClass(xe,se){xe.classList.add(se)}removeClass(xe,se){xe.classList.remove(se)}setStyle(xe,se,Re,yt){yt&(D.JOm.DashCase|D.JOm.Important)?xe.style.setProperty(se,Re,yt&D.JOm.Important?"important":""):xe.style[se]=Re}removeStyle(xe,se,Re){Re&D.JOm.DashCase?xe.style.removeProperty(se):xe.style[se]=""}setProperty(xe,se,Re){xe[se]=Re}setValue(xe,se){xe.nodeValue=se}listen(xe,se,Re){return"string"==typeof xe?this.eventManager.addGlobalEventListener(xe,se,Pe(Re)):this.eventManager.addEventListener(xe,se,Pe(Re))}}class Yt extends Ke{constructor(xe,se,Re,yt){super(xe),this.component=Re;const on=me(yt+"-"+Re.id,Re.styles,[]);se.addStyles(on),this.contentAttr=function le($e){return"_ngcontent-%COMP%".replace(ft,$e)}(yt+"-"+Re.id),this.hostAttr=function ot($e){return"_nghost-%COMP%".replace(ft,$e)}(yt+"-"+Re.id)}applyToHost(xe){super.setAttribute(xe,this.hostAttr,"")}createElement(xe,se){const Re=super.createElement(xe,se);return super.setAttribute(Re,this.contentAttr,""),Re}}class Qt extends Ke{constructor(xe,se,Re,yt){super(xe),this.sharedStylesHost=se,this.hostEl=Re,this.shadowRoot=Re.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const on=me(yt.id,yt.styles,[]);for(let yn=0;yn<on.length;yn++){const _1=document.createElement("style");_1.textContent=on[yn],this.shadowRoot.appendChild(_1)}}nodeOrShadowRoot(xe){return xe===this.hostEl?this.shadowRoot:xe}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(xe,se){return super.appendChild(this.nodeOrShadowRoot(xe),se)}insertBefore(xe,se,Re){return super.insertBefore(this.nodeOrShadowRoot(xe),se,Re)}removeChild(xe,se){return super.removeChild(this.nodeOrShadowRoot(xe),se)}parentNode(xe){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(xe)))}}let it=(()=>{class $e extends zt{constructor(se){super(se)}supports(se){return!0}addEventListener(se,Re,yt){return se.addEventListener(Re,yt,!1),()=>this.removeEventListener(se,Re,yt)}removeEventListener(se,Re,yt){return se.removeEventListener(Re,yt)}}return $e.\u0275fac=function(se){return new(se||$e)(D.LFG(y.K0))},$e.\u0275prov=D.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const sn=["alt","control","meta","shift"],fn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},an={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Rn={alt:$e=>$e.altKey,control:$e=>$e.ctrlKey,meta:$e=>$e.metaKey,shift:$e=>$e.shiftKey};let vn=(()=>{class $e extends zt{constructor(se){super(se)}supports(se){return null!=$e.parseEventName(se)}addEventListener(se,Re,yt){const on=$e.parseEventName(Re),yn=$e.eventCallback(on.fullKey,yt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,y.q)().onAndCancel(se,on.domEventName,yn))}static parseEventName(se){const Re=se.toLowerCase().split("."),yt=Re.shift();if(0===Re.length||"keydown"!==yt&&"keyup"!==yt)return null;const on=$e._normalizeKey(Re.pop());let yn="";if(sn.forEach(O1=>{const ar=Re.indexOf(O1);ar>-1&&(Re.splice(ar,1),yn+=O1+".")}),yn+=on,0!=Re.length||0===on.length)return null;const _1={};return _1.domEventName=yt,_1.fullKey=yn,_1}static getEventFullKey(se){let Re="",yt=function Mn($e){let xe=$e.key;if(null==xe){if(xe=$e.keyIdentifier,null==xe)return"Unidentified";xe.startsWith("U+")&&(xe=String.fromCharCode(parseInt(xe.substring(2),16)),3===$e.location&&an.hasOwnProperty(xe)&&(xe=an[xe]))}return fn[xe]||xe}(se);return yt=yt.toLowerCase()," "===yt?yt="space":"."===yt&&(yt="dot"),sn.forEach(on=>{on!=yt&&Rn[on](se)&&(Re+=on+".")}),Re+=yt,Re}static eventCallback(se,Re,yt){return on=>{$e.getEventFullKey(on)===se&&yt.runGuarded(()=>Re(on))}}static _normalizeKey(se){return"esc"===se?"escape":se}}return $e.\u0275fac=function(se){return new(se||$e)(D.LFG(y.K0))},$e.\u0275prov=D.Yz7({token:$e,factory:$e.\u0275fac}),$e})();const U1=(0,D.eFA)(D._c5,"browser",[{provide:D.Lbi,useValue:y.bD},{provide:D.g9A,useValue:function I1(){Le.makeCurrent(),je.init()},multi:!0},{provide:y.K0,useFactory:function A1(){return(0,D.RDi)(document),document},deps:[]}]),n1=[{provide:D.zSh,useValue:"root"},{provide:D.qLn,useFactory:function c1(){return new D.qLn},deps:[]},{provide:ht,useClass:it,multi:!0,deps:[y.K0,D.R0b,D.Lbi]},{provide:ht,useClass:vn,multi:!0,deps:[y.K0]},{provide:Ze,useClass:Ze,deps:[vt,dt,D.AFp]},{provide:D.FYo,useExisting:Ze},{provide:tt,useExisting:dt},{provide:dt,useClass:dt,deps:[y.K0]},{provide:D.dDg,useClass:D.dDg,deps:[D.R0b]},{provide:vt,useClass:vt,deps:[ht,D.R0b]},{provide:y.JF,useClass:Nt,deps:[]}];let r1=(()=>{class $e{constructor(se){if(se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(se){return{ngModule:$e,providers:[{provide:D.AFp,useValue:se.appId},{provide:ze,useExisting:D.AFp},pe]}}}return $e.\u0275fac=function(se){return new(se||$e)(D.LFG($e,12))},$e.\u0275mod=D.oAB({type:$e}),$e.\u0275inj=D.cJS({providers:n1,imports:[y.ez,D.hGG]}),$e})();"undefined"!=typeof window&&window;let Jt=(()=>{class $e{}return $e.\u0275fac=function(se){return new(se||$e)},$e.\u0275prov=D.Yz7({token:$e,factory:function(se){let Re=null;return Re=se?new(se||$e):D.LFG(G1),Re},providedIn:"root"}),$e})(),G1=(()=>{class $e extends Jt{constructor(se){super(),this._doc=se}sanitize(se,Re){if(null==Re)return null;switch(se){case D.q3G.NONE:return Re;case D.q3G.HTML:return(0,D.qzn)(Re,"HTML")?(0,D.z3N)(Re):(0,D.EiD)(this._doc,String(Re)).toString();case D.q3G.STYLE:return(0,D.qzn)(Re,"Style")?(0,D.z3N)(Re):Re;case D.q3G.SCRIPT:if((0,D.qzn)(Re,"Script"))return(0,D.z3N)(Re);throw new Error("unsafe value used in a script context");case D.q3G.URL:return(0,D.yhl)(Re),(0,D.qzn)(Re,"URL")?(0,D.z3N)(Re):(0,D.mCW)(String(Re));case D.q3G.RESOURCE_URL:if((0,D.qzn)(Re,"ResourceURL"))return(0,D.z3N)(Re);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(se){return(0,D.JVY)(se)}bypassSecurityTrustStyle(se){return(0,D.L6k)(se)}bypassSecurityTrustScript(se){return(0,D.eBb)(se)}bypassSecurityTrustUrl(se){return(0,D.LAX)(se)}bypassSecurityTrustResourceUrl(se){return(0,D.pB0)(se)}}return $e.\u0275fac=function(se){return new(se||$e)(D.LFG(y.K0))},$e.\u0275prov=D.Yz7({token:$e,factory:function(se){let Re=null;return Re=se?new se:function Jn($e){return new G1($e.get(y.K0))}(D.LFG(D.zs3)),Re},providedIn:"root"}),$e})()},5839:(jt,We,B)=>{B.d(We,{gz:()=>_r,F0:()=>v1,rH:()=>Di,Od:()=>co,Bz:()=>ls,lC:()=>qn});var y=B(5e3),D=B(7579);class te extends D.x{constructor(E){super(),this._value=E}get value(){return this.getValue()}_subscribe(E){const b=super._subscribe(E);return!b.closed&&E.next(this._value),b}getValue(){const{hasError:E,thrownError:b,_value:N}=this;if(E)throw b;return this._throwIfClosed(),N}next(E){super.next(this._value=E)}}var Le=B(8306),De=B(4742),Ae=B(8996),ue=B(4671),ve=B(3268),ze=B(7669),_e=B(1810),pe=B(5403),je=B(9672);function vt(A,E,b){A?(0,je.f)(b,A,E):E()}var zt=B(576);function tt(A,E){const b=(0,zt.m)(A)?A:()=>A,N=z=>z.error(b());return new Le.y(E?z=>E.schedule(N,0,z):N)}var dt=B(8421);function Oe(A){return new Le.y(E=>{(0,dt.Xf)(A()).subscribe(E)})}var kt=B(727),ft=B(4482);function nt(){return(0,ft.e)((A,E)=>{let b=null;A._refCount++;const N=(0,pe.x)(E,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(b=null);const z=A._connection,W=b;b=null,z&&(!W||z===W)&&z.unsubscribe(),E.unsubscribe()});A.subscribe(N),N.closed||(b=A.connect())})}class qe extends Le.y{constructor(E,b){super(),this.source=E,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,ft.A)(E)&&(this.lift=E.lift)}_subscribe(E){return this.getSubject().subscribe(E)}getSubject(){const E=this._subject;return(!E||E.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:E}=this;this._subject=this._connection=null,null==E||E.unsubscribe()}connect(){let E=this._connection;if(!E){E=this._connection=new kt.w0;const b=this.getSubject();E.add(this.source.subscribe((0,pe.x)(b,void 0,()=>{this._teardown(),b.complete()},N=>{this._teardown(),b.error(N)},()=>this._teardown()))),E.closed&&(this._connection=null,E=kt.w0.EMPTY)}return E}refCount(){return nt()(this)}}var et=B(9646),_t=B(6805),le=B(7272),ot=B(515);function me(A){return(0,ft.e)((E,b)=>{let W,N=null,z=!1;N=E.subscribe((0,pe.x)(b,void 0,void 0,he=>{W=(0,dt.Xf)(A(he,me(A)(E))),N?(N.unsubscribe(),N=null,W.subscribe(b)):z=!0})),z&&(N.unsubscribe(),N=null,W.subscribe(b))})}var Pe=B(5577);function Ue(A,E){return(0,zt.m)(E)?(0,Pe.z)(A,E,1):(0,Pe.z)(A,1)}var Ze=B(9300);function Ke(A){return A<=0?()=>ot.E:(0,ft.e)((E,b)=>{let N=[];E.subscribe((0,pe.x)(b,z=>{N.push(z),A<N.length&&N.shift()},()=>{for(const z of N)b.next(z);b.complete()},void 0,()=>{N=null}))})}var Et=B(8068),Vt=B(6590),it=B(4004),sn=B(3900),hn=B(5698),fn=B(8675),an=B(5026),Rn=B(590),vn=B(8505),Mn=B(8189),I1=B(9808);class c1{constructor(E,b){this.id=E,this.url=b}}class A1 extends c1{constructor(E,b,N="imperative",z=null){super(E,b),this.navigationTrigger=N,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class p1 extends c1{constructor(E,b,N){super(E,b),this.urlAfterRedirects=N}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class U1 extends c1{constructor(E,b,N){super(E,b),this.reason=N}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class n1 extends c1{constructor(E,b,N){super(E,b),this.error=N}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class r1 extends c1{constructor(E,b,N,z){super(E,b),this.urlAfterRedirects=N,this.state=z}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wn extends c1{constructor(E,b,N,z){super(E,b),this.urlAfterRedirects=N,this.state=z}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dn extends c1{constructor(E,b,N,z,W){super(E,b),this.urlAfterRedirects=N,this.state=z,this.shouldActivate=W}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zn extends c1{constructor(E,b,N,z){super(E,b),this.urlAfterRedirects=N,this.state=z}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn extends c1{constructor(E,b,N,z){super(E,b),this.urlAfterRedirects=N,this.state=z}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ie{constructor(E){this.route=E}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class gr{constructor(E){this.route=E}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class vr{constructor(E){this.snapshot=E}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class B1{constructor(E){this.snapshot=E}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xt{constructor(E){this.snapshot=E}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N1{constructor(E){this.snapshot=E}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(E,b,N){this.routerEvent=E,this.position=b,this.anchor=N}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class nn{constructor(E){this.params=E||{}}has(E){return Object.prototype.hasOwnProperty.call(this.params,E)}get(E){if(this.has(E)){const b=this.params[E];return Array.isArray(b)?b[0]:b}return null}getAll(E){if(this.has(E)){const b=this.params[E];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function Wt(A){return new nn(A)}const j1="ngNavigationCancelingError";function x1(A){const E=Error("NavigationCancelingError: "+A);return E[j1]=!0,E}function Er(A,E,b){const N=b.path.split("/");if(N.length>A.length||"full"===b.pathMatch&&(E.hasChildren()||N.length<A.length))return null;const z={};for(let W=0;W<N.length;W++){const he=N[W],Se=A[W];if(he.startsWith(":"))z[he.substring(1)]=Se;else if(he!==Se.path)return null}return{consumed:A.slice(0,N.length),posParams:z}}function i1(A,E){const b=A?Object.keys(A):void 0,N=E?Object.keys(E):void 0;if(!b||!N||b.length!=N.length)return!1;let z;for(let W=0;W<b.length;W++)if(z=b[W],!Ce(A[z],E[z]))return!1;return!0}function Ce(A,E){if(Array.isArray(A)&&Array.isArray(E)){if(A.length!==E.length)return!1;const b=[...A].sort(),N=[...E].sort();return b.every((z,W)=>N[W]===z)}return A===E}function Ne(A){return Array.prototype.concat.apply([],A)}function be(A){return A.length>0?A[A.length-1]:null}function Me(A,E){for(const b in A)A.hasOwnProperty(b)&&E(A[b],b)}function ke(A){return(0,y.CqO)(A)?A:(0,y.QGY)(A)?(0,Ae.D)(Promise.resolve(A)):(0,et.of)(A)}const Ft={exact:function Jt(A,E,b){if(!on(A.segments,E.segments)||!$e(A.segments,E.segments,b)||A.numberOfChildren!==E.numberOfChildren)return!1;for(const N in E.children)if(!A.children[N]||!Jt(A.children[N],E.children[N],b))return!1;return!0},subset:G1},tn={exact:function Zn(A,E){return i1(A,E)},subset:function Jn(A,E){return Object.keys(E).length<=Object.keys(A).length&&Object.keys(E).every(b=>Ce(A[b],E[b]))},ignored:()=>!0};function cn(A,E,b){return Ft[b.paths](A.root,E.root,b.matrixParams)&&tn[b.queryParams](A.queryParams,E.queryParams)&&!("exact"===b.fragment&&A.fragment!==E.fragment)}function G1(A,E,b){return Ir(A,E,E.segments,b)}function Ir(A,E,b,N){if(A.segments.length>b.length){const z=A.segments.slice(0,b.length);return!(!on(z,b)||E.hasChildren()||!$e(z,b,N))}if(A.segments.length===b.length){if(!on(A.segments,b)||!$e(A.segments,b,N))return!1;for(const z in E.children)if(!A.children[z]||!G1(A.children[z],E.children[z],N))return!1;return!0}{const z=b.slice(0,A.segments.length),W=b.slice(A.segments.length);return!!(on(A.segments,z)&&$e(A.segments,z,N)&&A.children[Gt])&&Ir(A.children[Gt],E,W,N)}}function $e(A,E,b){return E.every((N,z)=>tn[b](A[z].parameters,N.parameters))}class xe{constructor(E,b,N){this.root=E,this.queryParams=b,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wt(this.queryParams)),this._queryParamMap}toString(){return ar.serialize(this)}}class se{constructor(E,b){this.segments=E,this.children=b,this.parent=null,Me(b,(N,z)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lr(this)}}class Re{constructor(E,b){this.path=E,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=Wt(this.parameters)),this._parameterMap}toString(){return W1(this)}}function on(A,E){return A.length===E.length&&A.every((b,N)=>b.path===E[N].path)}class _1{}class O1{parse(E){const b=new ei(E);return new xe(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(E){const b=`/${$1(E.root,!0)}`,N=function V1(A){const E=Object.keys(A).map(b=>{const N=A[b];return Array.isArray(N)?N.map(z=>`${yr(b)}=${yr(z)}`).join("&"):`${yr(b)}=${yr(N)}`}).filter(b=>!!b);return E.length?`?${E.join("&")}`:""}(E.queryParams);return`${b}${N}${"string"==typeof E.fragment?`#${function Yn(A){return encodeURI(A)}(E.fragment)}`:""}`}}const ar=new O1;function lr(A){return A.segments.map(E=>W1(E)).join("/")}function $1(A,E){if(!A.hasChildren())return lr(A);if(E){const b=A.children[Gt]?$1(A.children[Gt],!1):"",N=[];return Me(A.children,(z,W)=>{W!==Gt&&N.push(`${W}:${$1(z,!1)}`)}),N.length>0?`${b}(${N.join("//")})`:b}{const b=function yn(A,E){let b=[];return Me(A.children,(N,z)=>{z===Gt&&(b=b.concat(E(N,z)))}),Me(A.children,(N,z)=>{z!==Gt&&(b=b.concat(E(N,z)))}),b}(A,(N,z)=>z===Gt?[$1(A.children[Gt],!1)]:[`${z}:${$1(N,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Gt]?`${lr(A)}/${b[0]}`:`${lr(A)}/(${b.join("//")})`}}function k1(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yr(A){return k1(A).replace(/%3B/gi,";")}function Tt(A){return k1(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zt(A){return decodeURIComponent(A)}function Fn(A){return Zt(A.replace(/\+/g,"%20"))}function W1(A){return`${Tt(A.path)}${function Lr(A){return Object.keys(A).map(E=>`;${Tt(E)}=${Tt(A[E])}`).join("")}(A.parameters)}`}const Pr=/^[^\/()?;=#]+/;function m1(A){const E=A.match(Pr);return E?E[0]:""}const Ar=/^[^=?&#]+/,In=/^[^&#]+/;class ei{constructor(E){this.url=E,this.remaining=E}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new se([],{}):new se([],this.parseChildren())}parseQueryParams(){const E={};if(this.consumeOptional("?"))do{this.parseQueryParam(E)}while(this.consumeOptional("&"));return E}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const E=[];for(this.peekStartsWith("(")||E.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),E.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(E.length>0||Object.keys(b).length>0)&&(N[Gt]=new se(E,b)),N}parseSegment(){const E=m1(this.remaining);if(""===E&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(E),new Re(Zt(E),this.parseMatrixParams())}parseMatrixParams(){const E={};for(;this.consumeOptional(";");)this.parseParam(E);return E}parseParam(E){const b=m1(this.remaining);if(!b)return;this.capture(b);let N="";if(this.consumeOptional("=")){const z=m1(this.remaining);z&&(N=z,this.capture(N))}E[Zt(b)]=Zt(N)}parseQueryParam(E){const b=function z1(A){const E=A.match(Ar);return E?E[0]:""}(this.remaining);if(!b)return;this.capture(b);let N="";if(this.consumeOptional("=")){const he=function Or(A){const E=A.match(In);return E?E[0]:""}(this.remaining);he&&(N=he,this.capture(N))}const z=Fn(b),W=Fn(N);if(E.hasOwnProperty(z)){let he=E[z];Array.isArray(he)||(he=[he],E[z]=he),he.push(W)}else E[z]=W}parseParens(E){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=m1(this.remaining),z=this.remaining[N.length];if("/"!==z&&")"!==z&&";"!==z)throw new Error(`Cannot parse url '${this.url}'`);let W;N.indexOf(":")>-1?(W=N.substr(0,N.indexOf(":")),this.capture(W),this.capture(":")):E&&(W=Gt);const he=this.parseChildren();b[W]=1===Object.keys(he).length?he[Gt]:new se([],he),this.consumeOptional("//")}return b}peekStartsWith(E){return this.remaining.startsWith(E)}consumeOptional(E){return!!this.peekStartsWith(E)&&(this.remaining=this.remaining.substring(E.length),!0)}capture(E){if(!this.consumeOptional(E))throw new Error(`Expected "${E}".`)}}class ti{constructor(E){this._root=E}get root(){return this._root.value}parent(E){const b=this.pathFromRoot(E);return b.length>1?b[b.length-2]:null}children(E){const b=ur(E,this._root);return b?b.children.map(N=>N.value):[]}firstChild(E){const b=ur(E,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(E){const b=M1(E,this._root);return b.length<2?[]:b[b.length-2].children.map(z=>z.value).filter(z=>z!==E)}pathFromRoot(E){return M1(E,this._root).map(b=>b.value)}}function ur(A,E){if(A===E.value)return E;for(const b of E.children){const N=ur(A,b);if(N)return N}return null}function M1(A,E){if(A===E.value)return[E];for(const b of E.children){const N=M1(A,b);if(N.length)return N.unshift(E),N}return[]}class J1{constructor(E,b){this.value=E,this.children=b}toString(){return`TreeNode(${this.value})`}}function X1(A){const E={};return A&&A.children.forEach(b=>E[b.value.outlet]=b),E}class R1 extends ti{constructor(E,b){super(E),this.snapshot=b,hr(this,E)}toString(){return this.snapshot.toString()}}function s1(A,E){const b=function Yr(A,E){const he=new bi([],{},{},"",{},Gt,E,null,A.root,-1,{});return new r2("",new J1(he,[]))}(A,E),N=new te([new Re("",{})]),z=new te({}),W=new te({}),he=new te({}),Se=new te(""),mt=new _r(N,z,he,Se,W,Gt,E,b.root);return mt.snapshot=b.root,new R1(new J1(mt,[]),b)}class _r{constructor(E,b,N,z,W,he,Se,mt){this.url=E,this.params=b,this.queryParams=N,this.fragment=z,this.data=W,this.outlet=he,this.component=Se,this._futureSnapshot=mt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(E=>Wt(E)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(E=>Wt(E)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function er(A,E="emptyOnly"){const b=A.pathFromRoot;let N=0;if("always"!==E)for(N=b.length-1;N>=1;){const z=b[N],W=b[N-1];if(z.routeConfig&&""===z.routeConfig.path)N--;else{if(W.component)break;N--}}return function Nr(A){return A.reduce((E,b)=>({params:Object.assign(Object.assign({},E.params),b.params),data:Object.assign(Object.assign({},E.data),b.data),resolve:Object.assign(Object.assign({},E.resolve),b._resolvedData)}),{params:{},data:{},resolve:{}})}(b.slice(N))}class bi{constructor(E,b,N,z,W,he,Se,mt,rn,Qn,ln){this.url=E,this.params=b,this.queryParams=N,this.fragment=z,this.data=W,this.outlet=he,this.component=Se,this.routeConfig=mt,this._urlSegment=rn,this._lastPathIndex=Qn,this._resolve=ln}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class r2 extends ti{constructor(E,b){super(b),this.url=E,hr(this,b)}toString(){return Gr(this._root)}}function hr(A,E){E.value._routerState=A,E.children.forEach(b=>hr(A,b))}function Gr(A){const E=A.children.length>0?` { ${A.children.map(Gr).join(", ")} } `:"";return`${A.value}${E}`}function Ei(A){if(A.snapshot){const E=A.snapshot,b=A._futureSnapshot;A.snapshot=b,i1(E.queryParams,b.queryParams)||A.queryParams.next(b.queryParams),E.fragment!==b.fragment&&A.fragment.next(b.fragment),i1(E.params,b.params)||A.params.next(b.params),function D1(A,E){if(A.length!==E.length)return!1;for(let b=0;b<A.length;++b)if(!i1(A[b],E[b]))return!1;return!0}(E.url,b.url)||A.url.next(b.url),i1(E.data,b.data)||A.data.next(b.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function ni(A,E){const b=i1(A.params,E.params)&&function yt(A,E){return on(A,E)&&A.every((b,N)=>i1(b.parameters,E[N].parameters))}(A.url,E.url);return b&&!(!A.parent!=!E.parent)&&(!A.parent||ni(A.parent,E.parent))}function Z1(A,E,b){if(b&&A.shouldReuseRoute(E.value,b.value.snapshot)){const N=b.value;N._futureSnapshot=E.value;const z=function Qr(A,E,b){return E.children.map(N=>{for(const z of b.children)if(A.shouldReuseRoute(N.value,z.value.snapshot))return Z1(A,N,z);return Z1(A,N)})}(A,E,b);return new J1(N,z)}{if(A.shouldAttach(E.value)){const W=A.retrieve(E.value);if(null!==W){const he=W.route;return he.value._futureSnapshot=E.value,he.children=E.children.map(Se=>Z1(A,Se)),he}}const N=function pi(A){return new _r(new te(A.url),new te(A.params),new te(A.queryParams),new te(A.fragment),new te(A.data),A.outlet,A.component,A)}(E.value),z=E.children.map(W=>Z1(A,W));return new J1(N,z)}}function Ie(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function Ye(A){return"object"==typeof A&&null!=A&&A.outlets}function wt(A,E,b,N,z){let W={};if(N&&Me(N,(Se,mt)=>{W[mt]=Array.isArray(Se)?Se.map(rn=>`${rn}`):`${Se}`}),A===E)return new xe(b,W,z);const he=Lt(A,E,b);return new xe(he,W,z)}function Lt(A,E,b){const N={};return Me(A.children,(z,W)=>{N[W]=z===E?b:Lt(z,E,b)}),new se(A.segments,N)}class Ut{constructor(E,b,N){if(this.isAbsolute=E,this.numberOfDoubleDots=b,this.commands=N,E&&N.length>0&&Ie(N[0]))throw new Error("Root segment cannot have matrix parameters");const z=N.find(Ye);if(z&&z!==be(N))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class nr{constructor(E,b,N){this.segmentGroup=E,this.processChildren=b,this.index=N}}function Vr(A,E,b){if(A||(A=new se([],{})),0===A.segments.length&&A.hasChildren())return $r(A,E,b);const N=function xr(A,E,b){let N=0,z=E;const W={match:!1,pathIndex:0,commandIndex:0};for(;z<A.segments.length;){if(N>=b.length)return W;const he=A.segments[z],Se=b[N];if(Ye(Se))break;const mt=`${Se}`,rn=N<b.length-1?b[N+1]:null;if(z>0&&void 0===mt)break;if(mt&&rn&&"object"==typeof rn&&void 0===rn.outlets){if(!tr(mt,rn,he))return W;N+=2}else{if(!tr(mt,{},he))return W;N++}z++}return{match:!0,pathIndex:z,commandIndex:N}}(A,E,b),z=b.slice(N.commandIndex);if(N.match&&N.pathIndex<A.segments.length){const W=new se(A.segments.slice(0,N.pathIndex),{});return W.children[Gt]=new se(A.segments.slice(N.pathIndex),A.children),$r(W,0,z)}return N.match&&0===z.length?new se(A.segments,{}):N.match&&!A.hasChildren()?mi(A,E,b):N.match?$r(A,0,z):mi(A,E,b)}function $r(A,E,b){if(0===b.length)return new se(A.segments,{});{const N=function Fr(A){return Ye(A[0])?A[0].outlets:{[Gt]:A}}(b),z={};return Me(N,(W,he)=>{"string"==typeof W&&(W=[W]),null!==W&&(z[he]=Vr(A.children[he],E,W))}),Me(A.children,(W,he)=>{void 0===N[he]&&(z[he]=W)}),new se(A.segments,z)}}function mi(A,E,b){const N=A.segments.slice(0,E);let z=0;for(;z<b.length;){const W=b[z];if(Ye(W)){const mt=s2(W.outlets);return new se(N,mt)}if(0===z&&Ie(b[0])){N.push(new Re(A.segments[E].path,o2(b[0]))),z++;continue}const he=Ye(W)?W.outlets[Gt]:`${W}`,Se=z<b.length-1?b[z+1]:null;he&&Se&&Ie(Se)?(N.push(new Re(he,o2(Se))),z+=2):(N.push(new Re(he,{})),z++)}return new se(N,{})}function s2(A){const E={};return Me(A,(b,N)=>{"string"==typeof b&&(b=[b]),null!==b&&(E[N]=mi(new se([],{}),0,b))}),E}function o2(A){const E={};return Me(A,(b,N)=>E[N]=`${b}`),E}function tr(A,E,b){return A==b.path&&i1(E,b.parameters)}class ii{constructor(E,b,N,z){this.routeReuseStrategy=E,this.futureState=b,this.currState=N,this.forwardEvent=z}activate(E){const b=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,N,E),Ei(this.futureState.root),this.activateChildRoutes(b,N,E)}deactivateChildRoutes(E,b,N){const z=X1(b);E.children.forEach(W=>{const he=W.value.outlet;this.deactivateRoutes(W,z[he],N),delete z[he]}),Me(z,(W,he)=>{this.deactivateRouteAndItsChildren(W,N)})}deactivateRoutes(E,b,N){const z=E.value,W=b?b.value:null;if(z===W)if(z.component){const he=N.getContext(z.outlet);he&&this.deactivateChildRoutes(E,b,he.children)}else this.deactivateChildRoutes(E,b,N);else W&&this.deactivateRouteAndItsChildren(b,N)}deactivateRouteAndItsChildren(E,b){E.value.component&&this.routeReuseStrategy.shouldDetach(E.value.snapshot)?this.detachAndStoreRouteSubtree(E,b):this.deactivateRouteAndOutlet(E,b)}detachAndStoreRouteSubtree(E,b){const N=b.getContext(E.value.outlet),z=N&&E.value.component?N.children:b,W=X1(E);for(const he of Object.keys(W))this.deactivateRouteAndItsChildren(W[he],z);if(N&&N.outlet){const he=N.outlet.detach(),Se=N.children.onOutletDeactivated();this.routeReuseStrategy.store(E.value.snapshot,{componentRef:he,route:E,contexts:Se})}}deactivateRouteAndOutlet(E,b){const N=b.getContext(E.value.outlet),z=N&&E.value.component?N.children:b,W=X1(E);for(const he of Object.keys(W))this.deactivateRouteAndItsChildren(W[he],z);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(E,b,N){const z=X1(b);E.children.forEach(W=>{this.activateRoutes(W,z[W.value.outlet],N),this.forwardEvent(new N1(W.value.snapshot))}),E.children.length&&this.forwardEvent(new B1(E.value.snapshot))}activateRoutes(E,b,N){const z=E.value,W=b?b.value:null;if(Ei(z),z===W)if(z.component){const he=N.getOrCreateContext(z.outlet);this.activateChildRoutes(E,b,he.children)}else this.activateChildRoutes(E,b,N);else if(z.component){const he=N.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const Se=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),he.children.onOutletReAttached(Se.contexts),he.attachRef=Se.componentRef,he.route=Se.route.value,he.outlet&&he.outlet.attach(Se.componentRef,Se.route.value),Ei(Se.route.value),this.activateChildRoutes(E,null,he.children)}else{const Se=function qi(A){for(let E=A.parent;E;E=E.parent){const b=E.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig;if(b&&b.component)return null}return null}(z.snapshot),mt=Se?Se.module.componentFactoryResolver:null;he.attachRef=null,he.route=z,he.resolver=mt,he.outlet&&he.outlet.activateWith(z,mt),this.activateChildRoutes(E,null,he.children)}}else this.activateChildRoutes(E,null,N)}}class w2{constructor(E,b){this.routes=E,this.module=b}}function Ii(A){return"function"==typeof A}function K1(A){return A instanceof xe}const si=Symbol("INITIAL_VALUE");function Cr(){return(0,sn.w)(A=>function Nt(...A){const E=(0,ze.yG)(A),b=(0,ze.jO)(A),{args:N,keys:z}=(0,De.D)(A);if(0===N.length)return(0,Ae.D)([],E);const W=new Le.y(function ht(A,E,b=ue.y){return N=>{vt(E,()=>{const{length:z}=A,W=new Array(z);let he=z,Se=z;for(let mt=0;mt<z;mt++)vt(E,()=>{const rn=(0,Ae.D)(A[mt],E);let Qn=!1;rn.subscribe((0,pe.x)(N,ln=>{W[mt]=ln,Qn||(Qn=!0,Se--),Se||N.next(b(W.slice()))},()=>{--he||N.complete()}))},N)},N)}}(N,E,z?he=>(0,_e.n)(z,he):ue.y));return b?W.pipe((0,ve.Z)(b)):W}(A.map(E=>E.pipe((0,hn.q)(1),(0,fn.O)(si)))).pipe((0,an.R)((E,b)=>{let N=!1;return b.reduce((z,W,he)=>z!==si?z:(W===si&&(N=!0),N||!1!==W&&he!==b.length-1&&!K1(W)?z:W),E)},si),(0,Ze.h)(E=>E!==si),(0,it.U)(E=>K1(E)?E:!0===E),(0,hn.q)(1)))}class a2{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gn,this.attachRef=null}}class Gn{constructor(){this.contexts=new Map}onChildOutletCreated(E,b){const N=this.getOrCreateContext(E);N.outlet=b,this.contexts.set(E,N)}onChildOutletDestroyed(E){const b=this.getContext(E);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const E=this.contexts;return this.contexts=new Map,E}onOutletReAttached(E){this.contexts=E}getOrCreateContext(E){let b=this.getContext(E);return b||(b=new a2,this.contexts.set(E,b)),b}getContext(E){return this.contexts.get(E)||null}}let qn=(()=>{class A{constructor(b,N,z,W,he){this.parentContexts=b,this.location=N,this.resolver=z,this.changeDetector=he,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=W||Gt,b.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const b=this.parentContexts.getContext(this.name);b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,N){this.activated=b,this._activatedRoute=N,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,N){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;const he=(N=N||this.resolver).resolveComponentFactory(b._futureSnapshot.routeConfig.component),Se=this.parentContexts.getOrCreateContext(this.name).children,mt=new bn(b,Se,this.location.injector);this.activated=this.location.createComponent(he,this.location.length,mt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(b){return new(b||A)(y.Y36(Gn),y.Y36(y.s_b),y.Y36(y._Vd),y.$8M("name"),y.Y36(y.sBO))},A.\u0275dir=y.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),A})();class bn{constructor(E,b,N){this.route=E,this.childContexts=b,this.parent=N}get(E,b){return E===_r?this.route:E===Gn?this.childContexts:this.parent.get(E,b)}}let wr=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275cmp=y.Xpm({type:A,selectors:[["ng-component"]],decls:1,vars:0,template:function(b,N){1&b&&y._UZ(0,"router-outlet")},directives:[qn],encapsulation:2}),A})();function Xn(A,E=""){for(let b=0;b<A.length;b++){const N=A[b];Li(N,f1(E,N))}}function Li(A,E){A.children&&Xn(A.children,E)}function f1(A,E){return E?A||E.path?A&&!E.path?`${A}/`:!A&&E.path?E.path:`${A}/${E.path}`:"":A}function k(A){const E=A.children&&A.children.map(k),b=E?Object.assign(Object.assign({},A),{children:E}):Object.assign({},A);return!b.component&&(E||b.loadChildren)&&b.outlet&&b.outlet!==Gt&&(b.component=wr),b}function Y(A){return A.outlet||Gt}function R(A,E){const b=A.filter(N=>Y(N)===E);return b.push(...A.filter(N=>Y(N)!==E)),b}const K={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ye(A,E,b){var N;if(""===E.path)return"full"===E.pathMatch&&(A.hasChildren()||b.length>0)?Object.assign({},K):{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const W=(E.matcher||Er)(b,A,E);if(!W)return Object.assign({},K);const he={};Me(W.posParams,(mt,rn)=>{he[rn]=mt.path});const Se=W.consumed.length>0?Object.assign(Object.assign({},he),W.consumed[W.consumed.length-1].parameters):he;return{matched:!0,consumedSegments:W.consumed,remainingSegments:b.slice(W.consumed.length),parameters:Se,positionalParamSegments:null!==(N=W.posParams)&&void 0!==N?N:{}}}function st(A,E,b,N,z="corrected"){if(b.length>0&&function En(A,E,b){return b.some(N=>Ln(A,E,N)&&Y(N)!==Gt)}(A,b,N)){const he=new se(E,function Kt(A,E,b,N){const z={};z[Gt]=N,N._sourceSegment=A,N._segmentIndexShift=E.length;for(const W of b)if(""===W.path&&Y(W)!==Gt){const he=new se([],{});he._sourceSegment=A,he._segmentIndexShift=E.length,z[Y(W)]=he}return z}(A,E,N,new se(b,A.children)));return he._sourceSegment=A,he._segmentIndexShift=E.length,{segmentGroup:he,slicedSegments:[]}}if(0===b.length&&function u1(A,E,b){return b.some(N=>Ln(A,E,N))}(A,b,N)){const he=new se(A.segments,function bt(A,E,b,N,z,W){const he={};for(const Se of N)if(Ln(A,b,Se)&&!z[Y(Se)]){const mt=new se([],{});mt._sourceSegment=A,mt._segmentIndexShift="legacy"===W?A.segments.length:E.length,he[Y(Se)]=mt}return Object.assign(Object.assign({},z),he)}(A,E,b,N,A.children,z));return he._sourceSegment=A,he._segmentIndexShift=E.length,{segmentGroup:he,slicedSegments:b}}const W=new se(A.segments,A.children);return W._sourceSegment=A,W._segmentIndexShift=E.length,{segmentGroup:W,slicedSegments:b}}function Ln(A,E,b){return(!(A.hasChildren()||E.length>0)||"full"!==b.pathMatch)&&""===b.path}function $n(A,E,b,N){return!!(Y(A)===N||N!==Gt&&Ln(E,b,A))&&("**"===A.path||ye(E,A,b).matched)}function b1(A,E,b){return 0===E.length&&!A.children[b]}class S1{constructor(E){this.segmentGroup=E||null}}class L1{constructor(E){this.urlTree=E}}function oi(A){return tt(new S1(A))}function Sr(A){return tt(new L1(A))}class M2{constructor(E,b,N,z,W){this.configLoader=b,this.urlSerializer=N,this.urlTree=z,this.config=W,this.allowRedirects=!0,this.ngModule=E.get(y.h0i)}apply(){const E=st(this.urlTree.root,[],[],this.config).segmentGroup,b=new se(E.segments,E.children);return this.expandSegmentGroup(this.ngModule,this.config,b,Gt).pipe((0,it.U)(W=>this.createUrlTree(U(W),this.urlTree.queryParams,this.urlTree.fragment))).pipe(me(W=>{if(W instanceof L1)return this.allowRedirects=!1,this.match(W.urlTree);throw W instanceof S1?this.noMatchError(W):W}))}match(E){return this.expandSegmentGroup(this.ngModule,this.config,E.root,Gt).pipe((0,it.U)(z=>this.createUrlTree(U(z),E.queryParams,E.fragment))).pipe(me(z=>{throw z instanceof S1?this.noMatchError(z):z}))}noMatchError(E){return new Error(`Cannot match any routes. URL Segment: '${E.segmentGroup}'`)}createUrlTree(E,b,N){const z=E.segments.length>0?new se([],{[Gt]:E}):E;return new xe(z,b,N)}expandSegmentGroup(E,b,N,z){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(E,b,N).pipe((0,it.U)(W=>new se([],W))):this.expandSegment(E,N,b,N.segments,z,!0)}expandChildren(E,b,N){const z=[];for(const W of Object.keys(N.children))"primary"===W?z.unshift(W):z.push(W);return(0,Ae.D)(z).pipe(Ue(W=>{const he=N.children[W],Se=R(b,W);return this.expandSegmentGroup(E,Se,he,W).pipe((0,it.U)(mt=>({segment:mt,outlet:W})))}),(0,an.R)((W,he)=>(W[he.outlet]=he.segment,W),{}),function Yt(A,E){const b=arguments.length>=2;return N=>N.pipe(A?(0,Ze.h)((z,W)=>A(z,W,N)):ue.y,Ke(1),b?(0,Vt.d)(E):(0,Et.T)(()=>new _t.K))}())}expandSegment(E,b,N,z,W,he){return(0,Ae.D)(N).pipe(Ue(Se=>this.expandSegmentAgainstRoute(E,b,N,Se,z,W,he).pipe(me(rn=>{if(rn instanceof S1)return(0,et.of)(null);throw rn}))),(0,Rn.P)(Se=>!!Se),me((Se,mt)=>{if(Se instanceof _t.K||"EmptyError"===Se.name)return b1(b,z,W)?(0,et.of)(new se([],{})):oi(b);throw Se}))}expandSegmentAgainstRoute(E,b,N,z,W,he,Se){return $n(z,b,W,he)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(E,b,z,W,he):Se&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(E,b,N,z,W,he):oi(b):oi(b)}expandSegmentAgainstRouteUsingRedirect(E,b,N,z,W,he){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(E,N,z,he):this.expandRegularSegmentAgainstRouteUsingRedirect(E,b,N,z,W,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(E,b,N,z){const W=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?Sr(W):this.lineralizeSegments(N,W).pipe((0,Pe.z)(he=>{const Se=new se(he,{});return this.expandSegment(E,Se,b,he,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(E,b,N,z,W,he){const{matched:Se,consumedSegments:mt,remainingSegments:rn,positionalParamSegments:Qn}=ye(b,z,W);if(!Se)return oi(b);const ln=this.applyRedirectCommands(mt,z.redirectTo,Qn);return z.redirectTo.startsWith("/")?Sr(ln):this.lineralizeSegments(z,ln).pipe((0,Pe.z)(P1=>this.expandSegment(E,b,N,P1.concat(rn),he,!1)))}matchSegmentAgainstRoute(E,b,N,z,W){if("**"===N.path)return N.loadChildren?(N._loadedConfig?(0,et.of)(N._loadedConfig):this.configLoader.load(E.injector,N)).pipe((0,it.U)(ln=>(N._loadedConfig=ln,new se(z,{})))):(0,et.of)(new se(z,{}));const{matched:he,consumedSegments:Se,remainingSegments:mt}=ye(b,N,z);return he?this.getChildConfig(E,N,z).pipe((0,Pe.z)(Qn=>{const ln=Qn.module,P1=Qn.routes,{segmentGroup:q1,slicedSegments:o1}=st(b,Se,mt,P1),ui=new se(q1.segments,q1.children);if(0===o1.length&&ui.hasChildren())return this.expandChildren(ln,P1,ui).pipe((0,it.U)(h2=>new se(Se,h2)));if(0===P1.length&&0===o1.length)return(0,et.of)(new se(Se,{}));const P2=Y(N)===W;return this.expandSegment(ln,ui,P1,o1,P2?Gt:W,!0).pipe((0,it.U)(Dn=>new se(Se.concat(Dn.segments),Dn.children)))})):oi(b)}getChildConfig(E,b,N){return b.children?(0,et.of)(new w2(b.children,E)):b.loadChildren?void 0!==b._loadedConfig?(0,et.of)(b._loadedConfig):this.runCanLoadGuards(E.injector,b,N).pipe((0,Pe.z)(z=>z?this.configLoader.load(E.injector,b).pipe((0,it.U)(W=>(b._loadedConfig=W,W))):function gi(A){return tt(x1(`Cannot load children because the guard of the route "path: '${A.path}'" returned false`))}(b))):(0,et.of)(new w2([],E))}runCanLoadGuards(E,b,N){const z=b.canLoad;if(!z||0===z.length)return(0,et.of)(!0);const W=z.map(he=>{const Se=E.get(he);let mt;if(function Ai(A){return A&&Ii(A.canLoad)}(Se))mt=Se.canLoad(b,N);else{if(!Ii(Se))throw new Error("Invalid CanLoad guard");mt=Se(b,N)}return ke(mt)});return(0,et.of)(W).pipe(Cr(),(0,vn.b)(he=>{if(!K1(he))return;const Se=x1(`Redirecting to "${this.urlSerializer.serialize(he)}"`);throw Se.url=he,Se}),(0,it.U)(he=>!0===he))}lineralizeSegments(E,b){let N=[],z=b.root;for(;;){if(N=N.concat(z.segments),0===z.numberOfChildren)return(0,et.of)(N);if(z.numberOfChildren>1||!z.children[Gt])return tt(new Error(`Only absolute redirects can have named outlets. redirectTo: '${E.redirectTo}'`));z=z.children[Gt]}}applyRedirectCommands(E,b,N){return this.applyRedirectCreatreUrlTree(b,this.urlSerializer.parse(b),E,N)}applyRedirectCreatreUrlTree(E,b,N,z){const W=this.createSegmentGroup(E,b.root,N,z);return new xe(W,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(E,b){const N={};return Me(E,(z,W)=>{if("string"==typeof z&&z.startsWith(":")){const Se=z.substring(1);N[W]=b[Se]}else N[W]=z}),N}createSegmentGroup(E,b,N,z){const W=this.createSegments(E,b.segments,N,z);let he={};return Me(b.children,(Se,mt)=>{he[mt]=this.createSegmentGroup(E,Se,N,z)}),new se(W,he)}createSegments(E,b,N,z){return b.map(W=>W.path.startsWith(":")?this.findPosParam(E,W,z):this.findOrReturn(W,N))}findPosParam(E,b,N){const z=N[b.path.substring(1)];if(!z)throw new Error(`Cannot redirect to '${E}'. Cannot find '${b.path}'.`);return z}findOrReturn(E,b){let N=0;for(const z of b){if(z.path===E.path)return b.splice(N),z;N++}return E}}function U(A){const E={};for(const N of Object.keys(A.children)){const W=U(A.children[N]);(W.segments.length>0||W.hasChildren())&&(E[N]=W)}return function Fi(A){if(1===A.numberOfChildren&&A.children[Gt]){const E=A.children[Gt];return new se(A.segments.concat(E.segments),E.children)}return A}(new se(A.segments,E))}class V{constructor(E){this.path=E,this.route=this.path[this.path.length-1]}}class re{constructor(E,b){this.component=E,this.route=b}}function Ee(A,E,b){const N=A._root;return ai(N,E?E._root:null,b,[N.value])}function C1(A,E,b){const N=function Bn(A){if(!A)return null;for(let E=A.parent;E;E=E.parent){const b=E.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig}return null}(E);return(N?N.module.injector:b).get(A)}function ai(A,E,b,N,z={canDeactivateChecks:[],canActivateChecks:[]}){const W=X1(E);return A.children.forEach(he=>{(function sr(A,E,b,N,z={canDeactivateChecks:[],canActivateChecks:[]}){const W=A.value,he=E?E.value:null,Se=b?b.getContext(A.value.outlet):null;if(he&&W.routeConfig===he.routeConfig){const mt=function Wr(A,E,b){if("function"==typeof b)return b(A,E);switch(b){case"pathParamsChange":return!on(A.url,E.url);case"pathParamsOrQueryParamsChange":return!on(A.url,E.url)||!i1(A.queryParams,E.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ni(A,E)||!i1(A.queryParams,E.queryParams);default:return!ni(A,E)}}(he,W,W.routeConfig.runGuardsAndResolvers);mt?z.canActivateChecks.push(new V(N)):(W.data=he.data,W._resolvedData=he._resolvedData),ai(A,E,W.component?Se?Se.children:null:b,N,z),mt&&Se&&Se.outlet&&Se.outlet.isActivated&&z.canDeactivateChecks.push(new re(Se.outlet.component,he))}else he&&Ui(E,Se,z),z.canActivateChecks.push(new V(N)),ai(A,null,W.component?Se?Se.children:null:b,N,z)})(he,W[he.value.outlet],b,N.concat([he.value]),z),delete W[he.value.outlet]}),Me(W,(he,Se)=>Ui(he,b.getContext(Se),z)),z}function Ui(A,E,b){const N=X1(A),z=A.value;Me(N,(W,he)=>{Ui(W,z.component?E?E.children.getContext(he):null:E,b)}),b.canDeactivateChecks.push(new re(z.component&&E&&E.outlet&&E.outlet.isActivated?E.outlet.component:null,z))}class Yi{}function G(A){return new Le.y(E=>E.error(A))}class oe{constructor(E,b,N,z,W,he){this.rootComponentType=E,this.config=b,this.urlTree=N,this.url=z,this.paramsInheritanceStrategy=W,this.relativeLinkResolution=he}recognize(){const E=st(this.urlTree.root,[],[],this.config.filter(he=>void 0===he.redirectTo),this.relativeLinkResolution).segmentGroup,b=this.processSegmentGroup(this.config,E,Gt);if(null===b)return null;const N=new bi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new J1(N,b),W=new r2(this.url,z);return this.inheritParamsAndData(W._root),W}inheritParamsAndData(E){const b=E.value,N=er(b,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data),E.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(E,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(E,b):this.processSegment(E,b,b.segments,N)}processChildren(E,b){const N=[];for(const W of Object.keys(b.children)){const he=b.children[W],Se=R(E,W),mt=this.processSegmentGroup(Se,he,W);if(null===mt)return null;N.push(...mt)}const z=Mt(N);return function de(A){A.sort((E,b)=>E.value.outlet===Gt?-1:b.value.outlet===Gt?1:E.value.outlet.localeCompare(b.value.outlet))}(z),z}processSegment(E,b,N,z){for(const W of E){const he=this.processSegmentAgainstRoute(W,b,N,z);if(null!==he)return he}return b1(b,N,z)?[]:null}processSegmentAgainstRoute(E,b,N,z){if(E.redirectTo||!$n(E,b,N,z))return null;let W,he=[],Se=[];if("**"===E.path){const q1=N.length>0?be(N).parameters:{};W=new bi(N,q1,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bt(E),Y(E),E.component,E,$t(b),On(b)+N.length,e1(E))}else{const q1=ye(b,E,N);if(!q1.matched)return null;he=q1.consumedSegments,Se=q1.remainingSegments,W=new bi(he,q1.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Bt(E),Y(E),E.component,E,$t(b),On(b)+he.length,e1(E))}const mt=function Be(A){return A.children?A.children:A.loadChildren?A._loadedConfig.routes:[]}(E),{segmentGroup:rn,slicedSegments:Qn}=st(b,he,Se,mt.filter(q1=>void 0===q1.redirectTo),this.relativeLinkResolution);if(0===Qn.length&&rn.hasChildren()){const q1=this.processChildren(mt,rn);return null===q1?null:[new J1(W,q1)]}if(0===mt.length&&0===Qn.length)return[new J1(W,[])];const ln=Y(E)===z,P1=this.processSegment(mt,rn,Qn,ln?Gt:z);return null===P1?null:[new J1(W,P1)]}}function ut(A){const E=A.value.routeConfig;return E&&""===E.path&&void 0===E.redirectTo}function Mt(A){const E=[],b=new Set;for(const N of A){if(!ut(N)){E.push(N);continue}const z=E.find(W=>N.value.routeConfig===W.value.routeConfig);void 0!==z?(z.children.push(...N.children),b.add(z)):E.push(N)}for(const N of b){const z=Mt(N.children);E.push(new J1(N.value,z))}return E.filter(N=>!b.has(N))}function $t(A){let E=A;for(;E._sourceSegment;)E=E._sourceSegment;return E}function On(A){let E=A,b=E._segmentIndexShift?E._segmentIndexShift:0;for(;E._sourceSegment;)E=E._sourceSegment,b+=E._segmentIndexShift?E._segmentIndexShift:0;return b-1}function Bt(A){return A.data||{}}function e1(A){return A.resolve||{}}function fr(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}function kr(A){return(0,sn.w)(E=>{const b=A(E);return b?(0,Ae.D)(b).pipe((0,it.U)(()=>E)):(0,et.of)(E)})}class or extends class ci{shouldDetach(E){return!1}store(E,b){}shouldAttach(E){return!1}retrieve(E){return null}shouldReuseRoute(E,b){return E.routeConfig===b.routeConfig}}{}const xi=new y.OlP("ROUTES");class bo{constructor(E,b,N,z){this.injector=E,this.compiler=b,this.onLoadStartListener=N,this.onLoadEndListener=z}load(E,b){if(b._loader$)return b._loader$;this.onLoadStartListener&&this.onLoadStartListener(b);const z=this.loadModuleFactory(b.loadChildren).pipe((0,it.U)(W=>{this.onLoadEndListener&&this.onLoadEndListener(b);const he=W.create(E);return new w2(Ne(he.injector.get(xi,void 0,y.XFs.Self|y.XFs.Optional)).map(k),he)}),me(W=>{throw b._loader$=void 0,W}));return b._loader$=new qe(z,()=>new D.x).pipe(nt()),b._loader$}loadModuleFactory(E){return ke(E()).pipe((0,Pe.z)(b=>b instanceof y.YKP?(0,et.of)(b):(0,Ae.D)(this.compiler.compileModuleAsync(b))))}}class W2{shouldProcessUrl(E){return!0}extract(E){return E}merge(E,b){return E}}function N2(A){throw A}function ao(A,E,b){return E.parse("/")}function l2(A,E){return(0,et.of)(null)}const b2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Z2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let v1=(()=>{class A{constructor(b,N,z,W,he,Se,mt){this.rootComponentType=b,this.urlSerializer=N,this.rootContexts=z,this.location=W,this.config=mt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new D.x,this.errorHandler=N2,this.malformedUriErrorHandler=ao,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:l2,afterPreactivation:l2},this.urlHandlingStrategy=new W2,this.routeReuseStrategy=new or,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=he.get(y.h0i),this.console=he.get(y.c2e);const ln=he.get(y.R0b);this.isNgZoneEnabled=ln instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(mt),this.currentUrlTree=function rt(){return new xe(new se([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bo(he,Se,P1=>this.triggerEvent(new ie(P1)),P1=>this.triggerEvent(new gr(P1))),this.routerState=s1(this.currentUrlTree,this.rootComponentType),this.transitions=new te({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}setupNavigations(b){const N=this.events;return b.pipe((0,Ze.h)(z=>0!==z.id),(0,it.U)(z=>Object.assign(Object.assign({},z),{extractedUrl:this.urlHandlingStrategy.extract(z.rawUrl)})),(0,sn.w)(z=>{let W=!1,he=!1;return(0,et.of)(z).pipe((0,vn.b)(Se=>{this.currentNavigation={id:Se.id,initialUrl:Se.currentRawUrl,extractedUrl:Se.extractedUrl,trigger:Se.source,extras:Se.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,sn.w)(Se=>{const mt=this.browserUrlTree.toString(),rn=!this.navigated||Se.extractedUrl.toString()!==mt||mt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||rn)&&this.urlHandlingStrategy.shouldProcessUrl(Se.rawUrl))return Bs(Se.source)&&(this.browserUrlTree=Se.extractedUrl),(0,et.of)(Se).pipe((0,sn.w)(ln=>{const P1=this.transitions.getValue();return N.next(new A1(ln.id,this.serializeUrl(ln.extractedUrl),ln.source,ln.restoredState)),P1!==this.transitions.getValue()?ot.E:Promise.resolve(ln)}),function P(A,E,b,N){return(0,sn.w)(z=>function G2(A,E,b,N,z){return new M2(A,E,b,N,z).apply()}(A,E,b,z.extractedUrl,N).pipe((0,it.U)(W=>Object.assign(Object.assign({},z),{urlAfterRedirects:W}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,vn.b)(ln=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:ln.urlAfterRedirects})}),function g1(A,E,b,N,z){return(0,Pe.z)(W=>function ee(A,E,b,N,z="emptyOnly",W="legacy"){try{const he=new oe(A,E,b,N,z,W).recognize();return null===he?G(new Yi):(0,et.of)(he)}catch(he){return G(he)}}(A,E,W.urlAfterRedirects,b(W.urlAfterRedirects),N,z).pipe((0,it.U)(he=>Object.assign(Object.assign({},W),{targetSnapshot:he}))))}(this.rootComponentType,this.config,ln=>this.serializeUrl(ln),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,vn.b)(ln=>{if("eager"===this.urlUpdateStrategy){if(!ln.extras.skipLocationChange){const q1=this.urlHandlingStrategy.merge(ln.urlAfterRedirects,ln.rawUrl);this.setBrowserUrl(q1,ln)}this.browserUrlTree=ln.urlAfterRedirects}const P1=new r1(ln.id,this.serializeUrl(ln.extractedUrl),this.serializeUrl(ln.urlAfterRedirects),ln.targetSnapshot);N.next(P1)}));if(rn&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P1,extractedUrl:q1,source:o1,restoredState:ui,extras:P2}=Se,ys=new A1(P1,this.serializeUrl(q1),o1,ui);N.next(ys);const Dn=s1(q1,this.rootComponentType).snapshot;return(0,et.of)(Object.assign(Object.assign({},Se),{targetSnapshot:Dn,urlAfterRedirects:q1,extras:Object.assign(Object.assign({},P2),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Se.rawUrl,Se.resolve(null),ot.E}),kr(Se=>{const{targetSnapshot:mt,id:rn,extractedUrl:Qn,rawUrl:ln,extras:{skipLocationChange:P1,replaceUrl:q1}}=Se;return this.hooks.beforePreactivation(mt,{navigationId:rn,appliedUrlTree:Qn,rawUrlTree:ln,skipLocationChange:!!P1,replaceUrl:!!q1})}),(0,vn.b)(Se=>{const mt=new Wn(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot);this.triggerEvent(mt)}),(0,it.U)(Se=>Object.assign(Object.assign({},Se),{guards:Ee(Se.targetSnapshot,Se.currentSnapshot,this.rootContexts)})),function as(A,E){return(0,Pe.z)(b=>{const{targetSnapshot:N,currentSnapshot:z,guards:{canActivateChecks:W,canDeactivateChecks:he}}=b;return 0===he.length&&0===W.length?(0,et.of)(Object.assign(Object.assign({},b),{guardsResult:!0})):function Mo(A,E,b,N){return(0,Ae.D)(A).pipe((0,Pe.z)(z=>function $2(A,E,b,N,z){const W=E&&E.routeConfig?E.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,et.of)(!0);const he=W.map(Se=>{const mt=C1(Se,E,z);let rn;if(function ir(A){return A&&Ii(A.canDeactivate)}(mt))rn=ke(mt.canDeactivate(A,E,b,N));else{if(!Ii(mt))throw new Error("Invalid CanDeactivate guard");rn=ke(mt(A,E,b,N))}return rn.pipe((0,Rn.P)())});return(0,et.of)(he).pipe(Cr())}(z.component,z.route,b,E,N)),(0,Rn.P)(z=>!0!==z,!0))}(he,N,z,A).pipe((0,Pe.z)(Se=>Se&&function os(A){return"boolean"==typeof A}(Se)?function ps(A,E,b,N){return(0,Ae.D)(E).pipe(Ue(z=>(0,le.z)(function c2(A,E){return null!==A&&E&&E(new vr(A)),(0,et.of)(!0)}(z.route.parent,N),function Us(A,E){return null!==A&&E&&E(new Xt(A)),(0,et.of)(!0)}(z.route,N),function Bi(A,E,b){const N=E[E.length-1],W=E.slice(0,E.length-1).reverse().map(he=>function Dt(A){const E=A.routeConfig?A.routeConfig.canActivateChild:null;return E&&0!==E.length?{node:A,guards:E}:null}(he)).filter(he=>null!==he).map(he=>Oe(()=>{const Se=he.guards.map(mt=>{const rn=C1(mt,he.node,b);let Qn;if(function Ki(A){return A&&Ii(A.canActivateChild)}(rn))Qn=ke(rn.canActivateChild(N,A));else{if(!Ii(rn))throw new Error("Invalid CanActivateChild guard");Qn=ke(rn(N,A))}return Qn.pipe((0,Rn.P)())});return(0,et.of)(Se).pipe(Cr())}));return(0,et.of)(W).pipe(Cr())}(A,z.path,b),function Rr(A,E,b){const N=E.routeConfig?E.routeConfig.canActivate:null;if(!N||0===N.length)return(0,et.of)(!0);const z=N.map(W=>Oe(()=>{const he=C1(W,E,b);let Se;if(function Dr(A){return A&&Ii(A.canActivate)}(he))Se=ke(he.canActivate(E,A));else{if(!Ii(he))throw new Error("Invalid CanActivate guard");Se=ke(he(E,A))}return Se.pipe((0,Rn.P)())}));return(0,et.of)(z).pipe(Cr())}(A,z.route,b))),(0,Rn.P)(z=>!0!==z,!0))}(N,W,A,E):(0,et.of)(Se)),(0,it.U)(Se=>Object.assign(Object.assign({},b),{guardsResult:Se})))})}(this.ngModule.injector,Se=>this.triggerEvent(Se)),(0,vn.b)(Se=>{if(K1(Se.guardsResult)){const rn=x1(`Redirecting to "${this.serializeUrl(Se.guardsResult)}"`);throw rn.url=Se.guardsResult,rn}const mt=new dn(Se.id,this.serializeUrl(Se.extractedUrl),this.serializeUrl(Se.urlAfterRedirects),Se.targetSnapshot,!!Se.guardsResult);this.triggerEvent(mt)}),(0,Ze.h)(Se=>!!Se.guardsResult||(this.restoreHistory(Se),this.cancelNavigationTransition(Se,""),!1)),kr(Se=>{if(Se.guards.canActivateChecks.length)return(0,et.of)(Se).pipe((0,vn.b)(mt=>{const rn=new zn(mt.id,this.serializeUrl(mt.extractedUrl),this.serializeUrl(mt.urlAfterRedirects),mt.targetSnapshot);this.triggerEvent(rn)}),(0,sn.w)(mt=>{let rn=!1;return(0,et.of)(mt).pipe(function Ur(A,E){return(0,Pe.z)(b=>{const{targetSnapshot:N,guards:{canActivateChecks:z}}=b;if(!z.length)return(0,et.of)(b);let W=0;return(0,Ae.D)(z).pipe(Ue(he=>function d1(A,E,b,N){return function Zr(A,E,b,N){const z=fr(A);if(0===z.length)return(0,et.of)({});const W={};return(0,Ae.D)(z).pipe((0,Pe.z)(he=>function vi(A,E,b,N){const z=C1(A,E,N);return ke(z.resolve?z.resolve(E,b):z(E,b))}(A[he],E,b,N).pipe((0,vn.b)(Se=>{W[he]=Se}))),Ke(1),(0,Pe.z)(()=>fr(W).length===z.length?(0,et.of)(W):ot.E))}(A._resolve,A,E,N).pipe((0,it.U)(W=>(A._resolvedData=W,A.data=Object.assign(Object.assign({},A.data),er(A,b).resolve),null)))}(he.route,N,A,E)),(0,vn.b)(()=>W++),Ke(1),(0,Pe.z)(he=>W===z.length?(0,et.of)(b):ot.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,vn.b)({next:()=>rn=!0,complete:()=>{rn||(this.restoreHistory(mt),this.cancelNavigationTransition(mt,"At least one route resolver didn't emit any value."))}}))}),(0,vn.b)(mt=>{const rn=new xn(mt.id,this.serializeUrl(mt.extractedUrl),this.serializeUrl(mt.urlAfterRedirects),mt.targetSnapshot);this.triggerEvent(rn)}))}),kr(Se=>{const{targetSnapshot:mt,id:rn,extractedUrl:Qn,rawUrl:ln,extras:{skipLocationChange:P1,replaceUrl:q1}}=Se;return this.hooks.afterPreactivation(mt,{navigationId:rn,appliedUrlTree:Qn,rawUrlTree:ln,skipLocationChange:!!P1,replaceUrl:!!q1})}),(0,it.U)(Se=>{const mt=function C2(A,E,b){const N=Z1(A,E._root,b?b._root:void 0);return new R1(N,E)}(this.routeReuseStrategy,Se.targetSnapshot,Se.currentRouterState);return Object.assign(Object.assign({},Se),{targetRouterState:mt})}),(0,vn.b)(Se=>{this.currentUrlTree=Se.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Se.urlAfterRedirects,Se.rawUrl),this.routerState=Se.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Se.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Se),this.browserUrlTree=Se.urlAfterRedirects)}),((A,E,b)=>(0,it.U)(N=>(new ii(E,N.targetRouterState,N.currentRouterState,b).activate(A),N)))(this.rootContexts,this.routeReuseStrategy,Se=>this.triggerEvent(Se)),(0,vn.b)({next(){W=!0},complete(){W=!0}}),function Qt(A){return(0,ft.e)((E,b)=>{try{E.subscribe(b)}finally{b.add(A)}})}(()=>{var Se;W||he||this.cancelNavigationTransition(z,`Navigation ID ${z.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Se=this.currentNavigation)||void 0===Se?void 0:Se.id)===z.id&&(this.currentNavigation=null)}),me(Se=>{if(he=!0,function kn(A){return A&&A[j1]}(Se)){const mt=K1(Se.url);mt||(this.navigated=!0,this.restoreHistory(z,!0));const rn=new U1(z.id,this.serializeUrl(z.extractedUrl),Se.message);N.next(rn),mt?setTimeout(()=>{const Qn=this.urlHandlingStrategy.merge(Se.url,this.rawUrlTree),ln={skipLocationChange:z.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Bs(z.source)};this.scheduleNavigation(Qn,"imperative",null,ln,{resolve:z.resolve,reject:z.reject,promise:z.promise})},0):z.resolve(!1)}else{this.restoreHistory(z,!0);const mt=new n1(z.id,this.serializeUrl(z.extractedUrl),Se);N.next(mt);try{z.resolve(this.errorHandler(Se))}catch(rn){z.reject(rn)}}return ot.E}))}))}resetRootComponentType(b){this.rootComponentType=b,this.routerState.root.component=this.rootComponentType}setTransition(b){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),b))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const N="popstate"===b.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{var z;const W={replaceUrl:!0},he=(null===(z=b.state)||void 0===z?void 0:z.navigationId)?b.state:null;if(he){const mt=Object.assign({},he);delete mt.navigationId,delete mt.\u0275routerPageId,0!==Object.keys(mt).length&&(W.state=mt)}const Se=this.parseUrl(b.url);this.scheduleNavigation(Se,N,he,W)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(b){this.events.next(b)}resetConfig(b){Xn(b),this.config=b.map(k),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,N={}){const{relativeTo:z,queryParams:W,fragment:he,queryParamsHandling:Se,preserveFragment:mt}=N,rn=z||this.routerState.root,Qn=mt?this.currentUrlTree.fragment:he;let ln=null;switch(Se){case"merge":ln=Object.assign(Object.assign({},this.currentUrlTree.queryParams),W);break;case"preserve":ln=this.currentUrlTree.queryParams;break;default:ln=W||null}return null!==ln&&(ln=this.removeEmptyProps(ln)),function He(A,E,b,N,z){if(0===b.length)return wt(E.root,E.root,E.root,N,z);const W=function h1(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new Ut(!0,0,A);let E=0,b=!1;const N=A.reduce((z,W,he)=>{if("object"==typeof W&&null!=W){if(W.outlets){const Se={};return Me(W.outlets,(mt,rn)=>{Se[rn]="string"==typeof mt?mt.split("/"):mt}),[...z,{outlets:Se}]}if(W.segmentPath)return[...z,W.segmentPath]}return"string"!=typeof W?[...z,W]:0===he?(W.split("/").forEach((Se,mt)=>{0==mt&&"."===Se||(0==mt&&""===Se?b=!0:".."===Se?E++:""!=Se&&z.push(Se))}),z):[...z,W]},[]);return new Ut(b,E,N)}(b);if(W.toRoot())return wt(E.root,E.root,new se([],{}),N,z);const he=function l1(A,E,b){if(A.isAbsolute)return new nr(E.root,!0,0);if(-1===b.snapshot._lastPathIndex){const W=b.snapshot._urlSegment;return new nr(W,W===E.root,0)}const N=Ie(A.commands[0])?0:1;return function rr(A,E,b){let N=A,z=E,W=b;for(;W>z;){if(W-=z,N=N.parent,!N)throw new Error("Invalid number of '../'");z=N.segments.length}return new nr(N,!1,z-W)}(b.snapshot._urlSegment,b.snapshot._lastPathIndex+N,A.numberOfDoubleDots)}(W,E,A),Se=he.processChildren?$r(he.segmentGroup,he.index,W.commands):Vr(he.segmentGroup,he.index,W.commands);return wt(E.root,he.segmentGroup,Se,N,z)}(rn,this.currentUrlTree,b,ln,null!=Qn?Qn:null)}navigateByUrl(b,N={skipLocationChange:!1}){const z=K1(b)?b:this.parseUrl(b),W=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(W,"imperative",null,N)}navigate(b,N={skipLocationChange:!1}){return function Eo(A){for(let E=0;E<A.length;E++){const b=A[E];if(null==b)throw new Error(`The requested path contains ${b} segment at index ${E}`)}}(b),this.navigateByUrl(this.createUrlTree(b,N),N)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let N;try{N=this.urlSerializer.parse(b)}catch(z){N=this.malformedUriErrorHandler(z,this.urlSerializer,b)}return N}isActive(b,N){let z;if(z=!0===N?Object.assign({},b2):!1===N?Object.assign({},Z2):N,K1(b))return cn(this.currentUrlTree,b,z);const W=this.parseUrl(b);return cn(this.currentUrlTree,W,z)}removeEmptyProps(b){return Object.keys(b).reduce((N,z)=>{const W=b[z];return null!=W&&(N[z]=W),N},{})}processNavigations(){this.navigations.subscribe(b=>{this.navigated=!0,this.lastSuccessfulId=b.id,this.currentPageId=b.targetPageId,this.events.next(new p1(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,b.resolve(!0)},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}scheduleNavigation(b,N,z,W,he){var Se,mt;if(this.disposed)return Promise.resolve(!1);let rn,Qn,ln;he?(rn=he.resolve,Qn=he.reject,ln=he.promise):ln=new Promise((o1,ui)=>{rn=o1,Qn=ui});const P1=++this.navigationId;let q1;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(z=this.location.getState()),q1=z&&z.\u0275routerPageId?z.\u0275routerPageId:W.replaceUrl||W.skipLocationChange?null!==(Se=this.browserPageId)&&void 0!==Se?Se:0:(null!==(mt=this.browserPageId)&&void 0!==mt?mt:0)+1):q1=0,this.setTransition({id:P1,targetPageId:q1,source:N,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:b,extras:W,resolve:rn,reject:Qn,promise:ln,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ln.catch(o1=>Promise.reject(o1))}setBrowserUrl(b,N){const z=this.urlSerializer.serialize(b),W=Object.assign(Object.assign({},N.extras.state),this.generateNgRouterState(N.id,N.targetPageId));this.location.isCurrentPathEqualTo(z)||N.extras.replaceUrl?this.location.replaceState(z,"",W):this.location.go(z,"",W)}restoreHistory(b,N=!1){var z,W;if("computed"===this.canceledNavigationResolution){const he=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(z=this.currentNavigation)||void 0===z?void 0:z.finalUrl)||0===he?this.currentUrlTree===(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)&&0===he&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(he)}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(b,N){const z=new U1(b.id,this.serializeUrl(b.extractedUrl),N);this.triggerEvent(z),b.resolve(!1)}generateNgRouterState(b,N){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:N}:{navigationId:b}}}return A.\u0275fac=function(b){y.$Z()},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac}),A})();function Bs(A){return"imperative"!==A}let Di=(()=>{class A{constructor(b,N,z,W,he){this.router=b,this.route=N,this.tabIndexAttribute=z,this.renderer=W,this.el=he,this.commands=null,this.onChanges=new D.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(b){if(null!=this.tabIndexAttribute)return;const N=this.renderer,z=this.el.nativeElement;null!==b?N.setAttribute(z,"tabindex",b):N.removeAttribute(z,"tabindex")}ngOnChanges(b){this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const b={skipLocationChange:z2(this.skipLocationChange),replaceUrl:z2(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,b),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:z2(this.preserveFragment)})}}return A.\u0275fac=function(b){return new(b||A)(y.Y36(v1),y.Y36(_r),y.$8M("tabindex"),y.Y36(y.Qsj),y.Y36(y.SBq))},A.\u0275dir=y.lG2({type:A,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(b,N){1&b&&y.NdJ("click",function(){return N.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),A})(),q2=(()=>{class A{constructor(b,N,z){this.router=b,this.route=N,this.locationStrategy=z,this.commands=null,this.href=null,this.onChanges=new D.x,this.subscription=b.events.subscribe(W=>{W instanceof p1&&this.updateTargetUrlAndHref()})}set routerLink(b){this.commands=null!=b?Array.isArray(b)?b:[b]:null}ngOnChanges(b){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(b,N,z,W,he){if(0!==b||N||z||W||he||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Se={skipLocationChange:z2(this.skipLocationChange),replaceUrl:z2(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Se),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:z2(this.preserveFragment)})}}return A.\u0275fac=function(b){return new(b||A)(y.Y36(v1),y.Y36(_r),y.Y36(I1.S$))},A.\u0275dir=y.lG2({type:A,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(b,N){1&b&&y.NdJ("click",function(W){return N.onClick(W.button,W.ctrlKey,W.shiftKey,W.altKey,W.metaKey)}),2&b&&y.uIk("target",N.target)("href",N.href,y.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[y.TTD]}),A})();function z2(A){return""===A||!!A}let co=(()=>{class A{constructor(b,N,z,W,he,Se){this.router=b,this.element=N,this.renderer=z,this.cdr=W,this.link=he,this.linkWithHref=Se,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new y.vpe,this.routerEventsSubscription=b.events.subscribe(mt=>{mt instanceof p1&&this.update()})}ngAfterContentInit(){(0,et.of)(this.links.changes,this.linksWithHrefs.changes,(0,et.of)(null)).pipe((0,Mn.J)()).subscribe(b=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var b;null===(b=this.linkInputChangesSubscription)||void 0===b||b.unsubscribe();const N=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(z=>!!z).map(z=>z.onChanges);this.linkInputChangesSubscription=(0,Ae.D)(N).pipe((0,Mn.J)()).subscribe(z=>{this.isActive!==this.isLinkActive(this.router)(z)&&this.update()})}set routerLinkActive(b){const N=Array.isArray(b)?b:b.split(" ");this.classes=N.filter(z=>!!z)}ngOnChanges(b){this.update()}ngOnDestroy(){var b;this.routerEventsSubscription.unsubscribe(),null===(b=this.linkInputChangesSubscription)||void 0===b||b.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const b=this.hasActiveLinks();this.isActive!==b&&(this.isActive=b,this.cdr.markForCheck(),this.classes.forEach(N=>{b?this.renderer.addClass(this.element.nativeElement,N):this.renderer.removeClass(this.element.nativeElement,N)}),this.isActiveChange.emit(b))})}isLinkActive(b){const N=function L2(A){return!!A.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return z=>!!z.urlTree&&b.isActive(z.urlTree,N)}hasActiveLinks(){const b=this.isLinkActive(this.router);return this.link&&b(this.link)||this.linkWithHref&&b(this.linkWithHref)||this.links.some(b)||this.linksWithHrefs.some(b)}}return A.\u0275fac=function(b){return new(b||A)(y.Y36(v1),y.Y36(y.SBq),y.Y36(y.Qsj),y.Y36(y.sBO),y.Y36(Di,8),y.Y36(q2,8))},A.\u0275dir=y.lG2({type:A,selectors:[["","routerLinkActive",""]],contentQueries:function(b,N,z){if(1&b&&(y.Suo(z,Di,5),y.Suo(z,q2,5)),2&b){let W;y.iGM(W=y.CRH())&&(N.links=W),y.iGM(W=y.CRH())&&(N.linksWithHrefs=W)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[y.TTD]}),A})();class K2{}class js{preload(E,b){return(0,et.of)(null)}}let $o=(()=>{class A{constructor(b,N,z,W){this.router=b,this.injector=z,this.preloadingStrategy=W,this.loader=new bo(z,N,mt=>b.triggerEvent(new ie(mt)),mt=>b.triggerEvent(new gr(mt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Ze.h)(b=>b instanceof p1),Ue(()=>this.preload())).subscribe(()=>{})}preload(){const b=this.injector.get(y.h0i);return this.processRoutes(b,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,N){const z=[];for(const W of N)if(W.loadChildren&&!W.canLoad&&W._loadedConfig){const he=W._loadedConfig;z.push(this.processRoutes(he.module,he.routes))}else W.loadChildren&&!W.canLoad?z.push(this.preloadConfig(b,W)):W.children&&z.push(this.processRoutes(b,W.children));return(0,Ae.D)(z).pipe((0,Mn.J)(),(0,it.U)(W=>{}))}preloadConfig(b,N){return this.preloadingStrategy.preload(N,()=>(N._loadedConfig?(0,et.of)(N._loadedConfig):this.loader.load(b.injector,N)).pipe((0,Pe.z)(W=>(N._loadedConfig=W,this.processRoutes(W.module,W.routes)))))}}return A.\u0275fac=function(b){return new(b||A)(y.LFG(v1),y.LFG(y.Sil),y.LFG(y.zs3),y.LFG(K2))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac}),A})(),li=(()=>{class A{constructor(b,N,z={}){this.router=b,this.viewportScroller=N,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(b=>{b instanceof A1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof p1&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.router.parseUrl(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(b=>{b instanceof Kn&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,N){this.router.triggerEvent(new Kn(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(b){y.$Z()},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac}),A})();const Ts=new y.OlP("ROUTER_CONFIGURATION"),Pi=new y.OlP("ROUTER_FORROOT_GUARD"),Y2=[I1.Ye,{provide:_1,useClass:O1},{provide:v1,useFactory:function Hr(A,E,b,N,z,W,he={},Se,mt){const rn=new v1(null,A,E,b,N,z,Ne(W));return Se&&(rn.urlHandlingStrategy=Se),mt&&(rn.routeReuseStrategy=mt),function Ns(A,E){A.errorHandler&&(E.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(E.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(E.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(E.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(E.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(E.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(E.canceledNavigationResolution=A.canceledNavigationResolution)}(he,rn),he.enableTracing&&rn.events.subscribe(Qn=>{var ln,P1;null===(ln=console.group)||void 0===ln||ln.call(console,`Router Event: ${Qn.constructor.name}`),console.log(Qn.toString()),console.log(Qn),null===(P1=console.groupEnd)||void 0===P1||P1.call(console)}),rn},deps:[_1,Gn,I1.Ye,y.zs3,y.Sil,xi,Ts,[class Go{},new y.FiY],[class cr{},new y.FiY]]},Gn,{provide:_r,useFactory:function Jr(A){return A.routerState.root},deps:[v1]},$o,js,class u2{preload(E,b){return b().pipe(me(()=>(0,et.of)(null)))}},{provide:Ts,useValue:{enableTracing:!1}}];function Io(){return new y.PXZ("Router",v1)}let ls=(()=>{class A{constructor(b,N){}static forRoot(b,N){return{ngModule:A,providers:[Y2,gs(b),{provide:Pi,useFactory:us,deps:[[v1,new y.FiY,new y.tp0]]},{provide:Ts,useValue:N||{}},{provide:I1.S$,useFactory:Br,deps:[I1.lw,[new y.tBr(I1.mr),new y.FiY],Ts]},{provide:li,useFactory:ms,deps:[v1,I1.EM,Ts]},{provide:K2,useExisting:N&&N.preloadingStrategy?N.preloadingStrategy:js},{provide:y.PXZ,multi:!0,useFactory:Io},[vs,{provide:y.ip1,multi:!0,useFactory:Ao,deps:[vs]},{provide:Y1,useFactory:Pt,deps:[vs]},{provide:y.tb,multi:!0,useExisting:Y1}]]}}static forChild(b){return{ngModule:A,providers:[gs(b)]}}}return A.\u0275fac=function(b){return new(b||A)(y.LFG(Pi,8),y.LFG(v1,8))},A.\u0275mod=y.oAB({type:A}),A.\u0275inj=y.cJS({}),A})();function ms(A,E,b){return b.scrollOffset&&E.setOffset(b.scrollOffset),new li(A,E,b)}function Br(A,E,b={}){return b.useHash?new I1.Do(A,E):new I1.b0(A,E)}function us(A){return"guarded"}function gs(A){return[{provide:y.deG,multi:!0,useValue:A},{provide:xi,multi:!0,useValue:A}]}let vs=(()=>{class A{constructor(b){this.injector=b,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new D.x}appInitializer(){return this.injector.get(I1.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let N=null;const z=new Promise(Se=>N=Se),W=this.injector.get(v1),he=this.injector.get(Ts);return"disabled"===he.initialNavigation?(W.setUpLocationChangeListener(),N(!0)):"enabled"===he.initialNavigation||"enabledBlocking"===he.initialNavigation?(W.hooks.afterPreactivation=()=>this.initNavigation?(0,et.of)(null):(this.initNavigation=!0,N(!0),this.resultOfPreactivationDone),W.initialNavigation()):N(!0),z})}bootstrapListener(b){const N=this.injector.get(Ts),z=this.injector.get($o),W=this.injector.get(li),he=this.injector.get(v1),Se=this.injector.get(y.z2F);b===Se.components[0]&&(("enabledNonBlocking"===N.initialNavigation||void 0===N.initialNavigation)&&he.initialNavigation(),z.setUpPreloading(),W.init(),he.resetRootComponentType(Se.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return A.\u0275fac=function(b){return new(b||A)(y.LFG(y.zs3))},A.\u0275prov=y.Yz7({token:A,factory:A.\u0275fac}),A})();function Ao(A){return A.appInitializer.bind(A)}function Pt(A){return A.bootstrapListener.bind(A)}const Y1=new y.OlP("Router Initializer")},3942:(jt,We,B)=>{B.d(We,{Z:()=>vt});var y=B(2090),D=B(4859),te=B(9681),Le=B(1877);class De{constructor(tt,dt){this._delegate=tt,this.firebase=dt,(0,te._addComponent)(tt,new D.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,te.deleteApp)(this._delegate)))}_getService(tt,dt=te._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const kt=this._delegate.container.getProvider(tt);return!kt.isInitialized()&&"EXPLICIT"===(null===(Oe=kt.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&kt.initialize(),kt.getImmediate({identifier:dt})}_removeServiceInstance(tt,dt=te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(dt)}_addComponent(tt){(0,te._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,te._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ue=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),_e=function ze(){const zt=function ve(zt){const tt={},dt={__esModule:!0,initializeApp:function ft(_t,le={}){const ot=te.initializeApp(_t,le);if((0,y.r3)(tt,ot.name))return tt[ot.name];const me=new zt(ot,dt);return tt[ot.name]=me,me},app:kt,registerVersion:te.registerVersion,setLogLevel:te.setLogLevel,onLog:te.onLog,apps:null,SDK_VERSION:te.SDK_VERSION,INTERNAL:{registerComponent:function qe(_t){const le=_t.name,ot=le.replace("-compat","");if(te._registerComponent(_t)&&"PUBLIC"===_t.type){const me=(Pe=kt())=>{if("function"!=typeof Pe[ot])throw ue.create("invalid-app-argument",{appName:le});return Pe[ot]()};void 0!==_t.serviceProps&&(0,y.ZB)(me,_t.serviceProps),dt[ot]=me,zt.prototype[ot]=function(...Pe){return this._getService.bind(this,le).apply(this,_t.multipleInstances?Pe:[])}}return"PUBLIC"===_t.type?dt[ot]:null},removeApp:function Oe(_t){delete tt[_t]},useAsService:function et(_t,le){return"serverAuth"===le?null:le},modularAPIs:te}};function kt(_t){if(!(0,y.r3)(tt,_t=_t||te._DEFAULT_ENTRY_NAME))throw ue.create("no-app",{appName:_t});return tt[_t]}return dt.default=dt,Object.defineProperty(dt,"apps",{get:function nt(){return Object.keys(tt).map(_t=>tt[_t])}}),kt.App=zt,dt}(De);return zt.INTERNAL=Object.assign(Object.assign({},zt.INTERNAL),{createFirebaseNamespace:ze,extendNamespace:function tt(dt){(0,y.ZB)(zt,dt)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),zt}(),pe=new Le.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const zt=self.firebase.SDK_VERSION;zt&&zt.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const vt=_e;!function ht(zt){(0,te.registerVersion)("@firebase/app-compat","0.1.27",zt)}()},9681:(jt,We,B)=>{B.r(We),B.d(We,{FirebaseError:()=>Le.ZR,SDK_VERSION:()=>U1,_DEFAULT_ENTRY_NAME:()=>Qt,_addComponent:()=>fn,_addOrOverwriteComponent:()=>an,_apps:()=>sn,_clearComponents:()=>I1,_components:()=>hn,_getProvider:()=>vn,_registerComponent:()=>Rn,_removeServiceInstance:()=>Mn,deleteApp:()=>dn,getApp:()=>r1,getApps:()=>Wn,initializeApp:()=>n1,onLog:()=>ie,registerVersion:()=>xn,setLogLevel:()=>gr});var y=B(5861),D=B(4859),te=B(1877),Le=B(2090),De=B(8766);class Ae{constructor(ke){this.container=ke}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function ue(Me){const ke=Me.getComponent();return"VERSION"===(null==ke?void 0:ke.type)}(rt)){const Ft=rt.getImmediate();return`${Ft.library}/${Ft.version}`}return null}).filter(rt=>rt).join(" ")}}const ve="@firebase/app",_e=new te.Yd("@firebase/app"),Qt="[DEFAULT]",it={[ve]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,hn=new Map;function fn(Me,ke){try{Me.container.addComponent(ke)}catch(rt){_e.debug(`Component ${ke.name} failed to register with FirebaseApp ${Me.name}`,rt)}}function an(Me,ke){Me.container.addOrOverwriteComponent(ke)}function Rn(Me){const ke=Me.name;if(hn.has(ke))return _e.debug(`There were multiple attempts to register component ${ke}.`),!1;hn.set(ke,Me);for(const rt of sn.values())fn(rt,Me);return!0}function vn(Me,ke){const rt=Me.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),Me.container.getProvider(ke)}function Mn(Me,ke,rt=Qt){vn(Me,ke).clearInstance(rt)}function I1(){hn.clear()}const A1=new Le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class p1{constructor(ke,rt,Ft){this._isDeleted=!1,this._options=Object.assign({},ke),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=Ft,this.container.addComponent(new D.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ke){this.checkDestroyed(),this._automaticDataCollectionEnabled=ke}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ke){this._isDeleted=ke}checkDestroyed(){if(this.isDeleted)throw A1.create("app-deleted",{appName:this._name})}}const U1="9.8.3";function n1(Me,ke={}){"object"!=typeof ke&&(ke={name:ke});const rt=Object.assign({name:Qt,automaticDataCollectionEnabled:!1},ke),Ft=rt.name;if("string"!=typeof Ft||!Ft)throw A1.create("bad-app-name",{appName:String(Ft)});const tn=sn.get(Ft);if(tn){if((0,Le.vZ)(Me,tn.options)&&(0,Le.vZ)(rt,tn.config))return tn;throw A1.create("duplicate-app",{appName:Ft})}const cn=new D.H0(Ft);for(const Jt of hn.values())cn.addComponent(Jt);const Zn=new p1(Me,rt,cn);return sn.set(Ft,Zn),Zn}function r1(Me=Qt){const ke=sn.get(Me);if(!ke)throw A1.create("no-app",{appName:Me});return ke}function Wn(){return Array.from(sn.values())}function dn(Me){return zn.apply(this,arguments)}function zn(){return(zn=(0,y.Z)(function*(Me){const ke=Me.name;sn.has(ke)&&(sn.delete(ke),yield Promise.all(Me.container.getProviders().map(rt=>rt.delete())),Me.isDeleted=!0)})).apply(this,arguments)}function xn(Me,ke,rt){var Ft;let tn=null!==(Ft=it[Me])&&void 0!==Ft?Ft:Me;rt&&(tn+=`-${rt}`);const cn=tn.match(/\s|\//),Zn=ke.match(/\s|\//);if(cn||Zn){const Jt=[`Unable to register library "${tn}" with version "${ke}":`];return cn&&Jt.push(`library name "${tn}" contains illegal characters (whitespace or "/")`),cn&&Zn&&Jt.push("and"),Zn&&Jt.push(`version name "${ke}" contains illegal characters (whitespace or "/")`),void _e.warn(Jt.join(" "))}Rn(new D.wA(`${tn}-version`,()=>({library:tn,version:ke}),"VERSION"))}function ie(Me,ke){if(null!==Me&&"function"!=typeof Me)throw A1.create("invalid-log-argument");(0,te.Am)(Me,ke)}function gr(Me){(0,te.Ub)(Me)}const Xt="firebase-heartbeat-store";let N1=null;function Kn(){return N1||(N1=(0,De.X3)("firebase-heartbeat-database",1,{upgrade:(Me,ke)=>{0===ke&&Me.createObjectStore(Xt)}}).catch(Me=>{throw A1.create("storage-open",{originalErrorMessage:Me.message})})),N1}function nn(){return(nn=(0,y.Z)(function*(Me){var ke;try{return(yield Kn()).transaction(Xt).objectStore(Xt).get(x1(Me))}catch(rt){throw A1.create("storage-get",{originalErrorMessage:null===(ke=rt)||void 0===ke?void 0:ke.message})}})).apply(this,arguments)}function Wt(Me,ke){return j1.apply(this,arguments)}function j1(){return(j1=(0,y.Z)(function*(Me,ke){var rt;try{const tn=(yield Kn()).transaction(Xt,"readwrite");return yield tn.objectStore(Xt).put(ke,x1(Me)),tn.done}catch(Ft){throw A1.create("storage-set",{originalErrorMessage:null===(rt=Ft)||void 0===rt?void 0:rt.message})}})).apply(this,arguments)}function x1(Me){return`${Me.name}!${Me.options.appId}`}class D1{constructor(ke){this.container=ke,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new Ne(rt),this._heartbeatsCachePromise=this._storage.read().then(Ft=>(this._heartbeatsCache=Ft,Ft))}triggerHeartbeat(){var ke=this;return(0,y.Z)(function*(){const Ft=ke.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),tn=i1();if(null===ke._heartbeatsCache&&(ke._heartbeatsCache=yield ke._heartbeatsCachePromise),ke._heartbeatsCache.lastSentHeartbeatDate!==tn&&!ke._heartbeatsCache.heartbeats.some(cn=>cn.date===tn))return ke._heartbeatsCache.heartbeats.push({date:tn,agent:Ft}),ke._heartbeatsCache.heartbeats=ke._heartbeatsCache.heartbeats.filter(cn=>{const Zn=new Date(cn.date).valueOf();return Date.now()-Zn<=2592e6}),ke._storage.overwrite(ke._heartbeatsCache)})()}getHeartbeatsHeader(){var ke=this;return(0,y.Z)(function*(){if(null===ke._heartbeatsCache&&(yield ke._heartbeatsCachePromise),null===ke._heartbeatsCache||0===ke._heartbeatsCache.heartbeats.length)return"";const rt=i1(),{heartbeatsToSend:Ft,unsentEntries:tn}=function Ce(Me,ke=1024){const rt=[];let Ft=Me.slice();for(const tn of Me){const cn=rt.find(Zn=>Zn.agent===tn.agent);if(cn){if(cn.dates.push(tn.date),be(rt)>ke){cn.dates.pop();break}}else if(rt.push({agent:tn.agent,dates:[tn.date]}),be(rt)>ke){rt.pop();break}Ft=Ft.slice(1)}return{heartbeatsToSend:rt,unsentEntries:Ft}}(ke._heartbeatsCache.heartbeats),cn=(0,Le.L)(JSON.stringify({version:2,heartbeats:Ft}));return ke._heartbeatsCache.lastSentHeartbeatDate=rt,tn.length>0?(ke._heartbeatsCache.heartbeats=tn,yield ke._storage.overwrite(ke._heartbeatsCache)):(ke._heartbeatsCache.heartbeats=[],ke._storage.overwrite(ke._heartbeatsCache)),cn})()}}function i1(){return(new Date).toISOString().substring(0,10)}class Ne{constructor(ke){this.app=ke,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,Le.hl)()&&(0,Le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ke=this;return(0,y.Z)(function*(){return(yield ke._canUseIndexedDBPromise)&&(yield function Gt(Me){return nn.apply(this,arguments)}(ke.app))||{heartbeats:[]}})()}overwrite(ke){var rt=this;return(0,y.Z)(function*(){var Ft;if(yield rt._canUseIndexedDBPromise){const cn=yield rt.read();return Wt(rt.app,{lastSentHeartbeatDate:null!==(Ft=ke.lastSentHeartbeatDate)&&void 0!==Ft?Ft:cn.lastSentHeartbeatDate,heartbeats:ke.heartbeats})}})()}add(ke){var rt=this;return(0,y.Z)(function*(){var Ft;if(yield rt._canUseIndexedDBPromise){const cn=yield rt.read();return Wt(rt.app,{lastSentHeartbeatDate:null!==(Ft=ke.lastSentHeartbeatDate)&&void 0!==Ft?Ft:cn.lastSentHeartbeatDate,heartbeats:[...cn.heartbeats,...ke.heartbeats]})}})()}}function be(Me){return(0,Le.L)(JSON.stringify({version:2,heartbeats:Me})).length}!function pt(Me){Rn(new D.wA("platform-logger",ke=>new Ae(ke),"PRIVATE")),Rn(new D.wA("heartbeat",ke=>new D1(ke),"PRIVATE")),xn(ve,"0.7.26",Me),xn(ve,"0.7.26","esm2017"),xn("fire-js","")}("")},4859:(jt,We,B)=>{B.d(We,{H0:()=>ve,wA:()=>te,zt:()=>De});var y=B(5861),D=B(2090);class te{constructor(_e,pe,je){this.name=_e,this.instanceFactory=pe,this.type=je,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(_e){return this.instantiationMode=_e,this}setMultipleInstances(_e){return this.multipleInstances=_e,this}setServiceProps(_e){return this.serviceProps=_e,this}setInstanceCreatedCallback(_e){return this.onInstanceCreated=_e,this}}const Le="[DEFAULT]";class De{constructor(_e,pe){this.name=_e,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(_e){const pe=this.normalizeInstanceIdentifier(_e);if(!this.instancesDeferred.has(pe)){const je=new D.BH;if(this.instancesDeferred.set(pe,je),this.isInitialized(pe)||this.shouldAutoInitialize())try{const Nt=this.getOrInitializeService({instanceIdentifier:pe});Nt&&je.resolve(Nt)}catch(Nt){}}return this.instancesDeferred.get(pe).promise}getImmediate(_e){var pe;const je=this.normalizeInstanceIdentifier(null==_e?void 0:_e.identifier),Nt=null!==(pe=null==_e?void 0:_e.optional)&&void 0!==pe&&pe;if(!this.isInitialized(je)&&!this.shouldAutoInitialize()){if(Nt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:je})}catch(ht){if(Nt)return null;throw ht}}getComponent(){return this.component}setComponent(_e){if(_e.name!==this.name)throw Error(`Mismatching Component ${_e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=_e,this.shouldAutoInitialize()){if(function ue(ze){return"EAGER"===ze.instantiationMode}(_e))try{this.getOrInitializeService({instanceIdentifier:Le})}catch(pe){}for(const[pe,je]of this.instancesDeferred.entries()){const Nt=this.normalizeInstanceIdentifier(pe);try{const ht=this.getOrInitializeService({instanceIdentifier:Nt});je.resolve(ht)}catch(ht){}}}}clearInstance(_e=Le){this.instancesDeferred.delete(_e),this.instancesOptions.delete(_e),this.instances.delete(_e)}delete(){var _e=this;return(0,y.Z)(function*(){const pe=Array.from(_e.instances.values());yield Promise.all([...pe.filter(je=>"INTERNAL"in je).map(je=>je.INTERNAL.delete()),...pe.filter(je=>"_delete"in je).map(je=>je._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(_e=Le){return this.instances.has(_e)}getOptions(_e=Le){return this.instancesOptions.get(_e)||{}}initialize(_e={}){const{options:pe={}}=_e,je=this.normalizeInstanceIdentifier(_e.instanceIdentifier);if(this.isInitialized(je))throw Error(`${this.name}(${je}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Nt=this.getOrInitializeService({instanceIdentifier:je,options:pe});for(const[ht,vt]of this.instancesDeferred.entries())je===this.normalizeInstanceIdentifier(ht)&&vt.resolve(Nt);return Nt}onInit(_e,pe){var je;const Nt=this.normalizeInstanceIdentifier(pe),ht=null!==(je=this.onInitCallbacks.get(Nt))&&void 0!==je?je:new Set;ht.add(_e),this.onInitCallbacks.set(Nt,ht);const vt=this.instances.get(Nt);return vt&&_e(vt,Nt),()=>{ht.delete(_e)}}invokeOnInitCallbacks(_e,pe){const je=this.onInitCallbacks.get(pe);if(je)for(const Nt of je)try{Nt(_e,pe)}catch(ht){}}getOrInitializeService({instanceIdentifier:_e,options:pe={}}){let je=this.instances.get(_e);if(!je&&this.component&&(je=this.component.instanceFactory(this.container,{instanceIdentifier:(ze=_e,ze===Le?void 0:ze),options:pe}),this.instances.set(_e,je),this.instancesOptions.set(_e,pe),this.invokeOnInitCallbacks(je,_e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,_e,je)}catch(Nt){}var ze;return je||null}normalizeInstanceIdentifier(_e=Le){return this.component?this.component.multipleInstances?_e:Le:_e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(_e){this.name=_e,this.providers=new Map}addComponent(_e){const pe=this.getProvider(_e.name);if(pe.isComponentSet())throw new Error(`Component ${_e.name} has already been registered with ${this.name}`);pe.setComponent(_e)}addOrOverwriteComponent(_e){this.getProvider(_e.name).isComponentSet()&&this.providers.delete(_e.name),this.addComponent(_e)}getProvider(_e){if(this.providers.has(_e))return this.providers.get(_e);const pe=new De(_e,this);return this.providers.set(_e,pe),pe}getProviders(){return Array.from(this.providers.values())}}},1877:(jt,We,B)=>{B.d(We,{Am:()=>ze,Ub:()=>ve,Yd:()=>ue,in:()=>D});const y=[];var D=(()=>{return(_e=D||(D={}))[_e.DEBUG=0]="DEBUG",_e[_e.VERBOSE=1]="VERBOSE",_e[_e.INFO=2]="INFO",_e[_e.WARN=3]="WARN",_e[_e.ERROR=4]="ERROR",_e[_e.SILENT=5]="SILENT",D;var _e})();const te={debug:D.DEBUG,verbose:D.VERBOSE,info:D.INFO,warn:D.WARN,error:D.ERROR,silent:D.SILENT},Le=D.INFO,De={[D.DEBUG]:"log",[D.VERBOSE]:"log",[D.INFO]:"info",[D.WARN]:"warn",[D.ERROR]:"error"},Ae=(_e,pe,...je)=>{if(pe<_e.logLevel)return;const Nt=(new Date).toISOString(),ht=De[pe];if(!ht)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[ht](`[${Nt}]  ${_e.name}:`,...je)};class ue{constructor(pe){this.name=pe,this._logLevel=Le,this._logHandler=Ae,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in D))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?te[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,D.DEBUG,...pe),this._logHandler(this,D.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,D.VERBOSE,...pe),this._logHandler(this,D.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,D.INFO,...pe),this._logHandler(this,D.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,D.WARN,...pe),this._logHandler(this,D.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,D.ERROR,...pe),this._logHandler(this,D.ERROR,...pe)}}function ve(_e){y.forEach(pe=>{pe.setLogLevel(_e)})}function ze(_e,pe){for(const je of y){let Nt=null;pe&&pe.level&&(Nt=te[pe.level]),je.userLogHandler=null===_e?null:(ht,vt,...zt)=>{const tt=zt.map(dt=>{if(null==dt)return null;if("string"==typeof dt)return dt;if("number"==typeof dt||"boolean"==typeof dt)return dt.toString();if(dt instanceof Error)return dt.message;try{return JSON.stringify(dt)}catch(Oe){return null}}).filter(dt=>dt).join(" ");vt>=(null!=Nt?Nt:ht.logLevel)&&_e({level:D[vt].toLowerCase(),message:tt,args:zt,type:ht.name})}}}},9444:(jt,We,B)=>{B.d(We,{BN:()=>ps,uH:()=>Yi});var y=B(5e3);function D(G){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ee){return typeof ee}:function(ee){return ee&&"function"==typeof Symbol&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee})(G)}function Le(G,ee){for(var oe=0;oe<ee.length;oe++){var de=ee[oe];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(G,de.key,de)}}function Ae(G,ee,oe){return ee in G?Object.defineProperty(G,ee,{value:oe,enumerable:!0,configurable:!0,writable:!0}):G[ee]=oe,G}function ue(G){for(var ee=1;ee<arguments.length;ee++){var oe=null!=arguments[ee]?arguments[ee]:{},de=Object.keys(oe);"function"==typeof Object.getOwnPropertySymbols&&(de=de.concat(Object.getOwnPropertySymbols(oe).filter(function(Be){return Object.getOwnPropertyDescriptor(oe,Be).enumerable}))),de.forEach(function(Be){Ae(G,Be,oe[Be])})}return G}function ve(G,ee){return function pe(G){if(Array.isArray(G))return G}(G)||function Nt(G,ee){var oe=[],de=!0,Be=!1,ut=void 0;try{for(var Ct,Mt=G[Symbol.iterator]();!(de=(Ct=Mt.next()).done)&&(oe.push(Ct.value),!ee||oe.length!==ee);de=!0);}catch($t){Be=!0,ut=$t}finally{try{!de&&null!=Mt.return&&Mt.return()}finally{if(Be)throw ut}}return oe}(G,ee)||function vt(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var tt={},dt={};try{"undefined"!=typeof window&&(tt=window),"undefined"!=typeof document&&(dt=document),"undefined"!=typeof MutationObserver&&MutationObserver,"undefined"!=typeof performance&&performance}catch(G){}var nt=(tt.navigator||{}).userAgent,qe=void 0===nt?"":nt,et=tt,_t=dt,Pe=!!_t.documentElement&&!!_t.head&&"function"==typeof _t.addEventListener&&"function"==typeof _t.createElement,Ze=(~qe.indexOf("MSIE")||qe.indexOf("Trident/"),"___FONT_AWESOME___"),Vt="svg-inline--fa",U1=[1,2,3,4,5,6,7,8,9,10],n1=U1.concat([11,12,13,14,15,16,17,18,19,20]),Wn={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},zn=(["xs","sm","lg","fw","ul","li","border","pull-left","pull-right","spin","pulse","rotate-90","rotate-180","rotate-270","flip-horizontal","flip-vertical","flip-both","stack","stack-1x","stack-2x","inverse","layers","layers-text","layers-counter",Wn.GROUP,Wn.SWAP_OPACITY,Wn.PRIMARY,Wn.SECONDARY].concat(U1.map(function(G){return"".concat(G,"x")})).concat(n1.map(function(G){return"w-".concat(G)})),et.FontAwesomeConfig||{});_t&&"function"==typeof _t.querySelector&&[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach(function(G){var ee=ve(G,2),de=ee[1],Be=function ie(G){return""===G||"false"!==G&&("true"===G||G)}(function xn(G){var ee=_t.querySelector("script["+G+"]");if(ee)return ee.getAttribute(G)}(ee[0]));null!=Be&&(zn[de]=Be)});var B1=ue({},{familyPrefix:"fa",replacementClass:Vt,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},zn);B1.autoReplaceSvg||(B1.observeMutations=!1);var Xt=ue({},B1);et.FontAwesomeConfig=Xt;var N1=et||{};N1[Ze]||(N1[Ze]={}),N1[Ze].styles||(N1[Ze].styles={}),N1[Ze].hooks||(N1[Ze].hooks={}),N1[Ze].shims||(N1[Ze].shims=[]);var Kn=N1[Ze],Gt=[];Pe&&((_t.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(_t.readyState)||_t.addEventListener("DOMContentLoaded",function G(){_t.removeEventListener("DOMContentLoaded",G),Gt.map(function(ee){return ee()})}));var pt,x1="pending",kn="settled",Er="fulfilled",D1="rejected",i1=function(){},Ce="undefined"!=typeof global&&void 0!==global.process&&"function"==typeof global.process.emit,Ne="undefined"==typeof setImmediate?setTimeout:setImmediate,be=[];function Me(){for(var G=0;G<be.length;G++)be[G][0](be[G][1]);be=[],pt=!1}function ke(G,ee){be.push([G,ee]),pt||(pt=!0,Ne(Me,0))}function Ft(G){var ee=G.owner,oe=ee._state,de=ee._data,Be=G[oe],ut=G.then;if("function"==typeof Be){oe=Er;try{de=Be(de)}catch(Mt){Jt(ut,Mt)}}tn(ut,de)||(oe===Er&&cn(ut,de),oe===D1&&Jt(ut,de))}function tn(G,ee){var oe;try{if(G===ee)throw new TypeError("A promises callback cannot return that same promise.");if(ee&&("function"==typeof ee||"object"===D(ee))){var de=ee.then;if("function"==typeof de)return de.call(ee,function(Be){oe||(oe=!0,ee===Be?Zn(G,Be):cn(G,Be))},function(Be){oe||(oe=!0,Jt(G,Be))}),!0}}catch(Be){return oe||Jt(G,Be),!0}return!1}function cn(G,ee){(G===ee||!tn(G,ee))&&Zn(G,ee)}function Zn(G,ee){G._state===x1&&(G._state=kn,G._data=ee,ke(G1,G))}function Jt(G,ee){G._state===x1&&(G._state=kn,G._data=ee,ke(Ir,G))}function Jn(G){G._then=G._then.forEach(Ft)}function G1(G){G._state=Er,Jn(G)}function Ir(G){G._state=D1,Jn(G),!G._handled&&Ce&&global.process.emit("unhandledRejection",G._data,G)}function $e(G){global.process.emit("rejectionHandled",G)}function xe(G){if("function"!=typeof G)throw new TypeError("Promise resolver "+G+" is not a function");if(!(this instanceof xe))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],function rt(G,ee){function de(Be){Jt(ee,Be)}try{G(function oe(Be){cn(ee,Be)},de)}catch(Be){de(Be)}}(G,this)}xe.prototype={constructor:xe,_state:x1,_then:null,_data:void 0,_handled:!1,then:function(ee,oe){var de={owner:this,then:new this.constructor(i1),fulfilled:ee,rejected:oe};return(oe||ee)&&!this._handled&&(this._handled=!0,this._state===D1&&Ce&&ke($e,this)),this._state===Er||this._state===D1?ke(Ft,de):this._then.push(de),de.then},catch:function(ee){return this.then(null,ee)}},xe.all=function(G){if(!Array.isArray(G))throw new TypeError("You must pass an array to Promise.all().");return new xe(function(ee,oe){var de=[],Be=0;function ut($t){return Be++,function(On){de[$t]=On,--Be||ee(de)}}for(var Ct,Mt=0;Mt<G.length;Mt++)(Ct=G[Mt])&&"function"==typeof Ct.then?Ct.then(ut(Mt),oe):de[Mt]=Ct;Be||ee(de)})},xe.race=function(G){if(!Array.isArray(G))throw new TypeError("You must pass an array to Promise.race().");return new xe(function(ee,oe){for(var Be,de=0;de<G.length;de++)(Be=G[de])&&"function"==typeof Be.then?Be.then(ee,oe):ee(Be)})},xe.resolve=function(G){return G&&"object"===D(G)&&G.constructor===xe?G:new xe(function(ee){ee(G)})},xe.reject=function(G){return new xe(function(ee,oe){oe(G)})};var yt={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function O1(){for(var G=12,ee="";G-- >0;)ee+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return ee}function k1(G){return"".concat(G).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Yn(G){return Object.keys(G||{}).reduce(function(ee,oe){return ee+"".concat(oe,": ").concat(G[oe],";")},"")}function Tt(G){return G.size!==yt.size||G.x!==yt.x||G.y!==yt.y||G.rotate!==yt.rotate||G.flipX||G.flipY}function Zt(G){var ee=G.transform,de=G.iconWidth,Be={transform:"translate(".concat(G.containerWidth/2," 256)")},ut="translate(".concat(32*ee.x,", ").concat(32*ee.y,") "),Mt="scale(".concat(ee.size/16*(ee.flipX?-1:1),", ").concat(ee.size/16*(ee.flipY?-1:1),") "),Ct="rotate(".concat(ee.rotate," 0 0)");return{outer:Be,inner:{transform:"".concat(ut," ").concat(Mt," ").concat(Ct)},path:{transform:"translate(".concat(de/2*-1," -256)")}}}var W1={x:0,y:0,width:"100%",height:"100%"};function Lr(G){var ee=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return G.attributes&&(G.attributes.fill||ee)&&(G.attributes.fill="black"),G}function V1(G){return"g"===G.tag?G.children:[G]}function In(G){var ee=G.icons,oe=ee.main,de=ee.mask,Be=G.prefix,ut=G.iconName,Mt=G.transform,Ct=G.symbol,$t=G.title,On=G.maskId,Bt=G.titleId,e1=G.extra,g1=G.watchable,Ur=void 0!==g1&&g1,d1=de.found?de:oe,Zr=d1.width,fr=d1.height,vi="fak"===Be,kr=vi?"":"fa-w-".concat(Math.ceil(Zr/fr*16)),cr=[Xt.replacementClass,ut?"".concat(Xt.familyPrefix,"-").concat(ut):"",kr].filter(function(N2){return-1===e1.classes.indexOf(N2)}).filter(function(N2){return""!==N2||!!N2}).concat(e1.classes).join(" "),ci={children:[],attributes:ue({},e1.attributes,{"data-prefix":Be,"data-icon":ut,class:cr,role:e1.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Zr," ").concat(fr)})},or=vi&&!~e1.classes.indexOf("fa-fw")?{width:"".concat(Zr/fr*16*.0625,"em")}:{};Ur&&(ci.attributes["data-fa-i2svg"]=""),$t&&ci.children.push({tag:"title",attributes:{id:ci.attributes["aria-labelledby"]||"title-".concat(Bt||O1())},children:[$t]});var xi=ue({},ci,{prefix:Be,iconName:ut,main:oe,mask:de,maskId:On,transform:Mt,symbol:Ct,styles:ue({},or,e1.styles)}),bo=de.found&&oe.found?function Pr(G){var ee=G.children,oe=G.attributes,de=G.main,Be=G.mask,ut=G.maskId,$t=de.icon,Bt=Be.icon,e1=Zt({transform:G.transform,containerWidth:Be.width,iconWidth:de.width}),g1={tag:"rect",attributes:ue({},W1,{fill:"white"})},Ur=$t.children?{children:$t.children.map(Lr)}:{},d1={tag:"g",attributes:ue({},e1.inner),children:[Lr(ue({tag:$t.tag,attributes:ue({},$t.attributes,e1.path)},Ur))]},Zr={tag:"g",attributes:ue({},e1.outer),children:[d1]},fr="mask-".concat(ut||O1()),vi="clip-".concat(ut||O1()),kr={tag:"mask",attributes:ue({},W1,{id:fr,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[g1,Zr]},cr={tag:"defs",children:[{tag:"clipPath",attributes:{id:vi},children:V1(Bt)},kr]};return ee.push(cr,{tag:"rect",attributes:ue({fill:"currentColor","clip-path":"url(#".concat(vi,")"),mask:"url(#".concat(fr,")")},W1)}),{children:ee,attributes:oe}}(xi):function m1(G){var ee=G.children,oe=G.attributes,de=G.main,Be=G.transform,Mt=Yn(G.styles);if(Mt.length>0&&(oe.style=Mt),Tt(Be)){var Ct=Zt({transform:Be,containerWidth:de.width,iconWidth:de.width});ee.push({tag:"g",attributes:ue({},Ct.outer),children:[{tag:"g",attributes:ue({},Ct.inner),children:[{tag:de.icon.tag,children:de.icon.children,attributes:ue({},de.icon.attributes,Ct.path)}]}]})}else ee.push(de.icon);return{children:ee,attributes:oe}}(xi),W2=bo.attributes;return xi.children=bo.children,xi.attributes=W2,Ct?function z1(G){var oe=G.iconName,de=G.children,ut=G.symbol;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ue({},G.attributes,{id:!0===ut?"".concat(G.prefix,"-").concat(Xt.familyPrefix,"-").concat(oe):ut}),children:de}]}]}(xi):function Ar(G){var ee=G.children,oe=G.main,de=G.mask,Be=G.attributes,ut=G.styles,Mt=G.transform;if(Tt(Mt)&&oe.found&&!de.found){var On={x:oe.width/oe.height/2,y:.5};Be.style=Yn(ue({},ut,{"transform-origin":"".concat(On.x+Mt.x/16,"em ").concat(On.y+Mt.y/16,"em")}))}return[{tag:"svg",attributes:Be,children:ee}]}(xi)}var Yr=function(ee,oe,de,Be){var $t,On,Bt,ut=Object.keys(ee),Mt=ut.length,Ct=void 0!==Be?function(ee,oe){return function(de,Be,ut,Mt){return ee.call(oe,de,Be,ut,Mt)}}(oe,Be):oe;for(void 0===de?($t=1,Bt=ee[ut[0]]):($t=0,Bt=de);$t<Mt;$t++)Bt=Ct(Bt,ee[On=ut[$t]],On,ee);return Bt};function er(G,ee){var oe=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},de=oe.skipHooks,Be=void 0!==de&&de,ut=Object.keys(ee).reduce(function(Mt,Ct){var $t=ee[Ct];return $t.icon?Mt[$t.iconName]=$t.icon:Mt[Ct]=$t,Mt},{});"function"!=typeof Kn.hooks.addPack||Be?Kn.styles[G]=ue({},Kn.styles[G]||{},ut):Kn.hooks.addPack(G,ut),"fas"===G&&er("fa",ee)}var Nr=Kn.styles,bi=Kn.shims,Ei=function(){var ee=function(Be){return Yr(Nr,function(ut,Mt,Ct){return ut[Ct]=Yr(Mt,Be,{}),ut},{})};ee(function(de,Be,ut){return Be[3]&&(de[Be[3]]=ut),de}),ee(function(de,Be,ut){var Mt=Be[2];return de[ut]=ut,Mt.forEach(function(Ct){de[Ct]=ut}),de});var oe="far"in Nr;Yr(bi,function(de,Be){var Mt=Be[1];return"far"===Mt&&!oe&&(Mt="fas"),de[Be[0]]={prefix:Mt,iconName:Be[2]},de},{})};function Ie(G,ee,oe){if(G&&G[ee]&&G[ee][oe])return{prefix:ee,iconName:oe,icon:G[ee][oe]}}function Ye(G){var ee=G.tag,oe=G.attributes,de=void 0===oe?{}:oe,Be=G.children,ut=void 0===Be?[]:Be;return"string"==typeof G?k1(G):"<".concat(ee," ").concat(function yr(G){return Object.keys(G||{}).reduce(function(ee,oe){return ee+"".concat(oe,'="').concat(k1(G[oe]),'" ')},"").trim()}(de),">").concat(ut.map(Ye).join(""),"</").concat(ee,">")}Ei();function K1(G){this.name="MissingIcon",this.message=G||"Icon unavailable",this.stack=(new Error).stack}(K1.prototype=Object.create(Error.prototype)).constructor=K1;var Ai={fill:"currentColor"},Dr={attributeType:"XML",repeatCount:"indefinite",dur:"2s"},ir=(ue({},Ai,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"}),ue({},Dr,{attributeName:"opacity"}));function bn(G){var ee=G[0],oe=G[1],ut=ve(G.slice(4),1)[0];return{found:!0,width:ee,height:oe,icon:Array.isArray(ut)?{tag:"g",attributes:{class:"".concat(Xt.familyPrefix,"-").concat(Wn.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Xt.familyPrefix,"-").concat(Wn.SECONDARY),fill:"currentColor",d:ut[0]}},{tag:"path",attributes:{class:"".concat(Xt.familyPrefix,"-").concat(Wn.PRIMARY),fill:"currentColor",d:ut[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:ut}}}}function Ln(){Xt.autoAddCss&&!Sr&&(function yn(G){if(G&&Pe){var ee=_t.createElement("style");ee.setAttribute("type","text/css"),ee.innerHTML=G;for(var oe=_t.head.childNodes,de=null,Be=oe.length-1;Be>-1;Be--){var ut=oe[Be],Mt=(ut.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(Mt)>-1&&(de=ut)}return _t.head.insertBefore(ee,de),G}}(function En(){var G="fa",ee=Vt,oe=Xt.familyPrefix,de=Xt.replacementClass,Be='svg:not(:root).svg-inline--fa {\n  overflow: visible;\n}\n\n.svg-inline--fa {\n  display: inline-block;\n  font-size: inherit;\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.225em;\n}\n.svg-inline--fa.fa-w-1 {\n  width: 0.0625em;\n}\n.svg-inline--fa.fa-w-2 {\n  width: 0.125em;\n}\n.svg-inline--fa.fa-w-3 {\n  width: 0.1875em;\n}\n.svg-inline--fa.fa-w-4 {\n  width: 0.25em;\n}\n.svg-inline--fa.fa-w-5 {\n  width: 0.3125em;\n}\n.svg-inline--fa.fa-w-6 {\n  width: 0.375em;\n}\n.svg-inline--fa.fa-w-7 {\n  width: 0.4375em;\n}\n.svg-inline--fa.fa-w-8 {\n  width: 0.5em;\n}\n.svg-inline--fa.fa-w-9 {\n  width: 0.5625em;\n}\n.svg-inline--fa.fa-w-10 {\n  width: 0.625em;\n}\n.svg-inline--fa.fa-w-11 {\n  width: 0.6875em;\n}\n.svg-inline--fa.fa-w-12 {\n  width: 0.75em;\n}\n.svg-inline--fa.fa-w-13 {\n  width: 0.8125em;\n}\n.svg-inline--fa.fa-w-14 {\n  width: 0.875em;\n}\n.svg-inline--fa.fa-w-15 {\n  width: 0.9375em;\n}\n.svg-inline--fa.fa-w-16 {\n  width: 1em;\n}\n.svg-inline--fa.fa-w-17 {\n  width: 1.0625em;\n}\n.svg-inline--fa.fa-w-18 {\n  width: 1.125em;\n}\n.svg-inline--fa.fa-w-19 {\n  width: 1.1875em;\n}\n.svg-inline--fa.fa-w-20 {\n  width: 1.25em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: 0.3em;\n  width: auto;\n}\n.svg-inline--fa.fa-border {\n  height: 1.5em;\n}\n.svg-inline--fa.fa-li {\n  width: 2em;\n}\n.svg-inline--fa.fa-fw {\n  width: 1.25em;\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: #ff253a;\n  border-radius: 1em;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  color: #fff;\n  height: 1.5em;\n  line-height: 1;\n  max-width: 5em;\n  min-width: 1.5em;\n  overflow: hidden;\n  padding: 0.25em;\n  right: 0;\n  text-overflow: ellipsis;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: 0;\n  right: 0;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: 0;\n  left: 0;\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  right: 0;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: 0;\n  right: auto;\n  top: 0;\n  -webkit-transform: scale(0.25);\n          transform: scale(0.25);\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-lg {\n  font-size: 1.3333333333em;\n  line-height: 0.75em;\n  vertical-align: -0.0667em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: 2.5em;\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: -2em;\n  position: absolute;\n  text-align: center;\n  width: 2em;\n  line-height: inherit;\n}\n\n.fa-border {\n  border: solid 0.08em #eee;\n  border-radius: 0.1em;\n  padding: 0.2em 0.25em 0.15em;\n}\n\n.fa-pull-left {\n  float: left;\n}\n\n.fa-pull-right {\n  float: right;\n}\n\n.fa.fa-pull-left,\n.fas.fa-pull-left,\n.far.fa-pull-left,\n.fal.fa-pull-left,\n.fab.fa-pull-left {\n  margin-right: 0.3em;\n}\n.fa.fa-pull-right,\n.fas.fa-pull-right,\n.far.fa-pull-right,\n.fal.fa-pull-right,\n.fab.fa-pull-right {\n  margin-left: 0.3em;\n}\n\n.fa-spin {\n  -webkit-animation: fa-spin 2s infinite linear;\n          animation: fa-spin 2s infinite linear;\n}\n\n.fa-pulse {\n  -webkit-animation: fa-spin 1s infinite steps(8);\n          animation: fa-spin 1s infinite steps(8);\n}\n\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {\n  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n:root .fa-rotate-90,\n:root .fa-rotate-180,\n:root .fa-rotate-270,\n:root .fa-flip-horizontal,\n:root .fa-flip-vertical,\n:root .fa-flip-both {\n  -webkit-filter: none;\n          filter: none;\n}\n\n.fa-stack {\n  display: inline-block;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: #fff;\n}\n\n.sr-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.sr-only-focusable:active, .sr-only-focusable:focus {\n  clip: auto;\n  height: auto;\n  margin: 0;\n  overflow: visible;\n  position: static;\n  width: auto;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: 0.4;\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: 1;\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse {\n  color: #fff;\n}';if(oe!==G||de!==ee){var ut=new RegExp("\\.".concat(G,"\\-"),"g"),Mt=new RegExp("\\--".concat(G,"\\-"),"g"),Ct=new RegExp("\\.".concat(ee),"g");Be=Be.replace(ut,".".concat(oe,"-")).replace(Mt,"--".concat(oe,"-")).replace(Ct,".".concat(de))}return Be}()),Sr=!0)}function $n(G,ee){return Object.defineProperty(G,"abstract",{get:ee}),Object.defineProperty(G,"html",{get:function(){return G.abstract.map(function(de){return Ye(de)})}}),Object.defineProperty(G,"node",{get:function(){if(Pe){var de=_t.createElement("div");return de.innerHTML=G.html,de.children}}}),G}function b1(G){var ee=G.prefix,oe=void 0===ee?"fa":ee,de=G.iconName;if(de)return Ie(L1.definitions,oe,de)||Ie(Kn.styles,oe,de)}ue({},Ai,{cx:"256",cy:"364",r:"28"}),ue({},Dr,{attributeName:"r",values:"28;14;28;28;14;28;"}),ue({},ir,{values:"1;0;1;1;0;1;"}),ue({},Ai,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),ue({},ir,{values:"1;0;0;0;0;1;"}),ue({},Ai,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),ue({},ir,{values:"0;0;1;1;0;0;"});var L1=new(function(){function G(){(function te(G,ee){if(!(G instanceof ee))throw new TypeError("Cannot call a class as a function")})(this,G),this.definitions={}}return function De(G,ee,oe){ee&&Le(G.prototype,ee),oe&&Le(G,oe)}(G,[{key:"add",value:function(){for(var oe=this,de=arguments.length,Be=new Array(de),ut=0;ut<de;ut++)Be[ut]=arguments[ut];var Mt=Be.reduce(this._pullDefinitions,{});Object.keys(Mt).forEach(function(Ct){oe.definitions[Ct]=ue({},oe.definitions[Ct]||{},Mt[Ct]),er(Ct,Mt[Ct]),Ei()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(oe,de){var Be=de.prefix&&de.iconName&&de.icon?{0:de}:de;return Object.keys(Be).map(function(ut){var Mt=Be[ut],Ct=Mt.prefix,$t=Mt.iconName,On=Mt.icon;oe[Ct]||(oe[Ct]={}),oe[Ct][$t]=On}),oe}}]),G}()),Sr=!1,gi_transform=function(ee){return function(ee){var oe={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return ee?ee.toLowerCase().split(" ").reduce(function(de,Be){var ut=Be.toLowerCase().split("-"),Mt=ut[0],Ct=ut.slice(1).join("-");if(Mt&&"h"===Ct)return de.flipX=!0,de;if(Mt&&"v"===Ct)return de.flipY=!0,de;if(Ct=parseFloat(Ct),isNaN(Ct))return de;switch(Mt){case"grow":de.size=de.size+Ct;break;case"shrink":de.size=de.size-Ct;break;case"left":de.x=de.x-Ct;break;case"right":de.x=de.x+Ct;break;case"up":de.y=de.y-Ct;break;case"down":de.y=de.y+Ct;break;case"rotate":de.rotate=de.rotate+Ct}return de},oe):oe}(ee)},G2=function S1(G){return function(ee){var oe=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},de=(ee||{}).icon?ee:b1(ee||{}),Be=oe.mask;return Be&&(Be=(Be||{}).icon?Be:b1(Be||{})),G(de,ue({},oe,{mask:Be}))}}(function(G){var ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},oe=ee.transform,de=void 0===oe?yt:oe,Be=ee.symbol,ut=void 0!==Be&&Be,Mt=ee.mask,Ct=void 0===Mt?null:Mt,$t=ee.maskId,On=void 0===$t?null:$t,Bt=ee.title,e1=void 0===Bt?null:Bt,g1=ee.titleId,Ur=void 0===g1?null:g1,d1=ee.classes,Zr=void 0===d1?[]:d1,fr=ee.attributes,vi=void 0===fr?{}:fr,kr=ee.styles,cr=void 0===kr?{}:kr;if(G){var ci=G.prefix,or=G.iconName,xi=G.icon;return $n(ue({type:"icon"},G),function(){return Ln(),Xt.autoA11y&&(e1?vi["aria-labelledby"]="".concat(Xt.replacementClass,"-title-").concat(Ur||O1()):(vi["aria-hidden"]="true",vi.focusable="false")),In({icons:{main:bn(xi),mask:Ct?bn(Ct.icon):{found:!1,width:null,height:null,icon:{}}},prefix:ci,iconName:or,transform:ue({},yt,de),symbol:ut,title:e1,maskId:On,titleId:Ur,extra:{attributes:vi,styles:cr,classes:Zr}})})}}),re=B(2313);const Ee=["*"],Bn=G=>{const ee={"fa-spin":G.spin,"fa-pulse":G.pulse,"fa-fw":G.fixedWidth,"fa-border":G.border,"fa-inverse":G.inverse,"fa-layers-counter":G.counter,"fa-flip-horizontal":"horizontal"===G.flip||"both"===G.flip,"fa-flip-vertical":"vertical"===G.flip||"both"===G.flip,[`fa-${G.size}`]:null!==G.size,[`fa-rotate-${G.rotate}`]:null!==G.rotate,[`fa-pull-${G.pull}`]:null!==G.pull,[`fa-stack-${G.stackItemSize}`]:null!=G.stackItemSize};return Object.keys(ee).map(oe=>ee[oe]?oe:null).filter(oe=>oe)};let Wr=(()=>{class G{constructor(){this.defaultPrefix="fas",this.fallbackIcon=null}}return G.\u0275fac=function(oe){return new(oe||G)},G.\u0275prov=y.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})(),Ui=(()=>{class G{constructor(){this.definitions={}}addIcons(...oe){for(const de of oe){de.prefix in this.definitions||(this.definitions[de.prefix]={}),this.definitions[de.prefix][de.iconName]=de;for(const Be of de.icon[2])"string"==typeof Be&&(this.definitions[de.prefix][Be]=de)}}addIconPacks(...oe){for(const de of oe){const Be=Object.keys(de).map(ut=>de[ut]);this.addIcons(...Be)}}getIconDefinition(oe,de){return oe in this.definitions&&de in this.definitions[oe]?this.definitions[oe][de]:null}}return G.\u0275fac=function(oe){return new(oe||G)},G.\u0275prov=y.Yz7({token:G,factory:G.\u0275fac,providedIn:"root"}),G})(),as=(()=>{class G{constructor(){this.stackItemSize="1x"}ngOnChanges(oe){if("size"in oe)throw new Error('fa-icon is not allowed to customize size when used inside fa-stack. Set size on the enclosing fa-stack instead: <fa-stack size="4x">...</fa-stack>.')}}return G.\u0275fac=function(oe){return new(oe||G)},G.\u0275dir=y.lG2({type:G,selectors:[["fa-icon","stackItemSize",""],["fa-duotone-icon","stackItemSize",""]],inputs:{stackItemSize:"stackItemSize",size:"size"},features:[y.TTD]}),G})(),Mo=(()=>{class G{constructor(oe,de){this.renderer=oe,this.elementRef=de}ngOnInit(){this.renderer.addClass(this.elementRef.nativeElement,"fa-stack")}ngOnChanges(oe){"size"in oe&&(null!=oe.size.currentValue&&this.renderer.addClass(this.elementRef.nativeElement,`fa-${oe.size.currentValue}`),null!=oe.size.previousValue&&this.renderer.removeClass(this.elementRef.nativeElement,`fa-${oe.size.previousValue}`))}}return G.\u0275fac=function(oe){return new(oe||G)(y.Y36(y.Qsj),y.Y36(y.SBq))},G.\u0275cmp=y.Xpm({type:G,selectors:[["fa-stack"]],inputs:{size:"size"},features:[y.TTD],ngContentSelectors:Ee,decls:1,vars:0,template:function(oe,de){1&oe&&(y.F$t(),y.Hsn(0))},encapsulation:2}),G})(),ps=(()=>{class G{constructor(oe,de,Be,ut,Mt){this.sanitizer=oe,this.config=de,this.iconLibrary=Be,this.stackItem=ut,this.classes=[],null!=Mt&&null==ut&&console.error('FontAwesome: fa-icon and fa-duotone-icon elements must specify stackItemSize attribute when wrapped into fa-stack. Example: <fa-icon stackItemSize="2x"></fa-icon>.')}ngOnChanges(oe){if(null==this.icon&&null==this.config.fallbackIcon)return(()=>{throw new Error("Property `icon` is required for `fa-icon`/`fa-duotone-icon` components.")})();let de=null;if(de=null==this.icon?this.config.fallbackIcon:this.icon,oe){const Be=this.findIconDefinition(de);if(null!=Be){const ut=this.buildParams();this.renderIcon(Be,ut)}}}render(){this.ngOnChanges({})}findIconDefinition(oe){const de=((G,ee)=>(G=>void 0!==G.prefix&&void 0!==G.iconName)(G)?G:Array.isArray(G)&&2===G.length?{prefix:G[0],iconName:G[1]}:"string"==typeof G?{prefix:ee,iconName:G}:void 0)(oe,this.config.defaultPrefix);if("icon"in de)return de;const Be=this.iconLibrary.getIconDefinition(de.prefix,de.iconName);return null!=Be?Be:((G=>{throw new Error(`Could not find icon with iconName=${G.iconName} and prefix=${G.prefix} in the icon library.`)})(de),null)}buildParams(){const oe={flip:this.flip,spin:this.spin,pulse:this.pulse,border:this.border,inverse:this.inverse,size:this.size||null,pull:this.pull||null,rotate:this.rotate||null,fixedWidth:"boolean"==typeof this.fixedWidth?this.fixedWidth:this.config.fixedWidth,stackItemSize:null!=this.stackItem?this.stackItem.stackItemSize:null},de="string"==typeof this.transform?gi_transform(this.transform):this.transform;return{title:this.title,transform:de,classes:[...Bn(oe),...this.classes],mask:null!=this.mask?this.findIconDefinition(this.mask):null,styles:null!=this.styles?this.styles:{},symbol:this.symbol,attributes:{role:this.a11yRole}}}renderIcon(oe,de){const Be=G2(oe,de);this.renderedIconHTML=this.sanitizer.bypassSecurityTrustHtml(Be.html.join("\n"))}}return G.\u0275fac=function(oe){return new(oe||G)(y.Y36(re.H7),y.Y36(Wr),y.Y36(Ui),y.Y36(as,8),y.Y36(Mo,8))},G.\u0275cmp=y.Xpm({type:G,selectors:[["fa-icon"]],hostAttrs:[1,"ng-fa-icon"],hostVars:2,hostBindings:function(oe,de){2&oe&&(y.Ikx("innerHTML",de.renderedIconHTML,y.oJD),y.uIk("title",de.title))},inputs:{icon:"icon",title:"title",spin:"spin",pulse:"pulse",mask:"mask",styles:"styles",flip:"flip",size:"size",pull:"pull",border:"border",inverse:"inverse",symbol:"symbol",rotate:"rotate",fixedWidth:"fixedWidth",classes:"classes",transform:"transform",a11yRole:"a11yRole"},features:[y.TTD],decls:0,vars:0,template:function(oe,de){},encapsulation:2}),G})(),Yi=(()=>{class G{}return G.\u0275fac=function(oe){return new(oe||G)},G.\u0275mod=y.oAB({type:G}),G.\u0275inj=y.cJS({}),G})()},8766:(jt,We,B)=>{B.d(We,{Lj:()=>ft,X3:()=>kt});var y=B(5861);let te,Le;const ue=new WeakMap,ve=new WeakMap,ze=new WeakMap,_e=new WeakMap,pe=new WeakMap;let ht={get(le,ot,me){if(le instanceof IDBTransaction){if("done"===ot)return ve.get(le);if("objectStoreNames"===ot)return le.objectStoreNames||ze.get(le);if("store"===ot)return me.objectStoreNames[1]?void 0:me.objectStore(me.objectStoreNames[0])}return dt(le[ot])},set:(le,ot,me)=>(le[ot]=me,!0),has:(le,ot)=>le instanceof IDBTransaction&&("done"===ot||"store"===ot)||ot in le};function tt(le){return"function"==typeof le?function zt(le){return le!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ae(){return Le||(Le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(le)?function(...ot){return le.apply(Oe(this),ot),dt(ue.get(this))}:function(...ot){return dt(le.apply(Oe(this),ot))}:function(ot,...me){const Pe=le.call(Oe(this),ot,...me);return ze.set(Pe,ot.sort?ot.sort():[ot]),dt(Pe)}}(le):(le instanceof IDBTransaction&&function Nt(le){if(ve.has(le))return;const ot=new Promise((me,Pe)=>{const Ue=()=>{le.removeEventListener("complete",Ze),le.removeEventListener("error",Ke),le.removeEventListener("abort",Ke)},Ze=()=>{me(),Ue()},Ke=()=>{Pe(le.error||new DOMException("AbortError","AbortError")),Ue()};le.addEventListener("complete",Ze),le.addEventListener("error",Ke),le.addEventListener("abort",Ke)});ve.set(le,ot)}(le),((le,ot)=>ot.some(me=>le instanceof me))(le,function De(){return te||(te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(le,ht):le)}function dt(le){if(le instanceof IDBRequest)return function je(le){const ot=new Promise((me,Pe)=>{const Ue=()=>{le.removeEventListener("success",Ze),le.removeEventListener("error",Ke)},Ze=()=>{me(dt(le.result)),Ue()},Ke=()=>{Pe(le.error),Ue()};le.addEventListener("success",Ze),le.addEventListener("error",Ke)});return ot.then(me=>{me instanceof IDBCursor&&ue.set(me,le)}).catch(()=>{}),pe.set(ot,le),ot}(le);if(_e.has(le))return _e.get(le);const ot=tt(le);return ot!==le&&(_e.set(le,ot),pe.set(ot,le)),ot}const Oe=le=>pe.get(le);function kt(le,ot,{blocked:me,upgrade:Pe,blocking:Ue,terminated:Ze}={}){const Ke=indexedDB.open(le,ot),Et=dt(Ke);return Pe&&Ke.addEventListener("upgradeneeded",Vt=>{Pe(dt(Ke.result),Vt.oldVersion,Vt.newVersion,dt(Ke.transaction))}),me&&Ke.addEventListener("blocked",()=>me()),Et.then(Vt=>{Ze&&Vt.addEventListener("close",()=>Ze()),Ue&&Vt.addEventListener("versionchange",()=>Ue())}).catch(()=>{}),Et}function ft(le,{blocked:ot}={}){const me=indexedDB.deleteDatabase(le);return ot&&me.addEventListener("blocked",()=>ot()),dt(me).then(()=>{})}const nt=["get","getKey","getAll","getAllKeys","count"],qe=["put","add","delete","clear"],et=new Map;function _t(le,ot){if(!(le instanceof IDBDatabase)||ot in le||"string"!=typeof ot)return;if(et.get(ot))return et.get(ot);const me=ot.replace(/FromIndex$/,""),Pe=ot!==me,Ue=qe.includes(me);if(!(me in(Pe?IDBIndex:IDBObjectStore).prototype)||!Ue&&!nt.includes(me))return;const Ze=function(){var Ke=(0,y.Z)(function*(Et,...Vt){const Yt=this.transaction(Et,Ue?"readwrite":"readonly");let Qt=Yt.store;return Pe&&(Qt=Qt.index(Vt.shift())),(yield Promise.all([Qt[me](...Vt),Ue&&Yt.done]))[0]});return function(Vt){return Ke.apply(this,arguments)}}();return et.set(ot,Ze),Ze}!function vt(le){ht=le(ht)}(le=>jf(Bf({},le),{get:(ot,me,Pe)=>_t(ot,me)||le.get(ot,me,Pe),has:(ot,me)=>!!_t(ot,me)||le.has(ot,me)}))},5861:(jt,We,B)=>{function y(te,Le,De,Ae,ue,ve,ze){try{var _e=te[ve](ze),pe=_e.value}catch(je){return void De(je)}_e.done?Le(pe):Promise.resolve(pe).then(Ae,ue)}function D(te){return function(){var Le=this,De=arguments;return new Promise(function(Ae,ue){var ve=te.apply(Le,De);function ze(pe){y(ve,Ae,ue,ze,_e,"next",pe)}function _e(pe){y(ve,Ae,ue,ze,_e,"throw",pe)}ze(void 0)})}}B.d(We,{Z:()=>D})}},jt=>{jt(jt.s=3674)}]);